webpackJsonp([0],[function(e,t,r){"use strict";t.__esModule=!0;t.VERSION="4.5.3",t.PI_2=2*Math.PI,t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,t.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},t.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},t.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},t.SCALE_MODES={LINEAR:0,NEAREST:1},t.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},t.GC_MODES={AUTO:0,MANUAL:1},t.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,t.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},t.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},t.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},t.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},t.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(e,t,r){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.autoDetectRenderer=t.Application=t.Filter=t.SpriteMaskFilter=t.Quad=t.RenderTarget=t.ObjectRenderer=t.WebGLManager=t.Shader=t.CanvasRenderTarget=t.TextureUvs=t.VideoBaseTexture=t.BaseRenderTexture=t.RenderTexture=t.BaseTexture=t.Texture=t.Spritesheet=t.CanvasGraphicsRenderer=t.GraphicsRenderer=t.GraphicsData=t.Graphics=t.TextMetrics=t.TextStyle=t.Text=t.SpriteRenderer=t.CanvasTinter=t.CanvasSpriteRenderer=t.Sprite=t.TransformBase=t.TransformStatic=t.Transform=t.Container=t.DisplayObject=t.Bounds=t.glCore=t.WebGLRenderer=t.CanvasRenderer=t.ticker=t.utils=t.settings=void 0;var i=r(0);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var n=r(5);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(9);Object.defineProperty(t,"glCore",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(72);Object.defineProperty(t,"Bounds",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(140);Object.defineProperty(t,"DisplayObject",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}});var u=r(33);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return _interopRequireDefault(u).default}});var l=r(141);Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return _interopRequireDefault(l).default}});var c=r(142);Object.defineProperty(t,"TransformStatic",{enumerable:!0,get:function(){return _interopRequireDefault(c).default}});var h=r(73);Object.defineProperty(t,"TransformBase",{enumerable:!0,get:function(){return _interopRequireDefault(h).default}});var d=r(77);Object.defineProperty(t,"Sprite",{enumerable:!0,get:function(){return _interopRequireDefault(d).default}});var f=r(326);Object.defineProperty(t,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(f).default}});var p=r(78);Object.defineProperty(t,"CanvasTinter",{enumerable:!0,get:function(){return _interopRequireDefault(p).default}});var m=r(328);Object.defineProperty(t,"SpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(m).default}});var g=r(330);Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return _interopRequireDefault(g).default}});var y=r(153);Object.defineProperty(t,"TextStyle",{enumerable:!0,get:function(){return _interopRequireDefault(y).default}});var v=r(152);Object.defineProperty(t,"TextMetrics",{enumerable:!0,get:function(){return _interopRequireDefault(v).default}});var b=r(298);Object.defineProperty(t,"Graphics",{enumerable:!0,get:function(){return _interopRequireDefault(b).default}});var x=r(143);Object.defineProperty(t,"GraphicsData",{enumerable:!0,get:function(){return _interopRequireDefault(x).default}});var M=r(301);Object.defineProperty(t,"GraphicsRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(M).default}});var w=r(299);Object.defineProperty(t,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(w).default}});var E=r(331);Object.defineProperty(t,"Spritesheet",{enumerable:!0,get:function(){return _interopRequireDefault(E).default}});var _=r(19);Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return _interopRequireDefault(_).default}});var T=r(24);Object.defineProperty(t,"BaseTexture",{enumerable:!0,get:function(){return _interopRequireDefault(T).default}});var A=r(79);Object.defineProperty(t,"RenderTexture",{enumerable:!0,get:function(){return _interopRequireDefault(A).default}});var S=r(154);Object.defineProperty(t,"BaseRenderTexture",{enumerable:!0,get:function(){return _interopRequireDefault(S).default}});var C=r(156);Object.defineProperty(t,"VideoBaseTexture",{enumerable:!0,get:function(){return _interopRequireDefault(C).default}});var L=r(155);Object.defineProperty(t,"TextureUvs",{enumerable:!0,get:function(){return _interopRequireDefault(L).default}});var D=r(147);Object.defineProperty(t,"CanvasRenderTarget",{enumerable:!0,get:function(){return _interopRequireDefault(D).default}});var I=r(32);Object.defineProperty(t,"Shader",{enumerable:!0,get:function(){return _interopRequireDefault(I).default}});var N=r(35);Object.defineProperty(t,"WebGLManager",{enumerable:!0,get:function(){return _interopRequireDefault(N).default}});var O=r(46);Object.defineProperty(t,"ObjectRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(O).default}});var R=r(47);Object.defineProperty(t,"RenderTarget",{enumerable:!0,get:function(){return _interopRequireDefault(R).default}});var j=r(151);Object.defineProperty(t,"Quad",{enumerable:!0,get:function(){return _interopRequireDefault(j).default}});var P=r(150);Object.defineProperty(t,"SpriteMaskFilter",{enumerable:!0,get:function(){return _interopRequireDefault(P).default}});var k=r(149);Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return _interopRequireDefault(k).default}});var B=r(138);Object.defineProperty(t,"Application",{enumerable:!0,get:function(){return _interopRequireDefault(B).default}});var z=r(139);Object.defineProperty(t,"autoDetectRenderer",{enumerable:!0,get:function(){return z.autoDetectRenderer}});var U=r(2),F=_interopRequireWildcard(U),G=r(80),V=_interopRequireWildcard(G),H=r(4),W=_interopRequireDefault(H),Y=r(34),Q=_interopRequireDefault(Y),q=r(45),X=_interopRequireDefault(q);t.settings=W.default,t.utils=F,t.ticker=V,t.CanvasRenderer=Q.default,t.WebGLRenderer=X.default},function(e,t,r){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function uid(){return++v}function hex2rgb(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function hex2string(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)}function rgb2hex(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)}function getResolutionOfUrl(e,t){var r=o.default.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):void 0!==t?t:1}function decomposeDataUri(e){var t=i.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]}}function getUrlFileExtension(e){var t=i.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase()}function getSvgSize(e){var t=i.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}function skipHello(){b=!0}function sayHello(e){if(!b){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c Pixi.js "+i.VERSION+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("Pixi.js "+i.VERSION+" - "+e+" - http://www.pixijs.com/");b=!0}}function isWebGLSupported(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),i=!(!r||!r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()}return r=null,i}catch(e){return!1}}function sign(e){return 0===e?0:e<0?-1:1}function destroyTextureCache(){var e=void 0;for(e in x)x[e].destroy();for(e in M)M[e].destroy()}function clearTextureCache(){var e=void 0;for(e in x)delete x[e];for(e in M)delete M[e]}function correctBlendMode(e,t){return w[t?1:0][e]}function premultiplyTint(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var r=e>>16&255,i=e>>8&255,n=255&e;return r=r*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(255*t<<24)+(r<<16)+(i<<8)+n}function premultiplyRgba(e,t,r,i){return r=r||new Float32Array(4),i||void 0===i?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function premultiplyTintToRgba(e,t,r,i){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(i||void 0===i)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}t.__esModule=!0,t.premultiplyBlendMode=t.BaseTextureCache=t.TextureCache=t.mixins=t.pluginTarget=t.EventEmitter=t.removeItems=t.isMobile=void 0,t.uid=uid,t.hex2rgb=hex2rgb,t.hex2string=hex2string,t.rgb2hex=rgb2hex,t.getResolutionOfUrl=getResolutionOfUrl,t.decomposeDataUri=decomposeDataUri,t.getUrlFileExtension=getUrlFileExtension,t.getSvgSize=getSvgSize,t.skipHello=skipHello,t.sayHello=sayHello,t.isWebGLSupported=isWebGLSupported,t.sign=sign,t.destroyTextureCache=destroyTextureCache,t.clearTextureCache=clearTextureCache,t.correctBlendMode=correctBlendMode,t.premultiplyTint=premultiplyTint,t.premultiplyRgba=premultiplyRgba,t.premultiplyTintToRgba=premultiplyTintToRgba;var i=r(0),n=r(4),o=_interopRequireDefault(n),a=r(18),s=_interopRequireDefault(a),u=r(339),l=_interopRequireDefault(u),c=r(338),h=_interopRequireWildcard(c),d=r(68),f=_interopRequireWildcard(d),p=r(384),m=_interopRequireDefault(p),g=r(336),y=_interopRequireDefault(g),v=0,b=!1;t.isMobile=f,t.removeItems=m.default,t.EventEmitter=s.default,t.pluginTarget=l.default,t.mixins=h;var x=t.TextureCache=Object.create(null),M=t.BaseTextureCache=Object.create(null),w=t.premultiplyBlendMode=(0,y.default)()},function(e,t,r){"use strict";function string2binary(e){var t=null;return t=i.uint8array?new Uint8Array(e.length):new Array(e.length),stringToArrayLike(e,t)}function identity(e){return e}function stringToArrayLike(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}function arrayLikeToString(e){var r=65536,i=t.getTypeOf(e),n=!0;if("uint8array"===i?n=u.applyCanBeUsed.uint8array:"nodebuffer"===i&&(n=u.applyCanBeUsed.nodebuffer),n)for(;r>1;)try{return u.stringifyByChunk(e,i,r)}catch(e){r=Math.floor(r/2)}return u.stringifyByChar(e)}function arrayLikeToArrayLike(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}var i=r(15),n=r(113),o=r(43),a=r(179),s=r(31);t.newBlob=function(e,r){t.checkSupport("blob");try{return new Blob(e,{type:r})}catch(t){try{for(var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,n=new i,o=0;o<e.length;o++)n.append(e[o]);return n.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,r){var i=[],n=0,o=e.length;if(o<=r)return String.fromCharCode.apply(null,e);for(;n<o;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+r,o)))):i.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+r,o)))),n+=r;return i.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.newBuffer(1)).length}catch(e){return!1}}()}};t.applyFromCharCode=arrayLikeToString;var l={};l.string={string:identity,array:function(e){return stringToArrayLike(e,new Array(e.length))},arraybuffer:function(e){return l.string.uint8array(e).buffer},uint8array:function(e){return stringToArrayLike(e,new Uint8Array(e.length))},nodebuffer:function(e){return stringToArrayLike(e,o.newBuffer(e.length))}},l.array={string:arrayLikeToString,array:identity,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBuffer(e)}},l.arraybuffer={string:function(e){return arrayLikeToString(new Uint8Array(e))},array:function(e){return arrayLikeToArrayLike(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:identity,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBuffer(new Uint8Array(e))}},l.uint8array={string:arrayLikeToString,array:function(e){return arrayLikeToArrayLike(e,new Array(e.length))},arraybuffer:function(e){var t=new Uint8Array(e.length);return e.length&&t.set(e,0),t.buffer},uint8array:identity,nodebuffer:function(e){return o.newBuffer(e)}},l.nodebuffer={string:arrayLikeToString,array:function(e){return arrayLikeToArrayLike(e,new Array(e.length))},arraybuffer:function(e){return l.nodebuffer.uint8array(e).buffer},uint8array:function(e){return arrayLikeToArrayLike(e,new Uint8Array(e.length))},nodebuffer:identity},t.transformTo=function(e,r){if(r||(r=""),!e)return r;t.checkSupport(e);var i=t.getTypeOf(r);return l[i][e](r)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":i.nodebuffer&&o.isBuffer(e)?"nodebuffer":i.uint8array&&e instanceof Uint8Array?"uint8array":i.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!i[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,r,i="";for(r=0;r<(e||"").length;r++)t=e.charCodeAt(r),i+="\\x"+(t<16?"0":"")+t.toString(16).toUpperCase();return i},t.delay=function(e,t,r){a(function(){e.apply(r||null,t||[])})},t.inherits=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r},t.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},t.prepareContent=function(e,r,o,a,u){return s.Promise.resolve(r).then(function(e){return i.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise(function(t,r){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){r(e.target.error)},i.readAsArrayBuffer(e)}):e}).then(function(r){var i=t.getTypeOf(r);return i?("arraybuffer"===i?r=t.transformTo("uint8array",r):"string"===i&&(u?r=n.decode(r):o&&!0!==a&&(r=string2binary(r))),r):s.Promise.reject(new Error("The data of '"+e+"' is in an unsupported format !"))})}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(337),n=_interopRequireDefault(i),o=r(334),a=_interopRequireDefault(o);t.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,n.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)()}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(75);Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(145);Object.defineProperty(t,"ObservablePoint",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var o=r(74);Object.defineProperty(t,"Matrix",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(144);Object.defineProperty(t,"GroupD8",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(308);Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}});var u=r(309);Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return _interopRequireDefault(u).default}});var l=r(310);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return _interopRequireDefault(l).default}});var c=r(76);Object.defineProperty(t,"Rectangle",{enumerable:!0,get:function(){return _interopRequireDefault(c).default}});var h=r(311);Object.defineProperty(t,"RoundedRectangle",{enumerable:!0,get:function(){return _interopRequireDefault(h).default}})},,function(e,t){e.exports=function(e,t,r,i,n){var o,a=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(o=e,a=e.default);var u="function"==typeof a?a.options:a;t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns),i&&(u._scopeId=i);var l;if(n?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},u._ssrRegister=l):r&&(l=r),l){var c=u.functional,h=c?u.render:u.beforeCreate;c?u.render=function(e,t){return l.call(t),h(e,t)}:u.beforeCreate=h?[].concat(h,l):[l]}return{esModule:o,exports:a,options:u}}},function(e,t,r){"use strict";function GenericWorker(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}GenericWorker.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=GenericWorker},function(e,t,r){var i={createContext:r(294),setVertexAttribArrays:r(129),GLBuffer:r(290),GLFramebuffer:r(291),GLShader:r(292),GLTexture:r(128),VertexArrayObject:r(293),shader:r(295)};void 0!==e&&e.exports&&(e.exports=i),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=i)},,function(e,t,r){(function(e){function normalizeArray(e,t){for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function filter(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var n=i>=0?arguments[i]:e.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,r="/"===n.charAt(0))}return t=normalizeArray(filter(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),i="/"===n(e,-1);return e=normalizeArray(filter(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&i&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(filter(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function trim(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=trim(e.split("/")),n=trim(r.split("/")),o=Math.min(i.length,n.length),a=o,s=0;s<o;s++)if(i[s]!==n[s]){a=s;break}for(var u=[],s=a;s<i.length;s++)u.push("..");return u=u.concat(n.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},t.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return i(e)[3]};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(t,r(22))},,function(e,t,r){"use strict";(function(e){function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=Buffer.prototype):(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,r)}function from(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,i):"string"==typeof t?fromString(e,t,r):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r,i){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof i?createBuffer(e,t).fill(r,i):createBuffer(e,t).fill(r):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromString(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|byteLength(t,r);e=createBuffer(e,i);var n=e.write(t,r);return n!==i&&(e=e.slice(0,n)),e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function fromArrayBuffer(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),Buffer.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=Buffer.prototype):e=fromArrayLike(e,t),e}function fromObject(e,t){if(Buffer.isBuffer(t)){var r=0|checked(t.length);return e=createBuffer(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&o(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}function slowToString(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function swap(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function bidirectionalIndexOf(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,i)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,i,n);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,i,n){function read(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,a=e.length,s=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,s/=2,r/=2}var u;if(n){var l=-1;for(u=r;u<a;u++)if(read(e,u)===read(t,-1===l?0:u-l)){if(-1===l&&(l=u),u-l+1===s)return l*o}else-1!==l&&(u-=u-l),l=-1}else for(r+s>a&&(r=a-s),u=r;u>=0;u--){for(var c=!0,h=0;h<s;h++)if(read(e,u+h)!==read(t,h)){c=!1;break}if(c)return u}return-1}function hexWrite(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function utf8Write(e,t,r,i){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,i)}function asciiWrite(e,t,r,i){return blitBuffer(asciiToBytes(t),e,r,i)}function latin1Write(e,t,r,i){return asciiWrite(e,t,r,i)}function base64Write(e,t,r,i){return blitBuffer(base64ToBytes(t),e,r,i)}function ucs2Write(e,t,r,i){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,i)}function base64Slice(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o=e[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s<=r){var u,l,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[n+1],128==(192&u)&&(h=(31&o)<<6|63&u)>127&&(a=h);break;case 3:u=e[n+1],l=e[n+2],128==(192&u)&&128==(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l)>2047&&(h<55296||h>57343)&&(a=h);break;case 4:u=e[n+1],l=e[n+2],c=e[n+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&h<1114112&&(a=h)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),n+=s}return decodeCodePointsArray(i)}function decodeCodePointsArray(e){var t=e.length;if(t<=a)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=a));return r}function asciiSlice(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function latin1Slice(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function hexSlice(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=toHex(e[o]);return n}function utf16leSlice(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,i,n,o){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-r,2);n<o;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function objectWriteUInt32(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-r,4);n<o;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function checkIEEE754(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,i,o){return o||checkIEEE754(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),n.write(e,t,r,i,23,4),r+4}function writeDouble(e,t,r,i,o){return o||checkIEEE754(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),n.write(e,t,r,i,52,8),r+8}function base64clean(e){if(e=stringtrim(e).replace(s,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var r,i=e.length,n=null,o=[],a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,i,n,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),i=r>>8,n=r%256,o.push(n),o.push(i);return o}function base64ToBytes(e){return i.toByteArray(base64clean(e))}function blitBuffer(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function isnan(e){return e!==e}var i=r(177),n=r(231),o=r(99);t.Buffer=Buffer,t.SlowBuffer=SlowBuffer,t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return from(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,r){return alloc(null,e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function(e){return!(null==e||!e._isBuffer)},Buffer.compare=function(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=Buffer.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var a=e[r];if(!Buffer.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,n),n+=a.length}return i},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,r,i,n){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var o=n-i,a=r-t,s=Math.min(o,a),u=this.slice(i,n),l=e.slice(t,r),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a=4096;Buffer.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i;if(Buffer.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=Buffer.prototype;else{var n=t-e;i=new Buffer(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+e]}return i},Buffer.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},Buffer.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},Buffer.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},Buffer.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),n.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),n.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),n.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),n.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t|=0,r|=0,!i){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},Buffer.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t|=0,r|=0,!i){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);checkInt(this,e,t,r,n-1,-n)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);checkInt(this,e,t,r,n-1,-n)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,o=i-r;if(this===e&&r<t&&t<i)for(n=o-1;n>=0;--n)e[n+t]=this[n+r];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},Buffer.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,i).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var s=/[^+\/0-9A-Za-z-_]/g}).call(t,r(12))},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==(void 0===r?"undefined":i(r)))throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)return void e.set(t.subarray(r,r+i),n);for(var o=0;o<i;o++)e[n+o]=t[r+o]},flattenChunks:function(e){var t,r,i,n,o,a;for(i=0,t=0,r=e.length;t<r;t++)i+=e[t].length;for(a=new Uint8Array(i),n=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,n),n+=o.length;return a}},a={arraySet:function(e,t,r,i,n){for(var o=0;o<i;o++)e[n+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(n)},function(e,t,r){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var i=new ArrayBuffer(0);try{t.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new n;o.append(i),t.blob=0===o.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!r(116).Readable}catch(e){t.nodestream=!1}}).call(t,r(13).Buffer)},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||n(onEndNT,this)}function onEndNT(e){e.end()}var i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=Duplex;var n=r(63),o=r(30);o.inherits=r(16);var a=r(105),s=r(64);o.inherits(Duplex,a);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];Duplex.prototype[c]||(Duplex.prototype[c]=s.prototype[c])}},function(e,t,r){"use strict";function Events(){}function EE(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function EventEmitter(){this._events=new Events,this._eventsCount=0}var i=Object.prototype.hasOwnProperty,n="~";Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(n=!1)),EventEmitter.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)i.call(e,t)&&r.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},EventEmitter.prototype.listeners=function(e,t){var r=n?n+e:e,i=this._events[r];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,a=i.length,s=new Array(a);o<a;o++)s[o]=i[o].fn;return s},EventEmitter.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},EventEmitter.prototype.on=function(e,t,r){var i=new EE(t,r||this),o=n?n+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},EventEmitter.prototype.once=function(e,t,r){var i=new EE(t,r||this,!0),o=n?n+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},EventEmitter.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new Events:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||(0==--this._eventsCount?this._events=new Events:delete this._events[o]);else{for(var s=0,u=[],l=a.length;s<l;s++)(a[s].fn!==t||i&&!a[s].once||r&&a[s].context!==r)&&u.push(a[s]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new Events:delete this._events[o]}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new Events:delete this._events[t])):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=n,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function removeAllHandlers(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(24),a=_interopRequireDefault(o),s=r(156),u=_interopRequireDefault(s),l=r(155),c=_interopRequireDefault(l),h=r(18),d=_interopRequireDefault(h),f=r(5),p=r(2),m=r(4),g=_interopRequireDefault(m),y=function(e){function Texture(t,r,i,n,o){_classCallCheck(this,Texture);var a=_possibleConstructorReturn(this,e.call(this));if(a.noFrame=!1,r||(a.noFrame=!0,r=new f.Rectangle(0,0,1,1)),t instanceof Texture&&(t=t.baseTexture),a.baseTexture=t,a._frame=r,a.trim=n,a.valid=!1,a.requiresUpdate=!1,a._uvs=null,a.orig=i||r,a._rotate=Number(o||0),!0===o)a._rotate=2;else if(a._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return t.hasLoaded?(a.noFrame&&(r=new f.Rectangle(0,0,t.width,t.height),t.on("update",a.onBaseTextureUpdated,a)),a.frame=r):t.once("loaded",a.onBaseTextureLoaded,a),a._updateID=0,a.transform=null,a.textureCacheIds=[],a}return _inherits(Texture,e),Texture.prototype.update=function(){this.baseTexture.update()},Texture.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new f.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},Texture.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},Texture.prototype.destroy=function(e){this.baseTexture&&(e&&(p.TextureCache[this.baseTexture.imageUrl]&&Texture.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null},Texture.prototype.clone=function(){return new Texture(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new c.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture.fromImage=function(e,t,r,i){var n=p.TextureCache[e];return n||(n=new Texture(a.default.fromImage(e,t,r,i)),Texture.addToCache(n,e)),n},Texture.fromFrame=function(e){var t=p.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},Texture.fromCanvas=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new Texture(a.default.fromCanvas(e,t,r))},Texture.fromVideo=function(e,t){return"string"==typeof e?Texture.fromVideoUrl(e,t):new Texture(u.default.fromVideo(e,t))},Texture.fromVideoUrl=function(e,t){return new Texture(u.default.fromUrl(e,t))},Texture.from=function(e){if("string"==typeof e){var t=p.TextureCache[e];if(!t){return null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?Texture.fromVideoUrl(e):Texture.fromImage(e)}return t}return e instanceof HTMLImageElement?new Texture(a.default.from(e)):e instanceof HTMLCanvasElement?Texture.fromCanvas(e,g.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?Texture.fromVideo(e):e instanceof a.default?new Texture(e):e},Texture.fromLoader=function(e,t,r){var i=new a.default(e,void 0,(0,p.getResolutionOfUrl)(t)),n=new Texture(i);return i.imageUrl=t,r||(r=t),a.default.addToCache(n.baseTexture,r),Texture.addToCache(n,r),r!==t&&(a.default.addToCache(n.baseTexture,t),Texture.addToCache(n,t)),n},Texture.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),p.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),p.TextureCache[t]=e)},Texture.removeFromCache=function(e){if("string"==typeof e){var t=p.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete p.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)delete p.TextureCache[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},n(Texture,[{key:"frame",get:function(){return this._frame},set:function(e){if(this._frame=e,this.noFrame=!1,e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+e.x+" + "+e.width+" > "+this.baseTexture.width+" Y: "+e.y+" + "+e.height+" > "+this.baseTexture.height);this.valid=e&&e.width&&e.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),Texture}(d.default);t.default=y,y.EMPTY=new y(new a.default),removeAllHandlers(y.EMPTY),removeAllHandlers(y.EMPTY.baseTexture),y.WHITE=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new y(new a.default(e))}(),removeAllHandlers(y.WHITE),removeAllHandlers(y.WHITE.baseTexture)},,,function(e,t){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(i===clearTimeout)return clearTimeout(e);if((i===defaultClearTimeout||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}function cleanUpNextTick(){s&&o&&(s=!1,o.length?a=o.concat(a):u=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(o=a,a=[];++u<t;)o&&o[u].run();u=-1,t=a.length}o=null,s=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var r,i,n=e.exports={};!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){i=defaultClearTimeout}}();var o,a=[],s=!1,u=-1;n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=noop,n.addListener=noop,n.once=noop,n.off=noop,n.removeListener=noop,n.removeAllListeners=noop,n.emit=noop,n.prependListener=noop,n.prependOnceListener=noop,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){"use strict";function Utf8DecodeWorker(){a.call(this,"utf-8 decode"),this.leftOver=null}function Utf8EncodeWorker(){a.call(this,"utf-8 encode")}for(var i=r(3),n=r(15),o=r(43),a=r(8),s=new Array(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;s[254]=s[254]=1;var l=function(e){var t,r,i,o,a,s=e.length,u=0;for(o=0;o<s;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=n.uint8array?new Uint8Array(u):new Array(u),a=0,o=0;a<u;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},c=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+s[e[r]]>t?r:t},h=function(e){var t,r,n,o,a=e.length,u=new Array(2*a);for(r=0,t=0;t<a;)if((n=e[t++])<128)u[r++]=n;else if((o=s[n])>4)u[r++]=65533,t+=o-1;else{for(n&=2===o?31:3===o?15:7;o>1&&t<a;)n=n<<6|63&e[t++],o--;o>1?u[r++]=65533:n<65536?u[r++]=n:(n-=65536,u[r++]=55296|n>>10&1023,u[r++]=56320|1023&n)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),i.applyFromCharCode(u)};t.utf8encode=function(e){return n.nodebuffer?o.newBuffer(e,"utf-8"):l(e)},t.utf8decode=function(e){return n.nodebuffer?i.transformTo("nodebuffer",e).toString("utf-8"):(e=i.transformTo(n.uint8array?"uint8array":"array",e),h(e))},i.inherits(Utf8DecodeWorker,a),Utf8DecodeWorker.prototype.processChunk=function(e){var r=i.transformTo(n.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var o=r;r=new Uint8Array(o.length+this.leftOver.length),r.set(this.leftOver,0),r.set(o,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var a=c(r),s=r;a!==r.length&&(n.uint8array?(s=r.subarray(0,a),this.leftOver=r.subarray(a,r.length)):(s=r.slice(0,a),this.leftOver=r.slice(a,r.length))),this.push({data:t.utf8decode(s),meta:e.meta})},Utf8DecodeWorker.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=Utf8DecodeWorker,i.inherits(Utf8EncodeWorker,a),Utf8EncodeWorker.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=Utf8EncodeWorker},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(2),o=r(4),a=_interopRequireDefault(o),s=r(18),u=_interopRequireDefault(s),l=r(335),c=_interopRequireDefault(l),h=r(67),d=_interopRequireDefault(h),f=function(e){function BaseTexture(t,r,i){_classCallCheck(this,BaseTexture);var o=_possibleConstructorReturn(this,e.call(this));return o.uid=(0,n.uid)(),o.touched=0,o.resolution=i||a.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=void 0!==r?r:a.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=a.default.MIPMAP_TEXTURES,o.wrapMode=a.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],t&&o.loadSource(t),o}return _inherits(BaseTexture,e),BaseTexture.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},BaseTexture.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=d.default.isPow2(this.realWidth)&&d.default.isPow2(this.realHeight)},BaseTexture.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var i=this;if(e.onload=function(){if(i._updateImageType(),e.onload=null,e.onerror=null,i.isLoading){if(i.isLoading=!1,i._sourceLoaded(),"svg"===i.imageType)return void i._loadSvgSource();i.emit("loaded",i)}},e.onerror=function(){e.onload=null,e.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===i.imageType)return void i._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},BaseTexture.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,n.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var r=e.subType.split("+")[0];if(!(t=(0,n.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(t=(0,n.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},BaseTexture.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,n.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},BaseTexture.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},BaseTexture.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},BaseTexture.prototype._loadSvgSourceUsingString=function(e){var t=(0,n.getSvgSize)(e),r=t.width,i=t.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(i*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,n.uid)(),o.getContext("2d").drawImage(this.source,0,0,r,i,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,BaseTexture.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},BaseTexture.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},BaseTexture.prototype.destroy=function(){this.imageUrl&&(delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),BaseTexture.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},BaseTexture.prototype.dispose=function(){this.emit("dispose",this)},BaseTexture.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},BaseTexture.fromImage=function(e,t,r,i){var o=n.BaseTextureCache[e];if(!o){var a=new Image;void 0===t&&0!==e.indexOf("data:")?a.crossOrigin=(0,c.default)(e):t&&(a.crossOrigin="string"==typeof t?t:"anonymous"),o=new BaseTexture(a,r),o.imageUrl=e,i&&(o.sourceScale=i),o.resolution=(0,n.getResolutionOfUrl)(e),a.src=e,BaseTexture.addToCache(o,e)}return o},BaseTexture.fromCanvas=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+(0,n.uid)());var i=n.BaseTextureCache[e._pixiId];return i||(i=new BaseTexture(e,t),BaseTexture.addToCache(i,e._pixiId)),i},BaseTexture.from=function(e,t,r){if("string"==typeof e)return BaseTexture.fromImage(e,void 0,t,r);if(e instanceof HTMLImageElement){var i=e.src,o=n.BaseTextureCache[i];return o||(o=new BaseTexture(e,t),o.imageUrl=i,r&&(o.sourceScale=r),o.resolution=(0,n.getResolutionOfUrl)(i),BaseTexture.addToCache(o,i)),o}return e instanceof HTMLCanvasElement?BaseTexture.fromCanvas(e,t):e},BaseTexture.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),n.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),n.BaseTextureCache[t]=e)},BaseTexture.removeFromCache=function(e){if("string"==typeof e){var t=n.BaseTextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete n.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var i=0;i<e.textureCacheIds.length;++i)delete n.BaseTextureCache[e.textureCacheIds[i]];return e.textureCacheIds.length=0,e}return null},BaseTexture}(u.default);t.default=f},,,,,,function(e,t,r){(function(e){function isArray(e){return Array.isArray?Array.isArray(e):"[object Array]"===objectToString(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"===(void 0===e?"undefined":r(e))}function isUndefined(e){return void 0===e}function isRegExp(e){return"[object RegExp]"===objectToString(e)}function isObject(e){return"object"===(void 0===e?"undefined":r(e))&&null!==e}function isDate(e){return"[object Date]"===objectToString(e)}function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":r(e))||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isArray=isArray,t.isBoolean=isBoolean,t.isNull=isNull,t.isNullOrUndefined=isNullOrUndefined,t.isNumber=isNumber,t.isString=isString,t.isSymbol=isSymbol,t.isUndefined=isUndefined,t.isRegExp=isRegExp,t.isObject=isObject,t.isDate=isDate,t.isError=isError,t.isFunction=isFunction,t.isPrimitive=isPrimitive,t.isBuffer=e.isBuffer}).call(t,r(13).Buffer)},function(e,t,r){"use strict";var i=null;i="undefined"!=typeof Promise?Promise:r(289),e.exports={Promise:i}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function checkPrecision(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var r=e.slice(0);return r.unshift("precision "+t+" float;"),r}}else if("precision"!==e.substring(0,9))return"precision "+t+" float;\n"+e;return e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(9),o=r(4),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){function Shader(t,r,i){return _classCallCheck(this,Shader),_possibleConstructorReturn(this,e.call(this,t,checkPrecision(r,a.default.PRECISION_VERTEX),checkPrecision(i,a.default.PRECISION_FRAGMENT)))}return _inherits(Shader,e),Shader}(n.GLShader);t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(2),a=r(140),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function Container(){_classCallCheck(this,Container);var t=_possibleConstructorReturn(this,e.call(this));return t.children=[],t}return _inherits(Container,e),Container.prototype.onChildrenChange=function(){},Container.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},Container.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},Container.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),i=this.getChildIndex(t);this.children[r]=t,this.children[i]=e,this.onChildrenChange(r<i?r:i)}},Container.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},Container.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(e);(0,o.removeItems)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},Container.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},Container.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var i=this.children.indexOf(e);if(-1===i)return null;e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this)}return e},Container.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},Container.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,i="number"==typeof t?t:this.children.length,n=i-r,o=void 0;if(n>0&&n<=i){o=this.children.splice(r,n);for(var a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var s=0;s<o.length;++s)o[s].emit("removed",this);return o}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}},Container.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},Container.prototype._calculateBounds=function(){},Container.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}},Container.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<t.length;i++)t[i].enabled&&this._enabledFilters.push(t[i]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var n=0,o=this.children.length;n<o;n++)this.children[n].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},Container.prototype._renderWebGL=function(e){},Container.prototype._renderCanvas=function(e){},Container.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},Container.prototype.destroy=function(t){e.prototype.destroy.call(this);var r="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(r)for(var n=0;n<i.length;++n)i[n].destroy(t)},n(Container,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),Container}(s.default);t.default=u,u.prototype.containerUpdateTransform=u.prototype.updateTransform},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(146),o=_interopRequireDefault(n),a=r(312),s=_interopRequireDefault(a),u=r(147),l=_interopRequireDefault(u),c=r(313),h=_interopRequireDefault(c),d=r(2),f=r(0),p=r(4),m=_interopRequireDefault(p),g=function(e){function CanvasRenderer(t,r,i){_classCallCheck(this,CanvasRenderer);var n=_possibleConstructorReturn(this,e.call(this,"Canvas",t,r,i));return n.type=f.RENDERER_TYPE.CANVAS,n.rootContext=n.view.getContext("2d",{alpha:n.transparent}),n.context=n.rootContext,n.refresh=!0,n.maskManager=new s.default(n),n.smoothProperty="imageSmoothingEnabled",n.rootContext.imageSmoothingEnabled||(n.rootContext.webkitImageSmoothingEnabled?n.smoothProperty="webkitImageSmoothingEnabled":n.rootContext.mozImageSmoothingEnabled?n.smoothProperty="mozImageSmoothingEnabled":n.rootContext.oImageSmoothingEnabled?n.smoothProperty="oImageSmoothingEnabled":n.rootContext.msImageSmoothingEnabled&&(n.smoothProperty="msImageSmoothingEnabled")),n.initPlugins(),n.blendModes=(0,h.default)(),n._activeBlendMode=null,n.renderingToScreen=!1,n.resize(n.options.width,n.options.height),n}return _inherits(CanvasRenderer,e),CanvasRenderer.prototype.render=function(e,t,r,i,n){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var o=this.resolution;t?(t=t.baseTexture||t,t._canvasRenderTarget||(t._canvasRenderTarget=new l.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(t||(this._lastObjectRendered=e),!n){var s=e.parent,u=this._tempDisplayObjectParent.transform.worldTransform;i?(i.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=s}a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,a.globalCompositeOperation=this.blendModes[f.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=a,e.renderCanvas(this),this.context=c,this.resolution=o,this.emit("postrender")}},CanvasRenderer.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},CanvasRenderer.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},CanvasRenderer.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},CanvasRenderer.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this.smoothProperty&&(this.rootContext[this.smoothProperty]=m.default.SCALE_MODE===f.SCALE_MODES.LINEAR)},CanvasRenderer}(o.default);t.default=g,d.pluginTarget.mixin(g)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function WebGLManager(e){_classCallCheck(this,WebGLManager),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return WebGLManager.prototype.onContextChange=function(){},WebGLManager.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},WebGLManager}();t.default=i},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=r(82),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=new a.Point,c=new a.Polygon,h=function(e){function Mesh(t,r,i,n,o){_classCallCheck(this,Mesh);var s=_possibleConstructorReturn(this,e.call(this));return s._texture=t,s.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),s.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),s.indices=n||new Uint16Array([0,1,3,2]),s.dirty=0,s.indexDirty=0,s.blendMode=a.BLEND_MODES.NORMAL,s.canvasPadding=0,s.drawMode=o||Mesh.DRAW_MODES.TRIANGLE_MESH,s.shader=null,s.tintRgb=new Float32Array([1,1,1]),s._glDatas={},s._uvTransform=new u.default(t),s.uploadUvTransform=!1,s.pluginName="mesh",s}return _inherits(Mesh,e),Mesh.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},Mesh.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},Mesh.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},Mesh.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},Mesh.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},Mesh.prototype._refresh=function(){},Mesh.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},Mesh.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,l);for(var t=this.vertices,r=c.points,i=this.indices,n=this.indices.length,o=this.drawMode===Mesh.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<n;a+=o){var s=2*i[a],u=2*i[a+1],h=2*i[a+2];if(r[0]=t[s],r[1]=t[s+1],r[2]=t[u],r[3]=t[u+1],r[4]=t[h],r[5]=t[h+1],c.contains(l.x,l.y))return!0}return!1},n(Mesh,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return a.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=a.utils.hex2rgb(e,this.tintRgb)}}]),Mesh}(a.Container);t.default=h,h.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(e,t,r){"use strict";var i=r(385).default,n=r(84).default,o=r(170),a=r(171);i.Resource=n,i.async=o,i.base64=a,e.exports=i,e.exports.default=i},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},,,,,function(e,t,r){"use strict";(function(t){e.exports={isNode:void 0!==t,newBuffer:function(e,r){return new t(e,r)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(t,r(13).Buffer)},function(e,t,r){"use strict";function buildLine(e,t){var r=e.points;if(0!==r.length){var o=new i.Point(r[0],r[1]),a=new i.Point(r[r.length-2],r[r.length-1]);if(o.x===a.x&&o.y===a.y){r=r.slice(),r.pop(),r.pop(),a=new i.Point(r[r.length-2],r[r.length-1]);var s=a.x+.5*(o.x-a.x),u=a.y+.5*(o.y-a.y);r.unshift(s,u),r.push(s,u)}var l=t.points,c=t.indices,h=r.length/2,d=r.length,f=l.length/6,p=e.lineWidth/2,m=(0,n.hex2rgb)(e.lineColor),g=e.lineAlpha,y=m[0]*g,v=m[1]*g,b=m[2]*g,x=r[0],M=r[1],w=r[2],E=r[3],_=0,T=0,A=-(M-E),S=x-w,C=0,L=0,D=0,I=0,N=Math.sqrt(A*A+S*S);A/=N,S/=N,A*=p,S*=p,l.push(x-A,M-S,y,v,b,g),l.push(x+A,M+S,y,v,b,g);for(var O=1;O<h-1;++O){x=r[2*(O-1)],M=r[2*(O-1)+1],w=r[2*O],E=r[2*O+1],_=r[2*(O+1)],T=r[2*(O+1)+1],A=-(M-E),S=x-w,N=Math.sqrt(A*A+S*S),A/=N,S/=N,A*=p,S*=p,C=-(E-T),L=w-_,N=Math.sqrt(C*C+L*L),C/=N,L/=N,C*=p,L*=p;var R=-S+M-(-S+E),j=-A+w-(-A+x),P=(-A+x)*(-S+E)-(-A+w)*(-S+M),k=-L+T-(-L+E),B=-C+w-(-C+_),z=(-C+_)*(-L+E)-(-C+w)*(-L+T),U=R*B-k*j;if(Math.abs(U)<.1)U+=10.1,l.push(w-A,E-S,y,v,b,g),l.push(w+A,E+S,y,v,b,g);else{var F=(j*z-B*P)/U,G=(k*P-R*z)/U;(F-w)*(F-w)+(G-E)*(G-E)>196*p*p?(D=A-C,I=S-L,N=Math.sqrt(D*D+I*I),D/=N,I/=N,D*=p,I*=p,l.push(w-D,E-I),l.push(y,v,b,g),l.push(w+D,E+I),l.push(y,v,b,g),l.push(w-D,E-I),l.push(y,v,b,g),d++):(l.push(F,G),l.push(y,v,b,g),l.push(w-(F-w),E-(G-E)),l.push(y,v,b,g))}}x=r[2*(h-2)],M=r[2*(h-2)+1],w=r[2*(h-1)],E=r[2*(h-1)+1],A=-(M-E),S=x-w,N=Math.sqrt(A*A+S*S),A/=N,S/=N,A*=p,S*=p,l.push(w-A,E-S),l.push(y,v,b,g),l.push(w+A,E+S),l.push(y,v,b,g),c.push(f);for(var V=0;V<d;++V)c.push(f++);c.push(f-1)}}function buildNativeLine(e,t){var r=0,i=e.points;if(0!==i.length){var o=t.points,a=i.length/2,s=(0,n.hex2rgb)(e.lineColor),u=e.lineAlpha,l=s[0]*u,c=s[1]*u,h=s[2]*u;for(r=1;r<a;r++){var d=i[2*(r-1)],f=i[2*(r-1)+1],p=i[2*r],m=i[2*r+1];o.push(d,f),o.push(l,c,h,u),o.push(p,m),o.push(l,c,h,u)}}}t.__esModule=!0,t.default=function(e,t,r){e.nativeLines?buildNativeLine(e,r):buildLine(e,t)};var i=r(5),n=r(2)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(146),o=_interopRequireDefault(n),a=r(320),s=_interopRequireDefault(a),u=r(321),l=_interopRequireDefault(u),c=r(319),h=_interopRequireDefault(c),d=r(47),f=_interopRequireDefault(d),p=r(46),m=_interopRequireDefault(p),g=r(315),y=_interopRequireDefault(g),v=r(24),b=_interopRequireDefault(v),x=r(314),M=_interopRequireDefault(x),w=r(316),E=_interopRequireDefault(w),_=r(324),T=_interopRequireDefault(_),A=r(325),S=_interopRequireDefault(A),C=r(2),L=r(9),D=_interopRequireDefault(L),I=r(0),N=0,O=function(e){function WebGLRenderer(t,r,i){_classCallCheck(this,WebGLRenderer);var n=_possibleConstructorReturn(this,e.call(this,"WebGL",t,r,i));return n.legacy=n.options.legacy,n.legacy&&(D.default.VertexArrayObject.FORCE_NATIVE=!0),n.type=I.RENDERER_TYPE.WEBGL,n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),n.view.addEventListener("webglcontextlost",n.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n._contextOptions={alpha:n.transparent,antialias:n.options.antialias,premultipliedAlpha:n.transparent&&"notMultiplied"!==n.transparent,stencil:!0,preserveDrawingBuffer:n.options.preserveDrawingBuffer},n._backgroundColorRgba[3]=n.transparent?0:1,n.maskManager=new s.default(n),n.stencilManager=new l.default(n),n.emptyRenderer=new m.default(n),n.currentRenderer=n.emptyRenderer,n.initPlugins(),n.options.context&&(0,S.default)(n.options.context),n.gl=n.options.context||D.default.createContext(n.view,n._contextOptions),n.CONTEXT_UID=N++,n.state=new E.default(n.gl),n.renderingToScreen=!0,n.boundTextures=null,n._activeShader=null,n._activeVao=null,n._activeRenderTarget=null,n._initContext(),n.filterManager=new h.default(n),n.drawModes=(0,T.default)(n.gl),n._nextTextureLocation=0,n.setBlendMode(0),n}return _inherits(WebGLRenderer,e),WebGLRenderer.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new y.default(this),this.textureGC=new M.default(this),this.state.resetToDefault(),this.rootRenderTarget=new f.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new D.default.GLTexture.fromData(e,null,1,1),i={_glTextures:{}};i._glTextures[this.CONTEXT_UID]={};for(var n=0;n<t;n++){var o=new b.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[n]=i,this.emptyTextures[n]=o,this.bindTexture(null,n)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},WebGLRenderer.prototype.render=function(e,t,r,i,n){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!n){var o=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=o}this.bindRenderTexture(t,i),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},WebGLRenderer.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},WebGLRenderer.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},WebGLRenderer.prototype.resize=function(e,t){o.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},WebGLRenderer.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},WebGLRenderer.prototype.clear=function(e){this._activeRenderTarget.clear(e)},WebGLRenderer.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},WebGLRenderer.prototype.clearRenderTexture=function(e,t){var r=e.baseTexture,i=r._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(t),this},WebGLRenderer.prototype.bindRenderTexture=function(e,t){var r=void 0;if(e){var i=e.baseTexture;i._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(i,0),this.unbindTexture(i),r=i._glRenderTargets[this.CONTEXT_UID],r.setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this},WebGLRenderer.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},WebGLRenderer.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},WebGLRenderer.prototype.bindTexture=function(e,t,r){if(e=e||this.emptyTextures[t],e=e.baseTexture||e,e.touched=this.textureGC.count,r)t=t||0;else{for(var i=0;i<this.boundTextures.length;i++)if(this.boundTextures[i]===e)return i;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,o=e._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[t]=e,n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(e,t),t},WebGLRenderer.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},WebGLRenderer.prototype.createVao=function(){return new D.default.VertexArrayObject(this.gl,this.state.attribState)},WebGLRenderer.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},WebGLRenderer.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault()},WebGLRenderer.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this._initContext()},WebGLRenderer.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},WebGLRenderer}(o.default);t.default=O,C.pluginTarget.mixin(O)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(35),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){function ObjectRenderer(){return _classCallCheck(this,ObjectRenderer),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ObjectRenderer,e),ObjectRenderer.prototype.start=function(){},ObjectRenderer.prototype.stop=function(){this.flush()},ObjectRenderer.prototype.flush=function(){},ObjectRenderer.prototype.render=function(e){},ObjectRenderer}(o.default);t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(5),n=r(0),o=r(4),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(9),u=function(){function RenderTarget(e,t,r,o,u,l){_classCallCheck(this,RenderTarget),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new i.Rectangle(0,0,1,1),this.resolution=u||a.default.RESOLUTION,this.projectionMatrix=new i.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new i.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==o?o:a.default.SCALE_MODE,this.root=l,this.root?(this.frameBuffer=new s.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=s.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===n.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(t,r)}return RenderTarget.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},RenderTarget.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},RenderTarget.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},RenderTarget.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},RenderTarget.prototype.calculateProjection=function(e,t){var r=this.projectionMatrix;t=t||e,r.identity(),this.root?(r.a=1/e.width*2,r.d=-1/e.height*2,r.tx=-1-t.x*r.a,r.ty=1-t.y*r.d):(r.a=1/e.width*2,r.d=1/e.height*2,r.tx=-1-t.x*r.a,r.ty=-1-t.y*r.d)},RenderTarget.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},RenderTarget.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},RenderTarget}();t.default=u},function(e,t,r){function injectStyle(e){r(399)}var i=r(7)(r(262),r(423),injectStyle,null,null);e.exports=i.exports},function(e,t,r){"use strict";(function(e){var i=r(13),n=i.Buffer,o=i.SlowBuffer,a=i.kMaxLength||2147483647;t.alloc=function(e,t,r){if("function"==typeof n.alloc)return n.alloc(e,t,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");var i=r,o=t;void 0===o&&(i=void 0,o=0);var s=new n(e);if("string"==typeof o)for(var u=new n(o,i),l=u.length,c=-1;++c<e;)s[c]=u[c%l];else s.fill(o);return s},t.allocUnsafe=function(e){if("function"==typeof n.allocUnsafe)return n.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");return new n(e)},t.from=function(t,r,i){if("function"==typeof n.from&&(!e.Uint8Array||Uint8Array.from!==n.from))return n.from(t,r,i);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new n(t,r);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new n(t);void 0===o&&(o=0);var a=i;if(void 0===a&&(a=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(a>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new n(t.slice(o,o+a))}if(n.isBuffer(t)){var s=new n(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new n(t);if("Buffer"===t.type&&Array.isArray(t.data))return new n(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(e){if("function"==typeof n.allocUnsafeSlow)return n.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=a)throw new RangeError("size is too large");return new o(e)}}).call(t,r(12))},function(e,t,r){e.exports=!r(88)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":r(e))?null!==e:"function"==typeof e}},,,,,,,,,,function(e,t){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"===(void 0===e?"undefined":r(e))&&null!==e}function isUndefined(e){return void 0===e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,r,i,n,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(r=this._events[e],isUndefined(r))return!1;if(isFunction(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),r.apply(this,n)}else if(isObject(r))for(n=Array.prototype.slice.call(arguments,1),a=r.slice(),i=a.length,o=0;o<i;o++)a[o].apply(this,n);return!0},EventEmitter.prototype.addListener=function(e,t){var r;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(r=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function g(){this.removeListener(e,g),r||(r=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var r=!1;return g.listener=t,this.on(e,g),this},EventEmitter.prototype.removeListener=function(e,t){var r,i,n,o;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],n=r.length,i=-1,r===t||isFunction(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(r)){for(o=n;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){i=o;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],isFunction(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){"use strict";(function(t){function nextTick(e,r,i,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,i)});case 4:return t.nextTick(function(){e.call(null,r,i,n)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=nextTick:e.exports=t.nextTick}).call(t,r(22))},function(e,t,r){"use strict";(function(t,i){function nop(){}function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function WritableState(e,t){n=n||r(17),e=e||{},this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(n=n||r(17),!(d.call(Writable,this)||this instanceof n))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),l.call(this)}function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),o(t,r)}function validChunk(e,t,r,i){var n=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o(i,a),n=!1),n}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,r)),t}function writeOrBuffer(e,t,r,i,n,o){r||(i=decodeChunk(t,i,n),c.isBuffer(i)&&(n="buffer"));var a=t.objectMode?1:i.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(i,n,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,a,i,n,o);return s}function doWrite(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){--t.pendingcb,r?o(n,i):n(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var o=needFinish(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?a(afterWrite,e,r,o,n):afterWrite(e,r,o,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0;r;)n[a]=r,r=r.next,a+=1;doWrite(e,t,!0,t.length,n,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;r;){var s=r.chunk,u=r.encoding,l=r.callback;if(doWrite(e,t,!1,t.objectMode?1:s.length,s,u,l),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var r=needFinish(t);return r&&(0===t.pendingcb?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?o(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=Writable;var n,o=r(63),a=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:o;Writable.WritableState=WritableState;var s=r(30);s.inherits=r(16);var u={deprecate:r(256)},l=r(107),c=r(13).Buffer,h=r(49);s.inherits(Writable,l),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var d;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||e&&e._writableState instanceof WritableState}})):d=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1,o=c.isBuffer(e);return"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ended?writeAfterEnd(this,r):(o||validChunk(this,i,e,r))&&(i.pendingcb++,n=writeOrBuffer(this,i,o,e,t,r)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Writable.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||endWritable(this,i,r)}}).call(t,r(22),r(254).setImmediate)},function(e,t,r){t=e.exports=r(105),t.Stream=t,t.Readable=t,t.Writable=r(64),t.Duplex=r(17),t.Transform=r(106),t.PassThrough=r(247)},,function(e,t,r){"use strict";"use restrict";function countTrailingZeros(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,(t|=r)|e>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=countTrailingZeros,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,i=t,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=1&r,--n;e[t]=i<<n&255}}(i),t.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},t.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},t.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},t.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},t.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>countTrailingZeros(e)+1}},function(e,t,r){var i,n,o;!function(r){var a=/iPhone/i,s=/iPod/i,u=/iPad/i,l=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,c=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,d=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,f=/Windows Phone/i,p=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,g=/BB10/i,y=/Opera Mini/i,v=/(CriOS|Chrome)(?=.*\bMobile\b)/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,x=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),M=function(e,t){return e.test(t)},w=function(e){var t=e||navigator.userAgent,r=t.split("[FBAN");if(void 0!==r[1]&&(t=r[0]),r=t.split("Twitter"),void 0!==r[1]&&(t=r[0]),this.apple={phone:M(a,t),ipod:M(s,t),tablet:!M(a,t)&&M(u,t),device:M(a,t)||M(s,t)||M(u,t)},this.amazon={phone:M(h,t),tablet:!M(h,t)&&M(d,t),device:M(h,t)||M(d,t)},this.android={phone:M(h,t)||M(l,t),tablet:!M(h,t)&&!M(l,t)&&(M(d,t)||M(c,t)),device:M(h,t)||M(d,t)||M(l,t)||M(c,t)},this.windows={phone:M(f,t),tablet:M(p,t),device:M(f,t)||M(p,t)},this.other={blackberry:M(m,t),blackberry10:M(g,t),opera:M(y,t),firefox:M(b,t),chrome:M(v,t),device:M(m,t)||M(g,t)||M(y,t)||M(b,t)||M(v,t)},this.seven_inch=M(x,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},E=function(){var e=new w;return e.Class=w,e};void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=w:void 0!==e&&e.exports&&"undefined"!=typeof window?e.exports=E():(n=[],i=r.isMobile=E(),void 0!==(o="function"==typeof i?i.apply(t,n):i)&&(e.exports=o))}(this)},function(e,t,r){"use strict";function CompressedObject(e,t,r,i,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=i,this.compressedContent=n}var i=r(31),n=r(124),o=r(123),a=r(122),o=r(123);CompressedObject.prototype={getContentWorker:function(){var e=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},CompressedObject.createWorkerFrom=function(e,t,r){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},e.exports=CompressedObject},function(e,t,r){"use strict";function crc32(e,t,r,i){var o=n,a=i+r;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}function crc32str(e,t,r,i){var o=n,a=i+r;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}var i=r(3),n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?crc32(0|t,e,e.length,0):crc32str(0|t,e,e.length,0):0}},function(e,t){var r=function(e,t){if(!i){var r=Object.keys(n);i={};for(var o=0;o<r.length;++o){var a=r[o];i[e[a]]=n[a]}}return i[t]},i=null,n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=r},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(5),n=function(){function Bounds(){_classCallCheck(this,Bounds),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return Bounds.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Bounds.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Bounds.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:(e=e||new i.Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},Bounds.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},Bounds.prototype.addQuad=function(e){var t=this.minX,r=this.minY,i=this.maxX,n=this.maxY,o=e[0],a=e[1];t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,n=a>n?a:n,o=e[2],a=e[3],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,n=a>n?a:n,o=e[4],a=e[5],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,n=a>n?a:n,o=e[6],a=e[7],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,n=a>n?a:n,this.minX=t,this.minY=r,this.maxX=i,this.maxY=n},Bounds.prototype.addFrame=function(e,t,r,i,n){var o=e.worldTransform,a=o.a,s=o.b,u=o.c,l=o.d,c=o.tx,h=o.ty,d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=a*t+u*r+c,y=s*t+l*r+h;d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=a*i+u*r+c,y=s*i+l*r+h,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=a*t+u*n+c,y=s*t+l*n+h,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=a*i+u*n+c,y=s*i+l*n+h,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m},Bounds.prototype.addVertices=function(e,t,r,i){for(var n=e.worldTransform,o=n.a,a=n.b,s=n.c,u=n.d,l=n.tx,c=n.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=r;m<i;m+=2){var g=t[m],y=t[m+1],v=o*g+s*y+l,b=u*y+a*g+c;h=v<h?v:h,d=b<d?b:d,f=v>f?v:f,p=b>p?b:p}this.minX=h,this.minY=d,this.maxX=f,this.maxY=p},Bounds.prototype.addBounds=function(e){var t=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>n?e.maxY:n},Bounds.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,n=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=n&&i<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=i<s?i:s,this.maxX=n>u?n:u,this.maxY=o>l?o:l}},Bounds.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,n=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=n&&i<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=i<s?i:s,this.maxX=n>u?n:u,this.maxY=o>l?o:l}},Bounds}();t.default=n},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(5),n=function(){function TransformBase(){_classCallCheck(this,TransformBase),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}return TransformBase.prototype.updateLocalTransform=function(){},TransformBase.prototype.updateTransform=function(e){var t=e.worldTransform,r=this.worldTransform,i=this.localTransform;r.a=i.a*t.a+i.b*t.c,r.b=i.a*t.b+i.b*t.d,r.c=i.c*t.a+i.d*t.c,r.d=i.c*t.b+i.d*t.d,r.tx=i.tx*t.a+i.ty*t.c+t.tx,r.ty=i.tx*t.b+i.ty*t.d+t.ty,this._worldID++},TransformBase}();t.default=n,n.prototype.updateWorldTransform=n.prototype.updateTransform,n.IDENTITY=new n},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(75),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){function Matrix(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;_classCallCheck(this,Matrix),this.a=e,this.b=t,this.c=r,this.d=i,this.tx=n,this.ty=o,this.array=null}return Matrix.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},Matrix.prototype.set=function(e,t,r,i,n,o){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=n,this.ty=o,this},Matrix.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},Matrix.prototype.apply=function(e,t){t=t||new o.default;var r=e.x,i=e.y;return t.x=this.a*r+this.c*i+this.tx,t.y=this.b*r+this.d*i+this.ty,t},Matrix.prototype.applyInverse=function(e,t){t=t||new o.default;var r=1/(this.a*this.d+this.c*-this.b),i=e.x,n=e.y;return t.x=this.d*r*i+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*n+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,t},Matrix.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},Matrix.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},Matrix.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),i=this.a,n=this.c,o=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=n*t-this.d*r,this.d=n*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},Matrix.prototype.append=function(e){var t=this.a,r=this.b,i=this.c,n=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*n,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*n,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*n+this.ty,this},Matrix.prototype.setTransform=function(e,t,r,i,n,o,a,s,u){var l=Math.sin(a),c=Math.cos(a),h=Math.cos(u),d=Math.sin(u),f=-Math.sin(s),p=Math.cos(s),m=c*n,g=l*n,y=-l*o,v=c*o;return this.a=h*m+d*y,this.b=h*g+d*v,this.c=f*m+p*y,this.d=f*g+p*v,this.tx=e+(r*m+i*y),this.ty=t+(r*g+i*v),this},Matrix.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},Matrix.prototype.decompose=function(e){var t=this.a,r=this.b,i=this.c,n=this.d,o=-Math.atan2(-i,n),a=Math.atan2(r,t);return Math.abs(o+a)<1e-5?(e.rotation=a,t<0&&n>=0&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skew.x=e.skew.y=0):(e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+n*n),e.position.x=this.tx,e.position.y=this.ty,e},Matrix.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,i=this.d,n=this.tx,o=e*i-t*r;return this.a=i/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*n)/o,this.ty=-(e*this.ty-t*n)/o,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var e=new Matrix;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},Matrix.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i(Matrix,null,[{key:"IDENTITY",get:function(){return new Matrix}},{key:"TEMP_MATRIX",get:function(){return new Matrix}}]),Matrix}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function Point(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,Point),this.x=e,this.y=t}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copy=function(e){this.set(e.x,e.y)},Point.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},Point}();t.default=i},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(0),o=function(){function Rectangle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,Rectangle),this.x=e,this.y=t,this.width=r,this.height=i,this.type=n.SHAPES.RECT}return Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},Rectangle.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},Rectangle.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},Rectangle.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,this.height<0&&(this.height=0))},Rectangle.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),n=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=r-t,this.y=i,this.height=n-i},i(Rectangle,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new Rectangle(0,0,0,0)}}]),Rectangle}();t.default=o},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(5),a=r(2),s=r(0),u=r(19),l=_interopRequireDefault(u),c=r(33),h=_interopRequireDefault(c),d=new o.Point,f=function(e){function Sprite(t){_classCallCheck(this,Sprite);var r=_possibleConstructorReturn(this,e.call(this));return r._anchor=new o.ObservablePoint(r._onAnchorUpdate,r),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=s.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=t||l.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return _inherits(Sprite,e),Sprite.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,a.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,a.sign)(this.scale.y)*this._height/this._texture.orig.height)},Sprite.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Sprite.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,r=t.a,i=t.b,n=t.c,o=t.d,a=t.tx,s=t.ty,u=this.vertexData,l=e.trim,c=e.orig,h=this._anchor,d=0,f=0,p=0,m=0;l?(f=l.x-h._x*c.width,d=f+l.width,m=l.y-h._y*c.height,p=m+l.height):(f=-h._x*c.width,d=f+c.width,m=-h._y*c.height,p=m+c.height),u[0]=r*f+n*m+a,u[1]=o*m+i*f+s,u[2]=r*d+n*m+a,u[3]=o*m+i*d+s,u[4]=r*d+n*p+a,u[5]=o*p+i*d+s,u[6]=r*f+n*p+a,u[7]=o*p+i*f+s}},Sprite.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,r=e.orig,i=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,s=n.c,u=n.d,l=n.tx,c=n.ty,h=-i._x*r.width,d=h+r.width,f=-i._y*r.height,p=f+r.height;t[0]=o*h+s*f+l,t[1]=u*f+a*h+c,t[2]=o*d+s*f+l,t[3]=u*f+a*d+c,t[4]=o*d+s*p+l,t[5]=u*p+a*d+c,t[6]=o*h+s*p+l,t[7]=u*p+a*h+c},Sprite.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},Sprite.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},Sprite.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},Sprite.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},Sprite.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,d);var t=this._texture.orig.width,r=this._texture.orig.height,i=-t*this.anchor.x,n=0;return d.x>=i&&d.x<i+t&&(n=-r*this.anchor.y,d.y>=n&&d.y<n+r)},Sprite.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var r="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},Sprite.from=function(e){return new Sprite(l.default.from(e))},Sprite.fromFrame=function(e){var t=a.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new Sprite(t)},Sprite.fromImage=function(e,t,r){return new Sprite(l.default.fromImage(e,t,r))},n(Sprite,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,a.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,a.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),Sprite}(h.default);t.default=f},function(e,t,r){"use strict";t.__esModule=!0;var i=r(2),n=r(148),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a={getTintedTexture:function(e,t){var r=e._texture;t=a.roundColor(t);var i="#"+("00000"+(0|t).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var n=r.tintCache[i],o=void 0;if(n){if(n.tintId===r._updateID)return r.tintCache[i];o=r.tintCache[i]}else o=a.canvas||document.createElement("canvas");if(a.tintMethod(r,t,o),o.tintId=r._updateID,a.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[i]=s}else r.tintCache[i]=o,a.canvas=null;return o},tintWithMultiply:function(e,t,r){var i=r.getContext("2d"),n=e._frame.clone(),o=e.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="multiply",i.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},tintWithOverlay:function(e,t,r){var i=r.getContext("2d"),n=e._frame.clone(),o=e.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},tintWithPerPixel:function(e,t,r){var n=r.getContext("2d"),o=e._frame.clone(),a=e.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,r.width=Math.ceil(o.width),r.height=Math.ceil(o.height),n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=(0,i.hex2rgb)(t),u=s[0],l=s[1],c=s[2],h=n.getImageData(0,0,o.width,o.height),d=h.data,f=0;f<d.length;f+=4)d[f+0]*=u,d[f+1]*=l,d[f+2]*=c;n.putImageData(h,0,0)},roundColor:function(e){var t=a.cacheStepsPerColorChannel,r=(0,i.hex2rgb)(e);return r[0]=Math.min(255,r[0]/t*t),r[1]=Math.min(255,r[1]/t*t),r[2]=Math.min(255,r[2]/t*t),(0,i.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,o.default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,t.default=a},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(154),o=_interopRequireDefault(n),a=r(19),s=_interopRequireDefault(a),u=function(e){function RenderTexture(t,r){_classCallCheck(this,RenderTexture);var i=null;if(!(t instanceof o.default)){var n=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+n+", "+a+") instead of the ctor directly."),i=arguments[0],r=null,t=new o.default(n,a,s,u)}var l=_possibleConstructorReturn(this,e.call(this,t,r));return l.legacyRenderer=i,l.valid=!0,l._updateUvs(),l}return _inherits(RenderTexture,e),RenderTexture.prototype.resize=function(e,t,r){this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r||this.baseTexture.resize(e,t),this._updateUvs()},RenderTexture.create=function(e,t,r,i){return new RenderTexture(new o.default(e,t,r,i))},RenderTexture}(s.default);t.default=u},function(e,t,r){"use strict";t.__esModule=!0,t.Ticker=t.shared=void 0;var i=r(332),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=new n.default;o.autoStart=!0,o.destroy=function(){},t.shared=o,t.Ticker=n.default},function(e,t,r){"use strict";function createIndicesForQuads(e){for(var t=6*e,r=new Uint16Array(t),i=0,n=0;i<t;i+=6,n+=4)r[i+0]=n+0,r[i+1]=n+1,r[i+2]=n+2,r[i+3]=n+0,r[i+4]=n+2,r[i+5]=n+3;return r}t.__esModule=!0,t.default=createIndicesForQuads},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(74),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=new o.default,s=function(){function TextureTransform(e,t){_classCallCheck(this,TextureTransform),this._texture=e,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===t?.5:t}return TextureTransform.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,i=0;i<e.length;i+=2){var n=e[i],o=e[i+1];t[i]=n*r.a+o*r.c+r.tx,t[i+1]=n*r.b+o*r.d+r.ty}return t},TextureTransform.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=t.orig,n=t.trim;n&&(a.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(a));var o=t.baseTexture,s=this.uClampFrame,u=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(t._frame.x+u+l)/o.width,s[1]=(t._frame.y+u+l)/o.height,s[2]=(t._frame.x+t._frame.width-u+l)/o.width,s[3]=(t._frame.y+t._frame.height-u+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,!0},i(TextureTransform,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),TextureTransform}();t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function findMultipleBaseTextures(e,t){var r=!1;if(e&&e._textures&&e._textures.length)for(var i=0;i<e._textures.length;i++)if(e._textures[i]instanceof n.Texture){var o=e._textures[i].baseTexture;-1===t.indexOf(o)&&(t.push(o),r=!0)}return r}function findBaseTexture(e,t){return e instanceof n.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function findTexture(e,t){if(e._texture&&e._texture instanceof n.Texture){var r=e._texture.baseTexture;return-1===t.indexOf(r)&&t.push(r),!0}return!1}function drawText(e,t){return t instanceof n.Text&&(t.updateText(!0),!0)}function calculateTextStyle(e,t){if(t instanceof n.TextStyle){var r=t.toFontString();return n.TextMetrics.measureFont(r),!0}return!1}function findText(e,t){if(e instanceof n.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var r=e._texture.baseTexture;return-1===t.indexOf(r)&&t.push(r),!0}return!1}function findTextStyle(e,t){return e instanceof n.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}t.__esModule=!0;var i=r(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=r(169),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n.ticker.shared;n.settings.UPLOADS_PER_FRAME=4;var u=function(){function BasePrepare(e){var t=this;_classCallCheck(this,BasePrepare),this.limiter=new a.default(n.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return BasePrepare.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,s.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY))):t&&t()},BasePrepare.prototype.tick=function(){setTimeout(this.delayedTick,0)},BasePrepare.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)s.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var a=0,u=o.length;a<u;a++)o[a]()}},BasePrepare.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},BasePrepare.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},BasePrepare.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof n.Container)for(var i=e.children.length-1;i>=0;i--)this.add(e.children[i]);return this},BasePrepare.prototype.destroy=function(){this.ticking&&s.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},BasePrepare}();t.default=u},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _noop(){}function setExtMap(e,t,r){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=r)}function reqType(e){return e.toString().replace("object ","")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(127),o=_interopRequireDefault(n),a=r(126),s=_interopRequireDefault(a),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null,c=function(){function Resource(e,t,r){if(_classCallCheck(this,Resource),"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(Resource.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Resource.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new s.default,this.onProgress=new s.default,this.onComplete=new s.default,this.onAfterMiddleware=new s.default}return Resource.setExtensionLoadType=function(e,t){setExtMap(Resource._loadTypeMap,e,t)},Resource.setExtensionXhrType=function(e,t){setExtMap(Resource._xhrTypeMap,e,t)},Resource.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Resource.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Resource.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},Resource.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Resource.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},Resource.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(t)},1));switch(e&&this.onComplete.once(e),this._setFlag(Resource.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Resource.LOAD_TYPE.IMAGE:this.type=Resource.TYPE.IMAGE,this._loadElement("image");break;case Resource.LOAD_TYPE.AUDIO:this.type=Resource.TYPE.AUDIO,this._loadSourceElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this.type=Resource.TYPE.VIDEO,this._loadSourceElement("video");break;case Resource.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},Resource.prototype._hasFlag=function(e){return!!(this._flags&e)},Resource.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Resource.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},Resource.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null===this.data)return void this.abort("Unsupported element: "+e);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(e,this.url[t]));else this.data.appendChild(this._createSource(e,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},Resource.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=Resource.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},Resource.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},Resource.prototype._createSource=function(e,t,r){r||(r=e+"/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=r,i},Resource.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},Resource.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},Resource.prototype._xhrOnError=function(){var e=this.xhr;this.abort(reqType(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},Resource.prototype._xhrOnAbort=function(){this.abort(reqType(this.xhr)+" Request was aborted by the user.")},Resource.prototype._xdrOnTimeout=function(){this.abort(reqType(this.xhr)+" Request timed out.")},Resource.prototype._xhrOnLoad=function(){var e=this.xhr,t="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(t=e.responseText),0===r&&t.length>0?r=200:1223===r&&(r=204),2!=(r/100|0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=Resource.TYPE.TEXT;else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=Resource.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(t,"text/xml")}else{var n=document.createElement("div");n.innerHTML=t,this.data=n}this.type=Resource.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=e.response||t;this.complete()},Resource.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,l||(l=document.createElement("a")),l.href=e,e=(0,o.default)(l.href,{strictMode:!0});var r=!e.port&&""===t.port||e.port===t.port,i=e.protocol?e.protocol+":":"";return e.host===t.hostname&&r&&i===t.protocol?"":"anonymous"},Resource.prototype._determineXhrType=function(){return Resource._xhrTypeMap[this.extension]||Resource.XHR_RESPONSE_TYPE.TEXT},Resource.prototype._determineLoadType=function(){return Resource._loadTypeMap[this.extension]||Resource.LOAD_TYPE.XHR},Resource.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var i=e.indexOf("?");-1!==i&&(e=e.substring(0,i)),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},Resource.prototype._getMimeFromXhrType=function(e){switch(e){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},i(Resource,[{key:"isDataUrl",get:function(){return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(Resource.STATUS_FLAGS.LOADING)}}]),Resource}();t.default=c,c.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},c.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},c.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},c.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},c._loadTypeMap={gif:c.LOAD_TYPE.IMAGE,png:c.LOAD_TYPE.IMAGE,bmp:c.LOAD_TYPE.IMAGE,jpg:c.LOAD_TYPE.IMAGE,jpeg:c.LOAD_TYPE.IMAGE,tif:c.LOAD_TYPE.IMAGE,tiff:c.LOAD_TYPE.IMAGE,webp:c.LOAD_TYPE.IMAGE,tga:c.LOAD_TYPE.IMAGE,svg:c.LOAD_TYPE.IMAGE,"svg+xml":c.LOAD_TYPE.IMAGE,mp3:c.LOAD_TYPE.AUDIO,ogg:c.LOAD_TYPE.AUDIO,wav:c.LOAD_TYPE.AUDIO,mp4:c.LOAD_TYPE.VIDEO,webm:c.LOAD_TYPE.VIDEO},c._xhrTypeMap={xhtml:c.XHR_RESPONSE_TYPE.DOCUMENT,html:c.XHR_RESPONSE_TYPE.DOCUMENT,htm:c.XHR_RESPONSE_TYPE.DOCUMENT,xml:c.XHR_RESPONSE_TYPE.DOCUMENT,tmx:c.XHR_RESPONSE_TYPE.DOCUMENT,svg:c.XHR_RESPONSE_TYPE.DOCUMENT,tsx:c.XHR_RESPONSE_TYPE.DOCUMENT,gif:c.XHR_RESPONSE_TYPE.BLOB,png:c.XHR_RESPONSE_TYPE.BLOB,bmp:c.XHR_RESPONSE_TYPE.BLOB,jpg:c.XHR_RESPONSE_TYPE.BLOB,jpeg:c.XHR_RESPONSE_TYPE.BLOB,tif:c.XHR_RESPONSE_TYPE.BLOB,tiff:c.XHR_RESPONSE_TYPE.BLOB,webp:c.XHR_RESPONSE_TYPE.BLOB,tga:c.XHR_RESPONSE_TYPE.BLOB,json:c.XHR_RESPONSE_TYPE.JSON,text:c.XHR_RESPONSE_TYPE.TEXT,txt:c.XHR_RESPONSE_TYPE.TEXT,ttf:c.XHR_RESPONSE_TYPE.BUFFER,otf:c.XHR_RESPONSE_TYPE.BUFFER},c.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(e,t){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){var i=r(180);e.exports=function(e,t,r){if(i(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,n){return e.call(t,r,i,n)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var i=r(51),n=r(38).document,o=i(n)&&i(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},,,,,,,,,,,function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";function buf2binstring(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}var i=r(14),n=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new i.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1,t.string2buf=function(e){var t,r,n,o,a,s=e.length,u=0;for(o=0;o<s;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new i.Buf8(u),a=0,o=0;a<u;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},t.buf2binstring=function(e){return buf2binstring(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,i,n,o,s=t||e.length,u=new Array(2*s);for(i=0,r=0;r<s;)if((n=e[r++])<128)u[i++]=n;else if((o=a[n])>4)u[i++]=65533,r+=o-1;else{for(n&=2===o?31:3===o?15:7;o>1&&r<s;)n=n<<6|63&e[r++],o--;o>1?u[i++]=65533:n<65536?u[i++]=n:(n-=65536,u[i++]=55296|n>>10&1023,u[i++]=56320|1023&n)}return buf2binstring(u,i)},t.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+a[e[r]]>t?r:t}},function(e,t,r){"use strict";function adler32(e,t,r,i){for(var n=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){a=r>2e3?2e3:r,r-=a;do{n=n+t[i++]|0,o=o+n|0}while(--a);n%=65521,o%=65521}return n|o<<16|0}e.exports=adler32},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";function crc32(e,t,r,n){var o=i,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=crc32},function(e,t,r){"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=ZStream},function(e,t,r){"use strict";(function(t){function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState(e,t){i=i||r(17),e=e||{},this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=~~this.highWaterMark,this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(108).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function Readable(e){if(i=i||r(17),!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),s.call(this)}function readableAddChunk(e,t,r,i,n){var o=chunkInvalid(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,onEofChunk(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!n){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&n){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var u;!t.decoder||n||i||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),n||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e))),maybeReadMore(e,t)}else n||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function computeNewHighWaterMark(e){return e>=g?e=g:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function chunkInvalid(e,t){var r=null;return u.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){d("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,n(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,flow(e))}}function nReadingNextTick(e){d("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n(resume_,e,t))}function resume_(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=fromListPartial(e,t.buffer,t.decoder),r}function fromListPartial(e,t,r){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?copyFromBufferString(e,t):copyFromBuffer(e,t),i}function copyFromBufferString(e,t){var r=t.head,i=1,n=r.data;for(e-=n.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?n+=o:n+=o.slice(0,e),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function copyFromBuffer(e,t){var r=l.allocUnsafe(e),i=t.head,n=1;for(i.data.copy(r),e-=i.data.length;i=i.next;){var o=i.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(a));break}++n}return t.length-=n,r}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}e.exports=Readable;var i,n=r(63),o=r(99);Readable.ReadableState=ReadableState;var a=(r(61).EventEmitter,function(e,t){return e.listeners(t).length}),s=r(107),u=r(13).Buffer,l=r(49),c=r(30);c.inherits=r(16);var h=r(425),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var f,p=r(248);c.inherits(Readable,s);var m=["error","close","destroy","pause","resume"];Readable.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),readableAddChunk(this,r,e,t,!1)},Readable.prototype.unshift=function(e){return readableAddChunk(this,this._readableState,e,"",!0)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return f||(f=r(108).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var g=8388608;Readable.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var i=t.needReadable;d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,d("length less than watermark",i)),t.ended||t.reading?(i=!1,d("reading or ended",i)):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t)));var n;return n=e>0?fromList(e,t):null,null===n?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==n&&this.emit("data",n),n},Readable.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(e,r){function onunpipe(e){d("onunpipe"),e===i&&cleanup()}function onend(){d("onend"),e.end()}function cleanup(){d("cleanup"),e.removeListener("close",onclose),e.removeListener("finish",onfinish),e.removeListener("drain",l),e.removeListener("error",onerror),e.removeListener("unpipe",onunpipe),i.removeListener("end",onend),i.removeListener("end",cleanup),i.removeListener("data",ondata),c=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l()}function ondata(t){d("ondata"),h=!1,!1!==e.write(t)||h||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==indexOf(o.pipes,e))&&!c&&(d("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,h=!0),i.pause())}function onerror(t){d("onerror",t),unpipe(),e.removeListener("error",onerror),0===a(e,"error")&&e.emit("error",t)}function onclose(){e.removeListener("finish",onfinish),unpipe()}function onfinish(){d("onfinish"),e.removeListener("close",onclose),unpipe()}function unpipe(){d("unpipe"),i.unpipe(e)}var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,r);var s=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr,u=s?onend:cleanup;o.endEmitted?n(u):i.once("end",u),e.on("unpipe",onunpipe);var l=pipeOnDrain(i);e.on("drain",l);var c=!1,h=!1;return i.on("data",ondata),prependListener(e,"error",onerror),e.once("close",onclose),e.once("finish",onfinish),e.emit("pipe",i),o.flowing||(d("pipe resume"),i.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var n=0;n<i;n++)r[n].emit("unpipe",this);return this}var o=indexOf(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):n(nReadingNextTick,this))}return r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,resume(this,e)),this},Readable.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this._readableState,r=!1,i=this;e.on("end",function(){if(d("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(n){if(d("wrapped data"),t.decoder&&(n=t.decoder.write(n)),(!t.objectMode||null!==n&&void 0!==n)&&(t.objectMode||n&&n.length)){i.push(n)||(r=!0,e.pause())}});for(var n in e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var o=0;o<m.length;o++)e.on(m[o],i.emit.bind(i,m[o]));return i._read=function(t){d("wrapped _read",t),r&&(r=!1,e.resume())},i},Readable._fromList=fromList}).call(t,r(22))},function(e,t,r){"use strict";function TransformState(e){this.afterTransform=function(t,r){return afterTransform(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(e,t,r){var i=e._transformState;i.transforming=!1;var n=i.writecb;if(!n)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==r&&void 0!==r&&e.push(r),n(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);i.call(this,e),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){done(t,e,r)}):done(t)})}function done(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var i=e._writableState,n=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=Transform;var i=r(17),n=r(30);n.inherits=r(16),n.inherits(Transform,i),Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},Transform.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},Transform.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,r){e.exports=r(61).EventEmitter},function(e,t,r){function assertEncoding(e){if(e&&!n(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var i=r(13).Buffer,n=i.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new i(6),this.charReceived=0,this.charLength=0};o.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived),t+=e.toString(this.encoding,0,n);var n=t.length-1,i=t.charCodeAt(n);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},o.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},o.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,i=this.charBuffer,n=this.encoding;t+=i.slice(0,r).toString(n)}return t}},function(e,t,r){"use strict";function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(e,t,r){if(e&&o.isObject(e)&&e instanceof Url)return e;var i=new Url;return i.parse(e,t,r),i}function urlFormat(e){return o.isString(e)&&(e=urlParse(e)),e instanceof Url?e.format():Url.prototype.format.call(e)}function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(242),o=r(255);t.parse=urlParse,t.resolve=urlResolve,t.resolveObject=urlResolveObject,t.format=urlFormat,t.Url=Url;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],c=["{","}","|","\\","^","`"].concat(l),h=["'"].concat(c),d=["%","/","?",";","#"].concat(h),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(245);Url.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":i(e)));var s=e.indexOf("?"),l=-1!==s&&s<e.indexOf("#")?"?":"#",c=e.split(l),x=/\\/g;c[0]=c[0].replace(x,"/"),e=c.join(l);var M=e;if(M=M.trim(),!r&&1===e.split("#").length){var w=u.exec(M);if(w)return this.path=M,this.href=M,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=a.exec(M);if(E){E=E[0];var _=E.toLowerCase();this.protocol=_,M=M.substr(E.length)}if(r||E||M.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===M.substr(0,2);!T||E&&y[E]||(M=M.substr(2),this.slashes=!0)}if(!y[E]&&(T||E&&!v[E])){for(var A=-1,S=0;S<f.length;S++){var C=M.indexOf(f[S]);-1!==C&&(-1===A||C<A)&&(A=C)}var L,D;D=-1===A?M.lastIndexOf("@"):M.lastIndexOf("@",A),-1!==D&&(L=M.slice(0,D),M=M.slice(D+1),this.auth=decodeURIComponent(L)),A=-1;for(var S=0;S<d.length;S++){var C=M.indexOf(d[S]);-1!==C&&(-1===A||C<A)&&(A=C)}-1===A&&(A=M.length),this.host=M.slice(0,A),M=M.slice(A),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var N=this.hostname.split(/\./),S=0,O=N.length;S<O;S++){var R=N[S];if(R&&!R.match(p)){for(var j="",P=0,k=R.length;P<k;P++)R.charCodeAt(P)>127?j+="x":j+=R[P];if(!j.match(p)){var B=N.slice(0,S),z=N.slice(S+1),U=R.match(m);U&&(B.push(U[1]),z.unshift(U[2])),z.length&&(M="/"+z.join(".")+M),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=n.toASCII(this.hostname));var F=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+F,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==M[0]&&(M="/"+M))}if(!g[_])for(var S=0,O=h.length;S<O;S++){var V=h[S];if(-1!==M.indexOf(V)){var H=encodeURIComponent(V);H===V&&(H=escape(V)),M=M.split(V).join(H)}}var W=M.indexOf("#");-1!==W&&(this.hash=M.substr(W),M=M.slice(0,W));var Y=M.indexOf("?");if(-1!==Y?(this.search=M.substr(Y),this.query=M.substr(Y+1),t&&(this.query=b.parse(this.query)),M=M.slice(0,Y)):t&&(this.search="",this.query={}),M&&(this.pathname=M),v[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",Q=this.search||"";this.path=F+Q}return this.href=this.format(),this},Url.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,a="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+n+r+s+i},Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()},Url.prototype.resolveObject=function(e){if(o.isString(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var r=new Url,i=Object.keys(this),n=0;n<i.length;n++){var a=i[n];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(r[l]=e[l])}return v[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!v[e.protocol]){for(var c=Object.keys(e),h=0;h<c.length;h++){var d=c[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||y[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",m=r.search||"";r.path=p+m}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=b||g||r.host&&e.pathname,M=x,w=r.pathname&&r.pathname.split("/")||[],f=e.pathname&&e.pathname.split("/")||[],E=r.protocol&&!v[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),x=x&&(""===f[0]||""===w[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(E){r.hostname=r.host=w.shift();var _=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");_&&(r.auth=_.shift(),r.host=r.hostname=_.shift())}return r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var T=w.slice(-1)[0],A=(r.host||e.host||w.length>1)&&("."===T||".."===T)||""===T,S=0,C=w.length;C>=0;C--)T=w[C],"."===T?w.splice(C,1):".."===T?(w.splice(C,1),S++):S&&(w.splice(C,1),S--);if(!x&&!M)for(;S--;S)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),A&&"/"!==w.join("/").substr(-1)&&w.push("");var L=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(E){r.hostname=r.host=L?"":w.length?w.shift():"";var _=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");_&&(r.auth=_.shift(),r.host=r.hostname=_.shift())}return x=x||r.host&&w.length,x&&!L&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},Url.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},,,function(e,t,r){"use strict";function earcut(e,t,r){r=r||2;var i=t&&t.length,n=i?t[0]*r:e.length,o=linkedList(e,0,n,r,!0),a=[];if(!o)return a;var s,u,l,c,h,d,f;if(i&&(o=eliminateHoles(e,t,o,r)),e.length>80*r){s=l=e[0],u=c=e[1];for(var p=r;p<n;p+=r)h=e[p],d=e[p+1],h<s&&(s=h),d<u&&(u=d),h>l&&(l=h),d>c&&(c=d);f=Math.max(l-s,c-u)}return earcutLinked(o,a,r,s,u,f),a}function linkedList(e,t,r,i,n){var o,a;if(n===signedArea(e,t,r,i)>0)for(o=t;o<r;o+=i)a=insertNode(o,e[o],e[o+1],a);else for(o=r-i;o>=t;o-=i)a=insertNode(o,e[o],e[o+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!equals(i,i.next)&&0!==area(i.prev,i,i.next))i=i.next;else{if(removeNode(i),(i=t=i.prev)===i.next)return null;r=!0}}while(r||i!==t);return t}function earcutLinked(e,t,r,i,n,o,a){if(e){!a&&o&&indexCurve(e,i,n,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?isEarHashed(e,i,n,o):isEar(e))t.push(s.i/r),t.push(e.i/r),t.push(u.i/r),removeNode(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?(e=cureLocalIntersections(e,t,r),earcutLinked(e,t,r,i,n,o,2)):2===a&&splitEarcut(e,t,r,i,n,o):earcutLinked(filterPoints(e),t,r,i,n,o,1);break}}}function isEar(e){var t=e.prev,r=e,i=e.next;if(area(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(pointInTriangle(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function isEarHashed(e,t,r,i){var n=e.prev,o=e,a=e.next;if(area(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,u=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,l=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,h=zOrder(s,u,t,r,i),d=zOrder(l,c,t,r,i),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&pointInTriangle(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&pointInTriangle(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function cureLocalIntersections(e,t,r){var i=e;do{var n=i.prev,o=i.next.next;!equals(n,o)&&intersects(n,i,i.next,o)&&locallyInside(n,o)&&locallyInside(o,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(o.i/r),removeNode(i),removeNode(i.next),i=e=o),i=i.next}while(i!==e);return i}function splitEarcut(e,t,r,i,n,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&isValidDiagonal(a,s)){var u=splitPolygon(a,s);return a=filterPoints(a,a.next),u=filterPoints(u,u.next),earcutLinked(a,t,r,i,n,o),void earcutLinked(u,t,r,i,n,o)}s=s.next}a=a.next}while(a!==e)}function eliminateHoles(e,t,r,i){var n,o,a,s,u,l=[];for(n=0,o=t.length;n<o;n++)a=t[n]*i,s=n<o-1?t[n+1]*i:e.length,u=linkedList(e,a,s,i,!1),u===u.next&&(u.steiner=!0),l.push(getLeftmost(u));for(l.sort(compareX),n=0;n<l.length;n++)eliminateHole(l[n],r),r=filterPoints(r,r.next);return r}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){if(t=findHoleBridge(e,t)){var r=splitPolygon(t,e);filterPoints(r,r.next)}}function findHoleBridge(e,t){var r,i=t,n=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(n===a)return r.prev;var u,l=r,c=r.x,h=r.y,d=1/0;for(i=r.next;i!==l;)n>=i.x&&i.x>=c&&pointInTriangle(o<h?n:a,o,c,h,o<h?a:n,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(n-i.x))<d||u===d&&i.x>r.x)&&locallyInside(i,e)&&(r=i,d=u),i=i.next;return r}function indexCurve(e,t,r,i){var n=e;do{null===n.z&&(n.z=zOrder(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,sortLinked(n)}function sortLinked(e){var t,r,i,n,o,a,s,u,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,i=r,s=0,t=0;t<l&&(s++,i=i.nextZ);t++);for(u=l;s>0||u>0&&i;)0===s?(n=i,i=i.nextZ,u--):0!==u&&i?r.z<=i.z?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,u--):(n=r,r=r.nextZ,s--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;r=i}o.nextZ=null,l*=2}while(a>1);return e}function zOrder(e,t,r,i,n){return e=32767*(e-r)/n,t=32767*(t-i)/n,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function getLeftmost(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function pointInTriangle(e,t,r,i,n,o,a,s){return(n-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)}function area(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,i){return!!(equals(e,t)&&equals(r,i)||equals(e,i)&&equals(r,t))||area(e,t,r)>0!=area(e,t,i)>0&&area(r,i,e)>0!=area(r,i,t)>0}function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var r=e,i=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),i=new Node(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function insertNode(e,t,r,i){var n=new Node(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,t,r,i){for(var n=0,o=t,a=r-i;o<r;o+=i)n+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return n}e.exports=earcut,earcut.deviation=function(e,t,r,i){var n=t&&t.length,o=n?t[0]*r:e.length,a=Math.abs(signedArea(e,0,o,r));if(n)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,c=s<u-1?t[s+1]*r:e.length;a-=Math.abs(signedArea(e,l,c,r))}var h=0;for(s=0;s<i.length;s+=3){var d=i[s]*r,f=i[s+1]*r,p=i[s+2]*r;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},earcut.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[n][o][a]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r}},function(e,t,r){"use strict";var i=r(3),n=r(15),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,r,n,a,s,u,l,c=[],h=0,d=e.length,f=d,p="string"!==i.getTypeOf(e);h<e.length;)f=d-h,p?(t=e[h++],r=h<d?e[h++]:0,n=h<d?e[h++]:0):(t=e.charCodeAt(h++),r=h<d?e.charCodeAt(h++):0,n=h<d?e.charCodeAt(h++):0),a=t>>2,s=(3&t)<<4|r>>4,u=f>1?(15&r)<<2|n>>6:64,l=f>2?63&n:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(l));return c.join("")},t.decode=function(e){var t,r,i,a,s,u,l,c=0,h=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var d=3*e.length/4;if(e.charAt(e.length-1)===o.charAt(64)&&d--,e.charAt(e.length-2)===o.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");var f;for(f=n.uint8array?new Uint8Array(0|d):new Array(0|d);c<e.length;)a=o.indexOf(e.charAt(c++)),s=o.indexOf(e.charAt(c++)),u=o.indexOf(e.charAt(c++)),l=o.indexOf(e.charAt(c++)),t=a<<2|s>>4,r=(15&s)<<4|u>>2,i=(3&u)<<6|l,f[h++]=t,64!==u&&(f[h++]=r),64!==l&&(f[h++]=i);return f}},function(e,t,r){"use strict";var i=r(8);t.STORE={magic:"\0\0",compressWorker:function(e){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},t.DEFLATE=r(275)},function(e,t,r){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,r){e.exports=r(253)},function(e,t,r){"use strict";function ArrayReader(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}var i=r(118);r(3).inherits(ArrayReader,i),ArrayReader.prototype.byteAt=function(e){return this.data[this.zero+e]},ArrayReader.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===i&&this.data[o+3]===n)return o-this.zero;return-1},ArrayReader.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&r===o[1]&&i===o[2]&&n===o[3]},ArrayReader.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=ArrayReader},function(e,t,r){"use strict";function DataReader(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}var i=r(3);DataReader.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=DataReader},function(e,t,r){"use strict";function Uint8ArrayReader(e){i.call(this,e)}var i=r(117);r(3).inherits(Uint8ArrayReader,i),Uint8ArrayReader.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=Uint8ArrayReader},function(e,t,r){"use strict";var i=r(3),n=r(15),o=r(117),a=r(284),s=r(283),u=r(119);e.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new s(e):n.uint8array?new u(i.transformTo("uint8array",e)):new o(i.transformTo("array",e)):new a(e)}},function(e,t,r){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},function(e,t,r){"use strict";function Crc32Probe(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var i=r(8),n=r(70);r(3).inherits(Crc32Probe,i),Crc32Probe.prototype.processChunk=function(e){this.streamInfo.crc32=n(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=Crc32Probe},function(e,t,r){"use strict";function DataLengthProbe(e){n.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}var i=r(3),n=r(8);i.inherits(DataLengthProbe,n),DataLengthProbe.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}n.prototype.processChunk.call(this,e)},e.exports=DataLengthProbe},function(e,t,r){"use strict";function DataWorker(e){n.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}var i=r(3),n=r(8);i.inherits(DataWorker,n),DataWorker.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},DataWorker.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},DataWorker.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},DataWorker.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=DataWorker},function(e,t,r){"use strict";(function(t){function transformZipOutput(e,t,r,n){var o=null;switch(e){case"blob":return i.newBlob(r,n);case"base64":return o=concat(t,r),a.encode(o);default:return o=concat(t,r),i.transformTo(e,o)}}function concat(e,r){var i,n=0,o=null,a=0;for(i=0;i<r.length;i++)a+=r[i].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(o=new Uint8Array(a),i=0;i<r.length;i++)o.set(r[i],n),n+=r[i].length;return o;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}function _accumulate(e,t){return new u.Promise(function(r,i){var n=[],o=e._internalType,a=e._outputType,s=e._mimeType;e.on("data",function(e,r){n.push(e),t&&t(r)}).on("error",function(e){n=[],i(e)}).on("end",function(){try{var e=transformZipOutput(a,o,n,s);r(e)}catch(e){i(e)}n=[]}).resume()})}function StreamHelper(e,t,r){var a=t;switch(t){case"blob":a="arraybuffer";break;case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=r,i.checkSupport(a),this._worker=e.pipe(new n(a)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}var i=r(3),n=r(285),o=r(8),a=r(113),s=r(15),u=r(31),l=null;if(s.nodestream)try{l=r(281)}catch(e){}StreamHelper.prototype={accumulate:function(e){return _accumulate(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){i.delay(t,arguments,r)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=StreamHelper}).call(t,r(13).Buffer)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _addMiniSignalBinding(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=function(){function MiniSignalBinding(e,t,r){void 0===t&&(t=!1),_classCallCheck(this,MiniSignalBinding),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return i(MiniSignalBinding,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),MiniSignalBinding}(),o=function(){function MiniSignal(){_classCallCheck(this,MiniSignal),this._head=this._tail=void 0}return i(MiniSignal,[{key:"handlers",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r}},{key:"has",value:function(e){if(!(e instanceof n))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new n(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new n(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof n))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),MiniSignal}();o.MiniSignalBinding=n,t.default=o,e.exports=t.default},function(e,t,r){"use strict";e.exports=function(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[t.strictMode?"strict":"loose"].exec(e),n={},o=14;o--;)n[r.key[o]]=i[o]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(e,t,i){t&&(n[r.q.name][t]=i)}),n}},function(e,t){var r=function(e,t,r,i,n){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=r||-1,this.format=i||e.RGBA,this.type=n||e.UNSIGNED_BYTE};r.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=e.videoWidth||e.width,i=e.videoHeight||e.height;i!==this.height||r!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=r,this.height=i};var i=!1;r.prototype.uploadData=function(e,t,r){this.bind();var n=this.gl;if(e instanceof Float32Array){if(!i){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,t,r,0,this.format,this.type,e||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,this.format,this.type,e||null),this.width=t,this.height=r},r.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},r.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},r.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},r.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},r.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},r.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},r.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},r.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},r.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},r.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},r.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},r.fromSource=function(e,t,i){var n=new r(e);return n.premultiplyAlpha=i||!1,n.upload(t),n},r.fromData=function(e,t,i,n){var o=new r(e);return o.uploadData(t,i,n),o},e.exports=r},function(e,t){var r=function(e,t,r){var i;if(r){var n=r.tempAttribState,o=r.attribState;for(i=0;i<n.length;i++)n[i]=!1;for(i=0;i<t.length;i++)n[t[i].attribute.location]=!0;for(i=0;i<o.length;i++)o[i]!==n[i]&&(o[i]=n[i],r.attribState[i]?e.enableVertexAttribArray(i):e.disableVertexAttribArray(i))}else for(i=0;i<t.length;i++){var a=t[i];e.enableVertexAttribArray(a.attribute.location)}};e.exports=r},function(e,t){var r=function(e,t,r,n){var o=i(e,e.VERTEX_SHADER,t),a=i(e,e.FRAGMENT_SHADER,r),s=e.createProgram();if(e.attachShader(s,o),e.attachShader(s,a),n)for(var u in n)e.bindAttribLocation(s,n[u],u);return e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(s,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(s)),e.deleteProgram(s),s=null),e.deleteShader(o),e.deleteShader(a),s},i=function(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.log(e.getShaderInfoLog(i)),null)};e.exports=r},function(e,t){var r=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return i(2*t);case"bvec3":return i(3*t);case"bvec4":return i(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i=function(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t};e.exports=r},function(e,t,r){var i=r(71),n=r(135),o=function(e,t){for(var r={},o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var u=e.getActiveAttrib(t,s),l=i(e,u.type);r[u.name]={type:l,size:n(l),location:e.getAttribLocation(t,u.name),pointer:a}}return r},a=function(e,t,r,i){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,r||0,i||0)};e.exports=o},function(e,t,r){var i=r(71),n=r(131),o=function(e,t){for(var r={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<o;a++){var s=e.getActiveUniform(t,a),u=s.name.replace(/\[.*?\]/,""),l=i(e,s.type);r[u]={type:l,size:s.size,location:e.getUniformLocation(t,u),value:n(l,s.size)}}return r};e.exports=o},function(e,t){var r=function(e,t){var r={data:{}};r.gl=e;for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s],l=u.split("."),c=l[l.length-1],h=o(l,r),d=t[u];h.data[c]=d,h.gl=e,Object.defineProperty(h,c,{get:i(c),set:n(c,d)})}return r},i=function(e){var t=a.replace("%%",e);return new Function(t)},n=function(e,t){var r,i=s.replace(/%%/g,e);return r=1===t.size?u[t.type]:l[t.type],r&&(i+="\nthis.gl."+r+";"),new Function("value",i)},o=function(e,t){for(var r=t,i=0;i<e.length-1;i++){var n=r[e[i]]||{data:{}};r[e[i]]=n,r=n}return r},a=["return this.data.%%.value;"].join("\n"),s=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),u={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},l={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};e.exports=r},function(e,t){var r=function(e){return i[e]},i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=r},function(e,t){var r=function(e,t){return"precision"!==e.substring(0,9)?"precision "+t+" float;\n"+e:e};e.exports=r},function(e,t,r){"use strict";t.__esModule=!0,t.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(139),o=r(33),a=_interopRequireDefault(o),s=r(80),u=r(4),l=_interopRequireDefault(u),c=r(0),h=function(){function Application(e,t,r,i,o){_classCallCheck(this,Application),"number"==typeof e&&(e=Object.assign({width:e,height:t||l.default.RENDER_OPTIONS.height,forceCanvas:!!i,sharedTicker:!!o},r)),this._options=e=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,n.autoDetectRenderer)(e),this.stage=new a.default,this._ticker=null,this.ticker=e.sharedTicker?s.shared:new s.Ticker,this.start()}return Application.prototype.render=function(){this.renderer.render(this.stage)},Application.prototype.stop=function(){this._ticker.stop()},Application.prototype.start=function(){this._ticker.start()},Application.prototype.destroy=function(e){var t=this._ticker;this.ticker=null,t.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},i(Application,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,c.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),Application}();t.default=h},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function autoDetectRenderer(e,t,r,i){var o=e&&e.forceCanvas;return void 0!==i&&(o=i),!o&&n.isWebGLSupported()?new u.default(e,t,r):new a.default(e,t,r)}t.__esModule=!0,t.autoDetectRenderer=autoDetectRenderer;var i=r(2),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=r(34),a=_interopRequireDefault(o),s=r(45),u=_interopRequireDefault(s)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(18),a=_interopRequireDefault(o),s=r(0),u=r(4),l=_interopRequireDefault(u),c=r(142),h=_interopRequireDefault(c),d=r(141),f=_interopRequireDefault(d),p=r(72),m=_interopRequireDefault(p),g=r(5),y=function(e){function DisplayObject(){_classCallCheck(this,DisplayObject);var t=_possibleConstructorReturn(this,e.call(this)),r=l.default.TRANSFORM_MODE===s.TRANSFORM_MODE.STATIC?h.default:f.default;return t.tempDisplayObjectParent=null,t.transform=new r,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t.filterArea=null,t._filters=null,t._enabledFilters=null,t._bounds=new m.default,t._boundsID=0,t._lastBoundsID=-1,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t}return _inherits(DisplayObject,e),DisplayObject.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},DisplayObject.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new g.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},DisplayObject.prototype.getLocalBounds=function(e){var t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new g.Rectangle),e=this._localBoundsRect);var i=this.getBounds(!1,e);return this.parent=r,this.transform=t,i},DisplayObject.prototype.toGlobal=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},DisplayObject.prototype.toLocal=function(e,t,r,i){return t&&(e=t.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)},DisplayObject.prototype.renderWebGL=function(e){},DisplayObject.prototype.renderCanvas=function(e){},DisplayObject.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},DisplayObject.prototype.setTransform=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},DisplayObject.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},n(DisplayObject,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new DisplayObject),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),DisplayObject}(a.default);t.default=y,y.prototype.displayObjectUpdateTransform=y.prototype.updateTransform},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(5),a=r(73),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function Transform(){_classCallCheck(this,Transform);var t=_possibleConstructorReturn(this,e.call(this));return t.position=new o.Point(0,0),t.scale=new o.Point(1,1),t.skew=new o.ObservablePoint(t.updateSkew,t,0,0),t.pivot=new o.Point(0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t}return _inherits(Transform,e),Transform.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},Transform.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},Transform.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var r=e.worldTransform,i=this.worldTransform;i.a=t.a*r.a+t.b*r.c,i.b=t.a*r.b+t.b*r.d,i.c=t.c*r.a+t.d*r.c,i.d=t.c*r.b+t.d*r.d,i.tx=t.tx*r.a+t.ty*r.c+r.tx,i.ty=t.tx*r.b+t.ty*r.d+r.ty,this._worldID++},Transform.prototype.setFromMatrix=function(e){e.decompose(this)},n(Transform,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),Transform}(s.default);t.default=u},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(5),a=r(73),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function TransformStatic(){_classCallCheck(this,TransformStatic);var t=_possibleConstructorReturn(this,e.call(this));return t.position=new o.ObservablePoint(t.onChange,t,0,0),t.scale=new o.ObservablePoint(t.onChange,t,1,1),t.pivot=new o.ObservablePoint(t.onChange,t,0,0),t.skew=new o.ObservablePoint(t.updateSkew,t,0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t._localID=0,t._currentLocalID=0,t}return _inherits(TransformStatic,e),TransformStatic.prototype.onChange=function(){this._localID++},TransformStatic.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},TransformStatic.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},TransformStatic.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,i=this.worldTransform;i.a=t.a*r.a+t.b*r.c,i.b=t.a*r.b+t.b*r.d,i.c=t.c*r.a+t.d*r.c,i.d=t.c*r.b+t.d*r.d,i.tx=t.tx*r.a+t.ty*r.c+r.tx,i.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},TransformStatic.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},n(TransformStatic,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),TransformStatic}(s.default);t.default=u},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function GraphicsData(e,t,r,i,n,o,a,s){_classCallCheck(this,GraphicsData),this.lineWidth=e,this.nativeLines=a,this.lineColor=t,this.lineAlpha=r,this._lineTint=t,this.fillColor=i,this.fillAlpha=n,this._fillTint=i,this.fill=o,this.holes=[],this.shape=s,this.type=s.type}return GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},GraphicsData.prototype.addHole=function(e){this.holes.push(e)},GraphicsData.prototype.destroy=function(){this.shape=null,this.holes=null},GraphicsData}();t.default=i},function(e,t,r){"use strict";function signum(e){return e<0?-1:e>0?1:0}t.__esModule=!0;var i=r(74),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],s=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],c=[];!function(){for(var e=0;e<16;e++){var t=[];c.push(t);for(var r=0;r<16;r++)for(var i=signum(o[e]*o[r]+s[e]*a[r]),h=signum(a[e]*o[r]+u[e]*a[r]),d=signum(o[e]*s[r]+s[e]*u[r]),f=signum(a[e]*s[r]+u[e]*u[r]),p=0;p<16;p++)if(o[p]===i&&a[p]===h&&s[p]===d&&u[p]===f){t.push(p);break}}for(var m=0;m<16;m++){var g=new n.default;g.set(o[m],a[m],s[m],u[m],0,0),l.push(g)}}();var h={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return o[e]},uY:function(e){return a[e]},vX:function(e){return s[e]},vY:function(e){return u[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return c[e][t]},sub:function(e,t){return c[e][h.inv(t)]},rotate180:function(e){return 4^e},isSwapWidthHeight:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?h.S:h.N:2*Math.abs(t)<=Math.abs(e)?e>0?h.E:h.W:t>0?e>0?h.SE:h.SW:e>0?h.NE:h.NW},matrixAppendRotationInv:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=l[h.inv(t)];n.tx=r,n.ty=i,e.append(n)}};t.default=h},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=function(){function ObservablePoint(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,ObservablePoint),this._x=r,this._y=i,this.cb=e,this.scope=t}return ObservablePoint.prototype.set=function(e,t){var r=e||0,i=t||(0!==t?r:0);this._x===r&&this._y===i||(this._x=r,this._y=i,this.cb.call(this.scope))},ObservablePoint.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},i(ObservablePoint,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),ObservablePoint}();t.default=n},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(2),a=r(5),s=r(0),u=r(4),l=_interopRequireDefault(u),c=r(33),h=_interopRequireDefault(c),d=r(79),f=_interopRequireDefault(d),p=r(18),m=_interopRequireDefault(p),g=new a.Matrix,y=function(e){function SystemRenderer(t,r,i,n){_classCallCheck(this,SystemRenderer);var u=_possibleConstructorReturn(this,e.call(this));return(0,o.sayHello)(t),"number"==typeof r&&(r=Object.assign({width:r,height:i||l.default.RENDER_OPTIONS.height},n)),r=Object.assign({},l.default.RENDER_OPTIONS,r),u.options=r,u.type=s.RENDERER_TYPE.UNKNOWN,u.screen=new a.Rectangle(0,0,r.width,r.height),u.view=r.view||document.createElement("canvas"),u.resolution=r.resolution||l.default.RESOLUTION,u.transparent=r.transparent,u.autoResize=r.autoResize||!1,u.blendModes=null,u.preserveDrawingBuffer=r.preserveDrawingBuffer,u.clearBeforeRender=r.clearBeforeRender,u.roundPixels=r.roundPixels,u._backgroundColor=0,u._backgroundColorRgba=[0,0,0,0],u._backgroundColorString="#000000",u.backgroundColor=r.backgroundColor||u._backgroundColor,u._tempDisplayObjectParent=new h.default,u._lastObjectRendered=u._tempDisplayObjectParent,u}return _inherits(SystemRenderer,e),SystemRenderer.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},SystemRenderer.prototype.generateTexture=function(e,t,r){var i=e.getLocalBounds(),n=f.default.create(0|i.width,0|i.height,t,r);return g.tx=-i.x,g.ty=-i.y,this.render(e,n,!1,g,!0),n},SystemRenderer.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},n(SystemRenderer,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,o.hex2string)(e),(0,o.hex2rgb)(e,this._backgroundColorRgba)}}]),SystemRenderer}(m.default);t.default=y},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){function CanvasRenderTarget(e,t,r){_classCallCheck(this,CanvasRenderTarget),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||o.default.RESOLUTION,this.resize(e,t)}return CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},i(CanvasRenderTarget,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),CanvasRenderTarget}();t.default=a},function(e,t,r){"use strict";function createColoredCanvas(e){var t=document.createElement("canvas");t.width=6,t.height=1;var r=t.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,6,1),t}function canUseNewCanvasBlendModes(){if("undefined"==typeof document)return!1;var e=createColoredCanvas("#ff00ff"),t=createColoredCanvas("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var i=r.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(e,0,0),i.drawImage(t,2,0);var n=i.getImageData(2,0,1,1);if(!n)return!1;var o=n.data;return 255===o[0]&&0===o[1]&&0===o[2]}t.__esModule=!0,t.default=canUseNewCanvasBlendModes},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(317),o=_interopRequireDefault(n),a=r(2),s=r(0),u=r(4),l=_interopRequireDefault(u),c={},h=function(){function Filter(e,t,r){_classCallCheck(this,Filter),this.vertexSrc=e||Filter.defaultVertexSrc,this.fragmentSrc=t||Filter.defaultFragmentSrc,this.blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,o.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var i in this.uniformData)this.uniforms[i]=this.uniformData[i].value;this.glShaders={},c[this.vertexSrc+this.fragmentSrc]||(c[this.vertexSrc+this.fragmentSrc]=(0,a.uid)()),this.glShaderKey=c[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=l.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return Filter.prototype.apply=function(e,t,r,i,n){e.applyFilter(this,t,r,i)},i(Filter,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),Filter}();t.default=h},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(149),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=r(5),s=(r(11),function(e){function SpriteMaskFilter(t){_classCallCheck(this,SpriteMaskFilter);var r=new a.Matrix,i=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,i.maskSprite=t,i.maskMatrix=r,i}return _inherits(SpriteMaskFilter,e),SpriteMaskFilter.prototype.apply=function(e,t,r){var i=this.maskSprite;this.uniforms.mask=i._texture,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i),this.uniforms.alpha=i.worldAlpha,e.applyFilter(this,t,r)},SpriteMaskFilter}(o.default));t.default=s},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(9),n=_interopRequireDefault(i),o=r(81),a=_interopRequireDefault(o),s=function(){function Quad(e,t){_classCallCheck(this,Quad),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,a.default)(1),this.vertexBuffer=n.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new n.default.VertexArrayObject(e,t)}return Quad.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},Quad.prototype.map=function(e,t){var r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+t.width/e.width,this.uvs[3]=i,this.uvs[4]=r+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=r,this.uvs[7]=i+t.height/e.height,r=t.x,i=t.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+t.width,this.vertices[3]=i,this.vertices[4]=r+t.width,this.vertices[5]=i+t.height,this.vertices[6]=r,this.vertices[7]=i+t.height,this},Quad.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},Quad.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},Quad}();t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function TextMetrics(e,t,r,i,n,o,a,s,u){_classCallCheck(this,TextMetrics),this.text=e,this.style=t,this.width=r,this.height=i,this.lines=n,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u}return TextMetrics.measureText=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:TextMetrics._canvas;r=r||t.wordWrap;var n=t.toFontString(),o=TextMetrics.measureFont(n),a=i.getContext("2d");a.font=n;for(var s=r?TextMetrics.wordWrap(e,t,i):e,u=s.split(/(?:\r\n|\r|\n)/),l=new Array(u.length),c=0,h=0;h<u.length;h++){var d=a.measureText(u[h]).width+(u[h].length-1)*t.letterSpacing;l[h]=d,c=Math.max(c,d)}var f=c+t.strokeThickness;t.dropShadow&&(f+=t.dropShadowDistance);var p=t.lineHeight||o.fontSize+t.strokeThickness,m=Math.max(p,o.fontSize+t.strokeThickness)+(u.length-1)*p;return t.dropShadow&&(m+=t.dropShadowDistance),new TextMetrics(e,t,f,m,u,l,p,c,o)},TextMetrics.wordWrap=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TextMetrics._canvas,i=r.getContext("2d"),n="",o=e.split("\n"),a=t.wordWrapWidth,s={},u=0;u<o.length;u++){for(var l=a,c=o[u].split(" "),h=0;h<c.length;h++){var d=i.measureText(c[h]).width;if(t.breakWords&&d>a)for(var f=c[h].split(""),p=0;p<f.length;p++){var m=f[p],g=s[m];void 0===g&&(g=i.measureText(m).width,s[m]=g),g>l?(n+="\n"+m,l=a-g):(0===p&&(n+=" "),n+=m,l-=g)}else{var y=d+i.measureText(" ").width;0===h||y>l?(h>0&&(n+="\n"),n+=c[h],l=a-d):(l-=y,n+=" "+c[h])}}u<o.length-1&&(n+="\n")}return n},TextMetrics.measureFont=function(e){if(TextMetrics._fonts[e])return TextMetrics._fonts[e];var t={},r=TextMetrics._canvas,i=TextMetrics._context;i.font=e;var n=Math.ceil(i.measureText("|MÉq").width),o=Math.ceil(i.measureText("M").width),a=2*o;o=1.4*o|0,r.width=n,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,n,a),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|MÉq",0,o);var s=i.getImageData(0,0,n,a).data,u=s.length,l=4*n,c=0,h=0,d=!1;for(c=0;c<o;++c){for(var f=0;f<l;f+=4)if(255!==s[h+f]){d=!0;break}if(d)break;h+=l}for(t.ascent=o-c,h=u-l,d=!1,c=a;c>o;--c){for(var p=0;p<l;p+=4)if(255!==s[h+p]){d=!0;break}if(d)break;h-=l}return t.descent=c-o,t.fontSize=t.ascent+t.descent,TextMetrics._fonts[e]=t,t},TextMetrics}();t.default=i;var n=document.createElement("canvas");n.width=n.height=10,i._canvas=n,i._context=n.getContext("2d"),i._fonts={}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getSingleColor(e){return"number"==typeof e?(0,o.hex2string)(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function getColor(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=getSingleColor(e[t]);return e}return getSingleColor(e)}function areArraysEqual(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(0),o=r(2),a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:n.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},s=function(){function TextStyle(e){_classCallCheck(this,TextStyle),this.styleID=0,Object.assign(this,a,e)}return TextStyle.prototype.clone=function(){var e={};for(var t in a)e[t]=this[t];return new TextStyle(e)},TextStyle.prototype.reset=function(){Object.assign(this,a)},TextStyle.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var i=t[r].trim();/([\"\'])[^\'\"]+\1/.test(i)||(i='"'+i+'"'),t[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},i(TextStyle,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=getColor(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=getColor(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){areArraysEqual(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=getColor(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),TextStyle}();t.default=s},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(24),o=_interopRequireDefault(n),a=r(4),s=_interopRequireDefault(a),u=function(e){function BaseRenderTexture(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments[2],n=arguments[3];_classCallCheck(this,BaseRenderTexture);var o=_possibleConstructorReturn(this,e.call(this,null,i));return o.resolution=n||s.default.RESOLUTION,o.width=t,o.height=r,o.realWidth=o.width*o.resolution,o.realHeight=o.height*o.resolution,o.scaleMode=void 0!==i?i:s.default.SCALE_MODE,o.hasLoaded=!0,o._glRenderTargets={},o._canvasRenderTarget=null,o.valid=!1,o}return _inherits(BaseRenderTexture,e),BaseRenderTexture.prototype.resize=function(e,t){e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},BaseRenderTexture.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},BaseRenderTexture}(o.default);t.default=u},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(144),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function(){function TextureUvs(){_classCallCheck(this,TextureUvs),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return TextureUvs.prototype.set=function(e,t,r){var i=t.width,o=t.height;if(r){var a=e.width/2/i,s=e.height/2/o,u=e.x/i+a,l=e.y/o+s;r=n.default.add(r,n.default.NW),this.x0=u+a*n.default.uX(r),this.y0=l+s*n.default.uY(r),r=n.default.add(r,2),this.x1=u+a*n.default.uX(r),this.y1=l+s*n.default.uY(r),r=n.default.add(r,2),this.x2=u+a*n.default.uX(r),this.y2=l+s*n.default.uY(r),r=n.default.add(r,2),this.x3=u+a*n.default.uX(r),this.y3=l+s*n.default.uY(r)}else this.x0=e.x/i,this.y0=e.y/o,this.x1=(e.x+e.width)/i,this.y1=e.y/o,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/o,this.x3=e.x/i,this.y3=(e.y+e.height)/o;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},TextureUvs}();t.default=o},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function createSource(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=t,r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(24),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(2),u=r(80),l=r(0),c=function(e){function VideoBaseTexture(t,r){if(_classCallCheck(this,VideoBaseTexture),!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0);var i=_possibleConstructorReturn(this,e.call(this,t,r));return i.width=t.videoWidth,i.height=t.videoHeight,i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=!0,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),t.addEventListener("play",i._onPlayStart.bind(i)),t.addEventListener("pause",i._onPlayStop.bind(i)),i.hasLoaded=!1,i.__loaded=!1,i._isSourceReady()?i._onCanPlay():(t.addEventListener("canplay",i._onCanPlay),t.addEventListener("canplaythrough",i._onCanPlay)),i}return _inherits(VideoBaseTexture,e),VideoBaseTexture.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},VideoBaseTexture.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},VideoBaseTexture.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(u.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},VideoBaseTexture.prototype._onPlayStop=function(){this._isAutoUpdating&&(u.shared.remove(this.update,this),this._isAutoUpdating=!1)},VideoBaseTexture.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},VideoBaseTexture.prototype.destroy=function(){this._isAutoUpdating&&u.shared.remove(this.update,this),this.source&&this.source._pixiId&&(a.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),e.prototype.destroy.call(this)},VideoBaseTexture.fromVideo=function(e,t){e._pixiId||(e._pixiId="video_"+(0,s.uid)());var r=s.BaseTextureCache[e._pixiId];return r||(r=new VideoBaseTexture(e,t),a.default.addToCache(r,e._pixiId)),r},VideoBaseTexture.fromUrl=function(e,t){var r=document.createElement("video");if(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),Array.isArray(e))for(var i=0;i<e.length;++i)r.appendChild(createSource(e[i].src||e[i],e[i].mime));else r.appendChild(createSource(e.src||e,e.mime));return r.load(),VideoBaseTexture.fromVideo(r,t)},n(VideoBaseTexture,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(u.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(u.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),VideoBaseTexture}(a.default);t.default=c,c.fromUrls=c.fromUrl},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.BitmapText=t.TilingSpriteRenderer=t.TilingSprite=t.TextureTransform=t.AnimatedSprite=void 0;var i=r(345);Object.defineProperty(t,"AnimatedSprite",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(82);Object.defineProperty(t,"TextureTransform",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var o=r(347);Object.defineProperty(t,"TilingSprite",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(351);Object.defineProperty(t,"TilingSpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(346);Object.defineProperty(t,"BitmapText",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}}),r(348),r(349),r(350)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=r(161),u=_interopRequireDefault(s),l=r(160),c=_interopRequireDefault(l),h=r(162),d=_interopRequireDefault(h),f=function(e){function BlurXFilter(t,r,i,n){_classCallCheck(this,BlurXFilter),n=n||5;var o=(0,u.default)(n,!0),s=(0,c.default)(n),l=_possibleConstructorReturn(this,e.call(this,o,s));return l.resolution=i||a.settings.RESOLUTION,l._quality=0,l.quality=r||4,l.strength=t||8,l.firstRun=!0,l}return _inherits(BlurXFilter,e),BlurXFilter.prototype.apply=function(e,t,r,i){if(this.firstRun){var n=e.renderer.gl,o=(0,d.default)(n);this.vertexSrc=(0,u.default)(o,!0),this.fragmentSrc=(0,c.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,i);else{for(var a=e.getRenderTarget(!0),s=t,l=a,h=0;h<this.passes-1;h++){e.applyFilter(this,s,l,!0);var f=l;l=s,s=f}e.applyFilter(this,s,r,i),e.returnRenderTarget(a)}},n(BlurXFilter,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),BlurXFilter}(a.Filter);t.default=f},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=r(161),u=_interopRequireDefault(s),l=r(160),c=_interopRequireDefault(l),h=r(162),d=_interopRequireDefault(h),f=function(e){function BlurYFilter(t,r,i,n){_classCallCheck(this,BlurYFilter),n=n||5;var o=(0,u.default)(n,!1),s=(0,c.default)(n),l=_possibleConstructorReturn(this,e.call(this,o,s));return l.resolution=i||a.settings.RESOLUTION,l._quality=0,l.quality=r||4,l.strength=t||8,l.firstRun=!0,l}return _inherits(BlurYFilter,e),BlurYFilter.prototype.apply=function(e,t,r,i){if(this.firstRun){var n=e.renderer.gl,o=(0,d.default)(n);this.vertexSrc=(0,u.default)(o,!1),this.fragmentSrc=(0,c.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,i);else{for(var a=e.getRenderTarget(!0),s=t,l=a,h=0;h<this.passes-1;h++){e.applyFilter(this,s,l,!0);var f=l;l=s,s=f}e.applyFilter(this,s,r,i),e.returnRenderTarget(a)}},n(BlurYFilter,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),BlurYFilter}(a.Filter);t.default=f},function(e,t,r){"use strict";function generateFragBlurSource(e){for(var t=i[e],r=t.length,o=n,a="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",u=void 0,l=0;l<e;l++){var c=s.replace("%index%",l);u=l,l>=r&&(u=e-l-1),c=c.replace("%value%",t[u]),a+=c,a+="\n"}return o=o.replace("%blur%",a),o=o.replace("%size%",e)}t.__esModule=!0,t.default=generateFragBlurSource;var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},n=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(e,t,r){"use strict";function generateVertBlurSource(e,t){var r=Math.ceil(e/2),n=i,o="",a=void 0;a=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<e;s++){var u=a.replace("%index%",s);u=u.replace("%sampleIndex%",s-(r-1)+".0"),o+=u,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",e)}t.__esModule=!0,t.default=generateVertBlurSource;var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(e,t,r){"use strict";function getMaxKernelSize(e){for(var t=e.getParameter(e.MAX_VARYING_VECTORS),r=15;r>t;)r-=2;return r}t.__esModule=!0,t.default=getMaxKernelSize},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(1),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=function(){function InteractionData(){_classCallCheck(this,InteractionData),this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return InteractionData.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},InteractionData.prototype._copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=e.buttons,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},InteractionData.prototype._reset=function(){this.isPrimary=!1},i(InteractionData,[{key:"pointerId",get:function(){return this.identifier}}]),InteractionData}();t.default=a},function(e,t,r){"use strict";t.__esModule=!0,t.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(e,t,r){"use strict";function parse(e,t){e.bitmapFont=s.BitmapText.registerFont(e.data,t)}t.__esModule=!0,t.parse=parse,t.default=function(){return function(e,t){if(!e.data||e.type!==a.Resource.TYPE.XML)return void t();if(0===e.data.getElementsByTagName("page").length||0===e.data.getElementsByTagName("info").length||null===e.data.getElementsByTagName("info")[0].getAttribute("face"))return void t();var r=e.isDataUrl?"":n.dirname(e.url);e.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/"),r=r.replace(this.baseUrl,""))),r&&"/"!==r.charAt(r.length-1)&&(r+="/");var i=r+e.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[i])parse(e,o.utils.TextureCache[i]),t();else{var s={crossOrigin:e.crossOrigin,loadType:a.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",i,s,function(r){parse(e,r.texture),t()})}}};var i=r(11),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=r(1),a=r(37),s=r(157)},function(e,t,r){"use strict";function getResourcePath(e,t){return e.isDataUrl?e.data.meta.image:o.default.resolve(e.url.replace(t,""),e.data.meta.image)}t.__esModule=!0,t.default=function(){return function(e,t){var r=e.name+"_image";if(!e.data||e.type!==i.Resource.TYPE.JSON||!e.data.frames||this.resources[r])return void t();var n={crossOrigin:e.crossOrigin,loadType:i.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e},o=getResourcePath(e,this.baseUrl);this.add(r,o,n,function(r){var i=new a.Spritesheet(r.texture.baseTexture,e.data,e.url);i.parse(function(){e.spritesheet=i,e.textures=i.textures,t()})})}},t.getResourcePath=getResourcePath;var i=r(37),n=r(109),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=r(1)},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(){return function(e,t){e.data&&e.type===i.Resource.TYPE.IMAGE&&(e.texture=o.default.fromLoader(e.data,e.url,e.name)),t()}};var i=r(37),n=r(19),o=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(36),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){function Plane(t,r,i){_classCallCheck(this,Plane);var n=_possibleConstructorReturn(this,e.call(this,t));return n._ready=!0,n.verticesX=r||10,n.verticesY=i||10,n.drawMode=o.default.DRAW_MODES.TRIANGLES,n.refresh(),n}return _inherits(Plane,e),Plane.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],i=[],n=[],o=[],a=this.verticesX-1,s=this.verticesY-1,u=e.width/a,l=e.height/s,c=0;c<t;c++){var h=c%this.verticesX,d=c/this.verticesX|0;r.push(h*u,d*l),n.push(h/a,d/s)}for(var f=a*s,p=0;p<f;p++){var m=p%a,g=p/a|0,y=g*this.verticesX+m,v=g*this.verticesX+m+1,b=(g+1)*this.verticesX+m,x=(g+1)*this.verticesX+m+1;o.push(y,v,b),o.push(v,x,b)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(n),this.colors=new Float32Array(i),this.indices=new Uint16Array(o),this.indexDirty=!0,this.multiplyUvs()},Plane.prototype._onTextureUpdate=function(){o.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},Plane}(o.default);t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function CountLimiter(e){_classCallCheck(this,CountLimiter),this.maxItemsPerFrame=e,this.itemsLeft=0}return CountLimiter.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},CountLimiter.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},CountLimiter}();t.default=i},function(e,t,r){"use strict";function _noop(){}function eachSeries(e,t,r,i){var n=0,o=e.length;!function next(a){if(a||n===o)return void(r&&r(a));i?setTimeout(function(){t(e[n++],next)},1):t(e[n++],next)}()}function onlyOnce(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function queue(e,t){function _insert(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==e&&i.idle())return void setTimeout(function(){return i.drain()},1);var n={data:e,callback:"function"==typeof r?r:_noop};t?i._tasks.unshift(n):i._tasks.push(n),setTimeout(function(){return i.process()},1)}function _next(e){return function(){r-=1,e.callback.apply(e,arguments),null!=arguments[0]&&i.error(arguments[0],e.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:t,saturated:_noop,unsaturated:_noop,buffer:t/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function(e,t){_insert(e,!1,t)},kill:function(){r=0,i.drain=_noop,i.started=!1,i._tasks=[]},unshift:function(e,t){_insert(e,!0,t)},process:function(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),r+=1,r===i.concurrency&&i.saturated(),e(t.data,onlyOnce(_next(t)))}},length:function(){return i._tasks.length},running:function(){return r},idle:function(){return i._tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var e=1;e<=i.concurrency;e++)i.process()}}};return i}t.__esModule=!0,t.eachSeries=eachSeries,t.queue=queue},function(e,t,r){"use strict";function encodeBinary(e){for(var t="",r=0;r<e.length;){for(var n=[0,0,0],o=[0,0,0,0],a=0;a<n.length;++a)r<e.length?n[a]=255&e.charCodeAt(r++):n[a]=0;o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2];switch(r-(e.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var s=0;s<o.length;++s)t+=i.charAt(o[s])}return t}t.__esModule=!0,t.encodeBinary=encodeBinary;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e,t,r){function injectStyle(e){r(392)}var i=r(7)(r(261),r(416),injectStyle,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(395)}var i=r(7)(r(259),r(419),injectStyle,null,null);e.exports=i.exports},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(66),n=r(401),o=r.n(n),a=r(228),s=r(227),u=r(225),l=r(226);i.a.use(u.a),i.a.use(l.a),new i.a({store:a.a,router:s.a,render:function(e){return e(o.a)}}).$mount("#app")},,function(e,t,r){"use strict";function placeHoldersCount(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function byteLength(e){return 3*e.length/4-placeHoldersCount(e)}function toByteArray(e){var t,r,i,a,s,u,l=e.length;s=placeHoldersCount(e),u=new o(3*l/4-s),i=s>0?l-4:l;var c=0;for(t=0,r=0;t<i;t+=4,r+=3)a=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],u[c++]=a>>16&255,u[c++]=a>>8&255,u[c++]=255&a;return 2===s?(a=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,u[c++]=255&a):1===s&&(a=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,u[c++]=a>>8&255,u[c++]=255&a),u}function tripletToBase64(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function encodeChunk(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],n.push(tripletToBase64(i));return n.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,o="",a=[],s=0,u=r-n;s<u;s+=16383)a.push(encodeChunk(e,s,s+16383>u?u:s+16383));return 1===n?(t=e[r-1],o+=i[t>>2],o+=i[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=i[t>>10],o+=i[t>>4&63],o+=i[t<<2&63],o+="="),a.push(o),a.join("")}t.byteLength=byteLength,t.toByteArray=toByteArray,t.fromByteArray=fromByteArray;for(var i=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)i[s]=a[s],n[a.charCodeAt(s)]=s;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},,function(e,t,r){r(192),e.exports=r(85).setImmediate},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var i=r(51);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var i=r(38),n=r(85),o=r(86),a=r(184),s=function $export(e,t,r){var s,u,l,c=e&$export.F,h=e&$export.G,d=e&$export.S,f=e&$export.P,p=e&$export.B,m=e&$export.W,g=h?n:n[t]||(n[t]={}),y=g.prototype,v=h?i:d?i[t]:(i[t]||{}).prototype;h&&(r=t);for(s in r)(u=!c&&v&&void 0!==v[s])&&s in g||(l=u?v[s]:r[s],g[s]=h&&"function"!=typeof v[s]?r[s]:p&&u?o(l,i):m&&v[s]==l?function(e){var t=function(t,r,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):f&&"function"==typeof l?o(Function.call,l):l,f&&((g.virtual||(g.virtual={}))[s]=l,e&$export.R&&y&&!y[s]&&a(y,s,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var i=r(188),n=r(189);e.exports=r(50)?function(e,t,r){return i.f(e,t,n(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){e.exports=r(38).document&&document.documentElement},function(e,t,r){e.exports=!r(50)&&!r(88)(function(){return 7!=Object.defineProperty(r(87)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e,t,r){var i=void 0===r;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var i=r(181),n=r(186),o=r(191),a=Object.defineProperty;t.f=r(50)?Object.defineProperty:function(e,t,r){if(i(e),t=o(t,!0),i(r),n)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var i,n,o,a=r(86),s=r(187),u=r(185),l=r(87),c=r(38),h=c.process,d=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,m=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},v=function(e){y.call(e.data)};d&&f||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},i(m),m},f=function(e){delete g[e]},"process"==r(182)(h)?i=function(e){h.nextTick(a(y,e,1))}:p?(n=new p,o=n.port2,n.port1.onmessage=v,i=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",v,!1)):i="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:f}},function(e,t,r){var i=r(51);e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var i=r(183),n=r(190);i(i.G+i.B,{setImmediate:n.set,clearImmediate:n.clear})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(403),n=r.n(i),o=r(402),a=r.n(o),s={};[n.a,a.a].forEach(function(e){s[""+e.name]=e}),t.a=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=function(){function Draggable(){return _classCallCheck(this,Draggable),{bind:this.directive,updated:this.directive,componentUpdated:this.directive,unbind:this.unbind}}return i(Draggable,[{key:"directive",value:function(e,t,r){e.removeEventListener("dragstart",e[""+Draggable.HANDLE_KEY]),e.removeEventListener("dragend",e[""+Draggable.HANDLE_KEY]),e.removeEventListener("mousedown",e[""+Draggable.HANDLE_KEY]),e.removeEventListener("mouseup",e[""+Draggable.HANDLE_KEY]),e[""+Draggable.HANDLE_KEY]=function(r){"dragstart"===r.type?(r.dataTransfer.setData(Draggable.key,1),r.dataTransfer.setData("text",t.value)):"mousedown"===r.type&&0===event.button?e.setAttribute("draggable",!0):~["dragend","mouseup"].indexOf(r.type)&&e.removeAttribute("draggable")},e.addEventListener("dragstart",e[""+Draggable.HANDLE_KEY]),e.addEventListener("mousedown",e[""+Draggable.HANDLE_KEY]),e.addEventListener("mouseup",e[""+Draggable.HANDLE_KEY]),e.addEventListener("dragend",e[""+Draggable.HANDLE_KEY])}},{key:"unbind",value:function(e,t,r){e.removeEventListener("dragstart",e[""+Draggable.HANDLE_KEY]),e.removeEventListener("dragend",e[""+Draggable.HANDLE_KEY]),e.removeEventListener("mousedown",e[""+Draggable.HANDLE_KEY]),e.removeEventListener("mouseup",e[""+Draggable.HANDLE_KEY])}}]),Draggable}();n.key="draggable",n.HANDLE_KEY="__DRAGGABLE_HANDLE__";var o=function(){function Dropzone(){return _classCallCheck(this,Dropzone),{bind:this.directive,updated:this.directive,componentUpdated:this.directive,unbind:this.unbind}}return i(Dropzone,[{key:"directive",value:function(e,t,r){e.removeEventListener("drop",e[""+Dropzone.HANDLE_KEY]),e.removeEventListener("dragover",e[""+Dropzone.HANDLE_KEY]),e.removeEventListener("dragenter",e[""+Dropzone.HANDLE_KEY]),e.removeEventListener("dragleave",e[""+Dropzone.HANDLE_KEY]),e.enterCount=0,e[""+Dropzone.HANDLE_KEY]=function(r){if(r.preventDefault(),~r.dataTransfer.types.indexOf(n.key)){var i=r.target;if("dragover"===r.type){for(;i.parentNode!==e&&i!==e;)i=i.parentNode;t.value("progress",[].slice.call(e.children).indexOf(i))}else"drop"===r.type?(t.value("done",r.dataTransfer.getData("text")),e.enterCount=0):"dragleave"===r.type?--e.enterCount<0&&t.value("leave"):"dragenter"===r.type&&i!==e&&e.enterCount++}},e.addEventListener("drop",e[""+Dropzone.HANDLE_KEY]),e.addEventListener("dragover",e[""+Dropzone.HANDLE_KEY]),e.addEventListener("dragenter",e[""+Dropzone.HANDLE_KEY]),e.addEventListener("dragleave",e[""+Dropzone.HANDLE_KEY])}},{key:"unbind",value:function(e,t,r){e.removeEventListener("drop",e[""+Dropzone.HANDLE_KEY]),e.removeEventListener("ondragover",e[""+Dropzone.HANDLE_KEY]),e.removeEventListener("dragenter",e[""+Dropzone.HANDLE_KEY]),e.removeEventListener("dragleave",e[""+Dropzone.HANDLE_KEY])}}]),Dropzone}();o.key="dropzone",o.HANDLE_KEY="__DROPZONE_HANDLE__",t.a={install:function(e,t){e.directive(n.key,new n),e.directive(o.key,new o)}}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=function(){function Sortable(){return _classCallCheck(this,Sortable),{bind:this.directive,updated:this.directive,componentUpdated:this.directive,unbind:this.unbind}}return i(Sortable,[{key:"directive",value:function(e,t,r){e.removeEventListener("mousedown",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("mouseup",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("dragstart",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("dragend",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("drop",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("dragover",e[""+Sortable.HANDLE_KEY]),e[""+Sortable.HANDLE_KEY]=function(r){~["dragover","drop"].indexOf("e.type")&&r.preventDefault();for(var i=r.target;i.parentNode!==e&&i!==e;)i=i.parentNode;var n=[].slice.call(e.children).indexOf(i),o=i.getBoundingClientRect().top;"dragstart"===r.type?(e.sortableIndx=n,e.sortableHeight=i.getBoundingClientRect().height,r.target.style.opacity=.3):"dragover"===r.type&&e.sortableIndx!==n&&r.pageY<e.sortableHeight+o?(t.value("progress",{from:e.sortableIndx,to:n}),e.sortableIndx=n):"mousedown"===r.type&&r.target!==e&&0===event.button?i.setAttribute("draggable",!0):~["dragend","mouseup"].indexOf(r.type)&&(r.target.removeAttribute("draggable"),r.target.style.opacity="")},e.addEventListener("mousedown",e[""+Sortable.HANDLE_KEY]),e.addEventListener("mouseup",e[""+Sortable.HANDLE_KEY]),e.addEventListener("dragstart",e[""+Sortable.HANDLE_KEY]),e.addEventListener("dragend",e[""+Sortable.HANDLE_KEY]),e.addEventListener("drop",e[""+Sortable.HANDLE_KEY]),e.addEventListener("dragover",e[""+Sortable.HANDLE_KEY])}},{key:"unbind",value:function(e,t,r){e.removeEventListener("mousedown",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("mouseup",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("dragstart",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("dragend",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("drop",e[""+Sortable.HANDLE_KEY]),e.removeEventListener("dragover",e[""+Sortable.HANDLE_KEY])}}]),Sortable}();n.key="sortable",n.HANDLE_KEY="__SORTABLE_HANDLE__",t.a={install:function(e,t){e.directive(n.key,new n)}}},function(e,t,r){"use strict";var i=r(110),n=r(406),o=r.n(n),a=r(408),s=r.n(a),u=r(409),l=r.n(u),c=r(410),h=r.n(c),d=r(407),f=r.n(d),p=[{path:"/",component:o.a},{path:"/canvas/sprite",component:s.a},{path:"/compt/layout",component:l.a},{path:"/pixi/imgshard",component:h.a},{path:"/aframe/door",component:f.a}];t.a=new i.a({routes:p})},function(e,t,r){"use strict";var i=r(111);t.a=new i.a.Store({})},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=function(e,t){var r=document.createElement("a");r.download=t,r.href=URL.createObjectURL(e),r.click()}},function(e,t){!function(){var e=this,t=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype;t.toBlob=t.toBlob||function(r,i,n){t.mozGetAsFile?r(e.mozGetAsFile("blob",i)):t.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(i)?r(e.msToBlob()):alert("not support dataURLtoBlob")}}()},function(e,t){t.read=function(e,t,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=l}return(f?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,h=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+h>=1?d/u:d*Math.pow(2,1-h),t*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,n),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&s,f+=p,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;e[r+f]=255&a,f+=p,a/=256,l-=8);e[r+f-p]|=128*m}},function(e,t,r){"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,s=toObject(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)n.call(r,l)&&(s[l]=r[l]);if(i){a=i(r);for(var c=0;c<a.length;c++)o.call(r,a[c])&&(s[a[c]]=r[a[c]])}}return s}},function(e,t,r){"use strict";var i=r(14).assign,n=r(234),o=r(235),a=r(102),s={};i(s,n,o,a),e.exports=s},function(e,t,r){"use strict";function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);this.options=n.assign({level:c,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==l)throw new Error(a[r]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=i.deflateSetDictionary(this.strm,f))!==l)throw new Error(a[r]);this._dict_set=!0}}function deflate(e,t){var r=new Deflate(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}function deflateRaw(e,t){return t=t||{},t.raw=!0,deflate(e,t)}function gzip(e,t){return t=t||{},t.gzip=!0,deflate(e,t)}var i=r(236),n=r(14),o=r(100),a=r(62),s=r(104),u=Object.prototype.toString,l=0,c=-1,h=0,d=8;Deflate.prototype.push=function(e,t){var r,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===u.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new n.Buf8(c),s.next_out=0,s.avail_out=c),1!==(r=i.deflate(s,a))&&r!==l)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(n.shrinkBuf(s.output,s.next_out))):this.onData(n.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=i.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==a||(this.onEnd(l),s.avail_out=0,!0)},Deflate.prototype.onData=function(e){this.chunks.push(e)},Deflate.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=Deflate,t.deflate=deflate,t.deflateRaw=deflateRaw,t.gzip=gzip},function(e,t,r){"use strict";function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=i.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new l,i.inflateGetHeader(this.strm,this.header)}function inflate(e,t){var r=new Inflate(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}function inflateRaw(e,t){return t=t||{},t.raw=!0,inflate(e,t)}var i=r(239),n=r(14),o=r(100),a=r(102),s=r(62),u=r(104),l=r(237),c=Object.prototype.toString;Inflate.prototype.push=function(e,t){var r,s,u,l,h,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new n.Buf8(p),f.next_out=0,f.avail_out=p),r=i.inflate(f,a.Z_NO_FLUSH),r===a.Z_NEED_DICT&&m&&(d="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,r=i.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===g&&(r=a.Z_OK,g=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(f.output,f.next_out),l=f.next_out-u,h=o.buf2string(f.output,u),f.next_out=l,f.avail_out=p-l,l&&n.arraySet(f.output,f.output,u,l,0),this.onData(h)):this.onData(n.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},Inflate.prototype.onData=function(e){this.chunks.push(e)},Inflate.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=Inflate,t.inflate=inflate,t.inflateRaw=inflateRaw,t.ungzip=inflate},function(e,t,r){"use strict";function err(e,t){return e.msg=u[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function flush_block_only(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function read_buf(e,t,r,i){var o=e.avail_in;return o>i&&(o=i),0===o?0:(e.avail_in-=o,n.arraySet(t,e.input,e.next_in,o,r),1===e.state.wrap?e.adler=a(e.adler,t,o,r):2===e.state.wrap&&(e.adler=s(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)}function longest_match(e,t){var r,i,n=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-k?e.strstart-(e.w_size-k):0,l=e.window,c=e.w_mask,h=e.prev,d=e.strstart+P,f=l[o+a-1],p=l[o+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,l[r+a]===p&&l[r+a-1]===f&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do{}while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<d);if(i=P-(d-o),o=d-P,i>a){if(e.match_start=t,a=i,i>=s)break;f=l[o+a-1],p=l[o+a]}}}while((t=h[t&c])>u&&0!=--n);return a<=e.lookahead?a:e.lookahead}function fill_window(e){var t,r,i,o,a,s=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-k)){n.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,r=e.hash_size,t=r;do{i=e.head[--t],e.head[t]=i>=s?i-s:0}while(--r);r=s,t=r;do{i=e.prev[--t],e.prev[t]=i>=s?i-s:0}while(--r);o+=s}if(0===e.strm.avail_in)break;if(r=read_buf(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=j)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+j-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<j)););}while(e.lookahead<k&&0!==e.strm.avail_in)}function deflate_stored(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),0===e.lookahead&&t===l)return Y;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,flush_block_only(e,!1),0===e.strm.avail_out))return Y;if(e.strstart-e.block_start>=e.w_size-k&&(flush_block_only(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===d?(flush_block_only(e,!0),0===e.strm.avail_out?q:X):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out),Y)}function deflate_fast(e,t){for(var r,i;;){if(e.lookahead<k){if(fill_window(e),e.lookahead<k&&t===l)return Y;if(0===e.lookahead)break}if(r=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-k&&(e.match_length=longest_match(e,r)),e.match_length>=j)if(i=o._tr_tally(e,e.strstart-e.match_start,e.match_length-j),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=j){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(flush_block_only(e,!1),0===e.strm.avail_out))return Y}return e.insert=e.strstart<j-1?e.strstart:j-1,t===d?(flush_block_only(e,!0),0===e.strm.avail_out?q:X):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?Y:Q}function deflate_slow(e,t){for(var r,i,n;;){if(e.lookahead<k){if(fill_window(e),e.lookahead<k&&t===l)return Y;if(0===e.lookahead)break}if(r=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=j-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-k&&(e.match_length=longest_match(e,r),e.match_length<=5&&(e.strategy===x||e.match_length===j&&e.strstart-e.match_start>4096)&&(e.match_length=j-1)),e.prev_length>=j&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-j,i=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-j),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=j-1,e.strstart++,i&&(flush_block_only(e,!1),0===e.strm.avail_out))return Y}else if(e.match_available){if(i=o._tr_tally(e,0,e.window[e.strstart-1]),i&&flush_block_only(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Y}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<j-1?e.strstart:j-1,t===d?(flush_block_only(e,!0),0===e.strm.avail_out?q:X):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?Y:Q}function deflate_rle(e,t){for(var r,i,n,a,s=e.window;;){if(e.lookahead<=P){if(fill_window(e),e.lookahead<=P&&t===l)return Y;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=j&&e.strstart>0&&(n=e.strstart-1,(i=s[n])===s[++n]&&i===s[++n]&&i===s[++n])){a=e.strstart+P;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<a);e.match_length=P-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=j?(r=o._tr_tally(e,1,e.match_length-j),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(flush_block_only(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===d?(flush_block_only(e,!0),0===e.strm.avail_out?q:X):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?Y:Q}function deflate_huff(e,t){for(var r;;){if(0===e.lookahead&&(fill_window(e),0===e.lookahead)){if(t===l)return Y;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(flush_block_only(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===d?(flush_block_only(e,!0),0===e.strm.avail_out?q:X):e.last_lit&&(flush_block_only(e,!1),0===e.strm.avail_out)?Y:Q}function Config(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}function lm_init(e){e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=j-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*O),this.dyn_dtree=new n.Buf16(2*(2*I+1)),this.bl_tree=new n.Buf16(2*(2*N+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(R+1),this.heap=new n.Buf16(2*D+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*D+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=T,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?z:H,e.adler=2===t.wrap?0:1,t.last_flush=l,o._tr_init(t),p):err(e,g)}function deflateReset(e){var t=deflateResetKeep(e);return t===p&&lm_init(e.state),t}function deflateSetHeader(e,t){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=t,p):g}function deflateInit2(e,t,r,i,o,a){if(!e)return g;var s=1;if(t===b&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>S||r!==A||i<8||i>15||t<0||t>9||a<0||a>E)return err(e,g);8===i&&(i=9);var u=new DeflateState;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+j-1)/j),u.window=new n.Buf8(2*u.w_size),u.head=new n.Buf16(u.hash_size),u.prev=new n.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new n.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=a,u.method=r,deflateReset(e)}function deflateInit(e,t){return deflateInit2(e,t,A,C,L,_)}function deflate(e,t){var r,n,a,u;if(!e||!e.state||t>f||t<0)return e?err(e,g):g;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===W&&t!==d)return err(e,0===e.avail_out?v:g);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===z)if(2===n.wrap)e.adler=0,put_byte(n,31),put_byte(n,139),put_byte(n,8),n.gzhead?(put_byte(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),put_byte(n,255&n.gzhead.time),put_byte(n,n.gzhead.time>>8&255),put_byte(n,n.gzhead.time>>16&255),put_byte(n,n.gzhead.time>>24&255),put_byte(n,9===n.level?2:n.strategy>=M||n.level<2?4:0),put_byte(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(put_byte(n,255&n.gzhead.extra.length),put_byte(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=s(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=U):(put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,9===n.level?2:n.strategy>=M||n.level<2?4:0),put_byte(n,Z),n.status=H);else{var y=A+(n.w_bits-8<<4)<<8,b=-1;b=n.strategy>=M||n.level<2?0:n.level<6?1:6===n.level?2:3,y|=b<<6,0!==n.strstart&&(y|=B),y+=31-y%31,n.status=H,putShortMSB(n,y),0!==n.strstart&&(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),e.adler=1}if(n.status===U)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),flush_pending(e),a=n.pending,n.pending!==n.pending_buf_size));)put_byte(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=F)}else n.status=F;if(n.status===F)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),flush_pending(e),a=n.pending,n.pending===n.pending_buf_size)){u=1;break}u=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,put_byte(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),0===u&&(n.gzindex=0,n.status=G)}else n.status=G;if(n.status===G)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),flush_pending(e),a=n.pending,n.pending===n.pending_buf_size)){u=1;break}u=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,put_byte(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),0===u&&(n.status=V)}else n.status=V;if(n.status===V&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&flush_pending(e),n.pending+2<=n.pending_buf_size&&(put_byte(n,255&e.adler),put_byte(n,e.adler>>8&255),e.adler=0,n.status=H)):n.status=H),0!==n.pending){if(flush_pending(e),0===e.avail_out)return n.last_flush=-1,p}else if(0===e.avail_in&&rank(t)<=rank(r)&&t!==d)return err(e,v);if(n.status===W&&0!==e.avail_in)return err(e,v);if(0!==e.avail_in||0!==n.lookahead||t!==l&&n.status!==W){var x=n.strategy===M?deflate_huff(n,t):n.strategy===w?deflate_rle(n,t):i[n.level].func(n,t);if(x!==q&&x!==X||(n.status=W),x===Y||x===q)return 0===e.avail_out&&(n.last_flush=-1),p;if(x===Q&&(t===c?o._tr_align(n):t!==f&&(o._tr_stored_block(n,0,0,!1),t===h&&(zero(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),flush_pending(e),0===e.avail_out))return n.last_flush=-1,p}return t!==d?p:n.wrap<=0?m:(2===n.wrap?(put_byte(n,255&e.adler),put_byte(n,e.adler>>8&255),put_byte(n,e.adler>>16&255),put_byte(n,e.adler>>24&255),put_byte(n,255&e.total_in),put_byte(n,e.total_in>>8&255),put_byte(n,e.total_in>>16&255),put_byte(n,e.total_in>>24&255)):(putShortMSB(n,e.adler>>>16),putShortMSB(n,65535&e.adler)),flush_pending(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?p:m)}function deflateEnd(e){var t;return e&&e.state?(t=e.state.status)!==z&&t!==U&&t!==F&&t!==G&&t!==V&&t!==H&&t!==W?err(e,g):(e.state=null,t===H?err(e,y):p):g}function deflateSetDictionary(e,t){var r,i,o,s,u,l,c,h,d=t.length;if(!e||!e.state)return g;if(r=e.state,2===(s=r.wrap)||1===s&&r.status!==z||r.lookahead)return g;for(1===s&&(e.adler=a(e.adler,t,d,0)),r.wrap=0,d>=r.w_size&&(0===s&&(zero(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new n.Buf8(r.w_size),n.arraySet(h,t,d-r.w_size,r.w_size,0),t=h,d=r.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=d,e.next_in=0,e.input=t,fill_window(r);r.lookahead>=j;){i=r.strstart,o=r.lookahead-(j-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+j-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++}while(--o);r.strstart=i,r.lookahead=j-1,fill_window(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=j-1,r.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,r.wrap=s,p}var i,n=r(14),o=r(241),a=r(101),s=r(103),u=r(62),l=0,c=1,h=3,d=4,f=5,p=0,m=1,g=-2,y=-3,v=-5,b=-1,x=1,M=2,w=3,E=4,_=0,T=2,A=8,S=9,C=15,L=8,D=286,I=30,N=19,O=2*D+1,R=15,j=3,P=258,k=P+j+1,B=32,z=42,U=69,F=73,G=91,V=103,H=113,W=666,Y=1,Q=2,q=3,X=4,Z=3;i=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],t.deflateInit=deflateInit,t.deflateInit2=deflateInit2,t.deflateReset=deflateReset,t.deflateResetKeep=deflateResetKeep,t.deflateSetHeader=deflateSetHeader,t.deflate=deflate,t.deflateEnd=deflateEnd,t.deflateSetDictionary=deflateSetDictionary,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=GZheader},function(e,t,r){"use strict";e.exports=function(e,t){var r,i,n,o,a,s,u,l,c,h,d,f,p,m,g,y,v,b,x,M,w,E,_,T,A;r=e.state,i=e.next_in,T=e.input,n=i+(e.avail_in-5),o=e.next_out,A=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,d=r.window,f=r.hold,p=r.bits,m=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;e:do{p<15&&(f+=T[i++]<<p,p+=8,f+=T[i++]<<p,p+=8),b=m[f&y];t:for(;;){if(x=b>>>24,f>>>=x,p-=x,0===(x=b>>>16&255))A[o++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=m[(65535&b)+(f&(1<<x)-1)];continue t}if(32&x){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}M=65535&b,x&=15,x&&(p<x&&(f+=T[i++]<<p,p+=8),M+=f&(1<<x)-1,f>>>=x,p-=x),p<15&&(f+=T[i++]<<p,p+=8,f+=T[i++]<<p,p+=8),b=g[f&v];r:for(;;){if(x=b>>>24,f>>>=x,p-=x,!(16&(x=b>>>16&255))){if(0==(64&x)){b=g[(65535&b)+(f&(1<<x)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(w=65535&b,x&=15,p<x&&(f+=T[i++]<<p,(p+=8)<x&&(f+=T[i++]<<p,p+=8)),(w+=f&(1<<x)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=x,p-=x,x=o-a,w>x){if((x=w-x)>c&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(E=0,_=d,0===h){if(E+=l-x,x<M){M-=x;do{A[o++]=d[E++]}while(--x);E=o-w,_=A}}else if(h<x){if(E+=l+h-x,(x-=h)<M){M-=x;do{A[o++]=d[E++]}while(--x);if(E=0,h<M){x=h,M-=x;do{A[o++]=d[E++]}while(--x);E=o-w,_=A}}}else if(E+=h-x,x<M){M-=x;do{A[o++]=d[E++]}while(--x);E=o-w,_=A}for(;M>2;)A[o++]=_[E++],A[o++]=_[E++],A[o++]=_[E++],M-=3;M&&(A[o++]=_[E++],M>1&&(A[o++]=_[E++]))}else{E=o-w;do{A[o++]=A[E++],A[o++]=A[E++],A[o++]=A[E++],M-=3}while(M>2);M&&(A[o++]=A[E++],M>1&&(A[o++]=A[E++]))}break}}break}}while(i<n&&o<s);M=p>>3,i-=M,p-=M<<3,f&=(1<<p)-1,e.next_in=i,e.next_out=o,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=f,r.bits=p}},function(e,t,r){"use strict";function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=_,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new o.Buf32(re),t.distcode=t.distdyn=new o.Buf32(ie),t.sane=1,t.back=-1,g):b}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):b}function inflateReset2(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?b:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,inflateReset(e))):b}function inflateInit2(e,t){var r,i;return e?(i=new InflateState,e.state=i,i.window=null,r=inflateReset2(e,t),r!==g&&(e.state=null),r):b}function inflateInit(e){return inflateInit2(e,ne)}function fixedtables(e){if(oe){var t;for(i=new o.Buf32(512),n=new o.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(l(h,e.lens,0,288,i,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;l(d,e.lens,0,32,n,0,e.work,{bits:5}),oe=!1}e.lencode=i,e.lenbits=9,e.distcode=n,e.distbits=5}function updatewindow(e,t,r,i){var n,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new o.Buf8(a.wsize)),i>=a.wsize?(o.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),o.arraySet(a.window,t,r-i,n,a.wnext),i-=n,i?(o.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0}function inflate(e,t){var r,i,n,re,ie,ne,oe,ae,se,ue,le,ce,he,de,fe,pe,me,ge,ye,ve,be,xe,Me,we,Ee=0,_e=new o.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return b;r=e.state,r.mode===j&&(r.mode=P),ie=e.next_out,n=e.output,oe=e.avail_out,re=e.next_in,i=e.input,ne=e.avail_in,ae=r.hold,se=r.bits,ue=ne,le=oe,xe=g;e:for(;;)switch(r.mode){case _:if(0===r.wrap){r.mode=P;break}for(;se<16;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(2&r.wrap&&35615===ae){r.check=0,_e[0]=255&ae,_e[1]=ae>>>8&255,r.check=s(r.check,_e,2,0),ae=0,se=0,r.mode=T;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&ae)<<8)+(ae>>8))%31){e.msg="incorrect header check",r.mode=$;break}if((15&ae)!==E){e.msg="unknown compression method",r.mode=$;break}if(ae>>>=4,se-=4,be=8+(15&ae),0===r.wbits)r.wbits=be;else if(be>r.wbits){e.msg="invalid window size",r.mode=$;break}r.dmax=1<<be,e.adler=r.check=1,r.mode=512&ae?O:j,ae=0,se=0;break;case T:for(;se<16;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(r.flags=ae,(255&r.flags)!==E){e.msg="unknown compression method",r.mode=$;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=$;break}r.head&&(r.head.text=ae>>8&1),512&r.flags&&(_e[0]=255&ae,_e[1]=ae>>>8&255,r.check=s(r.check,_e,2,0)),ae=0,se=0,r.mode=A;case A:for(;se<32;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}r.head&&(r.head.time=ae),512&r.flags&&(_e[0]=255&ae,_e[1]=ae>>>8&255,_e[2]=ae>>>16&255,_e[3]=ae>>>24&255,r.check=s(r.check,_e,4,0)),ae=0,se=0,r.mode=S;case S:for(;se<16;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}r.head&&(r.head.xflags=255&ae,r.head.os=ae>>8),512&r.flags&&(_e[0]=255&ae,_e[1]=ae>>>8&255,r.check=s(r.check,_e,2,0)),ae=0,se=0,r.mode=C;case C:if(1024&r.flags){for(;se<16;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}r.length=ae,r.head&&(r.head.extra_len=ae),512&r.flags&&(_e[0]=255&ae,_e[1]=ae>>>8&255,r.check=s(r.check,_e,2,0)),ae=0,se=0}else r.head&&(r.head.extra=null);r.mode=L;case L:if(1024&r.flags&&(ce=r.length,ce>ne&&(ce=ne),ce&&(r.head&&(be=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),o.arraySet(r.head.extra,i,re,ce,be)),512&r.flags&&(r.check=s(r.check,i,ce,re)),ne-=ce,re+=ce,r.length-=ce),r.length))break e;r.length=0,r.mode=D;case D:if(2048&r.flags){if(0===ne)break e;ce=0;do{be=i[re+ce++],r.head&&be&&r.length<65536&&(r.head.name+=String.fromCharCode(be))}while(be&&ce<ne);if(512&r.flags&&(r.check=s(r.check,i,ce,re)),ne-=ce,re+=ce,be)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=I;case I:if(4096&r.flags){if(0===ne)break e;ce=0;do{be=i[re+ce++],r.head&&be&&r.length<65536&&(r.head.comment+=String.fromCharCode(be))}while(be&&ce<ne);if(512&r.flags&&(r.check=s(r.check,i,ce,re)),ne-=ce,re+=ce,be)break e}else r.head&&(r.head.comment=null);r.mode=N;case N:if(512&r.flags){for(;se<16;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(ae!==(65535&r.check)){e.msg="header crc mismatch",r.mode=$;break}ae=0,se=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=j;break;case O:for(;se<32;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}e.adler=r.check=zswap32(ae),ae=0,se=0,r.mode=R;case R:if(0===r.havedict)return e.next_out=ie,e.avail_out=oe,e.next_in=re,e.avail_in=ne,r.hold=ae,r.bits=se,v;e.adler=r.check=1,r.mode=j;case j:if(t===p||t===m)break e;case P:if(r.last){ae>>>=7&se,se-=7&se,r.mode=Z;break}for(;se<3;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}switch(r.last=1&ae,ae>>>=1,se-=1,3&ae){case 0:r.mode=k;break;case 1:if(fixedtables(r),r.mode=V,t===m){ae>>>=2,se-=2;break e}break;case 2:r.mode=U;break;case 3:e.msg="invalid block type",r.mode=$}ae>>>=2,se-=2;break;case k:for(ae>>>=7&se,se-=7&se;se<32;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if((65535&ae)!=(ae>>>16^65535)){e.msg="invalid stored block lengths",r.mode=$;break}if(r.length=65535&ae,ae=0,se=0,r.mode=B,t===m)break e;case B:r.mode=z;case z:if(ce=r.length){if(ce>ne&&(ce=ne),ce>oe&&(ce=oe),0===ce)break e;o.arraySet(n,i,re,ce,ie),ne-=ce,re+=ce,oe-=ce,ie+=ce,r.length-=ce;break}r.mode=j;break;case U:for(;se<14;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(r.nlen=257+(31&ae),ae>>>=5,se-=5,r.ndist=1+(31&ae),ae>>>=5,se-=5,r.ncode=4+(15&ae),ae>>>=4,se-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=$;break}r.have=0,r.mode=F;case F:for(;r.have<r.ncode;){for(;se<3;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}r.lens[Te[r.have++]]=7&ae,ae>>>=3,se-=3}for(;r.have<19;)r.lens[Te[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Me={bits:r.lenbits},xe=l(c,r.lens,0,19,r.lencode,0,r.work,Me),r.lenbits=Me.bits,xe){e.msg="invalid code lengths set",r.mode=$;break}r.have=0,r.mode=G;case G:for(;r.have<r.nlen+r.ndist;){for(;Ee=r.lencode[ae&(1<<r.lenbits)-1],fe=Ee>>>24,pe=Ee>>>16&255,me=65535&Ee,!(fe<=se);){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(me<16)ae>>>=fe,se-=fe,r.lens[r.have++]=me;else{if(16===me){for(we=fe+2;se<we;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(ae>>>=fe,se-=fe,0===r.have){e.msg="invalid bit length repeat",r.mode=$;break}be=r.lens[r.have-1],ce=3+(3&ae),ae>>>=2,se-=2}else if(17===me){for(we=fe+3;se<we;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}ae>>>=fe,se-=fe,be=0,ce=3+(7&ae),ae>>>=3,se-=3}else{for(we=fe+7;se<we;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}ae>>>=fe,se-=fe,be=0,ce=11+(127&ae),ae>>>=7,se-=7}if(r.have+ce>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=$;break}for(;ce--;)r.lens[r.have++]=be}}if(r.mode===$)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=$;break}if(r.lenbits=9,Me={bits:r.lenbits},xe=l(h,r.lens,0,r.nlen,r.lencode,0,r.work,Me),r.lenbits=Me.bits,xe){e.msg="invalid literal/lengths set",r.mode=$;break}if(r.distbits=6,r.distcode=r.distdyn,Me={bits:r.distbits},xe=l(d,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Me),r.distbits=Me.bits,xe){e.msg="invalid distances set",r.mode=$;break}if(r.mode=V,t===m)break e;case V:r.mode=H;case H:if(ne>=6&&oe>=258){e.next_out=ie,e.avail_out=oe,e.next_in=re,e.avail_in=ne,r.hold=ae,r.bits=se,u(e,le),ie=e.next_out,n=e.output,oe=e.avail_out,re=e.next_in,i=e.input,ne=e.avail_in,ae=r.hold,se=r.bits,r.mode===j&&(r.back=-1);break}for(r.back=0;Ee=r.lencode[ae&(1<<r.lenbits)-1],fe=Ee>>>24,pe=Ee>>>16&255,me=65535&Ee,!(fe<=se);){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(pe&&0==(240&pe)){for(ge=fe,ye=pe,ve=me;Ee=r.lencode[ve+((ae&(1<<ge+ye)-1)>>ge)],fe=Ee>>>24,pe=Ee>>>16&255,me=65535&Ee,!(ge+fe<=se);){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}ae>>>=ge,se-=ge,r.back+=ge}if(ae>>>=fe,se-=fe,r.back+=fe,r.length=me,0===pe){r.mode=X;break}if(32&pe){r.back=-1,r.mode=j;break}if(64&pe){e.msg="invalid literal/length code",r.mode=$;break}r.extra=15&pe,r.mode=W;case W:if(r.extra){for(we=r.extra;se<we;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}r.length+=ae&(1<<r.extra)-1,ae>>>=r.extra,se-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Y;case Y:for(;Ee=r.distcode[ae&(1<<r.distbits)-1],fe=Ee>>>24,pe=Ee>>>16&255,me=65535&Ee,!(fe<=se);){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(0==(240&pe)){for(ge=fe,ye=pe,ve=me;Ee=r.distcode[ve+((ae&(1<<ge+ye)-1)>>ge)],fe=Ee>>>24,pe=Ee>>>16&255,me=65535&Ee,!(ge+fe<=se);){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}ae>>>=ge,se-=ge,r.back+=ge}if(ae>>>=fe,se-=fe,r.back+=fe,64&pe){e.msg="invalid distance code",r.mode=$;break}r.offset=me,r.extra=15&pe,r.mode=Q;case Q:if(r.extra){for(we=r.extra;se<we;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}r.offset+=ae&(1<<r.extra)-1,ae>>>=r.extra,se-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=$;break}r.mode=q;case q:if(0===oe)break e;if(ce=le-oe,r.offset>ce){if((ce=r.offset-ce)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=$;break}ce>r.wnext?(ce-=r.wnext,he=r.wsize-ce):he=r.wnext-ce,ce>r.length&&(ce=r.length),de=r.window}else de=n,he=ie-r.offset,ce=r.length;ce>oe&&(ce=oe),oe-=ce,r.length-=ce;do{n[ie++]=de[he++]}while(--ce);0===r.length&&(r.mode=H);break;case X:if(0===oe)break e;n[ie++]=r.length,oe--,r.mode=H;break;case Z:if(r.wrap){for(;se<32;){if(0===ne)break e;ne--,ae|=i[re++]<<se,se+=8}if(le-=oe,e.total_out+=le,r.total+=le,le&&(e.adler=r.check=r.flags?s(r.check,n,le,ie-le):a(r.check,n,le,ie-le)),le=oe,(r.flags?ae:zswap32(ae))!==r.check){e.msg="incorrect data check",r.mode=$;break}ae=0,se=0}r.mode=K;case K:if(r.wrap&&r.flags){for(;se<32;){if(0===ne)break e;ne--,ae+=i[re++]<<se,se+=8}if(ae!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=$;break}ae=0,se=0}r.mode=J;case J:xe=y;break e;case $:xe=x;break e;case ee:return M;case te:default:return b}return e.next_out=ie,e.avail_out=oe,e.next_in=re,e.avail_in=ne,r.hold=ae,r.bits=se,(r.wsize||le!==e.avail_out&&r.mode<$&&(r.mode<Z||t!==f))&&updatewindow(e,e.output,e.next_out,le-e.avail_out)?(r.mode=ee,M):(ue-=e.avail_in,le-=e.avail_out,e.total_in+=ue,e.total_out+=le,r.total+=le,r.wrap&&le&&(e.adler=r.check=r.flags?s(r.check,n,le,e.next_out-le):a(r.check,n,le,e.next_out-le)),e.data_type=r.bits+(r.last?64:0)+(r.mode===j?128:0)+(r.mode===V||r.mode===B?256:0),(0===ue&&0===le||t===f)&&xe===g&&(xe=w),xe)}function inflateEnd(e){if(!e||!e.state)return b;var t=e.state;return t.window&&(t.window=null),e.state=null,g}function inflateGetHeader(e,t){var r;return e&&e.state?(r=e.state,0==(2&r.wrap)?b:(r.head=t,t.done=!1,g)):b}function inflateSetDictionary(e,t){var r,i,n=t.length;return e&&e.state?(r=e.state,0!==r.wrap&&r.mode!==R?b:r.mode===R&&(i=1,(i=a(i,t,n,0))!==r.check)?x:updatewindow(e,t,n,n)?(r.mode=ee,M):(r.havedict=1,g)):b}var i,n,o=r(14),a=r(101),s=r(103),u=r(238),l=r(240),c=0,h=1,d=2,f=4,p=5,m=6,g=0,y=1,v=2,b=-2,x=-3,M=-4,w=-5,E=8,_=1,T=2,A=3,S=4,C=5,L=6,D=7,I=8,N=9,O=10,R=11,j=12,P=13,k=14,B=15,z=16,U=17,F=18,G=19,V=20,H=21,W=22,Y=23,Q=24,q=25,X=26,Z=27,K=28,J=29,$=30,ee=31,te=32,re=852,ie=592,ne=15,oe=!0;t.inflateReset=inflateReset,t.inflateReset2=inflateReset2,t.inflateResetKeep=inflateResetKeep,t.inflateInit=inflateInit,t.inflateInit2=inflateInit2,t.inflate=inflate,t.inflateEnd=inflateEnd,t.inflateGetHeader=inflateGetHeader,t.inflateSetDictionary=inflateSetDictionary,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";var i=r(14),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,u,l,c,h,d){var f,p,m,g,y,v,b,x,M,w=d.bits,E=0,_=0,T=0,A=0,S=0,C=0,L=0,D=0,I=0,N=0,O=null,R=0,j=new i.Buf16(16),P=new i.Buf16(16),k=null,B=0;for(E=0;E<=15;E++)j[E]=0;for(_=0;_<u;_++)j[t[r+_]]++;for(S=w,A=15;A>=1&&0===j[A];A--);if(S>A&&(S=A),0===A)return l[c++]=20971520,l[c++]=20971520,d.bits=1,0;for(T=1;T<A&&0===j[T];T++);for(S<T&&(S=T),D=1,E=1;E<=15;E++)if(D<<=1,(D-=j[E])<0)return-1;if(D>0&&(0===e||1!==A))return-1;for(P[1]=0,E=1;E<15;E++)P[E+1]=P[E]+j[E];for(_=0;_<u;_++)0!==t[r+_]&&(h[P[t[r+_]]++]=_);if(0===e?(O=k=h,v=19):1===e?(O=n,R-=257,k=o,B-=257,v=256):(O=a,k=s,v=-1),N=0,_=0,E=T,y=c,C=S,L=0,m=-1,I=1<<S,g=I-1,1===e&&I>852||2===e&&I>592)return 1;for(var z=0;;){z++,b=E-L,h[_]<v?(x=0,M=h[_]):h[_]>v?(x=k[B+h[_]],M=O[R+h[_]]):(x=96,M=0),f=1<<E-L,p=1<<C,T=p;do{p-=f,l[y+(N>>L)+p]=b<<24|x<<16|M|0}while(0!==p);for(f=1<<E-1;N&f;)f>>=1;if(0!==f?(N&=f-1,N+=f):N=0,_++,0==--j[E]){if(E===A)break;E=t[r+h[_]]}if(E>S&&(N&g)!==m){for(0===L&&(L=S),y+=T,C=E-L,D=1<<C;C+L<A&&!((D-=j[C+L])<=0);)C++,D<<=1;if(I+=1<<C,1===e&&I>852||2===e&&I>592)return 1;m=N&g,l[m]=S<<24|C<<16|y-c|0}}return 0!==N&&(l[y+N]=E-L<<24|64<<16|0),d.bits=S,0}},function(e,t,r){"use strict";function zero(e){for(var t=e.length;--t>=0;)e[t]=0}function StaticTreeDesc(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?D[e]:D[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,r){e.bi_valid>v-r?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>v-e.bi_valid,e.bi_valid+=r-v):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function send_code(e,t,r){send_bits(e,r[2*t],r[2*t+1])}function bi_reverse(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function bi_flush(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var r,i,n,o,a,s,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=y;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<g;r++)i=e.heap[r],o=u[2*u[2*i+1]+1]+1,o>p&&(o=p,m++),u[2*i+1]=o,i>l||(e.bl_count[o]++,a=0,i>=f&&(a=d[i-f]),s=u[2*i],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(c[2*i+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(i=e.bl_count[o];0!==i;)(n=e.heap[--r])>l||(u[2*n+1]!==o&&(e.opt_len+=(o-u[2*n+1])*u[2*n],u[2*n+1]=o),i--)}}function gen_codes(e,t,r){var i,n,o=new Array(y+1),a=0;for(i=1;i<=y;i++)o[i]=a=a+r[i-1]<<1;for(n=0;n<=t;n++){var s=e[2*n+1];0!==s&&(e[2*n]=bi_reverse(o[s]++,s))}}function tr_static_init(){var e,t,r,i,n,o=new Array(y+1);for(r=0,i=0;i<h-1;i++)for(N[i]=r,e=0;e<1<<_[i];e++)I[r++]=i;for(I[r-1]=i,n=0,i=0;i<16;i++)for(O[i]=n,e=0;e<1<<T[i];e++)D[n++]=i;for(n>>=7;i<p;i++)for(O[i]=n<<7,e=0;e<1<<T[i]-7;e++)D[256+n++]=i;for(t=0;t<=y;t++)o[t]=0;for(e=0;e<=143;)C[2*e+1]=8,e++,o[8]++;for(;e<=255;)C[2*e+1]=9,e++,o[9]++;for(;e<=279;)C[2*e+1]=7,e++,o[7]++;for(;e<=287;)C[2*e+1]=8,e++,o[8]++;for(gen_codes(C,f+1,o),e=0;e<p;e++)L[2*e+1]=5,L[2*e]=bi_reverse(e,5);R=new StaticTreeDesc(C,_,d+1,f,y),j=new StaticTreeDesc(L,T,0,p,y),P=new StaticTreeDesc(new Array(0),A,0,m,b)}function init_block(e){var t;for(t=0;t<f;t++)e.dyn_ltree[2*t]=0;for(t=0;t<p;t++)e.dyn_dtree[2*t]=0;for(t=0;t<m;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*x]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,r,n){bi_windup(e),n&&(put_short(e,r),put_short(e,~r)),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function smaller(e,t,r,i){var n=2*t,o=2*r;return e[n]<e[o]||e[n]===e[o]&&i[t]<=i[r]}function pqdownheap(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&smaller(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!smaller(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function compress_block(e,t,r){var i,n,o,a,s=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],n=e.pending_buf[e.l_buf+s],s++,0===i?send_code(e,n,t):(o=I[n],send_code(e,o+d+1,t),a=_[o],0!==a&&(n-=N[o],send_bits(e,n,a)),i--,o=d_code(i),send_code(e,o,r),0!==(a=T[o])&&(i-=O[o],send_bits(e,i,a)))}while(s<e.last_lit);send_code(e,x,t)}function build_tree(e,t){var r,i,n,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=g,r=0;r<u;r++)0!==o[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)n=e.heap[++e.heap_len]=l<2?++l:0,o[2*n]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=a[2*n+1]);for(t.max_code=l,r=e.heap_len>>1;r>=1;r--)pqdownheap(e,o,r);n=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,o[2*n]=o[2*r]+o[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,o[2*r+1]=o[2*i+1]=n,e.heap[1]=n++,pqdownheap(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(o,l,e.bl_count)}function scan_tree(e,t,r){var i,n,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=t[2*(i+1)+1],++s<u&&n===a||(s<l?e.bl_tree[2*n]+=s:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*M]++):s<=10?e.bl_tree[2*w]++:e.bl_tree[2*E]++,s=0,o=n,0===a?(u=138,l=3):n===a?(u=6,l=3):(u=7,l=4))}function send_tree(e,t,r){var i,n,o=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),i=0;i<=r;i++)if(n=a,a=t[2*(i+1)+1],!(++s<u&&n===a)){if(s<l)do{send_code(e,n,e.bl_tree)}while(0!=--s);else 0!==n?(n!==o&&(send_code(e,n,e.bl_tree),s--),send_code(e,M,e.bl_tree),send_bits(e,s-3,2)):s<=10?(send_code(e,w,e.bl_tree),send_bits(e,s-3,3)):(send_code(e,E,e.bl_tree),send_bits(e,s-11,7));s=0,o=n,0===a?(u=138,l=3):n===a?(u=6,l=3):(u=7,l=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=m-1;t>=3&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,r,i){var n;for(send_bits(e,t-257,5),send_bits(e,r-1,5),send_bits(e,i-4,4),n=0;n<i;n++)send_bits(e,e.bl_tree[2*S[n]+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,r-1)}function detect_data_type(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<d;t++)if(0!==e.dyn_ltree[2*t])return a;return o}function _tr_init(e){k||(tr_static_init(),k=!0),e.l_desc=new TreeDesc(e.dyn_ltree,R),e.d_desc=new TreeDesc(e.dyn_dtree,j),e.bl_desc=new TreeDesc(e.bl_tree,P),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,r,i){send_bits(e,(u<<1)+(i?1:0),3),copy_block(e,t,r,!0)}function _tr_align(e){send_bits(e,l<<1,3),send_code(e,x,C),bi_flush(e)}function _tr_flush_block(e,t,r,i){var o,a,u=0;e.level>0?(e.strm.data_type===s&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),u=build_bl_tree(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=r+5,r+4<=o&&-1!==t?_tr_stored_block(e,t,r,i):e.strategy===n||a===o?(send_bits(e,(l<<1)+(i?1:0),3),compress_block(e,C,L)):(send_bits(e,(c<<1)+(i?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),i&&bi_windup(e)}function _tr_tally(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(I[r]+d+1)]++,e.dyn_dtree[2*d_code(t)]++),e.last_lit===e.lit_bufsize-1}var i=r(14),n=4,o=0,a=1,s=2,u=0,l=1,c=2,h=29,d=256,f=d+1+h,p=30,m=19,g=2*f+1,y=15,v=16,b=7,x=256,M=16,w=17,E=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(f+2));zero(C);var L=new Array(2*p);zero(L);var D=new Array(512);zero(D);var I=new Array(256);zero(I);var N=new Array(h);zero(N);var O=new Array(p);zero(O);var R,j,P,k=!1;t._tr_init=_tr_init,t._tr_stored_block=_tr_stored_block,t._tr_flush_block=_tr_flush_block,t._tr_tally=_tr_tally,t._tr_align=_tr_align},function(e,t,r){(function(e,i){var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){function error(e){throw new RangeError(_[e])}function map(e,t){for(var r=e.length,i=[];r--;)i[r]=t(e[r]);return i}function mapDomain(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),e=e.replace(E,"."),i+map(e.split("."),t).join(".")}function ucs2decode(e){for(var t,r,i=[],n=0,o=e.length;n<o;)t=e.charCodeAt(n++),t>=55296&&t<=56319&&n<o?(r=e.charCodeAt(n++),56320==(64512&r)?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),n--)):i.push(t);return i}function ucs2encode(e){return map(e,function(e){var t="";return e>65535&&(e-=65536,t+=S(e>>>10&1023|55296),e=56320|1023&e),t+=S(e)}).join("")}function basicToDigit(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:f}function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function adapt(e,t,r){var i=0;for(e=r?A(e/y):e>>1,e+=A(e/t);e>T*m>>1;i+=f)e=A(e/T);return A(i+(T+1)*e/(e+g))}function decode(e){var t,r,i,n,o,a,s,u,l,c,h=[],g=e.length,y=0,M=b,w=v;for(r=e.lastIndexOf(x),r<0&&(r=0),i=0;i<r;++i)e.charCodeAt(i)>=128&&error("not-basic"),h.push(e.charCodeAt(i));for(n=r>0?r+1:0;n<g;){for(o=y,a=1,s=f;n>=g&&error("invalid-input"),u=basicToDigit(e.charCodeAt(n++)),(u>=f||u>A((d-y)/a))&&error("overflow"),y+=u*a,l=s<=w?p:s>=w+m?m:s-w,!(u<l);s+=f)c=f-l,a>A(d/c)&&error("overflow"),a*=c;t=h.length+1,w=adapt(y-o,t,0==o),A(y/t)>d-M&&error("overflow"),M+=A(y/t),y%=t,h.splice(y++,0,M)}return ucs2encode(h)}function encode(e){var t,r,i,n,o,a,s,u,l,c,h,g,y,M,w,E=[];for(e=ucs2decode(e),g=e.length,t=b,r=0,o=v,a=0;a<g;++a)(h=e[a])<128&&E.push(S(h));for(i=n=E.length,n&&E.push(x);i<g;){for(s=d,a=0;a<g;++a)(h=e[a])>=t&&h<s&&(s=h);for(y=i+1,s-t>A((d-r)/y)&&error("overflow"),r+=(s-t)*y,t=s,a=0;a<g;++a)if(h=e[a],h<t&&++r>d&&error("overflow"),h==t){for(u=r,l=f;c=l<=o?p:l>=o+m?m:l-o,!(u<c);l+=f)w=u-c,M=f-c,E.push(S(digitToBasic(c+w%M,0))),u=A(w/M);E.push(S(digitToBasic(u,0))),o=adapt(r,y,i==n),r=0,++i}++r,++t}return E.join("")}function toUnicode(e){return mapDomain(e,function(e){return M.test(e)?decode(e.slice(4).toLowerCase()):e})}function toASCII(e){return mapDomain(e,function(e){return w.test(e)?"xn--"+encode(e):e})}var s="object"==o(t)&&t&&!t.nodeType&&t,u="object"==o(e)&&e&&!e.nodeType&&e,l="object"==(void 0===i?"undefined":o(i))&&i;l.global!==l&&l.window!==l&&l.self!==l||(a=l);var c,h,d=2147483647,f=36,p=1,m=26,g=38,y=700,v=72,b=128,x="-",M=/^xn--/,w=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=f-p,A=Math.floor,S=String.fromCharCode;if(c={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode},"object"==o(r(174))&&r(174))void 0!==(n=function(){return c}.call(t,r,t,e))&&(e.exports=n);else if(s&&u)if(e.exports==s)u.exports=c;else for(h in c)c.hasOwnProperty(h)&&(s[h]=c[h]);else a.punycode=c}(this)}).call(t,r(272)(e),r(12))},function(e,t,r){"use strict";function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,n){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var l=0;l<u;++l){var c,h,d,f,p=e[l].replace(a,"%20"),m=p.indexOf(r);m>=0?(c=p.substr(0,m),h=p.substr(m+1)):(c=p,h=""),d=decodeURIComponent(c),f=decodeURIComponent(h),hasOwnProperty(o,d)?i(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function map(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e){switch(void 0===e?"undefined":i(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":i(e))?map(a(e),function(i){var a=encodeURIComponent(n(i))+r;return o(e[i])?map(e[i],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[i]))}).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";t.decode=t.parse=r(243),t.encode=t.stringify=r(244)},function(e,t,r){e.exports=r(17)},function(e,t,r){"use strict";function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);i.call(this,e)}e.exports=PassThrough;var i=r(106),n=r(30);n.inherits=r(16),n.inherits(PassThrough,i),PassThrough.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";function BufferList(){this.head=null,this.tail=null,this.length=0}var i=(r(13).Buffer,r(49));e.exports=BufferList,BufferList.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},BufferList.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},BufferList.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},BufferList.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t}},function(e,t,r){e.exports=r(65).PassThrough},function(e,t,r){e.exports=r(65).Transform},function(e,t,r){e.exports=r(64)},function(e,t,r){(function(e,t){!function(e,r){"use strict";function setImmediate(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return o[n]=a,i(n),n++}function clearImmediate(e){delete o[e]}function run(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(r,i)}}function runIfPresent(e){if(a)setTimeout(runIfPresent,0,e);else{var t=o[e];if(t){a=!0;try{run(t)}finally{clearImmediate(e),a=!1}}}}if(!e.setImmediate){var i,n=1,o={},a=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?function(){i=function(e){t.nextTick(function(){runIfPresent(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&runIfPresent(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),i=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){runIfPresent(e.data)},i=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;i=function(t){var r=s.createElement("script");r.onreadystatechange=function(){runIfPresent(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){i=function(e){setTimeout(runIfPresent,0,e)}}(),u.setImmediate=setImmediate,u.clearImmediate=clearImmediate}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(12),r(22))},function(e,t,r){function Stream(){i.call(this)}e.exports=Stream;var i=r(61).EventEmitter;r(16)(Stream,i),Stream.Readable=r(65),Stream.Writable=r(251),Stream.Duplex=r(246),Stream.Transform=r(250),Stream.PassThrough=r(249),Stream.Stream=Stream,Stream.prototype.pipe=function(e,t){function ondata(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function ondrain(){r.readable&&r.resume&&r.resume()}function onend(){n||(n=!0,e.end())}function onclose(){n||(n=!0,"function"==typeof e.destroy&&e.destroy())}function onerror(e){if(cleanup(),0===i.listenerCount(this,"error"))throw e}function cleanup(){r.removeListener("data",ondata),e.removeListener("drain",ondrain),r.removeListener("end",onend),r.removeListener("close",onclose),r.removeListener("error",onerror),e.removeListener("error",onerror),r.removeListener("end",cleanup),r.removeListener("close",cleanup),e.removeListener("close",cleanup)}var r=this;r.on("data",ondata),e.on("drain",ondrain),e._isStdio||t&&!1===t.end||(r.on("end",onend),r.on("close",onclose));var n=!1;return r.on("error",onerror),e.on("error",onerror),r.on("end",cleanup),r.on("close",cleanup),e.on("close",cleanup),e.emit("pipe",r),e}},function(e,t,r){function Timeout(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new Timeout(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new Timeout(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(252),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":i(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){(function(t){function deprecate(e,t){function deprecated(){if(!r){if(config("throwDeprecation"))throw new Error(t);config("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}if(config("noDeprecation"))return e;var r=!1;return deprecated}function config(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=deprecate}).call(t,r(12))},function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return e&&"object"===(void 0===e?"undefined":r(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,r){(function(e,i){function inspect(e,r){var i={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),isBoolean(r)?i.showHidden=r:r&&t._extend(i,r),isUndefined(i.showHidden)&&(i.showHidden=!1),isUndefined(i.depth)&&(i.depth=2),isUndefined(i.colors)&&(i.colors=!1),isUndefined(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=stylizeWithColor),formatValue(i,e,i.depth)}function stylizeWithColor(e,t){var r=inspect.styles[t];return r?"["+inspect.colors[r][0]+"m"+e+"["+inspect.colors[r][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function formatValue(e,r,i){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,e);return isString(n)||(n=formatValue(e,n,i)),n}var o=formatPrimitive(e,r);if(o)return o;var a=Object.keys(r),s=arrayToHash(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),isError(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return formatError(r);if(0===a.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var l="",c=!1,h=["{","}"];if(isArray(r)&&(c=!0,h=["[","]"]),isFunction(r)){l=" [Function"+(r.name?": "+r.name:"")+"]"}if(isRegExp(r)&&(l=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(l=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(l=" "+formatError(r)),0===a.length&&(!c||0==r.length))return h[0]+l+h[1];if(i<0)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var d;return d=c?formatArray(e,r,i,s,a):a.map(function(t){return formatProperty(e,r,i,s,t,c)}),e.seen.pop(),reduceToSingleString(d,l,h)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,r,i,n){for(var o=[],a=0,s=t.length;a<s;++a)hasOwnProperty(t,String(a))?o.push(formatProperty(e,t,r,i,String(a),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(formatProperty(e,t,r,i,n,!0))}),o}function formatProperty(e,t,r,i,n,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty(i,n)||(a="["+n+"]"),s||(e.seen.indexOf(u.value)<0?(s=isNull(r)?formatValue(e,u.value,null):formatValue(e,u.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),isUndefined(a)){if(o&&n.match(/^\d+$/))return s;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function reduceToSingleString(e,t,r){var i=0;return e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"===(void 0===e?"undefined":n(e))}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":n(e))||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),u[e.getMonth()],t].join(" ")}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=/%[sdj%]/g;t.format=function(e){if(!isString(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(inspect(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,n=i.length,a=String(e).replace(o,function(e){if("%%"===e)return"%";if(r>=n)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),s=i[r];r<n;s=i[++r])isNull(s)||!isObject(s)?a+=" "+s:a+=" "+inspect(s);return a},t.deprecate=function(r,n){function deprecated(){if(!o){if(i.throwDeprecation)throw new Error(n);i.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}if(isUndefined(e.process))return function(){return t.deprecate(r,n).apply(this,arguments)};if(!0===i.noDeprecation)return r;var o=!1;return deprecated};var a,s={};t.debuglog=function(e){if(isUndefined(a)&&(a=i.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var r=i.pid;s[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,i)}}else s[e]=function(){};return s[e]},t.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=isArray,t.isBoolean=isBoolean,t.isNull=isNull,t.isNullOrUndefined=isNullOrUndefined,t.isNumber=isNumber,t.isString=isString,t.isSymbol=isSymbol,t.isUndefined=isUndefined,t.isRegExp=isRegExp,t.isObject=isObject,t.isDate=isDate,t.isError=isError,t.isFunction=isFunction,t.isPrimitive=isPrimitive,t.isBuffer=r(257);var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",timestamp(),t.format.apply(t,arguments))},t.inherits=r(16),t._extend=function(e,t){if(!t||!isObject(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}}).call(t,r(12),r(22))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(66),n={};t.default={name:"icon",props:{name:{type:String,validator:function(e){return e?e in n||(i.a.util.warn('Invalid prop: prop "icon" is referring to an unregistered icon "'+e+'".\nPlesase make sure you have imported this icon before using it.',this),!1):null}},scale:[Number,String],spin:Boolean,inverse:Boolean,flip:{validator:function(e){return"horizontal"===e||"vertical"===e}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(i.a.util.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},clazz:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse}},icon:function(){return this.name?n[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var e=this.icon,t=e.width,r=e.height;return Math.max(t,r)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}}},mounted:function(){var e=this;if(!this.icon){this.$children.forEach(function(t){t.outerScale=e.normalizedScale});var t=0,r=0;this.$children.forEach(function(e){t=Math.max(t,e.width),r=Math.max(r,e.height)}),this.childrenWidth=t,this.childrenHeight=r,this.$children.forEach(function(e){e.x=(t-e.width)/2,e.y=(r-e.height)/2})}},register:function(e){for(var t in e){var r=e[t];r.paths||(r.paths=[]),r.d&&r.paths.push({d:r.d}),r.polygons||(r.polygons=[]),r.points&&r.polygons.push({points:r.points}),n[t]=r}},icons:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{title:{type:String},slogan:{type:String}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={displayName:"图片模块",name:"imgCompt",props:{view:{type:String,default:"view",validator:function(e){return~["view","opt"].indexOf(e)}},model:{type:Object,default:function(){return{src:"//inimg01.jiuyan.info/in/2016/11/07/E6A452FB-FD60-E2A3-1958-5362CFAA1ED1.jpg"}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={displayName:"文字模块",name:"textCompt",props:{view:{type:String,default:"view",validator:function(e){return~["view","opt"].indexOf(e)}},model:{type:Object,default:function(){return{header:"标题"}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(r(387),r(173)),n=r.n(i);t.default={components:{Icon:n.a},props:{comptsName:{type:Array}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mounted:function(){document.documentElement.style.fontSize="75px"},beforeDestroy:function(){document.documentElement.style.fontSize=""},methods:{dropAction:function(e,t){this.$emit("drop",{type:e,data:t})},sortAction:function(e,t){this.$emit("sort",t)},optAction:function(e){if(e.target!==e.currentTarget){for(var t=e.target;t.parentNode!==e.currentTarget;)t=t.parentNode;this.$emit("opt",[].slice.call(e.currentTarget.children).indexOf(t)),e.stopPropagation()}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(48),n=r.n(i);t.default={components:{ToolsHeader:n.a},data:function(){return{paths:[{type:"canvas",base:"/canvas",routers:[{name:"帧序列图",path:"/sprite"}]},{type:"compt",base:"/compt",routers:[{name:"可视化编辑",path:"/layout"}]},{type:"pixi",base:"/pixi",routers:[{name:"图片分片",path:"/ImgShard"}]},{type:"aframe",base:"/aframe",routers:[{name:"门口",path:"/door"}]}]}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(424),t.default={}},function(e,t,r){"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(48),n=r.n(i),o=r(172),a=r.n(o),s=r(230);r.n(s);t.default={data:function(){return{direction:"horizontal",span:0,imgs:[]}},computed:{itemsStyle:function(){var e="margin-bottom";"horizontal"===this.direction&&(e="margin-right");var t={};return t[""+e]=this.span+"px",t}},components:{ToolsHeader:n.a,ToolsFooter:a.a},methods:{uploadFile:function(e){var t=this;[].slice.call(e.target.files).forEach(function(e){t.imgs.push({src:URL.createObjectURL(e),title:e.name})})},dragstart:function(e){e.dataTransfer.setData("Text",[].slice.call(e.target.parentElement.children).indexOf(e.target))},delImg:function(e){var t=parseFloat(e.dataTransfer.getData("Text"));this.imgs.splice(t,1)},moveImg:function(e){var t,r=[].slice.call(e.target.parentElement.children).indexOf(e.target),i=parseFloat(e.dataTransfer.getData("Text"));(t=this.imgs).splice.apply(t,[r,0].concat(_toConsumableArray(this.imgs.splice(i,1))))},compose:function(){var e=this,t=this.$refs.imgs.querySelectorAll("img");if(0===t.length)return"";var r=document.createElement("canvas"),i=r.getContext("2d"),n="sprite.png";t.forEach(function(o,a){0===a&&(r.width=o.naturalWidth,r.height=o.naturalHeight,"horizontal"===e.direction?r.width=r.width*t.length+(t.length-1)*parseFloat(e.span):r.height=r.height*t.length+(t.length-1)*parseFloat(e.span),n=""+o.getAttribute("title").replace(/.\w+$/,n)),"horizontal"===e.direction?i.drawImage(o,a*(o.naturalWidth+parseFloat(e.span)),0):i.drawImage(o,0,a*(o.naturalHeight+parseFloat(e.span)))}),r.toBlob(function(e){var t=document.createElement("a");t.download=n,t.href=URL.createObjectURL(e),t.click()},"image/png")}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(224),n=r(48),o=r.n(n),a=r(404),s=r.n(a),u=r(405),l=r.n(u),c=function(){function sliceIterator(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},d={render:function(e){return e("div",{class:"emptyCompt"})}};t.default={data:function(){return{comptsName:Object.keys(i.a).map(function(e){return{key:e,compt:i.a[""+e]}}),compts:[],optIdx:-1,emptyIdx:void 0}},components:h({ToolsHeader:o.a,LayoutCompts:s.a,LayoutViews:l.a,EmptyCompt:d},i.a),methods:{drop:function(e){var t=e.type,r=e.data;("progress"===t&&(-1===r||this.emptyIdx!==r)||~["done","leave"].indexOf(t))&&(~["done","leave"].indexOf(t)?(r&&this.compts.splice(-1===this.emptyIdx?this.compts.length:this.emptyIdx,0,{type:r,model:i.a[""+r].props.model.default()}),this.emptyIdx=void 0):this.emptyIdx=r)},sort:function(e){var t=e.from,r=e.to,i=this.compts.splice(t,1),n=c(i,1),o=n[0];this.compts.splice(r,0,o)},opt:function(e){this.optIdx=e}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(48),n=r.n(i),o=r(172),a=r.n(o),s=r(278),u=r.n(s),l=r(359),c=(r.n(l),r(229));t.default={components:{ToolsHeader:n.a,ToolsFooter:a.a},data:function(){return{height:1e3,imgUrl:"",fileName:"",fileType:""}},methods:{change:function(e){var t=this,r=e.target.files[0];this.fileName=r.name,this.fileType=r.type,this.imgUrl=URL.createObjectURL(r);var i=new Image;i.onload=function(){t.showImg(i)},i.src=this.imgUrl},showImg:function(e){var t=Math.min(750,e.naturalWidth);this.app=new l.Application({height:e.naturalHeight/e.naturalWidth*t,width:t,transparent:!0,preserveDrawingBuffer:!0}),this.appLine=new l.Application({height:e.naturalHeight/e.naturalWidth*t,width:t,transparent:!0}),this.$refs.content.appendChild(this.app.view),this.appLine.view.setAttribute("class","lineMap"),this.$refs.content.appendChild(this.appLine.view);var r=new l.Sprite(l.Texture.fromLoader(e));r.width=this.app.view.width,r.height=this.app.view.height,this.app.stage.addChild(r),this.container=new l.Container,this.appLine.stage.addChild(this.container),this.changeHei()},changeHei:function(){this.container.removeChildren();for(var e=Math.ceil(this.app.view.height/this.height),t=0;t<e;t++){var r=this.height;t===e-1&&(r=this.app.view.height%this.height-1);var i=new l.Graphics;i.lineStyle(1,255),i.drawRect(0,0,this.app.view.width-1,r-1),i.x=1,i.y=t*this.height+1,this.container.addChild(i);var n=new l.Text("第"+(t+1)+"切片");n.style.fontSize=20,n.style.fill="#ffffff";var o=new l.Graphics;o.beginFill(255),o.drawRect(0,0,n.width,n.height),o.endFill(),i.addChild(o),i.addChild(n)}},shard:function(){for(var e=this,t=Math.ceil(this.app.view.height/this.height),i=new u.a,n=0;n<t;n++){var o=this.height;n===t-1&&(o=this.app.view.height%this.height);var a=document.createElement("canvas"),s=a.getContext("2d");a.width=this.app.view.width,a.height=o,s.drawImage(this.app.view,0,n*this.height,a.width,a.height,0,0,a.width,a.height),i.file(this.fileName.replace(/\.\w+/,function(e){return""+(n+1)+e}),a.toDataURL(this.fileType).replace(/^.*?,/,""),{base64:!0})}i.generateAsync({type:"blob"}).then(function(t){r.i(c.a)(t,e.fileName.replace(/\.\w+/,function(e){return".zip"}))})}}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,function(e,t,r){"use strict";(function(t){function nextTick(){u=!0;for(var e,t,r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}u=!1}function immediate(e){1!==l.push(e)||u||r()}var r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var n=0,o=new i(nextTick),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),r=function(){a.data=n=++n%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){nextTick(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(nextTick,0)};else{var s=new t.MessageChannel;s.port1.onmessage=nextTick,r=function(){s.port2.postMessage(0)}}var u,l=[];e.exports=immediate}).call(t,r(12))},function(e,t,r){"use strict";function FlateWorker(e,t){a.call(this,"FlateWorker/"+e),this._pako=new n[e]({raw:!0,level:t.level||-1}),this.meta={};var r=this;this._pako.onData=function(e){r.push({data:e,meta:r.meta})}}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=r(233),o=r(3),a=r(8),s=i?"uint8array":"array";t.magic="\b\0",o.inherits(FlateWorker,a),FlateWorker.prototype.processChunk=function(e){this.meta=e.meta,this._pako.push(o.transformTo(s,e.data),!1)},FlateWorker.prototype.flush=function(){a.prototype.flush.call(this),this._pako.push([],!0)},FlateWorker.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},t.compressWorker=function(e){return new FlateWorker("Deflate",e)},t.uncompressWorker=function(){return new FlateWorker("Inflate",{})}},function(e,t,r){"use strict";function ZipFileWorker(e,t,r,i){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var i=r(3),n=r(8),o=r(23),a=r(70),s=r(121),u=function(e,t){var r,i="";for(r=0;r<t;r++)i+=String.fromCharCode(255&e),e>>>=8;return i},l=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16},c=function(e,t){return 63&(e||0)},h=function(e,t,r,n,h,d){var f,p,m=e.file,g=e.compression,y=d!==o.utf8encode,v=i.transformTo("string",d(m.name)),b=i.transformTo("string",o.utf8encode(m.name)),x=m.comment,M=i.transformTo("string",d(x)),w=i.transformTo("string",o.utf8encode(x)),E=b.length!==m.name.length,_=w.length!==x.length,T="",A="",S="",C=m.dir,L=m.date,D={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(D.crc32=e.crc32,D.compressedSize=e.compressedSize,D.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),y||!E&&!_||(I|=2048);var N=0,O=0;C&&(N|=16),"UNIX"===h?(O=798,N|=l(m.unixPermissions,C)):(O=20,N|=c(m.dosPermissions)),f=L.getUTCHours(),f<<=6,f|=L.getUTCMinutes(),f<<=5,f|=L.getUTCSeconds()/2,p=L.getUTCFullYear()-1980,p<<=4,p|=L.getUTCMonth()+1,p<<=5,p|=L.getUTCDate(),E&&(A=u(1,1)+u(a(v),4)+b,T+="up"+u(A.length,2)+A),_&&(S=u(1,1)+u(a(M),4)+w,T+="uc"+u(S.length,2)+S);var R="";return R+="\n\0",R+=u(I,2),R+=g.magic,R+=u(f,2),R+=u(p,2),R+=u(D.crc32,4),R+=u(D.compressedSize,4),R+=u(D.uncompressedSize,4),R+=u(v.length,2),R+=u(T.length,2),{fileRecord:s.LOCAL_FILE_HEADER+R+v+T,dirRecord:s.CENTRAL_FILE_HEADER+u(O,2)+R+u(M.length,2)+"\0\0\0\0"+u(N,4)+u(n,4)+v+T+M}},d=function(e,t,r,n,o){var a=i.transformTo("string",o(n));return s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(e,2)+u(e,2)+u(t,4)+u(r,4)+u(a.length,2)+a},f=function(e){return s.DATA_DESCRIPTOR+u(e.crc32,4)+u(e.compressedSize,4)+u(e.uncompressedSize,4)};i.inherits(ZipFileWorker,n),ZipFileWorker.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,n.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-i-1))/r:100}}))},ZipFileWorker.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=h(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},ZipFileWorker.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=h(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:f(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},ZipFileWorker.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,i=d(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},ZipFileWorker.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},ZipFileWorker.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},ZipFileWorker.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},ZipFileWorker.prototype.error=function(e){var t=this._sources;if(!n.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},ZipFileWorker.prototype.lock=function(){n.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=ZipFileWorker},function(e,t,r){"use strict";var i=r(114),n=r(276),o=function(e,t){var r=e||t,n=i[r];if(!n)throw new Error(r+" is not a valid compression method !");return n};t.generateWorker=function(e,t,r){var i=new n(t.streamFiles,r,t.platform,t.encodeFileName),a=0;try{e.forEach(function(e,r){a++;var n=o(r.options.compression,t.compression),s=r.options.compressionOptions||t.compressionOptions||{},u=r.dir,l=r.date;r._compressWorker(n,s).withStreamInfo("file",{name:e,dir:u,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(i)}),i.entriesCount=a}catch(e){i.error(e)}return i}},function(e,t,r){"use strict";function JSZip(){if(!(this instanceof JSZip))return new JSZip;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new JSZip;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}JSZip.prototype=r(282),JSZip.prototype.loadAsync=r(279),JSZip.support=r(15),JSZip.defaults=r(115),JSZip.version="3.1.3",JSZip.loadAsync=function(e,t){return(new JSZip).loadAsync(e,t)},JSZip.external=r(31),e.exports=JSZip},function(e,t,r){"use strict";function checkEntryCRC32(e){return new n.Promise(function(t,r){var i=e.decompressed.getContentWorker().pipe(new s);i.on("error",function(e){r(e)}).on("end",function(){i.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}var i=r(3),n=r(31),o=r(23),i=r(3),a=r(286),s=r(122),u=r(43);e.exports=function(e,t){var r=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(e)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var r=new a(t);return r.load(e),r}).then(function(e){var r=[n.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var o=0;o<i.length;o++)r.push(checkEntryCRC32(i[o]));return n.Promise.all(r)}).then(function(e){for(var i=e.shift(),n=i.files,o=0;o<n.length;o++){var a=n[o];r.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return i.zipComment.length&&(r.comment=i.zipComment),r})}},function(e,t,r){"use strict";function NodejsStreamInputAdapter(e,t){n.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}var i=r(3),n=r(8);i.inherits(NodejsStreamInputAdapter,n),NodejsStreamInputAdapter.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},NodejsStreamInputAdapter.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},NodejsStreamInputAdapter.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=NodejsStreamInputAdapter},function(e,t,r){"use strict";function NodejsStreamOutputAdapter(e,t,r){i.call(this,t),this._helper=e;var n=this;e.on("data",function(e,t){n.push(e)||n._helper.pause(),r&&r(t)}).on("error",function(e){n.emit("error",e)}).on("end",function(){n.push(null)})}var i=r(116).Readable;r(258).inherits(NodejsStreamOutputAdapter,i),NodejsStreamOutputAdapter.prototype._read=function(){this._helper.resume()},e.exports=NodejsStreamOutputAdapter},function(e,t,r){"use strict";function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var i=r(23),n=r(3),o=r(8),a=r(125),s=r(115),u=r(69),l=r(288),c=r(277),h=r(43),d=r(280),f=function(e,t,r){var i,a=n.getTypeOf(t),c=n.extend(r||{},s);c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(e=m(e)),c.createFolders&&(i=p(e))&&g.call(this,i,!0);var f="string"===a&&!1===c.binary&&!1===c.base64;r&&void 0!==r.binary||(c.binary=!f),(t instanceof u&&0===t.uncompressedSize||c.dir||!t||0===t.length)&&(c.base64=!1,c.binary=!0,t="",c.compression="STORE",a="string");var y=null;y=t instanceof u||t instanceof o?t:h.isNode&&h.isStream(t)?new d(e,t):n.prepareContent(e,t,c.binary,c.optimizedBinaryString,c.base64);var v=new l(e,y,c);this.files[e]=v},p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:s.createFolders,e=m(e),this.files[e]||f.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,i;for(t in this.files)this.files.hasOwnProperty(t)&&(i=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,i))},filter:function(e){var t=[];return this.forEach(function(r,i){e(r,i)&&t.push(i)}),t},file:function(e,t,r){if(1===arguments.length){if(isRegExp(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var n=this.files[this.root+e];return n&&!n.dir?n:null}return e=this.root+e,f.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(isRegExp(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=g.call(this,t),i=this.clone();return i.root=r.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if(r=n.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode}),r.type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");n.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var s=r.comment||this.comment||"";t=c.generateWorker(this,r,s)}catch(e){t=new o("error"),t.error(e)}return new a(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return e=e||{},e.type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=y},function(e,t,r){"use strict";function NodeBufferReader(e){i.call(this,e)}var i=r(119);r(3).inherits(NodeBufferReader,i),NodeBufferReader.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=NodeBufferReader},function(e,t,r){"use strict";function StringReader(e){i.call(this,e)}var i=r(118);r(3).inherits(StringReader,i),StringReader.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},StringReader.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},StringReader.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},StringReader.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=StringReader},function(e,t,r){"use strict";function ConvertWorker(e){i.call(this,"ConvertWorker to "+e),this.destType=e}var i=r(8),n=r(3);n.inherits(ConvertWorker,i),ConvertWorker.prototype.processChunk=function(e){this.push({data:n.transformTo(this.destType,e.data),meta:e.meta})},e.exports=ConvertWorker},function(e,t,r){"use strict";function ZipEntries(e){this.files=[],this.loadOptions=e}var i=r(120),n=r(3),o=r(121),a=r(287),s=(r(23),r(15));ZipEntries.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+n.pretty(t)+", expected "+n.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4),n=i===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",r=n.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)e=new a({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0){throw!this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=t-r;if(i>0)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=ZipEntries},function(e,t,r){"use strict";function ZipEntry(e,t){this.options=e,this.loadOptions=t}var i=r(120),n=r(3),o=r(69),a=r(70),s=r(23),u=r(114),l=r(15),c=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null};ZipEntry.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=c(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,i,n=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<n;)t=e.readInt(2),r=e.readInt(2),i=e.readData(r),this.extraFields[t]={id:t,length:r,value:i}},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=n.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=n.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)?null:a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)?null:a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},e.exports=ZipEntry},function(e,t,r){"use strict";var i=r(125),n=r(124),o=r(23),a=r(69),s=r(8),u=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};u.prototype={internalStream:function(e){var t=e.toLowerCase(),r="string"===t||"text"===t;"binarystring"!==t&&"text"!==t||(t="string");var n=this._decompressWorker(),a=!this._dataBinary;return a&&!r&&(n=n.pipe(new o.Utf8EncodeWorker)),!a&&r&&(n=n.pipe(new o.Utf8DecodeWorker)),new i(n,t,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new n(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)u.prototype[l[h]]=c;e.exports=u},function(e,t,r){"use strict";function INTERNAL(){}function Promise(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==INTERNAL&&safelyResolveThenable(this,e)}function QueueItem(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function unwrap(e,t,r){n(function(){var i;try{i=t(r)}catch(t){return o.reject(e,t)}i===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,i)})}function getThen(e){var t=e&&e.then;if(e&&("object"===(void 0===e?"undefined":i(e))||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function safelyResolveThenable(e,t){function onError(t){r||(r=!0,o.reject(e,t))}function onSuccess(t){r||(r=!0,o.resolve(e,t))}function tryToUnwrap(){t(onSuccess,onError)}var r=!1,i=tryCatch(tryToUnwrap);"error"===i.status&&onError(i.value)}function tryCatch(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function resolve(e){return e instanceof this?e:o.resolve(new this(INTERNAL),e)}function reject(e){var t=new this(INTERNAL);return o.reject(t,e)}function all(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var n=new Array(r),a=0,s=-1,u=new this(INTERNAL);++s<r;)!function(e,s){function resolveFromAll(e){n[s]=e,++a!==r||i||(i=!0,o.resolve(u,n))}t.resolve(e).then(resolveFromAll,function(e){i||(i=!0,o.reject(u,e))})}(e[s],s);return u}function race(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var n=-1,a=new this(INTERNAL);++n<r;)!function(e){t.resolve(e).then(function(e){i||(i=!0,o.resolve(a,e))},function(e){i||(i=!0,o.reject(a,e))})}(e[n]);return a}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(274),o={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];e.exports=Promise,Promise.prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(INTERNAL);if(this.state!==u){unwrap(r,this.state===s?e:t,this.outcome)}else this.queue.push(new QueueItem(r,e,t));return r},QueueItem.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)},QueueItem.prototype.callRejected=function(e){o.reject(this.promise,e)},QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=tryCatch(getThen,t);if("error"===r.status)return o.reject(e,r.value);var i=r.value;if(i)safelyResolveThenable(e,i);else{e.state=s,e.outcome=t;for(var n=-1,a=e.queue.length;++n<a;)e.queue[n].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callRejected(t);return e},Promise.resolve=resolve,Promise.reject=reject,Promise.all=all,Promise.race=race},function(e,t){var r=new ArrayBuffer(0),i=function(e,t,i,n){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=n||e.STATIC_DRAW,this.data=r,i&&this.upload(i),this._updateID=0};i.prototype.upload=function(e,t,r){r||this.bind();var i=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?i.bufferSubData(this.type,t,e):i.bufferData(this.type,e,this.drawType),this.data=e},i.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(e,t,r){return new i(e,e.ARRAY_BUFFER,t,r)},i.createIndexBuffer=function(e,t,r){return new i(e,e.ELEMENT_ARRAY_BUFFER,t,r)},i.create=function(e,t,r,n){return new i(e,t,r,n)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=i},function(e,t,r){var i=r(128),n=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};n.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new i(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},n.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},n.prototype.clear=function(e,t,r,i){this.bind();var n=this.gl;n.clearColor(e,t,r,i),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},n.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},n.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},n.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))},n.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},n.createRGBA=function(e,t,r,o){var a=i.fromData(e,null,t,r);a.enableNearestScaling(),a.enableWrapClamp();var s=new n(e,t,r);return s.enableTexture(a),s.unbind(),s},n.createFloat32=function(e,t,r,o){var a=new i.fromData(e,o,t,r);a.enableNearestScaling(),a.enableWrapClamp();var s=new n(e,t,r);return s.enableTexture(a),s.unbind(),s},e.exports=n},function(e,t,r){var i=r(130),n=r(132),o=r(133),a=r(136),s=r(134),u=function(e,t,r,u,l){this.gl=e,u&&(t=a(t,u),r=a(r,u)),this.program=i(e,t,r,l),this.attributes=n(e,this.program),this.uniformData=o(e,this.program),this.uniforms=s(e,this.uniformData)};u.prototype.bind=function(){this.gl.useProgram(this.program)},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=u},function(e,t,r){function VertexArrayObject(e,t){if(this.nativeVaoExtension=null,VertexArrayObject.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=r(129);VertexArrayObject.prototype.constructor=VertexArrayObject,e.exports=VertexArrayObject,VertexArrayObject.FORCE_NATIVE=!1,VertexArrayObject.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},VertexArrayObject.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},VertexArrayObject.prototype.activate=function(){for(var e=this.gl,t=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];t!==n.buffer&&(n.buffer.bind(),t=n.buffer),e.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||e.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},VertexArrayObject.prototype.addAttribute=function(e,t,r,i,n,o){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:r||this.gl.FLOAT,normalized:i||!1,stride:n||0,start:o||0}),this.dirty=!0,this},VertexArrayObject.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},VertexArrayObject.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},VertexArrayObject.prototype.draw=function(e,t,r){var i=this.gl;return this.indexBuffer?i.drawElements(e,t||this.indexBuffer.data.length,i.UNSIGNED_SHORT,2*(r||0)):i.drawArrays(e,r,t||this.getSize()),this},VertexArrayObject.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},VertexArrayObject.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},function(e,t){var r=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r};e.exports=r},function(e,t,r){e.exports={compileProgram:r(130),defaultValue:r(131),extractAttributes:r(132),extractUniforms:r(133),generateUniformAccessObject:r(134),setPrecision:r(136),mapSize:r(135),mapType:r(71)}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=r(68),a=_interopRequireDefault(o),s=r(137),u=_interopRequireDefault(s);n.utils.mixins.delayMixin(n.DisplayObject.prototype,u.default);var l=100,c=0,h=0,d=2,f=function(){function AccessibilityManager(e){_classCallCheck(this,AccessibilityManager),!a.default.tablet&&!a.default.phone||navigator.isCocoonJS||this.createTouchHook();var t=document.createElement("div");t.style.width=l+"px",t.style.height=l+"px",t.style.position="absolute",t.style.top=c+"px",t.style.left=h+"px",t.style.zIndex=d,this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return AccessibilityManager.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},AccessibilityManager.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},AccessibilityManager.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},AccessibilityManager.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,r=t.length-1;r>=0;r--)this.updateAccessibleObjects(t[r])}},AccessibilityManager.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,r=e.height/this.renderer.height,i=this.div;i.style.left=e.left+"px",i.style.top=e.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var a=this.children[o];if(a.renderId!==this.renderId)a._accessibleActive=!1,n.utils.removeItems(this.children,o,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{i=a._accessibleDiv;var s=a.hitArea,u=a.worldTransform;a.hitArea?(i.style.left=(u.tx+s.x*u.a)*t+"px",i.style.top=(u.ty+s.y*u.d)*r+"px",i.style.width=s.width*u.a*t+"px",i.style.height=s.height*u.d*r+"px"):(s=a.getBounds(),this.capHitArea(s),i.style.left=s.x*t+"px",i.style.top=s.y*r+"px",i.style.width=s.width*t+"px",i.style.height=s.height*r+"px")}}this.renderId++}},AccessibilityManager.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},AccessibilityManager.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=l+"px",t.style.height=l+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=d,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleTitle||e.accessibleHint||(t.title="displayObject "+this.tabIndex),e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},AccessibilityManager.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},AccessibilityManager.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},AccessibilityManager.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},AccessibilityManager.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},AccessibilityManager.prototype._onMouseMove=function(){this.deactivate()},AccessibilityManager.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},AccessibilityManager}();t.default=f,n.WebGLRenderer.registerPlugin("accessibility",f),n.CanvasRenderer.registerPlugin("accessibility",f)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(137);Object.defineProperty(t,"accessibleTarget",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(296);Object.defineProperty(t,"AccessibilityManager",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(33),o=_interopRequireDefault(n),a=r(79),s=_interopRequireDefault(a),u=r(19),l=_interopRequireDefault(u),c=r(143),h=_interopRequireDefault(c),d=r(77),f=_interopRequireDefault(d),p=r(5),m=r(2),g=r(0),y=r(72),v=_interopRequireDefault(y),b=r(300),x=_interopRequireDefault(b),M=r(34),w=_interopRequireDefault(M),E=void 0,_=new p.Matrix,T=new p.Point,A=new Float32Array(4),S=new Float32Array(4),C=function(e){function Graphics(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,Graphics);var r=_possibleConstructorReturn(this,e.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=t,r.lineColor=0,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=g.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new v.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r}return _inherits(Graphics,e),Graphics.prototype.clone=function(){var e=new Graphics;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)e.graphicsData.push(this.graphicsData[t].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},Graphics.prototype.lineStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var i=new p.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},Graphics.prototype.moveTo=function(e,t){var r=new p.Polygon([e,t]);return r.closed=!1,this.drawShape(r),this},Graphics.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty++,this},Graphics.prototype.quadraticCurveTo=function(e,t,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n=this.currentPath.shape.points,o=0,a=0;0===n.length&&this.moveTo(0,0);for(var s=n[n.length-2],u=n[n.length-1],l=1;l<=20;++l){var c=l/20;o=s+(e-s)*c,a=u+(t-u)*c,n.push(o+(e+(r-e)*c-o)*c,a+(t+(i-t)*c-a)*c)}return this.dirty++,this},Graphics.prototype.bezierCurveTo=function(e,t,r,i,n,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,s=a[a.length-2],u=a[a.length-1];return a.length-=2,(0,x.default)(s,u,e,t,r,i,n,o,a),this.dirty++,this},Graphics.prototype.arcTo=function(e,t,r,i,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-t,l=a-e,c=i-t,h=r-e,d=Math.abs(u*h-l*c);if(d<1e-8||0===n)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var f=u*u+l*l,p=c*c+h*h,m=u*c+l*h,g=n*Math.sqrt(f)/d,y=n*Math.sqrt(p)/d,v=g*m/f,b=y*m/p,x=g*h+y*l,M=g*c+y*u,w=l*(y+v),E=u*(y+v),_=h*(g+b),T=c*(g+b),A=Math.atan2(E-M,w-x),S=Math.atan2(T-M,_-x);this.arc(x+e,M+t,n,A,S,l*c>h*u)}return this.dirty++,this},Graphics.prototype.arc=function(e,t,r,i,n){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===n)return this;!o&&n<=i?n+=2*Math.PI:o&&i<=n&&(i+=2*Math.PI);var a=n-i,s=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var u=e+Math.cos(i)*r,l=t+Math.sin(i)*r,c=this.currentPath?this.currentPath.shape.points:null;c?c[c.length-2]===u&&c[c.length-1]===l||c.push(u,l):(this.moveTo(u,l),c=this.currentPath.shape.points);for(var h=a/(2*s),d=2*h,f=Math.cos(h),p=Math.sin(h),m=s-1,g=m%1/m,y=0;y<=m;++y){var v=y+g*y,b=h+i+d*v,x=Math.cos(b),M=-Math.sin(b);c.push((f*x+p*M)*r+e,(f*-M+p*x)*r+t)}return this.dirty++,this},Graphics.prototype.beginFill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},Graphics.prototype.drawRect=function(e,t,r,i){return this.drawShape(new p.Rectangle(e,t,r,i)),this},Graphics.prototype.drawRoundedRect=function(e,t,r,i,n){return this.drawShape(new p.RoundedRectangle(e,t,r,i,n)),this},Graphics.prototype.drawCircle=function(e,t,r){return this.drawShape(new p.Circle(e,t,r)),this},Graphics.prototype.drawEllipse=function(e,t,r,i){return this.drawShape(new p.Ellipse(e,t,r,i)),this},Graphics.prototype.drawPolygon=function(e){var t=e,r=!0;if(t instanceof p.Polygon&&(r=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;++i)t[i]=arguments[i]}var n=new p.Polygon(t);return n.closed=r,this.drawShape(n),this},Graphics.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},Graphics.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===g.SHAPES.RECT&&!this.graphicsData[0].lineWidth},Graphics.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},Graphics.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new f.default(new l.default(l.default.WHITE)));var r=this._spriteRect;if(16777215===this.tint)r.tint=this.graphicsData[0].fillColor;else{var i=A,n=S;(0,m.hex2rgb)(this.graphicsData[0].fillColor,i),(0,m.hex2rgb)(this.tint,n),i[0]*=n[0],i[1]*=n[1],i[2]*=n[2],r.tint=(0,m.rgb2hex)(i)}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=t.width,r._texture._frame.height=t.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-t.x/t.width,-t.y/t.height),r._onAnchorUpdate(),r._renderWebGL(e)},Graphics.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},Graphics.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},Graphics.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,T);for(var t=this.graphicsData,r=0;r<t.length;++r){var i=t[r];if(i.fill&&(i.shape&&i.shape.contains(T.x,T.y))){if(i.holes)for(var n=0;n<i.holes.length;n++){var o=i.holes[n];if(o.contains(T.x,T.y))return!1}return!0}}return!1},Graphics.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var n=0,o=0,a=0,s=0,u=0,l=0;l<this.graphicsData.length;l++){var c=this.graphicsData[l],h=c.type,d=c.lineWidth;if(n=c.shape,h===g.SHAPES.RECT||h===g.SHAPES.RREC)o=n.x-d/2,a=n.y-d/2,s=n.width+d,u=n.height+d,e=o<e?o:e,t=o+s>t?o+s:t,r=a<r?a:r,i=a+u>i?a+u:i;else if(h===g.SHAPES.CIRC)o=n.x,a=n.y,s=n.radius+d/2,u=n.radius+d/2,e=o-s<e?o-s:e,t=o+s>t?o+s:t,r=a-u<r?a-u:r,i=a+u>i?a+u:i;else if(h===g.SHAPES.ELIP)o=n.x,a=n.y,s=n.width+d/2,u=n.height+d/2,e=o-s<e?o-s:e,t=o+s>t?o+s:t,r=a-u<r?a-u:r,i=a+u>i?a+u:i;else for(var f=n.points,p=0,m=0,y=0,v=0,b=0,x=0,M=0,w=0,E=0;E+2<f.length;E+=2)o=f[E],a=f[E+1],p=f[E+2],m=f[E+3],y=Math.abs(p-o),v=Math.abs(m-a),u=d,(s=Math.sqrt(y*y+v*v))<1e-9||(b=(u/s*v+y)/2,x=(u/s*y+v)/2,M=(p+o)/2,w=(m+a)/2,e=M-b<e?M-b:e,t=M+b>t?M+b:t,r=w-x<r?w-x:r,i=w+x>i?w+x:i)}else e=0,t=0,r=0,i=0;var _=this.boundsPadding;this._localBounds.minX=e-_,this._localBounds.maxX=t+_,this._localBounds.minY=r-_,this._localBounds.maxY=i+_},Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new h.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e);return this.graphicsData.push(t),t.type===g.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty++,t},Graphics.prototype.generateCanvasTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),i=s.default.create(r.width,r.height,e,t);E||(E=new w.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(_),_.invert(),_.tx-=r.x,_.ty-=r.y,E.render(this,i,!0,_);var n=l.default.fromCanvas(i.baseTexture._canvasRenderTarget.canvas,e,"graphics");return n.baseTexture.resolution=t,n.baseTexture.update(),n},Graphics.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},Graphics.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},Graphics.prototype.destroy=function(t){e.prototype.destroy.call(this,t);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var i in this._webgl)for(var n=0;n<this._webgl[i].data.length;++n)this._webgl[i].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},Graphics}(o.default);t.default=C,C._SPRITE_TEXTURE=null},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(34),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(0),a=function(){function CanvasGraphicsRenderer(e){_classCallCheck(this,CanvasGraphicsRenderer),this.renderer=e}return CanvasGraphicsRenderer.prototype.render=function(e){var t=this.renderer,r=t.context,i=e.worldAlpha,n=e.transform.worldTransform,a=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),r.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a),e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1),t.setBlendMode(e.blendMode);for(var s=0;s<e.graphicsData.length;s++){var u=e.graphicsData[s],l=u.shape,c=u._fillTint,h=u._lineTint;if(r.lineWidth=u.lineWidth,u.type===o.SHAPES.POLY){r.beginPath(),this.renderPolygon(l.points,l.closed,r);for(var d=0;d<u.holes.length;d++)this.renderPolygon(u.holes[d].points,!0,r);u.fill&&(r.globalAlpha=u.fillAlpha*i,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}else if(u.type===o.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*i,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fillRect(l.x,l.y,l.width,l.height)),u.lineWidth&&(r.globalAlpha=u.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.strokeRect(l.x,l.y,l.width,l.height));else if(u.type===o.SHAPES.CIRC)r.beginPath(),r.arc(l.x,l.y,l.radius,0,2*Math.PI),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*i,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke());else if(u.type===o.SHAPES.ELIP){var f=2*l.width,p=2*l.height,m=l.x-f/2,g=l.y-p/2;r.beginPath();var y=f/2*.5522848,v=p/2*.5522848,b=m+f,x=g+p,M=m+f/2,w=g+p/2;r.moveTo(m,w),r.bezierCurveTo(m,w-v,M-y,g,M,g),r.bezierCurveTo(M+y,g,b,w-v,b,w),r.bezierCurveTo(b,w+v,M+y,x,M,x),r.bezierCurveTo(M-y,x,m,w+v,m,w),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*i,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}else if(u.type===o.SHAPES.RREC){var E=l.x,_=l.y,T=l.width,A=l.height,S=l.radius,C=Math.min(T,A)/2|0;S=S>C?C:S,r.beginPath(),r.moveTo(E,_+S),r.lineTo(E,_+A-S),r.quadraticCurveTo(E,_+A,E+S,_+A),r.lineTo(E+T-S,_+A),r.quadraticCurveTo(E+T,_+A,E+T,_+A-S),r.lineTo(E+T,_+S),r.quadraticCurveTo(E+T,_,E+T-S,_),r.lineTo(E+S,_),r.quadraticCurveTo(E,_,E,_+S),r.closePath(),(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*i,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}}},CanvasGraphicsRenderer.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,r=(e.tint>>8&255)/255,i=(255&e.tint)/255,n=0;n<e.graphicsData.length;++n){var o=e.graphicsData[n],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*i*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*i*255}},CanvasGraphicsRenderer.prototype.renderPolygon=function(e,t,r){r.moveTo(e[0],e[1]);for(var i=1;i<e.length/2;++i)r.lineTo(e[2*i],e[2*i+1]);t&&r.closePath()},CanvasGraphicsRenderer.prototype.destroy=function(){this.renderer=null},CanvasGraphicsRenderer}();t.default=a,n.default.registerPlugin("graphics",a)},function(e,t,r){"use strict";function bezierCurveTo(e,t,r,i,n,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],l=0,c=0,h=0,d=0,f=0;u.push(e,t);for(var p=1,m=0;p<=20;++p)m=p/20,l=1-m,c=l*l,h=c*l,d=m*m,f=d*m,u.push(h*e+3*c*m*r+3*l*d*n+f*a,h*t+3*c*m*i+3*l*d*o+f*s);return u}t.__esModule=!0,t.default=bezierCurveTo},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(2),o=r(0),a=r(46),s=_interopRequireDefault(a),u=r(45),l=_interopRequireDefault(u),c=r(302),h=_interopRequireDefault(c),d=r(303),f=_interopRequireDefault(d),p=r(305),m=_interopRequireDefault(p),g=r(306),y=_interopRequireDefault(g),v=r(307),b=_interopRequireDefault(v),x=r(304),M=_interopRequireDefault(x),w=function(e){function GraphicsRenderer(t){_classCallCheck(this,GraphicsRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=t.gl,r.CONTEXT_UID=0,r}return _inherits(GraphicsRenderer,e),GraphicsRenderer.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new f.default(this.gl)},GraphicsRenderer.prototype.destroy=function(){s.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},GraphicsRenderer.prototype.render=function(e){var t=this.renderer,r=t.gl,i=void 0,o=e._webGL[this.CONTEXT_UID];o&&e.dirty===o.dirty||(this.updateGraphics(e),o=e._webGL[this.CONTEXT_UID]);var a=this.primitiveShader;t.bindShader(a),t.state.setBlendMode(e.blendMode);for(var s=0,u=o.data.length;s<u;s++){i=o.data[s];var l=i.shader;t.bindShader(l),l.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,n.hex2rgb)(e.tint),l.uniforms.alpha=e.worldAlpha,t.bindVao(i.vao),i.nativeLines?r.drawArrays(r.LINES,0,i.points.length/6):i.vao.draw(r.TRIANGLE_STRIP,i.indices.length)}},GraphicsRenderer.prototype.updateGraphics=function(e){var t=this.renderer.gl,r=e._webGL[this.CONTEXT_UID];if(r||(r=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),r.dirty=e.dirty,e.clearDirty!==r.clearDirty){r.clearDirty=e.clearDirty;for(var i=0;i<r.data.length;i++)this.graphicsDataPool.push(r.data[i]);r.data.length=0,r.lastIndex=0}for(var n=void 0,a=void 0,s=r.lastIndex;s<e.graphicsData.length;s++){var u=e.graphicsData[s];n=this.getWebGLData(r,0),u.nativeLines&&u.lineWidth&&(a=this.getWebGLData(r,0,!0),r.lastIndex++),u.type===o.SHAPES.POLY&&(0,m.default)(u,n,a),u.type===o.SHAPES.RECT?(0,y.default)(u,n,a):u.type===o.SHAPES.CIRC||u.type===o.SHAPES.ELIP?(0,M.default)(u,n,a):u.type===o.SHAPES.RREC&&(0,b.default)(u,n,a),r.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<r.data.length;l++)n=r.data[l],n.dirty&&n.upload()},GraphicsRenderer.prototype.getWebGLData=function(e,t,r){var i=e.data[e.data.length-1];return(!i||i.nativeLines!==r||i.points.length>32e4)&&(i=this.graphicsDataPool.pop()||new h.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),i.nativeLines=r,i.reset(t),e.data.push(i)),i.dirty=!0,i},GraphicsRenderer}(s.default);t.default=w,l.default.registerPlugin("graphics",w)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(9),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function(){function WebGLGraphicsData(e,t,r){_classCallCheck(this,WebGLGraphicsData),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=n.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=t,this.vao=new n.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,t.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,t.attributes.aColor,e.FLOAT,!1,24,8)}return WebGLGraphicsData.prototype.reset=function(){this.points.length=0,this.indices.length=0},WebGLGraphicsData.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},WebGLGraphicsData.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},WebGLGraphicsData}();t.default=o},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(32),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){function PrimitiveShader(t){return _classCallCheck(this,PrimitiveShader),_possibleConstructorReturn(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return _inherits(PrimitiveShader,e),PrimitiveShader}(o.default);t.default=a},function(e,t,r){"use strict";function buildCircle(e,t,r){var i=e.shape,s=i.x,u=i.y,l=void 0,c=void 0;if(e.type===o.SHAPES.CIRC?(l=i.radius,c=i.radius):(l=i.width,c=i.height),0!==l&&0!==c){var h=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(i.width+i.height)),d=2*Math.PI/h;if(e.fill){var f=(0,a.hex2rgb)(e.fillColor),p=e.fillAlpha,m=f[0]*p,g=f[1]*p,y=f[2]*p,v=t.points,b=t.indices,x=v.length/6;b.push(x);for(var M=0;M<h+1;M++)v.push(s,u,m,g,y,p),v.push(s+Math.sin(d*M)*l,u+Math.cos(d*M)*c,m,g,y,p),b.push(x++,x++);b.push(x-1)}if(e.lineWidth){var w=e.points;e.points=[];for(var E=0;E<h+1;E++)e.points.push(s+Math.sin(d*E)*l,u+Math.cos(d*E)*c);(0,n.default)(e,t,r),e.points=w}}}t.__esModule=!0,t.default=buildCircle;var i=r(44),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(0),a=r(2)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function buildPoly(e,t,r){e.points=e.shape.points.slice();var i=e.points;if(e.fill&&i.length>=6){for(var a=[],u=e.holes,l=0;l<u.length;l++){var c=u[l];a.push(i.length/2),i=i.concat(c.points)}var h=t.points,d=t.indices,f=i.length/2,p=(0,o.hex2rgb)(e.fillColor),m=e.fillAlpha,g=p[0]*m,y=p[1]*m,v=p[2]*m,b=(0,s.default)(i,a,2);if(!b)return;for(var x=h.length/6,M=0;M<b.length;M+=3)d.push(b[M]+x),d.push(b[M]+x),d.push(b[M+1]+x),d.push(b[M+2]+x),d.push(b[M+2]+x);for(var w=0;w<f;w++)h.push(i[2*w],i[2*w+1],g,y,v,m)}e.lineWidth>0&&(0,n.default)(e,t,r)}t.__esModule=!0,t.default=buildPoly;var i=r(44),n=_interopRequireDefault(i),o=r(2),a=r(112),s=_interopRequireDefault(a)},function(e,t,r){"use strict";function buildRectangle(e,t,r){var i=e.shape,a=i.x,s=i.y,u=i.width,l=i.height;if(e.fill){var c=(0,o.hex2rgb)(e.fillColor),h=e.fillAlpha,d=c[0]*h,f=c[1]*h,p=c[2]*h,m=t.points,g=t.indices,y=m.length/6;m.push(a,s),m.push(d,f,p,h),m.push(a+u,s),m.push(d,f,p,h),m.push(a,s+l),m.push(d,f,p,h),m.push(a+u,s+l),m.push(d,f,p,h),g.push(y,y,y+1,y+2,y+3,y+3)}if(e.lineWidth){var v=e.points;e.points=[a,s,a+u,s,a+u,s+l,a,s+l,a,s],(0,n.default)(e,t,r),e.points=v}}t.__esModule=!0,t.default=buildRectangle;var i=r(44),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(2)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function buildRoundedRectangle(e,t,r){var i=e.shape,o=i.x,u=i.y,l=i.width,c=i.height,h=i.radius,d=[];if(d.push(o,u+h),quadraticBezierCurve(o,u+c-h,o,u+c,o+h,u+c,d),quadraticBezierCurve(o+l-h,u+c,o+l,u+c,o+l,u+c-h,d),quadraticBezierCurve(o+l,u+h,o+l,u,o+l-h,u,d),quadraticBezierCurve(o+h,u,o,u,o,u+h+1e-10,d),e.fill){for(var f=(0,s.hex2rgb)(e.fillColor),p=e.fillAlpha,m=f[0]*p,g=f[1]*p,y=f[2]*p,v=t.points,b=t.indices,x=v.length/6,M=(0,n.default)(d,null,2),w=0,E=M.length;w<E;w+=3)b.push(M[w]+x),b.push(M[w]+x),b.push(M[w+1]+x),b.push(M[w+2]+x),b.push(M[w+2]+x);for(var _=0,T=d.length;_<T;_++)v.push(d[_],d[++_],m,g,y,p)}if(e.lineWidth){var A=e.points;e.points=d,(0,a.default)(e,t,r),e.points=A}}function getPt(e,t,r){return e+(t-e)*r}function quadraticBezierCurve(e,t,r,i,n,o){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],s=a,u=0,l=0,c=0,h=0,d=0,f=0,p=0,m=0;p<=20;++p)m=p/20,u=getPt(e,r,m),l=getPt(t,i,m),c=getPt(r,n,m),h=getPt(i,o,m),d=getPt(u,c,m),f=getPt(l,h,m),s.push(d,f);return s}t.__esModule=!0,t.default=buildRoundedRectangle;var i=r(112),n=_interopRequireDefault(i),o=r(44),a=_interopRequireDefault(o),s=r(2)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(76),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(0),a=function(){function Circle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,Circle),this.x=e,this.y=t,this.radius=r,this.type=o.SHAPES.CIRC}return Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-e,n=this.y-t;return i*=i,n*=n,i+n<=r},Circle.prototype.getBounds=function(){return new n.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Circle}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(76),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(0),a=function(){function Ellipse(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,Ellipse),this.x=e,this.y=t,this.width=r,this.height=i,this.type=o.SHAPES.ELIP}return Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,i=(t-this.y)/this.height;return r*=r,i*=i,r+i<=1},Ellipse.prototype.getBounds=function(){return new n.default(this.x-this.width,this.y-this.height,this.width,this.height)},Ellipse}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(75),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(0),a=function(){function Polygon(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(_classCallCheck(this,Polygon),Array.isArray(t[0])&&(t=t[0]),t[0]instanceof n.default){for(var i=[],a=0,s=t.length;a<s;a++)i.push(t[a].x,t[a].y);t=i}this.closed=!0,this.points=t,this.type=o.SHAPES.POLY}return Polygon.prototype.clone=function(){return new Polygon(this.points.slice())},Polygon.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},Polygon.prototype.contains=function(e,t){for(var r=!1,i=this.points.length/2,n=0,o=i-1;n<i;o=n++){var a=this.points[2*n],s=this.points[2*n+1],u=this.points[2*o],l=this.points[2*o+1];s>t!=l>t&&e<(t-s)/(l-s)*(u-a)+a&&(r=!r)}return r},Polygon}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(0),n=function(){function RoundedRectangle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;_classCallCheck(this,RoundedRectangle),this.x=e,this.y=t,this.width=r,this.height=n,this.radius=o,this.type=i.SHAPES.RREC}return RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var r=e-(this.x+this.radius),i=t-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=e-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(i=t-(this.y+this.height-this.radius),r*r+i*i<=n)return!0;if((r=e-(this.x+this.radius))*r+i*i<=n)return!0}return!1},RoundedRectangle}();t.default=n},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(0),n=function(){function CanvasMaskManager(e){_classCallCheck(this,CanvasMaskManager),this.renderer=e}return CanvasMaskManager.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var r=e.alpha,i=e.transform.worldTransform,n=t.resolution;t.context.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=r},CanvasMaskManager.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,r=e.graphicsData.length;if(0!==r){t.beginPath();for(var n=0;n<r;n++){var o=e.graphicsData[n],a=o.shape;if(o.type===i.SHAPES.POLY){var s=a.points;t.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)t.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(o.type===i.SHAPES.RECT)t.rect(a.x,a.y,a.width,a.height),t.closePath();else if(o.type===i.SHAPES.CIRC)t.arc(a.x,a.y,a.radius,0,2*Math.PI),t.closePath();else if(o.type===i.SHAPES.ELIP){var l=2*a.width,c=2*a.height,h=a.x-l/2,d=a.y-c/2,f=l/2*.5522848,p=c/2*.5522848,m=h+l,g=d+c,y=h+l/2,v=d+c/2;t.moveTo(h,v),t.bezierCurveTo(h,v-p,y-f,d,y,d),t.bezierCurveTo(y+f,d,m,v-p,m,v),t.bezierCurveTo(m,v+p,y+f,g,y,g),t.bezierCurveTo(y-f,g,h,v+p,h,v),t.closePath()}else if(o.type===i.SHAPES.RREC){var b=a.x,x=a.y,M=a.width,w=a.height,E=a.radius,_=Math.min(M,w)/2|0;E=E>_?_:E,t.moveTo(b,x+E),t.lineTo(b,x+w-E),t.quadraticCurveTo(b,x+w,b+E,x+w),t.lineTo(b+M-E,x+w),t.quadraticCurveTo(b+M,x+w,b+M,x+w-E),t.lineTo(b+M,x+E),t.quadraticCurveTo(b+M,x,b+M-E,x),t.lineTo(b+E,x),t.quadraticCurveTo(b,x,b,x+E),t.closePath()}}}},CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},CanvasMaskManager.prototype.destroy=function(){},CanvasMaskManager}();t.default=n},function(e,t,r){"use strict";function mapCanvasBlendModesToPixi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(e[i.BLEND_MODES.NORMAL]="source-over",e[i.BLEND_MODES.ADD]="lighter",e[i.BLEND_MODES.MULTIPLY]="multiply",e[i.BLEND_MODES.SCREEN]="screen",e[i.BLEND_MODES.OVERLAY]="overlay",e[i.BLEND_MODES.DARKEN]="darken",e[i.BLEND_MODES.LIGHTEN]="lighten",e[i.BLEND_MODES.COLOR_DODGE]="color-dodge",e[i.BLEND_MODES.COLOR_BURN]="color-burn",e[i.BLEND_MODES.HARD_LIGHT]="hard-light",e[i.BLEND_MODES.SOFT_LIGHT]="soft-light",e[i.BLEND_MODES.DIFFERENCE]="difference",e[i.BLEND_MODES.EXCLUSION]="exclusion",e[i.BLEND_MODES.HUE]="hue",e[i.BLEND_MODES.SATURATION]="saturate",e[i.BLEND_MODES.COLOR]="color",e[i.BLEND_MODES.LUMINOSITY]="luminosity"):(e[i.BLEND_MODES.NORMAL]="source-over",e[i.BLEND_MODES.ADD]="lighter",e[i.BLEND_MODES.MULTIPLY]="source-over",e[i.BLEND_MODES.SCREEN]="source-over",e[i.BLEND_MODES.OVERLAY]="source-over",e[i.BLEND_MODES.DARKEN]="source-over",e[i.BLEND_MODES.LIGHTEN]="source-over",e[i.BLEND_MODES.COLOR_DODGE]="source-over",e[i.BLEND_MODES.COLOR_BURN]="source-over",e[i.BLEND_MODES.HARD_LIGHT]="source-over",e[i.BLEND_MODES.SOFT_LIGHT]="source-over",e[i.BLEND_MODES.DIFFERENCE]="source-over",e[i.BLEND_MODES.EXCLUSION]="source-over",e[i.BLEND_MODES.HUE]="source-over",e[i.BLEND_MODES.SATURATION]="source-over",e[i.BLEND_MODES.COLOR]="source-over",e[i.BLEND_MODES.LUMINOSITY]="source-over"),e[i.BLEND_MODES.NORMAL_NPM]=e[i.BLEND_MODES.NORMAL],e[i.BLEND_MODES.ADD_NPM]=e[i.BLEND_MODES.ADD],e[i.BLEND_MODES.SCREEN_NPM]=e[i.BLEND_MODES.SCREEN],e}t.__esModule=!0,t.default=mapCanvasBlendModesToPixi;var i=r(0),n=r(148),o=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(0),n=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(){function TextureGarbageCollector(e){_classCallCheck(this,TextureGarbageCollector),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}return TextureGarbageCollector.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},TextureGarbageCollector.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,r=!1,i=0;i<t.length;i++){var n=t[i];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[i]=null,r=!0)}if(r){for(var o=0,a=0;a<t.length;a++)null!==t[a]&&(t[o++]=t[a]);t.length=o}},TextureGarbageCollector.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},TextureGarbageCollector}();t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(9),n=r(0),o=r(47),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(2),u=function(){function TextureManager(e){_classCallCheck(this,TextureManager),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return TextureManager.prototype.bindTexture=function(){},TextureManager.prototype.getTexture=function(){},TextureManager.prototype.updateTexture=function(e,t){var r=this.gl,o=!!e._glRenderTargets;if(!e.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===t){t=0;for(var u=0;u<s.length;++u)if(s[u]===e){t=u;break}}s[t]=e,r.activeTexture(r.TEXTURE0+t);var l=e._glTextures[this.renderer.CONTEXT_UID];if(l)o?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):l.upload(e.source);else{if(o){var c=new a.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);c.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=c,l=c.texture}else l=new i.GLTexture(this.gl,null,null,null,null),l.bind(t),l.premultiplyAlpha=!0,l.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=l,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&l.enableMipmap(),e.wrapMode===n.WRAP_MODES.CLAMP?l.enableWrapClamp():e.wrapMode===n.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),e.scaleMode===n.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},TextureManager.prototype.destroyTexture=function(e,t){if(e=e.baseTexture||e,e.hasLoaded&&e._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(e),e._glTextures[this.renderer.CONTEXT_UID].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.renderer.CONTEXT_UID],!t)){var r=this._managedTextures.indexOf(e);-1!==r&&(0,s.removeItems)(this._managedTextures,r,1)}},TextureManager.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},TextureManager.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},TextureManager}();t.default=u},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(323),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function(){function WebGLState(e){_classCallCheck(this,WebGLState),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,n.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return WebGLState.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},WebGLState.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},WebGLState.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},WebGLState.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},WebGLState.prototype.setBlendMode=function(e){if(e!==this.activeState[4]){this.activeState[4]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},WebGLState.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},WebGLState.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},WebGLState.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},WebGLState.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},WebGLState.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},WebGLState}();t.default=o},function(e,t,r){"use strict";function extractUniformsFromSrc(e,t,r){var i=extractUniformsFromString(e),n=extractUniformsFromString(t);return Object.assign(i,n)}function extractUniformsFromString(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},i=void 0,n=e.replace(/\s+/g," ").split(/\s*;\s*/),a=0;a<n.length;a++){var s=n[a].trim();if(s.indexOf("uniform")>-1){var u=s.split(" "),l=u[1],c=u[2],h=1;c.indexOf("[")>-1&&(i=c.split(/\[|]/),c=i[0],h*=Number(i[1])),c.match(t)||(r[c]={value:o(l,h),name:c,type:l})}}return r}t.__esModule=!0,t.default=extractUniformsFromSrc;var i=r(9),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n.default.shader.defaultValue},function(e,t,r){"use strict";function calculateScreenSpaceMatrix(e,t,r){var i=e.identity();return i.translate(t.x/r.width,t.y/r.height),i.scale(r.width,r.height),i}function calculateNormalizedScreenSpaceMatrix(e,t,r){var i=e.identity();i.translate(t.x/r.width,t.y/r.height);var n=r.width/t.width,o=r.height/t.height;return i.scale(n,o),i}function calculateSpriteMatrix(e,t,r,n){var o=n.worldTransform.copy(i.Matrix.TEMP_MATRIX),a=n._texture.baseTexture,s=e.identity(),u=r.height/r.width;s.translate(t.x/r.width,t.y/r.height),s.scale(1,u);var l=r.width/a.width,c=r.height/a.height;return o.tx/=a.width*l,o.ty/=a.width*l,o.invert(),s.prepend(o),s.scale(1,1/u),s.scale(l,c),s.translate(n.anchor.x,n.anchor.y),s}t.__esModule=!0,t.calculateScreenSpaceMatrix=calculateScreenSpaceMatrix,t.calculateNormalizedScreenSpaceMatrix=calculateNormalizedScreenSpaceMatrix,t.calculateSpriteMatrix=calculateSpriteMatrix;var i=r(5)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(35),o=_interopRequireDefault(n),a=r(47),s=_interopRequireDefault(a),u=r(151),l=_interopRequireDefault(u),c=r(5),h=r(32),d=_interopRequireDefault(h),f=r(318),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(f),m=r(67),g=_interopRequireDefault(m),y=function FilterState(){_classCallCheck(this,FilterState),this.renderTarget=null,this.sourceFrame=new c.Rectangle,this.destinationFrame=new c.Rectangle,this.filters=[],this.target=null,this.resolution=1},v=function(e){function FilterManager(t){_classCallCheck(this,FilterManager);var r=_possibleConstructorReturn(this,e.call(this,t));return r.gl=r.renderer.gl,r.quad=new l.default(r.gl,t.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r}return _inherits(FilterManager,e),FilterManager.prototype.pushFilter=function(e,t){var r=this.renderer,i=this.filterData;if(!i){i=this.renderer._activeRenderTarget.filterStack;var n=new y;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=i={index:0,stack:[n]},this.filterData=i}var o=i.stack[++i.index];o||(o=i.stack[i.index]=new y);var a=t[0].resolution,s=0|t[0].padding,u=e.filterArea||e.getBounds(!0),l=o.sourceFrame,c=o.destinationFrame;l.x=(u.x*a|0)/a,l.y=(u.y*a|0)/a,l.width=(u.width*a|0)/a,l.height=(u.height*a|0)/a,i.stack[0].renderTarget.transform||t[0].autoFit&&l.fit(i.stack[0].destinationFrame),l.pad(s),c.width=l.width,c.height=l.height;var h=this.getPotRenderTarget(r.gl,l.width,l.height,a);o.target=e,o.filters=t,o.resolution=a,o.renderTarget=h,h.setFrame(c,l),r.bindRenderTarget(h),h.clear()},FilterManager.prototype.popFilter=function(){var e=this.filterData,t=e.stack[e.index-1],r=e.stack[e.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var i=r.filters;if(1===i.length)i[0].apply(this,r.renderTarget,t.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var n=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var a=0;for(a=0;a<i.length-1;++a){i[a].apply(this,n,o,!0,r);var s=n;n=o,o=s}i[a].apply(this,n,t.renderTarget,!1,r),this.freePotRenderTarget(n),this.freePotRenderTarget(o)}0===--e.index&&(this.filterData=null)},FilterManager.prototype.applyFilter=function(e,t,r,i){var n=this.renderer,o=n.gl,a=e.glShaders[n.CONTEXT_UID];a||(e.glShaderKey?(a=this.shaderCache[e.glShaderKey])||(a=new d.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[n.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=a):a=e.glShaders[n.CONTEXT_UID]=new d.default(this.gl,e.vertexSrc,e.fragmentSrc),n.bindVao(null),this.quad.initVao(a)),n.bindVao(this.quad.vao),n.bindRenderTarget(r),i&&(o.disable(o.SCISSOR_TEST),n.clear(),o.enable(o.SCISSOR_TEST)),r===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(a);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(a,e),n.state.setBlendMode(e.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},FilterManager.prototype.syncUniforms=function(e,t){var r=t.uniformData,i=t.uniforms,n=1,o=void 0;if(e.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var a=e.uniforms.filterArea;a[0]=o.renderTarget.size.width,a[1]=o.renderTarget.size.height,a[2]=o.sourceFrame.x,a[3]=o.sourceFrame.y,e.uniforms.filterArea=a}if(e.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var s=e.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,s[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,e.uniforms.filterClamp=s}for(var u in r)if("sampler2D"===r[u].type&&0!==i[u]){if(i[u].baseTexture)e.uniforms[u]=this.renderer.bindTexture(i[u].baseTexture,n);else{e.uniforms[u]=n;var l=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],l.activeTexture(l.TEXTURE0+n),i[u].texture.bind()}n++}else if("mat3"===r[u].type)void 0!==i[u].a?e.uniforms[u]=i[u].toArray(!0):e.uniforms[u]=i[u];else if("vec2"===r[u].type)if(void 0!==i[u].x){var c=e.uniforms[u]||new Float32Array(2);c[0]=i[u].x,c[1]=i[u].y,e.uniforms[u]=c}else e.uniforms[u]=i[u];else"float"===r[u].type?e.uniforms.data[u].value!==r[u]&&(e.uniforms[u]=i[u]):e.uniforms[u]=i[u]},FilterManager.prototype.getRenderTarget=function(e,t){var r=this.filterData.stack[this.filterData.index],i=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,t||r.resolution);return i.setFrame(r.destinationFrame,r.sourceFrame),i},FilterManager.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},FilterManager.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return p.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},FilterManager.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return p.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},FilterManager.prototype.calculateSpriteMatrix=function(e,t){var r=this.filterData.stack[this.filterData.index];return p.calculateSpriteMatrix(e,r.sourceFrame,r.renderTarget.size,t)},FilterManager.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},FilterManager.prototype.getPotRenderTarget=function(e,t,r,i){t=g.default.nextPow2(t*i),r=g.default.nextPow2(r*i);var n=(65535&t)<<16|65535&r;this.pool[n]||(this.pool[n]=[]);var o=this.pool[n].pop();if(!o){var a=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),o=new s.default(e,t,r,null,1),e.bindTexture(e.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=i,o.defaultFrame.width=o.size.width=t/i,o.defaultFrame.height=o.size.height=r/i,o},FilterManager.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var r=0;r<t.length;r++)t[r].destroy(!0)}this.pool={}},FilterManager.prototype.freePotRenderTarget=function(e){var t=e.size.width*e.resolution,r=e.size.height*e.resolution,i=(65535&t)<<16|65535&r;this.pool[i].push(e)},FilterManager}(o.default);t.default=v},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(35),o=_interopRequireDefault(n),a=r(150),s=_interopRequireDefault(a),u=function(e){function MaskManager(t){_classCallCheck(this,MaskManager);var r=_possibleConstructorReturn(this,e.call(this,t));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return _inherits(MaskManager,e),MaskManager.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,i=Math.atan2(r.b,r.a);i=Math.round(i*(180/Math.PI)),i%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},MaskManager.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},MaskManager.prototype.pushSpriteMask=function(e,t){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new s.default(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,r),this.alphaMaskIndex++},MaskManager.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},MaskManager.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},MaskManager.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},MaskManager.prototype.pushScissorMask=function(e,t){t.renderable=!0;var r=this.renderer._activeRenderTarget,i=t.getBounds();i.fit(r.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(i.x*n,(r.root?r.size.height-i.y-i.height:i.y)*n,i.width*n,i.height*n),this.scissorRenderTarget=r,this.scissorData=t,this.scissor=!0},MaskManager.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},MaskManager}(o.default);t.default=u},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(35),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){function StencilManager(t){_classCallCheck(this,StencilManager);var r=_possibleConstructorReturn(this,e.call(this,t));return r.stencilMaskStack=null,r}return _inherits(StencilManager,e),StencilManager.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},StencilManager.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack;0===r.length&&(t.enable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.stencilFunc(t.ALWAYS,1,1)),r.push(e),t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,r.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},StencilManager.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack,r=t.pop();0===t.length?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(r),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,t.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP))},StencilManager.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},StencilManager}(o.default);t.default=a},function(e,t,r){"use strict";function checkMaxIfStatmentsInShader(e,t){var r=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var i=document.createElement("canvas");i.width=1,i.height=1,t=n.default.createContext(i)}for(var a=t.createShader(t.FRAGMENT_SHADER);;){var s=o.replace(/%forloop%/gi,generateIfTestSrc(e));if(t.shaderSource(a,s),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS))break;e=e/2|0}return r&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),e}function generateIfTestSrc(e){for(var t="",r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}t.__esModule=!0,t.default=checkMaxIfStatmentsInShader;var i=r(9),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(e,t,r){"use strict";function mapWebGLBlendModesToPixi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[i.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[i.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[i.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA],t[i.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR],t}t.__esModule=!0,t.default=mapWebGLBlendModesToPixi;var i=r(0)},function(e,t,r){"use strict";function mapWebGLDrawModesToPixi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[i.DRAW_MODES.POINTS]=e.POINTS,t[i.DRAW_MODES.LINES]=e.LINES,t[i.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[i.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[i.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[i.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[i.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t}t.__esModule=!0,t.default=mapWebGLDrawModesToPixi;var i=r(0)},function(e,t,r){"use strict";function validateContext(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}t.__esModule=!0,t.default=validateContext},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(34),n=_interopRequireDefault(i),o=r(0),a=r(5),s=r(78),u=_interopRequireDefault(s),l=new a.Matrix,c=function(){function CanvasSpriteRenderer(e){_classCallCheck(this,CanvasSpriteRenderer),this.renderer=e}return CanvasSpriteRenderer.prototype.render=function(e){var t=e._texture,r=this.renderer,i=t._frame.width,n=t._frame.height,s=e.transform.worldTransform,c=0,h=0;if(!(t.orig.width<=0||t.orig.height<=0)&&t.baseTexture.source&&(r.setBlendMode(e.blendMode),t.valid)){r.context.globalAlpha=e.worldAlpha;var d=t.baseTexture.scaleMode===o.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==d&&(r.context[r.smoothProperty]=d),t.trim?(c=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,h=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(c=(.5-e.anchor.x)*t.orig.width,h=(.5-e.anchor.y)*t.orig.height),t.rotate&&(s.copy(l),s=l,a.GroupD8.matrixAppendRotationInv(s,t.rotate,c,h),c=0,h=0),c-=i/2,h-=n/2,r.roundPixels?(r.context.setTransform(s.a,s.b,s.c,s.d,s.tx*r.resolution|0,s.ty*r.resolution|0),c|=0,h|=0):r.context.setTransform(s.a,s.b,s.c,s.d,s.tx*r.resolution,s.ty*r.resolution);var f=t.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=u.default.getTintedTexture(e,e.tint)),r.context.drawImage(e.tintedTexture,0,0,i*f,n*f,c*r.resolution,h*r.resolution,i*r.resolution,n*r.resolution)):r.context.drawImage(t.baseTexture.source,t._frame.x*f,t._frame.y*f,i*f,n*f,c*r.resolution,h*r.resolution,i*r.resolution,n*r.resolution)}},CanvasSpriteRenderer.prototype.destroy=function(){this.renderer=null},CanvasSpriteRenderer}();t.default=c,n.default.registerPlugin("sprite",c)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function Buffer(e){_classCallCheck(this,Buffer),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return Buffer.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},Buffer}();t.default=i},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(46),o=_interopRequireDefault(n),a=r(45),s=_interopRequireDefault(a),u=r(81),l=_interopRequireDefault(u),c=r(329),h=_interopRequireDefault(c),d=r(322),f=_interopRequireDefault(d),p=r(327),m=_interopRequireDefault(p),g=r(4),y=_interopRequireDefault(g),v=r(2),b=r(9),x=_interopRequireDefault(b),M=r(67),w=_interopRequireDefault(M),E=0,_=0,T=function(e){function SpriteRenderer(t){_classCallCheck(this,SpriteRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=y.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var i=1;i<=w.default.nextPow2(r.size);i*=2)r.buffers.push(new m.default(4*i*r.vertByteSize));r.indices=(0,l.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var n=0;n<r.size;n++)r.groups[n]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return _inherits(SpriteRenderer,e),SpriteRenderer.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),y.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,f.default)(this.MAX_TEXTURES,e)),this.shader=(0,h.default)(e,this.MAX_TEXTURES),this.indexBuffer=x.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,r=0;r<this.vaoMax;r++){var i=this.vertexBuffers[r]=x.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(i,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(i,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(i,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&n.addAttribute(i,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},SpriteRenderer.prototype.onPrerender=function(){this.vertexCount=0},SpriteRenderer.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},SpriteRenderer.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,r=w.default.nextPow2(this.currentIndex),i=w.default.log2(r),n=this.buffers[i],o=this.sprites,a=this.groups,s=n.float32View,u=n.uint32View,l=this.boundTextures,c=this.renderer.boundTextures,h=this.renderer.textureGC.count,d=0,f=void 0,p=void 0,m=1,g=0,b=a[0],M=void 0,T=void 0,A=v.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];b.textureCount=0,b.start=0,b.blend=A,E++;var S=void 0;for(S=0;S<t;++S)l[S]=c[S],l[S]._virtalBoundId=S;for(S=0;S<this.currentIndex;++S){var C=o[S];f=C._texture.baseTexture;var L=v.premultiplyBlendMode[Number(f.premultipliedAlpha)][C.blendMode];if(A!==L&&(A=L,p=null,g=t,E++),p!==f&&(p=f,f._enabled!==E)){if(g===t&&(E++,b.size=S-b.start,g=0,b=a[m++],b.blend=A,b.textureCount=0,b.start=S),f.touched=h,-1===f._virtalBoundId)for(var D=0;D<t;++D){var I=(D+_)%t,N=l[I];if(N._enabled!==E){_++,N._virtalBoundId=-1,f._virtalBoundId=I,l[I]=f;break}}f._enabled=E,b.textureCount++,b.ids[g]=f._virtalBoundId,b.textures[g++]=f}if(M=C.vertexData,T=C._texture._uvs.uvsUint32,this.renderer.roundPixels){var O=this.renderer.resolution;s[d]=(M[0]*O|0)/O,s[d+1]=(M[1]*O|0)/O,s[d+5]=(M[2]*O|0)/O,s[d+6]=(M[3]*O|0)/O,s[d+10]=(M[4]*O|0)/O,s[d+11]=(M[5]*O|0)/O,s[d+15]=(M[6]*O|0)/O,s[d+16]=(M[7]*O|0)/O}else s[d]=M[0],s[d+1]=M[1],s[d+5]=M[2],s[d+6]=M[3],s[d+10]=M[4],s[d+11]=M[5],s[d+15]=M[6],s[d+16]=M[7];u[d+2]=T[0],u[d+7]=T[1],u[d+12]=T[2],u[d+17]=T[3];var R=Math.min(C.worldAlpha,1),j=R<1&&f.premultipliedAlpha?(0,v.premultiplyTint)(C._tintRGB,R):C._tintRGB+(255*R<<24);u[d+3]=u[d+8]=u[d+13]=u[d+18]=j,s[d+4]=s[d+9]=s[d+14]=s[d+19]=f._virtalBoundId,d+=20}if(b.size=S-b.start,y.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var P=this.shader.attributes,k=this.vertexBuffers[this.vertexCount]=x.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),B=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(k,P.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(k,P.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(k,P.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);P.aTextureId&&B.addAttribute(k,P.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=B}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(S=0;S<t;++S)c[S]._virtalBoundId=-1;for(S=0;S<m;++S){for(var z=a[S],U=z.textureCount,F=0;F<U;F++)p=z.textures[F],c[z.ids[F]]!==p&&this.renderer.bindTexture(p,z.ids[F],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(z.blend),e.drawElements(e.TRIANGLES,6*z.size,e.UNSIGNED_SHORT,6*z.start*2)}this.currentIndex=0}},SpriteRenderer.prototype.start=function(){this.renderer.bindShader(this.shader),y.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},SpriteRenderer.prototype.stop=function(){this.flush()},SpriteRenderer.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},SpriteRenderer}(o.default);t.default=T,s.default.registerPlugin("sprite",T)},function(e,t,r){"use strict";function generateMultiTextureShader(e,t){var r=o;r=r.replace(/%count%/gi,t),r=r.replace(/%forloop%/gi,generateSampleSrc(t));for(var i=new n.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r),a=[],s=0;s<t;s++)a[s]=s;return i.bind(),i.uniforms.uSamplers=a,i}function generateSampleSrc(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+="if(textureId == "+r+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}t.__esModule=!0,t.default=generateMultiTextureShader;var i=r(32),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=(r(11),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(77),a=_interopRequireDefault(o),s=r(19),u=_interopRequireDefault(s),l=r(5),c=r(2),h=r(0),d=r(4),f=_interopRequireDefault(d),p=r(153),m=_interopRequireDefault(p),g=r(152),y=_interopRequireDefault(g),v=r(340),b=_interopRequireDefault(v),x={texture:!0,children:!1,baseTexture:!0},M=function(e){function Text(t,r,i){_classCallCheck(this,Text),i=i||document.createElement("canvas"),i.width=3,i.height=3;var n=u.default.fromCanvas(i,f.default.SCALE_MODE,"text");n.orig=new l.Rectangle,n.trim=new l.Rectangle;var o=_possibleConstructorReturn(this,e.call(this,n));return u.default.addToCache(o._texture,o._texture.baseTexture.textureCacheIds[0]),o.canvas=i,o.context=o.canvas.getContext("2d"),o.resolution=f.default.RESOLUTION,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=t,o.style=r,o.localStyleID=-1,o}return _inherits(Text,e),Text.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var r=this.context,i=y.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=i.width,o=i.height,a=i.lines,s=i.lineHeight,u=i.lineWidths,l=i.maxLineWidth,c=i.fontProperties;this.canvas.width=Math.ceil((n+2*t.padding)*this.resolution),this.canvas.height=Math.ceil((o+2*t.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=t.stroke,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;var h=void 0,d=void 0;if(t.dropShadow){r.fillStyle=t.dropShadowColor,r.globalAlpha=t.dropShadowAlpha,r.shadowBlur=t.dropShadowBlur,t.dropShadowBlur>0&&(r.shadowColor=t.dropShadowColor);for(var f=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,p=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,m=0;m<a.length;m++)h=t.strokeThickness/2,d=t.strokeThickness/2+m*s+c.ascent,"right"===t.align?h+=l-u[m]:"center"===t.align&&(h+=(l-u[m])/2),t.fill&&(this.drawLetterSpacing(a[m],h+f+t.padding,d+p+t.padding),t.stroke&&t.strokeThickness&&(r.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(a[m],h+f+t.padding,d+p+t.padding,!0),r.strokeStyle=t.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(t,a);for(var g=0;g<a.length;g++)h=t.strokeThickness/2,d=t.strokeThickness/2+g*s+c.ascent,"right"===t.align?h+=l-u[g]:"center"===t.align&&(h+=(l-u[g])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[g],h+t.padding,d+t.padding,!0),t.fill&&this.drawLetterSpacing(a[g],h+t.padding,d+t.padding);this.updateTexture()}},Text.prototype.drawLetterSpacing=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this._style,o=n.letterSpacing;if(0===o)return void(i?this.context.strokeText(e,t,r):this.context.fillText(e,t,r));for(var a=String.prototype.split.call(e,""),s=t,u=0,l="";u<e.length;)l=a[u++],i?this.context.strokeText(l,s,r):this.context.fillText(l,s,r),s+=this.context.measureText(l).width+o},Text.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,b.default)(e);e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0)}var r=this._texture,i=this._style,n=i.trim?0:i.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=e.width,o.realHeight=e.height,o.width=e.width/this.resolution,o.height=e.height/this.resolution,r.trim.width=r._frame.width=e.width/this.resolution,r.trim.height=r._frame.height=e.height/this.resolution,r.trim.x=-n,r.trim.y=-n,r.orig.width=r._frame.width-2*n,r.orig.height=r._frame.height-2*n,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},Text.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},Text.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},Text.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},Text.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},Text.prototype._onStyleChange=function(){this.dirty=!0},Text.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var r=void 0,i=void 0,n=void 0,o=void 0,a=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,u=e.fill.slice(),l=e.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,d=1;d<c;++d)l.push(d/c);if(u.unshift(e.fill[0]),l.unshift(0),u.push(e.fill[e.fill.length-1]),l.push(1),e.fillGradientType===h.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,0,a/2,s),i=(u.length+1)*t.length,n=0;for(var f=0;f<t.length;f++){n+=1;for(var p=0;p<u.length;p++)o="number"==typeof l[p]?l[p]/t.length+f/t.length:n/i,r.addColorStop(o,u[p]),n++}}else{r=this.context.createLinearGradient(0,s/2,a,s/2),i=u.length+1,n=1;for(var m=0;m<u.length;m++)o="number"==typeof l[m]?l[m]:n/i,r.addColorStop(o,u[m]),n++}return r},Text.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},x,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},n(Text,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=(0,c.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=(0,c.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){e=e||{},e instanceof m.default?this._style=e:this._style=new m.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null===e||void 0===e?" ":e),this._text!==e&&(this._text=e,this.dirty=!0)}}]),Text}(a.default);t.default=M},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(1),o=r(2),a=function(){function Spritesheet(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,Spritesheet),this.baseTexture=e,this.textures={},this.data=t,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i(Spritesheet,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),Spritesheet.prototype._updateResolution=function(e){var t=this.data.meta.scale,r=(0,o.getResolutionOfUrl)(e,null);return null===r&&(r=void 0!==t?parseFloat(t):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},Spritesheet.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=Spritesheet.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},Spritesheet.prototype._processFrames=function(e){for(var t=e,r=Spritesheet.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var i=this._frameKeys[t],o=this._frames[i].frame;if(o){var a=null,s=null,u=new n.Rectangle(0,0,this._frames[i].sourceSize.w/this.resolution,this._frames[i].sourceSize.h/this.resolution);a=this._frames[i].rotated?new n.Rectangle(o.x/this.resolution,o.y/this.resolution,o.h/this.resolution,o.w/this.resolution):new n.Rectangle(o.x/this.resolution,o.y/this.resolution,o.w/this.resolution,o.h/this.resolution),this._frames[i].trimmed&&(s=new n.Rectangle(this._frames[i].spriteSourceSize.x/this.resolution,this._frames[i].spriteSourceSize.y/this.resolution,o.w/this.resolution,o.h/this.resolution)),this.textures[i]=new n.Texture(this.baseTexture,a,u,s,this._frames[i].rotated?2:0),n.Texture.addToCache(this.textures[i],i)}t++}},Spritesheet.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},Spritesheet.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*Spritesheet.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},Spritesheet.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},Spritesheet}();t.default=a},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(4),o=_interopRequireDefault(n),a=r(0),s=r(333),u=_interopRequireDefault(s),l=function(){function Ticker(){var e=this;_classCallCheck(this,Ticker),this._head=new u.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/o.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(e,t,r))},Ticker.prototype.addOnce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(e,t,r,!0))},Ticker.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},Ticker.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},Ticker.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*o.default.TARGET_FPMS*this.speed;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},i(Ticker,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,o.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),Ticker}();t.default=l},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function TickerListener(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,TickerListener),this.fn=e,this.context=t,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},TickerListener.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},TickerListener.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},TickerListener.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.previous;return this.next=e?null:t,this.previous=null,t},TickerListener}();t.default=i},function(e,t,r){"use strict";function canUploadSameBuffer(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}t.__esModule=!0,t.default=canUploadSameBuffer},function(e,t,r){"use strict";function determineCrossOrigin(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,o||(o=document.createElement("a")),o.href=e,e=n.default.parse(o.href);var r=!e.port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&r&&e.protocol===t.protocol?"":"anonymous"}t.__esModule=!0,t.default=determineCrossOrigin;var i=r(109),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=void 0},function(e,t,r){"use strict";function mapPremultipliedBlendModes(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,e[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,e[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,t[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,t[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,t[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n}t.__esModule=!0,t.default=mapPremultipliedBlendModes;var i=r(0)},function(e,t,r){"use strict";function maxRecommendedTextures(e){return n.default.tablet||n.default.phone?4:e}t.__esModule=!0,t.default=maxRecommendedTextures;var i=r(68),n=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,r){"use strict";function mixin(e,t){if(e&&t)for(var r=Object.keys(t),i=0;i<r.length;++i){var n=r[i];Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}}function delayMixin(e,t){i.push(e,t)}function performMixins(){for(var e=0;e<i.length;e+=2)mixin(i[e],i[e+1]);i.length=0}t.__esModule=!0,t.mixin=mixin,t.delayMixin=delayMixin,t.performMixins=performMixins;var i=[]},function(e,t,r){"use strict";function pluginTarget(e){e.__plugins={},e.registerPlugin=function(t,r){e.__plugins[t]=r},e.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var t in e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}t.__esModule=!0,t.default={mixin:function(e){pluginTarget(e)}}},function(e,t,r){"use strict";function trimCanvas(e){var t=e.width,r=e.height,i=e.getContext("2d"),n=i.getImageData(0,0,t,r),o=n.data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=void 0,l=void 0,c=void 0;for(u=0;u<a;u+=4)0!==o[u+3]&&(l=u/4%t,c=~~(u/4/t),null===s.top&&(s.top=c),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=c:s.bottom<c&&(s.bottom=c));return t=s.right-s.left,r=s.bottom-s.top+1,{height:r,width:t,data:i.getImageData(s.left,s.top,t,r)}}t.__esModule=!0,t.default=trimCanvas},function(e,t,r){"use strict";function warn(e){var t=(new Error).stack;void 0===t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t)))}function deprecation(e){var t=e.mesh,r=e.particles,i=e.extras,n=e.filters,o=e.prepare,a=e.loaders,s=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return warn("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return warn("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return warn("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),i.AnimatedSprite}},TilingSprite:{get:function(){return warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),i.TilingSprite}},BitmapText:{get:function(){return warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),i.BitmapText}},blendModes:{get:function(){return warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return warn("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return warn("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return warn("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return warn("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){warn("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return warn("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){warn("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return warn("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){warn("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return warn("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){warn("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return warn("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){warn("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return warn("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){warn("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return warn("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){warn("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return warn("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=0;l<u.length;l++)!function(t){var r=u[t];Object.defineProperty(e[r.parent],"DEFAULT",{get:function(){return warn("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]},set:function(t){warn("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]=t}})}(l);Object.defineProperties(e.settings,{PRECISION:{get:function(){return warn("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){warn("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return warn("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),i.AnimatedSprite}}}),e.DisplayObject.prototype.generateTexture=function(e,t,r){return warn("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,r)},e.Graphics.prototype.generateTexture=function(e,t){return warn("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.RenderTexture.prototype.render=function(e,t,r,i){this.legacyRenderer.render(e,this,r,t,!i),warn("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return warn("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return warn("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return warn("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return warn("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.BitmapText&&(i.BitmapText.prototype.setText=function(e){this.text=e,warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(e){this.text=e,warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return warn("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return warn("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return warn("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return warn("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return warn("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return warn("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),t=t||{},t instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){warn("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){warn("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),r=-1;this._fontSize=26;for(var i=0;i<t.length;++i)if(t[i].match(/(px|pt|em|%)/)){r=i,this._fontSize=t[i];break}this._fontWeight="normal";for(var n=0;n<r;++n)if(t[n].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[n];break}if(r>-1&&r<t.length-1){this._fontFamily="";for(var o=r+1;o<t.length;++o)this._fontFamily+=t[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,warn("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,r){e.Texture.addToCache(t,r),warn("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return warn("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(n,{AbstractFilter:{get:function(){return warn("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return warn("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return warn("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(warn("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=e},get:function(){return c}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(e,t){return warn("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){warn("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return warn("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){warn("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return warn("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var h=a.Resource,d=a.Loader;Object.defineProperties(h.prototype,{isJson:{get:function(){return warn("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===h.TYPE.JSON}},isXml:{get:function(){return warn("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===h.TYPE.XML}},isImage:{get:function(){return warn("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===h.TYPE.IMAGE}},isAudio:{get:function(){return warn("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===h.TYPE.AUDIO}},isVideo:{get:function(){return warn("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===h.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return warn("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return warn("The after() method is deprecated, please use use()."),this.use}}})}s.interactiveTarget&&Object.defineProperty(s.interactiveTarget,"defaultCursor",{set:function(e){warn("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return warn("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),s.InteractionManager&&(Object.defineProperty(s.InteractionManager,"defaultCursorStyle",{set:function(e){warn("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return warn("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(s.InteractionManager,"currentCursorStyle",{set:function(e){warn("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return warn("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}t.__esModule=!0,t.default=deprecation},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=new n.Rectangle,a=function(){function CanvasExtract(e){_classCallCheck(this,CanvasExtract),this.renderer=e,e.extract=this}return CanvasExtract.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},CanvasExtract.prototype.base64=function(e){return this.canvas(e).toDataURL()},CanvasExtract.prototype.canvas=function(e){var t=this.renderer,r=void 0,i=void 0,a=void 0,s=void 0;e&&(s=e instanceof n.RenderTexture?e:t.generateTexture(e)),s?(r=s.baseTexture._canvasRenderTarget.context,i=s.baseTexture._canvasRenderTarget.resolution,a=s.frame):(r=t.rootContext,a=o,a.width=this.renderer.width,a.height=this.renderer.height);var u=a.width*i,l=a.height*i,c=new n.CanvasRenderTarget(u,l),h=r.getImageData(a.x*i,a.y*i,u,l);return c.context.putImageData(h,0,0),c.canvas},CanvasExtract.prototype.pixels=function(e){var t=this.renderer,r=void 0,i=void 0,a=void 0,s=void 0;return e&&(s=e instanceof n.RenderTexture?e:t.generateTexture(e)),s?(r=s.baseTexture._canvasRenderTarget.context,i=s.baseTexture._canvasRenderTarget.resolution,a=s.frame):(r=t.rootContext,a=o,a.width=t.width,a.height=t.height),r.getImageData(0,0,a.width*i,a.height*i).data},CanvasExtract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},CanvasExtract}();t.default=a,n.CanvasRenderer.registerPlugin("extract",a)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(344);Object.defineProperty(t,"webgl",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(342);Object.defineProperty(t,"canvas",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}})},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=new n.Rectangle,a=function(){function WebGLExtract(e){_classCallCheck(this,WebGLExtract),this.renderer=e,e.extract=this}return WebGLExtract.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},WebGLExtract.prototype.base64=function(e){return this.canvas(e).toDataURL()},WebGLExtract.prototype.canvas=function(e){var t=this.renderer,r=void 0,i=void 0,a=void 0,s=!1,u=void 0;e&&(u=e instanceof n.RenderTexture?e:this.renderer.generateTexture(e)),u?(r=u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],i=r.resolution,a=u.frame,s=!1):(r=this.renderer.rootRenderTarget,i=r.resolution,s=!0,a=o,a.width=r.size.width,a.height=r.size.height);var l=a.width*i,c=a.height*i,h=new n.CanvasRenderTarget(l,c);if(r){t.bindRenderTarget(r);var d=new Uint8Array(4*l*c),f=t.gl;f.readPixels(a.x*i,a.y*i,l,c,f.RGBA,f.UNSIGNED_BYTE,d);var p=h.context.getImageData(0,0,l,c);p.data.set(d),h.context.putImageData(p,0,0),s&&(h.context.scale(1,-1),h.context.drawImage(h.canvas,0,-c))}return h.canvas},WebGLExtract.prototype.pixels=function(e){var t=this.renderer,r=void 0,i=void 0,a=void 0,s=void 0;e&&(s=e instanceof n.RenderTexture?e:this.renderer.generateTexture(e)),s?(r=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],i=r.resolution,a=s.frame):(r=this.renderer.rootRenderTarget,i=r.resolution,a=o,a.width=r.size.width,a.height=r.size.height);var u=a.width*i,l=a.height*i,c=new Uint8Array(4*u*l);if(r){t.bindRenderTarget(r);var h=t.gl;h.readPixels(a.x*i,a.y*i,u,l,h.RGBA,h.UNSIGNED_BYTE,c)}return c},WebGLExtract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},WebGLExtract}();t.default=a,n.WebGLRenderer.registerPlugin("extract",a)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=function(e){function AnimatedSprite(t,r){_classCallCheck(this,AnimatedSprite);var i=_possibleConstructorReturn(this,e.call(this,t[0]instanceof a.Texture?t[0]:t[0].texture));return i._textures=null,i._durations=null,i.textures=t,i._autoUpdate=!1!==r,i.animationSpeed=1,i.loop=!0,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i.playing=!1,i}return _inherits(AnimatedSprite,e),AnimatedSprite.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&a.ticker.shared.remove(this.update,this))},AnimatedSprite.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&a.ticker.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH))},AnimatedSprite.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},AnimatedSprite.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},AnimatedSprite.prototype.update=function(e){var t=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=t/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},AnimatedSprite.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},AnimatedSprite.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t)},AnimatedSprite.fromFrames=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a.Texture.fromFrame(e[r]));return new AnimatedSprite(t)},AnimatedSprite.fromImages=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a.Texture.fromImage(e[r]));return new AnimatedSprite(t)},n(AnimatedSprite,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof a.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}]),AnimatedSprite}(a.Sprite);t.default=s},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=r(145),u=_interopRequireDefault(s),l=r(4),c=_interopRequireDefault(l),h=function(e){function BitmapText(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,BitmapText);var i=_possibleConstructorReturn(this,e.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},i.font=r.font,i._text=t,i._maxWidth=0,i._maxLineHeight=0,i._anchor=new u.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return _inherits(BitmapText,e),BitmapText.prototype.updateText=function(){for(var e=BitmapText.fonts[this._font.name],t=this._font.size/e.size,r=new a.Point,i=[],n=[],o=null,s=0,u=0,l=0,c=-1,h=0,d=0,f=0,p=0;p<this.text.length;p++){var m=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))&&(c=p,h=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))n.push(s),u=Math.max(u,s),l++,r.x=0,r.y+=e.lineHeight,o=null;else if(-1!==c&&this._maxWidth>0&&r.x*t>this._maxWidth)a.utils.removeItems(i,c-d,p-c),p=c,c=-1,++d,n.push(h),u=Math.max(u,h),l++,r.x=0,r.y+=e.lineHeight,o=null;else{var g=e.chars[m];g&&(o&&g.kerning[o]&&(r.x+=g.kerning[o]),i.push({texture:g.texture,line:l,charCode:m,position:new a.Point(r.x+g.xOffset,r.y+g.yOffset)}),s=r.x+(g.texture.width+g.xOffset),r.x+=g.xAdvance,f=Math.max(f,g.yOffset+g.texture.height),o=m)}}n.push(s),u=Math.max(u,s);for(var y=[],v=0;v<=l;v++){var b=0;"right"===this._font.align?b=u-n[v]:"center"===this._font.align&&(b=(u-n[v])/2),y.push(b)}for(var x=i.length,M=this.tint,w=0;w<x;w++){var E=this._glyphs[w];E?E.texture=i[w].texture:(E=new a.Sprite(i[w].texture),this._glyphs.push(E)),E.position.x=(i[w].position.x+y[i[w].line])*t,E.position.y=i[w].position.y*t,E.scale.x=E.scale.y=t,E.tint=M,E.parent||this.addChild(E)}for(var _=x;_<this._glyphs.length;++_)this.removeChild(this._glyphs[_]);if(this._textWidth=u*t,this._textHeight=(r.y+e.lineHeight)*t,0!==this.anchor.x||0!==this.anchor.y)for(var T=0;T<x;T++)this._glyphs[T].x-=this._textWidth*this.anchor.x,this._glyphs[T].y-=this._textHeight*this.anchor.y;this._maxLineHeight=f*t},BitmapText.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},BitmapText.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},BitmapText.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},BitmapText.registerFont=function(e,t){var r={},i=e.getElementsByTagName("info")[0],n=e.getElementsByTagName("common")[0],o=t.baseTexture.resolution||c.default.RESOLUTION;r.font=i.getAttribute("face"),r.size=parseInt(i.getAttribute("size"),10),r.lineHeight=parseInt(n.getAttribute("lineHeight"),10)/o,r.chars={};for(var s=e.getElementsByTagName("char"),u=0;u<s.length;u++){var l=s[u],h=parseInt(l.getAttribute("id"),10),d=new a.Rectangle(parseInt(l.getAttribute("x"),10)/o+t.frame.x/o,parseInt(l.getAttribute("y"),10)/o+t.frame.y/o,parseInt(l.getAttribute("width"),10)/o,parseInt(l.getAttribute("height"),10)/o);r.chars[h]={xOffset:parseInt(l.getAttribute("xoffset"),10)/o,yOffset:parseInt(l.getAttribute("yoffset"),10)/o,xAdvance:parseInt(l.getAttribute("xadvance"),10)/o,kerning:{},texture:new a.Texture(t.baseTexture,d)}}for(var f=e.getElementsByTagName("kerning"),p=0;p<f.length;p++){var m=f[p],g=parseInt(m.getAttribute("first"),10)/o,y=parseInt(m.getAttribute("second"),10)/o,v=parseInt(m.getAttribute("amount"),10)/o;r.chars[y]&&(r.chars[y].kerning[g]=v)}return BitmapText.fonts[r.font]=r,r},n(BitmapText,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):BitmapText.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),BitmapText}(a.Container);t.default=h,h.fonts={}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=r(78),u=_interopRequireDefault(s),l=r(82),c=_interopRequireDefault(l),h=new a.Point,d=function(e){function TilingSprite(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;_classCallCheck(this,TilingSprite);var n=_possibleConstructorReturn(this,e.call(this,t));return n.tileTransform=new a.TransformStatic,n._width=r,n._height=i,n._canvasPattern=null,n.uvTransform=t.transform||new c.default(t),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return _inherits(TilingSprite,e),TilingSprite.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},TilingSprite.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},TilingSprite.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var r=e.context,i=this.worldTransform,n=e.resolution,o=t.baseTexture,s=o.resolution,l=this.tilePosition.x/this.tileScale.x%t._frame.width*s,c=this.tilePosition.y/this.tileScale.y%t._frame.height*s;if(!this._canvasPattern){var h=new a.CanvasRenderTarget(t._frame.width,t._frame.height,s);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=u.default.getTintedTexture(this,this.tint)),h.context.drawImage(this.tintedTexture,0,0)):h.context.drawImage(o.source,-t._frame.x*s,-t._frame.y*s),this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),e.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/s,this.tileScale.y/s);var d=this.anchor.x*-this._width,f=this.anchor.y*-this._height;this.uvRespectAnchor?(r.translate(l,c),r.fillRect(-l+d,-c+f,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(r.translate(l+d,c+f),r.fillRect(-l,-c,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},TilingSprite.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,i)},TilingSprite.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new a.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},TilingSprite.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,h);var t=this._width,r=this._height,i=-t*this.anchor._x;if(h.x>=i&&h.x<i+t){var n=-r*this.anchor._y;if(h.y>=n&&h.y<n+r)return!0}return!1},TilingSprite.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},TilingSprite.from=function(e,t,r){return new TilingSprite(a.Texture.from(e),t,r)},TilingSprite.fromFrame=function(e,t,r){var i=a.utils.TextureCache[e];if(!i)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new TilingSprite(i,t,r)},TilingSprite.fromImage=function(e,t,r,i,n){return new TilingSprite(a.Texture.fromImage(e,i,n),t,r)},n(TilingSprite,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),TilingSprite}(a.Sprite);t.default=d},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=r(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=r(19),a=_interopRequireDefault(o),s=r(24),u=_interopRequireDefault(s),l=r(2),c=n.DisplayObject,h=new n.Matrix;c.prototype._cacheAsBitmap=!1,c.prototype._cacheData=!1;var d=function CacheData(){_classCallCheck(this,CacheData),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(c.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t=void 0;e?(this._cacheData||(this._cacheData=new d),t=this._cacheData,t.originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),c.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},c.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;r.pad(i)}var o=e._activeRenderTarget,s=e.filterManager.filterStack,c=n.RenderTexture.create(0|r.width,0|r.height),d="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=d,u.default.addToCache(c.baseTexture,d),a.default.addToCache(c,d);var f=h;f.tx=-r.x,f.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,c,!0,f,!0),e.bindRenderTarget(o),e.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var p=new n.Sprite(c);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-r.x/r.width,p.anchor.y=-r.y/r.height,p.alpha=t,p._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},c.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},c.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),r=this.alpha;this.alpha=1;var i=e.context,o=n.RenderTexture.create(0|t.width,0|t.height),s="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=s,u.default.addToCache(o.baseTexture,s),a.default.addToCache(o,s);var c=h;this.transform.localTransform.copy(c),c.invert(),c.tx-=t.x,c.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,o,!0,c,!1),e.context=i,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var d=new n.Sprite(o);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-t.x/t.width,d.anchor.y=-t.y/t.height,d._bounds=this._bounds,d.alpha=r,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=d,this.containsPoint=d.containsPoint.bind(d)}},c.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,u.default.removeFromCache(this._cacheData.textureCacheId),a.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},c.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},function(e,t,r){"use strict";var i=r(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i);n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},function(e,t,r){"use strict";var i=r(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i);n.DisplayObject.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.Point,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(1),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=r(0),s=(r(11),new o.Matrix),u=function(e){function TilingSpriteRenderer(t){_classCallCheck(this,TilingSpriteRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));return r.shader=null,r.simpleShader=null,r.quad=null,r}return _inherits(TilingSpriteRenderer,e),TilingSpriteRenderer.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new o.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new o.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new o.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},TilingSpriteRenderer.prototype.render=function(e){var t=this.renderer,r=this.quad;t.bindVao(r.vao);var i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(i=r.uvs,i[0]=i[6]=-e.anchor.x,i[1]=i[3]=-e.anchor.y,i[2]=i[4]=1-e.anchor.x,i[5]=i[7]=1-e.anchor.y),r.upload();var n=e._texture,u=n.baseTexture,l=e.tileTransform.localTransform,c=e.uvTransform,h=u.isPowerOfTwo&&n.frame.width===u.width&&n.frame.height===u.height;h&&(u._glTextures[t.CONTEXT_UID]?h=u.wrapMode!==a.WRAP_MODES.CLAMP:u.wrapMode===a.WRAP_MODES.CLAMP&&(u.wrapMode=a.WRAP_MODES.REPEAT));var d=h?this.simpleShader:this.shader;t.bindShader(d);var f=n.width,p=n.height,m=e._width,g=e._height;s.set(l.a*f/m,l.b*f/g,l.c*p/m,l.d*p/g,l.tx/m,l.ty/g),s.invert(),h?s.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=s.toArray(!0),d.uniforms.uColor=o.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,d.uniforms.uColor,u.premultipliedAlpha),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=t.bindTexture(n),t.setBlendMode(o.utils.correctBlendMode(e.blendMode,u.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},TilingSpriteRenderer}(o.ObjectRenderer);t.default=u,o.WebGLRenderer.registerPlugin("tilingSprite",u)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=r(158),u=_interopRequireDefault(s),l=r(159),c=_interopRequireDefault(l),h=function(e){function BlurFilter(t,r,i,n){_classCallCheck(this,BlurFilter);var o=_possibleConstructorReturn(this,e.call(this));return o.blurXFilter=new u.default(t,r,i,n),o.blurYFilter=new c.default(t,r,i,n),o.padding=0,o.resolution=i||a.settings.RESOLUTION,o.quality=r||4,o.blur=t||8,o}return _inherits(BlurFilter,e),BlurFilter.prototype.apply=function(e,t,r){var i=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,i,!0),this.blurYFilter.apply(e,i,r,!1),e.returnRenderTarget(i)},n(BlurFilter,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),BlurFilter}(a.Filter);t.default=h},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=(r(11),function(e){function ColorMatrixFilter(){_classCallCheck(this,ColorMatrixFilter);var t=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return t.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],t.alpha=1,t}return _inherits(ColorMatrixFilter,e),ColorMatrixFilter.prototype._loadMatrix=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r},ColorMatrixFilter.prototype._multiply=function(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e},ColorMatrixFilter.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},ColorMatrixFilter.prototype.brightness=function(e,t){var r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},ColorMatrixFilter.prototype.greyscale=function(e,t){var r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},ColorMatrixFilter.prototype.blackAndWhite=function(e){var t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e),i=Math.sin(e),n=Math.sqrt,o=1/3,a=n(o),s=r+(1-r)*o,u=o*(1-r)-a*i,l=o*(1-r)+a*i,c=o*(1-r)+a*i,h=r+o*(1-r),d=o*(1-r)-a*i,f=o*(1-r)-a*i,p=o*(1-r)+a*i,m=r+o*(1-r),g=[s,u,l,0,0,c,h,d,0,0,f,p,m,0,0,0,0,0,1,0];this._loadMatrix(g,t)},ColorMatrixFilter.prototype.contrast=function(e,t){var r=(e||0)+1,i=-128*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,t)},ColorMatrixFilter.prototype.saturate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=2*e/3+1,i=-.5*(r-1),n=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(n,t)},ColorMatrixFilter.prototype.desaturate=function(){this.saturate(-1)},ColorMatrixFilter.prototype.negative=function(e){var t=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.sepia=function(e){var t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.technicolor=function(e){var t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.polaroid=function(e){var t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.toBGR=function(e){var t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.kodachrome=function(e){var t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.browni=function(e){var t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.vintage=function(e){var t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.colorTone=function(e,t,r,i,n){e=e||.2,t=t||.15,r=r||16770432,i=i||3375104;var o=(r>>16&255)/255,a=(r>>8&255)/255,s=(255&r)/255,u=(i>>16&255)/255,l=(i>>8&255)/255,c=(255&i)/255,h=[.3,.59,.11,0,0,o,a,s,e,0,u,l,c,t,0,o-u,a-l,s-c,0,0];this._loadMatrix(h,n)},ColorMatrixFilter.prototype.night=function(e,t){e=e||.1;var r=[-2*e,-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},ColorMatrixFilter.prototype.predator=function(e,t){var r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)},ColorMatrixFilter.prototype.lsd=function(e){var t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)},ColorMatrixFilter.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},n(ColorMatrixFilter,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),ColorMatrixFilter}(a.Filter));t.default=s,s.prototype.grayscale=s.prototype.greyscale},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=(r(11),function(e){function DisplacementFilter(t,r){_classCallCheck(this,DisplacementFilter);var i=new a.Matrix;t.renderable=!1;var n=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return n.maskSprite=t,n.maskMatrix=i,n.uniforms.mapSampler=t._texture,n.uniforms.filterMatrix=i,n.uniforms.scale={x:1,y:1},null!==r&&void 0!==r||(r=20),n.scale=new a.Point(r,r),n}return _inherits(DisplacementFilter,e),DisplacementFilter.prototype.apply=function(e,t,r){var i=1/r.destinationFrame.width*(r.size.width/t.size.width);this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*i,this.uniforms.scale.y=this.scale.y*i,e.applyFilter(this,t,r)},n(DisplacementFilter,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),DisplacementFilter}(a.Filter));t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(1),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=(r(11),function(e){function FXAAFilter(){return _classCallCheck(this,FXAAFilter),_possibleConstructorReturn(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return _inherits(FXAAFilter,e),FXAAFilter}(o.Filter));t.default=a},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(355);Object.defineProperty(t,"FXAAFilter",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(357);Object.defineProperty(t,"NoiseFilter",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var o=r(354);Object.defineProperty(t,"DisplacementFilter",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(352);Object.defineProperty(t,"BlurFilter",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(158);Object.defineProperty(t,"BlurXFilter",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}});var u=r(159);Object.defineProperty(t,"BlurYFilter",{enumerable:!0,get:function(){return _interopRequireDefault(u).default}});var l=r(353);Object.defineProperty(t,"ColorMatrixFilter",{enumerable:!0,get:function(){return _interopRequireDefault(l).default}});var c=r(358);Object.defineProperty(t,"VoidFilter",{enumerable:!0,get:function(){return _interopRequireDefault(c).default}})},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=(r(11),function(e){function NoiseFilter(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();_classCallCheck(this,NoiseFilter);var i=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return i.noise=t,i.seed=r,i}return _inherits(NoiseFilter,e),n(NoiseFilter,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),NoiseFilter}(a.Filter));t.default=s},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(1),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=(r(11),function(e){function VoidFilter(){_classCallCheck(this,VoidFilter);var t=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return t.glShaderKey="void",t}return _inherits(VoidFilter,e),VoidFilter}(o.Filter));t.default=a},function(e,t,r){"use strict";(function(e){function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0,t.loader=t.prepare=t.particles=t.mesh=t.loaders=t.interaction=t.filters=t.extras=t.extract=t.accessibility=void 0;var i=r(378);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var n=r(1);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(341),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(297),u=_interopRequireWildcard(s),l=r(343),c=_interopRequireWildcard(l),h=r(157),d=_interopRequireWildcard(h),f=r(356),p=_interopRequireWildcard(f),m=r(363),g=_interopRequireWildcard(m),y=r(364),v=_interopRequireWildcard(y),b=r(369),x=_interopRequireWildcard(b),M=r(372),w=_interopRequireWildcard(M),E=r(381),_=_interopRequireWildcard(E);n.utils.mixins.performMixins();var T=v.shared||null;t.accessibility=u,t.extract=c,t.extras=d,t.filters=p,t.interaction=g,t.loaders=v,t.mesh=x,t.particles=w,t.prepare=_,t.loader=T,"function"==typeof a.default&&(0,a.default)(t),e.PIXI=t}).call(t,r(12))},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function InteractionEvent(){_classCallCheck(this,InteractionEvent),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return InteractionEvent.prototype.stopPropagation=function(){this.stopped=!0},InteractionEvent.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},InteractionEvent}();t.default=i},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=r(163),u=_interopRequireDefault(s),l=r(360),c=_interopRequireDefault(l),h=r(362),d=_interopRequireDefault(h),f=r(18),p=_interopRequireDefault(f),m=r(164),g=_interopRequireDefault(m);a.utils.mixins.delayMixin(a.DisplayObject.prototype,g.default);var y="MOUSE",v={target:null,data:{global:null}},b=function(e){function InteractionManager(t,r){_classCallCheck(this,InteractionManager);var i=_possibleConstructorReturn(this,e.call(this));return r=r||{},i.renderer=t,i.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new u.default,i.mouse.identifier=y,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[y]=i.mouse,i.interactionDataPool=[],i.eventData=new c.default,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i._tempPoint=new a.Point,i.resolution=1,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return _inherits(InteractionManager,e),InteractionManager.prototype.hitTest=function(e,t){return v.target=null,v.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(v,t,null,!0),v.target},InteractionManager.prototype.setTargetElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},InteractionManager.prototype.addEvents=function(){this.interactionDOMElement&&(a.ticker.shared.add(this.update,this,a.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(a.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},InteractionManager.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&"touch"!==r.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},InteractionManager.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(void 0===t?"undefined":n(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},InteractionManager.prototype.dispatchEvent=function(e,t,r){r.stopped||(r.currentTarget=e,r.type=t,e.emit(t,r),e[t]&&e[t](r))},InteractionManager.prototype.mapPositionToPoint=function(e,t,r){var i=void 0;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-i.left)*(this.interactionDOMElement.width/i.width)*n,e.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n},InteractionManager.prototype.processInteractive=function(e,t,r,i,n){if(!t||!t.visible)return!1;var o=e.data.global;n=t.interactive||n;var a=!1,s=n;if(t.hitArea?s=!1:i&&t._mask&&(t._mask.containsPoint(o)||(i=!1)),t.interactiveChildren&&t.children)for(var u=t.children,l=u.length-1;l>=0;l--){var c=u[l],h=this.processInteractive(e,c,r,i,s);if(h){if(!c.parent)continue;s=!1,h&&(e.target&&(i=!1),a=!0)}}return n&&(i&&!e.target&&(t.hitArea?(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(a=!0)):t.containsPoint&&t.containsPoint(o)&&(a=!0)),t.interactive&&(a&&!e.target&&(e.target=t),r&&r(e,t,!!a))),a},InteractionManager.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var r=t.length,i=0;i<r;i++){var n=t[i],o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(a.data.originalEvent=e,this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===n.pointerType)this.emit("touchstart",a);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},InteractionManager.prototype.processPointerDown=function(e,t,r){var i=e.data,n=e.data.identifier;if(r)if(t.trackedPointers[n]||(t.trackedPointers[n]=new d.default(n)),this.dispatchEvent(t,"pointerdown",e),"touch"===i.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;o?t.trackedPointers[n].rightDown=!0:t.trackedPointers[n].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},InteractionManager.prototype.onPointerComplete=function(e,t,r){for(var i=this.normalizeToPointerData(e),n=i.length,o=e.target!==this.interactionDOMElement?"outside":"",a=0;a<n;a++){var s=i[a],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(l.data.originalEvent=e,this.processInteractive(l,this.renderer._lastObjectRendered,r,t||!o),this.emit(t?"pointercancel":"pointerup"+o,l),"mouse"===s.pointerType||"pen"===s.pointerType){var c=2===s.button;this.emit(c?"rightup"+o:"mouseup"+o,l)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(s.pointerId,u))}},InteractionManager.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},InteractionManager.prototype.processPointerCancel=function(e,t){var r=e.data,i=e.data.identifier;void 0!==t.trackedPointers[i]&&(delete t.trackedPointers[i],this.dispatchEvent(t,"pointercancel",e),"touch"===r.pointerType&&this.dispatchEvent(t,"touchcancel",e))},InteractionManager.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},InteractionManager.prototype.processPointerUp=function(e,t,r){var i=e.data,n=e.data.identifier,o=t.trackedPointers[n],a="touch"===i.pointerType;if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button,u=d.default.FLAGS,l=s?u.RIGHT_DOWN:u.LEFT_DOWN,c=void 0!==o&&o.flags&l;r?(this.dispatchEvent(t,s?"rightup":"mouseup",e),c&&this.dispatchEvent(t,s?"rightclick":"click",e)):c&&this.dispatchEvent(t,s?"rightupoutside":"mouseupoutside",e),o&&(s?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&(this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[n]},InteractionManager.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"===t[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var r=t.length,i=0;i<r;i++){var n=t[i],o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);a.data.originalEvent=e;var s="touch"!==n.pointerType||this.moveWhenInside;this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",a),"touch"===n.pointerType&&this.emit("touchmove",a),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",a)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},InteractionManager.prototype.processPointerMove=function(e,t,r){var i=e.data,n="touch"===i.pointerType,o="mouse"===i.pointerType||"pen"===i.pointerType;o&&this.processPointerOverOut(e,t,r),this.moveWhenInside&&!r||(this.dispatchEvent(t,"pointermove",e),n&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},InteractionManager.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e),r=t[0];"mouse"===r.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(r),n=this.configureInteractionEventForDOMEvent(this.eventData,r,i);n.data.originalEvent=r,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===r.pointerType||"pen"===r.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},InteractionManager.prototype.processPointerOverOut=function(e,t,r){var i=e.data,n=e.data.identifier,o="mouse"===i.pointerType||"pen"===i.pointerType,a=t.trackedPointers[n];r&&!a&&(a=t.trackedPointers[n]=new d.default(n)),void 0!==a&&(r&&this.mouseOverRenderer?(a.over||(a.over=!0,this.dispatchEvent(t,"pointerover",e),o&&this.dispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):a.over&&(a.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),a.none&&delete t.trackedPointers[n]))},InteractionManager.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e),r=t[0],i=this.getInteractionDataForPointerId(r),n=this.configureInteractionEventForDOMEvent(this.eventData,r,i);n.data.originalEvent=r,"mouse"===r.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mouseover",n)},InteractionManager.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,r=void 0;return t===y||"mouse"===e.pointerType?r=this.mouse:this.activeInteractionData[t]?r=this.activeInteractionData[t]:(r=this.interactionDataPool.pop()||new u.default,r.identifier=t,this.activeInteractionData[t]=r),r._copyEvent(e),r},InteractionManager.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t._reset(),this.interactionDataPool.push(t))},InteractionManager.prototype.configureInteractionEventForDOMEvent=function(e,t,r){return e.data=r,this.mapPositionToPoint(r.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===t.pointerType&&(t.globalX=r.global.x,t.globalY=r.global.y),r.originalEvent=t,e._reset(),e},InteractionManager.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var r=0,i=e.changedTouches.length;r<i;r++){var n=e.changedTouches[r];void 0===n.button&&(n.button=e.touches.length?1:0),void 0===n.buttons&&(n.buttons=e.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),n.twist=0,n.tangentialPressure=0,void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,t.push(n)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent?t.push(e):(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=y),void 0===e.pressure&&(e.pressure=.5),e.twist=0,e.tangentialPressure=0,e.isNormalized=!0,t.push(e));return t},InteractionManager.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},InteractionManager}(p.default);t.default=b,a.WebGLRenderer.registerPlugin("interaction",b),a.CanvasRenderer.registerPlugin("interaction",b)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=function(){function InteractionTrackingData(e){_classCallCheck(this,InteractionTrackingData),this._pointerId=e,this._flags=InteractionTrackingData.FLAGS.NONE}return InteractionTrackingData.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},i(InteractionTrackingData,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),InteractionTrackingData}();t.default=n,n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(163);Object.defineProperty(t,"InteractionData",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(361);Object.defineProperty(t,"InteractionManager",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var o=r(164);Object.defineProperty(t,"interactiveTarget",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.shared=t.Resource=t.textureParser=t.getResourcePath=t.spritesheetParser=t.parseBitmapFontData=t.bitmapFontParser=t.Loader=void 0;var i=r(165);Object.defineProperty(t,"bitmapFontParser",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}}),Object.defineProperty(t,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var n=r(166);Object.defineProperty(t,"spritesheetParser",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}}),Object.defineProperty(t,"getResourcePath",{enumerable:!0,get:function(){return n.getResourcePath}});var o=r(167);Object.defineProperty(t,"textureParser",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(37);Object.defineProperty(t,"Resource",{enumerable:!0,get:function(){return a.Resource}});var s=r(138),u=_interopRequireDefault(s),l=r(365),c=_interopRequireDefault(l);t.Loader=c.default;var h=new c.default;h.destroy=function(){},t.shared=h;var d=u.default.prototype;d._loader=null,Object.defineProperty(d,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?h:new c.default}return this._loader}}),d._parentDestroy=d.destroy,d.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(37),o=_interopRequireDefault(n),a=r(386),s=r(18),u=_interopRequireDefault(s),l=r(167),c=_interopRequireDefault(l),h=r(166),d=_interopRequireDefault(h),f=r(165),p=_interopRequireDefault(f),m=function(e){function Loader(t,r){_classCallCheck(this,Loader);var i=_possibleConstructorReturn(this,e.call(this,t,r));u.default.call(i);for(var n=0;n<Loader._pixiMiddleware.length;++n)i.use(Loader._pixiMiddleware[n]());return i.onStart.add(function(e){return i.emit("start",e)}),i.onProgress.add(function(e,t){return i.emit("progress",e,t)}),i.onError.add(function(e,t,r){return i.emit("error",e,t,r)}),i.onLoad.add(function(e,t){return i.emit("load",e,t)}),i.onComplete.add(function(e,t){return i.emit("complete",e,t)}),i}return _inherits(Loader,e),Loader.addPixiMiddleware=function(e){Loader._pixiMiddleware.push(e)},Loader.prototype.destroy=function(){this.removeAllListeners(),this.reset()},Loader}(o.default);t.default=m;for(var g in u.default.prototype)m.prototype[g]=u.default.prototype[g];m._pixiMiddleware=[a.blobMiddlewareFactory,c.default,d.default,p.default];var y=o.default.Resource;y.setExtensionXhrType("fnt",y.XHR_RESPONSE_TYPE.DOCUMENT)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(168),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=10,u=function(e){function NineSlicePlane(t,r,i,n,o){_classCallCheck(this,NineSlicePlane);var a=_possibleConstructorReturn(this,e.call(this,t,4,4));return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a.leftWidth=void 0!==r?r:s,a.rightWidth=void 0!==n?n:s,a.topHeight=void 0!==i?i:s,a.bottomHeight=void 0!==o?o:s,a.refresh(!0),a}return _inherits(NineSlicePlane,e),NineSlicePlane.prototype.updateHorizontalVertices=function(){var e=this.vertices;e[9]=e[11]=e[13]=e[15]=this._topHeight,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight,e[25]=e[27]=e[29]=e[31]=this._height},NineSlicePlane.prototype.updateVerticalVertices=function(){var e=this.vertices;e[2]=e[10]=e[18]=e[26]=this._leftWidth,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth,e[6]=e[14]=e[22]=e[30]=this._width},NineSlicePlane.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha;var r=this.worldTransform,i=e.resolution;e.roundPixels?t.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i|0,r.ty*i|0):t.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i);var n=this._texture.baseTexture,o=n.source,a=n.width,s=n.height;this.drawSegment(t,o,a,s,0,1,10,11),this.drawSegment(t,o,a,s,2,3,12,13),this.drawSegment(t,o,a,s,4,5,14,15),this.drawSegment(t,o,a,s,8,9,18,19),this.drawSegment(t,o,a,s,10,11,20,21),this.drawSegment(t,o,a,s,12,13,22,23),this.drawSegment(t,o,a,s,16,17,26,27),this.drawSegment(t,o,a,s,18,19,28,29),this.drawSegment(t,o,a,s,20,21,30,31)},NineSlicePlane.prototype.drawSegment=function(e,t,r,i,n,o,a,s){var u=this.uvs,l=this.vertices,c=(u[a]-u[n])*r,h=(u[s]-u[o])*i,d=l[a]-l[n],f=l[s]-l[o];c<1&&(c=1),h<1&&(h=1),d<1&&(d=1),f<1&&(f=1),e.drawImage(t,u[n]*r,u[o]*i,c,h,l[n],l[o],d,f)},NineSlicePlane.prototype._refresh=function(){e.prototype._refresh.call(this);var t=this.uvs,r=this._texture;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var i=1/this._origWidth,n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=i*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-i*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty=!0,this.multiplyUvs()},n(NineSlicePlane,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),NineSlicePlane}(a.default);t.default=u},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(36),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){function Rope(t,r){_classCallCheck(this,Rope);var i=_possibleConstructorReturn(this,e.call(this,t));return i.points=r,i.vertices=new Float32Array(4*r.length),i.uvs=new Float32Array(4*r.length),i.colors=new Float32Array(2*r.length),i.indices=new Uint16Array(2*r.length),i.autoUpdate=!0,i.refresh(),i}return _inherits(Rope,e),Rope.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,r=this.indices,i=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var n=e.length,o=1;o<n;o++){var a=4*o,s=o/(n-1);t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1,a=2*o,i[a]=1,i[a+1]=1,a=2*o,r[a]=a,r[a+1]=a+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},Rope.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],r=void 0,i=0,n=0,o=this.vertices,a=e.length,s=0;s<a;s++){var u=e[s],l=4*s;r=s<e.length-1?e[s+1]:u,n=-(r.x-t.x),i=r.y-t.y;var c=10*(1-s/(a-1));c>1&&(c=1);var h=Math.sqrt(i*i+n*n),d=this._texture.height/2;i/=h,n/=h,i*=d,n*=d,o[l]=u.x+i,o[l+1]=u.y+n,o[l+2]=u.x-i,o[l+3]=u.y-n,t=u}},Rope.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},Rope}(o.default);t.default=a},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(1),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=r(36),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function MeshSpriteRenderer(e){_classCallCheck(this,MeshSpriteRenderer),this.renderer=e}return MeshSpriteRenderer.prototype.render=function(e){var t=this.renderer,r=t.context,i=e.worldTransform,n=t.resolution;t.roundPixels?r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),t.setBlendMode(e.blendMode),e.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},MeshSpriteRenderer.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,r=0;r<t-2;r++){var i=2*r;this._renderDrawTriangle(e,i,i+2,i+4)}},MeshSpriteRenderer.prototype._renderTriangles=function(e){for(var t=e.indices,r=t.length,i=0;i<r;i+=3){var n=2*t[i],o=2*t[i+1],a=2*t[i+2];this._renderDrawTriangle(e,n,o,a)}},MeshSpriteRenderer.prototype._renderDrawTriangle=function(e,t,r,i){var n=this.renderer.context,o=e.uvs,a=e.vertices,s=e._texture;if(s.valid){var u=s.baseTexture,l=u.source,c=u.width,h=u.height,d=void 0,f=void 0,p=void 0,m=void 0,g=void 0,y=void 0;if(e.uploadUvTransform){var v=e._uvTransform.mapCoord;d=(o[t]*v.a+o[t+1]*v.c+v.tx)*u.width,f=(o[r]*v.a+o[r+1]*v.c+v.tx)*u.width,p=(o[i]*v.a+o[i+1]*v.c+v.tx)*u.width,m=(o[t]*v.b+o[t+1]*v.d+v.ty)*u.height,g=(o[r]*v.b+o[r+1]*v.d+v.ty)*u.height,y=(o[i]*v.b+o[i+1]*v.d+v.ty)*u.height}else d=o[t]*u.width,f=o[r]*u.width,p=o[i]*u.width,m=o[t+1]*u.height,g=o[r+1]*u.height,y=o[i+1]*u.height;var b=a[t],x=a[r],M=a[i],w=a[t+1],E=a[r+1],_=a[i+1];if(e.canvasPadding>0){var T=e.canvasPadding/e.worldTransform.a,A=e.canvasPadding/e.worldTransform.d,S=(b+x+M)/3,C=(w+E+_)/3,L=b-S,D=w-C,I=Math.sqrt(L*L+D*D);b=S+L/I*(I+T),w=C+D/I*(I+A),L=x-S,D=E-C,I=Math.sqrt(L*L+D*D),x=S+L/I*(I+T),E=C+D/I*(I+A),L=M-S,D=_-C,I=Math.sqrt(L*L+D*D),M=S+L/I*(I+T),_=C+D/I*(I+A)}n.save(),n.beginPath(),n.moveTo(b,w),n.lineTo(x,E),n.lineTo(M,_),n.closePath(),n.clip();var N=d*g+m*p+f*y-g*p-m*f-d*y,O=b*g+m*M+x*y-g*M-m*x-b*y,R=d*x+b*p+f*M-x*p-b*f-d*M,j=d*g*M+m*x*p+b*f*y-b*g*p-m*f*M-d*x*y,P=w*g+m*_+E*y-g*_-m*E-w*y,k=d*E+w*p+f*_-E*p-w*f-d*_,B=d*g*_+m*E*p+w*f*y-w*g*p-m*f*_-d*E*y;n.transform(O/N,P/N,R/N,k/N,j/N,B/N),n.drawImage(l,0,0,c*u.resolution,h*u.resolution,0,0,c,h),n.restore()}},MeshSpriteRenderer.prototype.renderMeshFlat=function(e){var t=this.renderer.context,r=e.vertices,i=r.length/2;t.beginPath();for(var n=1;n<i-2;++n){var o=2*n,a=r[o],s=r[o+1],u=r[o+2],l=r[o+3],c=r[o+4],h=r[o+5];t.moveTo(a,s),t.lineTo(u,l),t.lineTo(c,h)}t.fillStyle="#FF0000",t.fill(),t.closePath()},MeshSpriteRenderer.prototype.destroy=function(){this.renderer=null},MeshSpriteRenderer}();t.default=s,n.CanvasRenderer.registerPlugin("mesh",s)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(36);Object.defineProperty(t,"Mesh",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(370);Object.defineProperty(t,"MeshRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var o=r(368);Object.defineProperty(t,"CanvasMeshRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(168);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(366);Object.defineProperty(t,"NineSlicePlane",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}});var u=r(367);Object.defineProperty(t,"Rope",{enumerable:!0,get:function(){return _interopRequireDefault(u).default}})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(1),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=r(9),s=_interopRequireDefault(a),u=r(36),l=_interopRequireDefault(u),c=(r(11),o.Matrix.IDENTITY),h=function(e){function MeshRenderer(t){_classCallCheck(this,MeshRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));return r.shader=null,r}return _inherits(MeshRenderer,e),MeshRenderer.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new o.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},MeshRenderer.prototype.render=function(e){var t=this.renderer,r=t.gl,i=e._texture;if(i.valid){var n=e._glDatas[t.CONTEXT_UID];n||(t.bindVao(null),n={shader:this.shader,vertexBuffer:s.default.GLBuffer.createVertexBuffer(r,e.vertices,r.STREAM_DRAW),uvBuffer:s.default.GLBuffer.createVertexBuffer(r,e.uvs,r.STREAM_DRAW),indexBuffer:s.default.GLBuffer.createIndexBuffer(r,e.indices,r.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty},n.vao=new s.default.VertexArrayObject(r).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=n),t.bindVao(n.vao),e.dirty!==n.dirty&&(n.dirty=e.dirty,n.uvBuffer.upload(e.uvs)),e.indexDirty!==n.indexDirty&&(n.indexDirty=e.indexDirty,n.indexBuffer.upload(e.indices)),n.vertexBuffer.upload(e.vertices),t.bindShader(n.shader),n.shader.uniforms.uSampler=t.bindTexture(i),t.state.setBlendMode(o.utils.correctBlendMode(e.blendMode,i.baseTexture.premultipliedAlpha)),n.shader.uniforms.uTransform&&(e.uploadUvTransform?n.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):n.shader.uniforms.uTransform=c.toArray(!0)),n.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),n.shader.uniforms.uColor=o.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,n.shader.uniforms.uColor,i.baseTexture.premultipliedAlpha);var a=e.drawMode===l.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;n.vao.draw(a,e.indices.length,0)}},MeshRenderer}(o.ObjectRenderer);t.default=h,o.WebGLRenderer.registerPlugin("mesh",h)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=r(2),u=function(e){function ParticleContainer(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;_classCallCheck(this,ParticleContainer);var n=_possibleConstructorReturn(this,e.call(this));return i>16384&&(i=16384),i>t&&(i=t),n._properties=[!1,!0,!1,!1,!1],n._maxSize=t,n._batchSize=i,n._glBuffers={},n._bufferToUpdate=0,n.interactiveChildren=!1,n.blendMode=a.BLEND_MODES.NORMAL,n.roundPixels=!0,n.baseTexture=null,n.setProperties(r),n._tint=0,n.tintRgb=new Float32Array(4),n.tint=16777215,n}return _inherits(ParticleContainer,e),ParticleContainer.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e?!!e.alpha:this._properties[4])},ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},ParticleContainer.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},ParticleContainer.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},ParticleContainer.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,r=this.worldTransform,i=!0,n=0,o=0,a=0,s=0,u=e.blendModes[this.blendMode];u!==t.globalCompositeOperation&&(t.globalCompositeOperation=u),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var c=this.children[l];if(c.visible){var h=c._texture.frame;if(t.globalAlpha=this.worldAlpha*c.alpha,c.rotation%(2*Math.PI)==0)i&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution),i=!1),n=c.anchor.x*(-h.width*c.scale.x)+c.position.x+.5,o=c.anchor.y*(-h.height*c.scale.y)+c.position.y+.5,a=h.width*c.scale.x,s=h.height*c.scale.y;else{i||(i=!0),c.displayObjectUpdateTransform();var d=c.worldTransform;e.roundPixels?t.setTransform(d.a,d.b,d.c,d.d,d.tx*e.resolution|0,d.ty*e.resolution|0):t.setTransform(d.a,d.b,d.c,d.d,d.tx*e.resolution,d.ty*e.resolution),n=c.anchor.x*-h.width+.5,o=c.anchor.y*-h.height+.5,a=h.width,s=h.height}var f=c._texture.baseTexture.resolution;t.drawImage(c._texture.baseTexture.source,h.x*f,h.y*f,h.width*f,h.height*f,n*e.resolution,o*e.resolution,a*e.resolution,s*e.resolution)}}}},ParticleContainer.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null},n(ParticleContainer,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,s.hex2rgb)(e,this.tintRgb)}}]),ParticleContainer}(a.Container);t.default=u},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(371);Object.defineProperty(t,"ParticleContainer",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(374);Object.defineProperty(t,"ParticleRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}})},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=r(9),n=_interopRequireDefault(i),o=r(81),a=_interopRequireDefault(o),s=function(){function ParticleBuffer(e,t,r,i){_classCallCheck(this,ParticleBuffer),this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var o=t[n];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,offset:o.offset},r[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return ParticleBuffer.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,a.default)(this.size),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];i.offset=t,t+=i.size,this.dynamicStride+=i.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=n.default.GLBuffer.createVertexBuffer(e,this.dynamicData,e.STREAM_DRAW);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var u=this.staticProperties[s];u.offset=o,o+=u.size,this.staticStride+=u.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=n.default.GLBuffer.createVertexBuffer(e,this.staticData,e.STATIC_DRAW),this.vao=new n.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var l=0;l<this.dynamicProperties.length;++l){var c=this.dynamicProperties[l];this.vao.addAttribute(this.dynamicBuffer,c.attribute,e.FLOAT,!1,4*this.dynamicStride,4*c.offset)}for(var h=0;h<this.staticProperties.length;++h){var d=this.staticProperties[h];this.vao.addAttribute(this.staticBuffer,d.attribute,e.FLOAT,!1,4*this.staticStride,4*d.offset)}},ParticleBuffer.prototype.uploadDynamic=function(e,t,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(e,t,r,this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()},ParticleBuffer.prototype.uploadStatic=function(e,t,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(e,t,r,this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()},ParticleBuffer.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},ParticleBuffer}();t.default=s},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(1),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=r(375),s=_interopRequireDefault(a),u=r(373),l=_interopRequireDefault(u),c=function(e){function ParticleRenderer(t){_classCallCheck(this,ParticleRenderer);var r=_possibleConstructorReturn(this,e.call(this,t));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new o.Matrix,r.CONTEXT_UID=0,r}return _inherits(ParticleRenderer,e),ParticleRenderer.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new s.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},ParticleRenderer.prototype.start=function(){this.renderer.bindShader(this.shader)},ParticleRenderer.prototype.render=function(e){var t=e.children,r=e._maxSize,i=e._batchSize,n=this.renderer,a=t.length;if(0!==a){a>r&&(a=r);var s=e._glBuffers[n.CONTEXT_UID];s||(s=e._glBuffers[n.CONTEXT_UID]=this.generateBuffers(e));var u=t[0]._texture.baseTexture;this.renderer.setBlendMode(o.utils.correctBlendMode(e.blendMode,u.premultipliedAlpha));var l=n.gl,c=e.worldTransform.copy(this.tempMatrix);c.prepend(n._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=c.toArray(!0),this.shader.uniforms.uColor=o.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.premultipliedAlpha),this.shader.uniforms.uSampler=n.bindTexture(u);for(var h=0,d=0;h<a;h+=i,d+=1){var f=a-h;f>i&&(f=i);var p=s[d];p.uploadDynamic(t,h,f),e._bufferToUpdate===d&&(p.uploadStatic(t,h,f),e._bufferToUpdate=d+1),n.bindVao(p.vao),p.vao.draw(l.TRIANGLES,6*f)}}},ParticleRenderer.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,r=[],i=e._maxSize,n=e._batchSize,o=e._properties,a=0;a<i;a+=n)r.push(new l.default(t,this.properties,o,n));return r},ParticleRenderer.prototype.uploadVertices=function(e,t,r,i,n,o){for(var a=0,s=0,u=0,l=0,c=0;c<r;++c){var h=e[t+c],d=h._texture,f=h.scale.x,p=h.scale.y,m=d.trim,g=d.orig;m?(s=m.x-h.anchor.x*g.width,a=s+m.width,l=m.y-h.anchor.y*g.height,u=l+m.height):(a=g.width*(1-h.anchor.x),s=g.width*-h.anchor.x,u=g.height*(1-h.anchor.y),l=g.height*-h.anchor.y),i[o]=s*f,i[o+1]=l*p,i[o+n]=a*f,i[o+n+1]=l*p,i[o+2*n]=a*f,i[o+2*n+1]=u*p,i[o+3*n]=s*f,i[o+3*n+1]=u*p,o+=4*n}},ParticleRenderer.prototype.uploadPosition=function(e,t,r,i,n,o){for(var a=0;a<r;a++){var s=e[t+a].position;i[o]=s.x,i[o+1]=s.y,i[o+n]=s.x,i[o+n+1]=s.y,i[o+2*n]=s.x,i[o+2*n+1]=s.y,i[o+3*n]=s.x,i[o+3*n+1]=s.y,o+=4*n}},ParticleRenderer.prototype.uploadRotation=function(e,t,r,i,n,o){for(var a=0;a<r;a++){var s=e[t+a].rotation;i[o]=s,i[o+n]=s,i[o+2*n]=s,i[o+3*n]=s,o+=4*n}},ParticleRenderer.prototype.uploadUvs=function(e,t,r,i,n,o){for(var a=0;a<r;++a){var s=e[t+a]._texture._uvs;s?(i[o]=s.x0,i[o+1]=s.y0,i[o+n]=s.x1,i[o+n+1]=s.y1,i[o+2*n]=s.x2,i[o+2*n+1]=s.y2,i[o+3*n]=s.x3,i[o+3*n+1]=s.y3,o+=4*n):(i[o]=0,i[o+1]=0,i[o+n]=0,i[o+n+1]=0,i[o+2*n]=0,i[o+2*n+1]=0,i[o+3*n]=0,i[o+3*n+1]=0,o+=4*n)}},ParticleRenderer.prototype.uploadAlpha=function(e,t,r,i,n,o){for(var a=0;a<r;a++){var s=e[t+a].alpha;i[o]=s,i[o+n]=s,i[o+2*n]=s,i[o+3*n]=s,o+=4*n}},ParticleRenderer.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},ParticleRenderer}(o.ObjectRenderer);t.default=c,o.WebGLRenderer.registerPlugin("particle",c)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(32),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e){function ParticleShader(t){return _classCallCheck(this,ParticleShader),_possibleConstructorReturn(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform vec4 uColor;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return _inherits(ParticleShader,e),ParticleShader}(o.default);t.default=a},function(e,t,r){"use strict";Math.sign||(Math.sign=function(e){return e=Number(e),0===e||isNaN(e)?e:e>0?1:-1})},function(e,t,r){"use strict";var i=r(232),n=function(e){return e&&e.__esModule?e:{default:e}}(i);Object.assign||(Object.assign=n.default)},function(e,t,r){"use strict";r(377),r(379),r(376),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(e,t,r){"use strict";(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var r=Date.now(),i=["ms","moz","webkit","o"],n=0;n<i.length&&!e.requestAnimationFrame;++n){var o=i[n];e.requestAnimationFrame=e[o+"RequestAnimationFrame"],e.cancelAnimationFrame=e[o+"CancelAnimationFrame"]||e[o+"CancelRequestAnimationFrame"]}e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),i=16+r-t;return i<0&&(i=0),r=t,setTimeout(function(){r=Date.now(),e(performance.now())},i)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(t,r(12))},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function uploadBaseTextures(e,t){if(t instanceof o.BaseTexture){var r=t.source,i=0===r.width?e.canvas.width:Math.min(e.canvas.width,r.width),n=0===r.height?e.canvas.height:Math.min(e.canvas.height,r.height);return e.ctx.drawImage(r,0,0,i,n,0,0,e.canvas.width,e.canvas.height),!0}return!1}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(1),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=r(83),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=16,l=function(e){function CanvasPrepare(t){_classCallCheck(this,CanvasPrepare);var r=_possibleConstructorReturn(this,e.call(this,t));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=u,r.canvas.height=u,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(uploadBaseTextures),r}return _inherits(CanvasPrepare,e),CanvasPrepare.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},CanvasPrepare}(s.default);t.default=l,o.CanvasRenderer.registerPlugin("prepare",l)},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(383);Object.defineProperty(t,"webgl",{enumerable:!0,get:function(){return _interopRequireDefault(i).default}});var n=r(380);Object.defineProperty(t,"canvas",{enumerable:!0,get:function(){return _interopRequireDefault(n).default}});var o=r(83);Object.defineProperty(t,"BasePrepare",{enumerable:!0,get:function(){return _interopRequireDefault(o).default}});var a=r(169);Object.defineProperty(t,"CountLimiter",{enumerable:!0,get:function(){return _interopRequireDefault(a).default}});var s=r(382);Object.defineProperty(t,"TimeLimiter",{enumerable:!0,get:function(){return _interopRequireDefault(s).default}})},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function TimeLimiter(e){_classCallCheck(this,TimeLimiter),this.maxMilliseconds=e,this.frameStart=0}return TimeLimiter.prototype.beginFrame=function(){this.frameStart=Date.now()},TimeLimiter.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},TimeLimiter}();t.default=i},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function uploadBaseTextures(e,t){return t instanceof o.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function uploadGraphics(e,t){return t instanceof o.Graphics&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function findGraphics(e,t){return e instanceof o.Graphics&&(t.push(e),!0)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n=r(1),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=r(83),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function WebGLPrepare(t){_classCallCheck(this,WebGLPrepare);var r=_possibleConstructorReturn(this,e.call(this,t));return r.uploadHookHelper=r.renderer,r.registerFindHook(findGraphics),r.registerUploadHook(uploadBaseTextures),r.registerUploadHook(uploadGraphics),r}return _inherits(WebGLPrepare,e),WebGLPrepare}(s.default);t.default=u,o.WebGLRenderer.registerPlugin("prepare",u)},function(e,t,r){"use strict";e.exports=function(e,t,r){var i,n=e.length;if(!(t>=n||0===r)){r=t+r>n?n-t:r;var o=n-r;for(i=t;i<o;++i)e[i]=e[i+r];e.length=o}}},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},o=r(126),a=_interopRequireDefault(o),s=r(127),u=_interopRequireDefault(s),l=r(170),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),h=r(84),d=_interopRequireDefault(h),f=/(#[\w-]+)?$/,p=function(){function Loader(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;_classCallCheck(this,Loader),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,r){return e._loadResource(t,r)},this._queue=c.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new a.default,this.onError=new a.default,this.onLoad=new a.default,this.onStart=new a.default,this.onComplete=new a.default}return Loader.prototype.add=function(e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if("object"===(void 0===e?"undefined":n(e))&&(i=t||e.callback||e.onComplete,r=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(i=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new d.default(e,t,r),"function"==typeof i&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var a=r.parentResource,s=[],u=0;u<a.children.length;++u)a.children[u].isComplete||s.push(a.children[u]);var l=a.progressChunk*(s.length+1),c=l/(s.length+2);a.children.push(this.resources[e]),a.progressChunk=c;for(var h=0;h<s.length;++h)s[h].progressChunk=c;this.resources[e].progressChunk=c}return this._queue.push(this.resources[e]),this},Loader.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},Loader.prototype.use=function(e){return this._afterMiddleware.push(e),this},Loader.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},Loader.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;for(var t=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=t;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},Loader.prototype._prepareUrl=function(e){var t=(0,u.default)(e,{strictMode:!0}),r=void 0;if(r=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var i=f.exec(r)[0];r=r.substr(0,r.length-i.length),-1!==r.indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=i}return r},Loader.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,c.eachSeries(this._beforeMiddleware,function(t,i){t.call(r,e,function(){i(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},Loader.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},Loader.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),c.eachSeries(this._afterMiddleware,function(r,i){r.call(t,e,i)},function(){e.onAfterMiddleware.dispatch(e),t.progress+=e.progressChunk,t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&(t.progress=100,t._onComplete())},!0)},Loader}();t.default=p},function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function blobMiddlewareFactory(){return function(e,t){if(!e.data)return void t();if(e.xhr&&e.xhrType===a.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var r=function(){var r=l.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=r,e.type=a.default.TYPE.IMAGE,e.data.onload=function(){l.revokeObjectURL(r),e.data.onload=null,t()},{v:void 0}}();if("object"===(void 0===r?"undefined":n(r)))return r.v}}else{var i=e.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return e.data=new Image,e.data.src="data:"+i+";base64,"+u.default.encodeBinary(e.xhr.responseText),e.type=a.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var n="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};t.blobMiddlewareFactory=blobMiddlewareFactory;var o=r(84),a=_interopRequireDefault(o),s=r(171),u=_interopRequireDefault(s),l=window.URL||window.webkitURL},function(e,t,r){"use strict";var i=r(173);r.n(i).a.register({arrows:{width:1792,height:1792,paths:[{d:"M1792 896q0 26-19 45l-256 256q-19 19-45 19t-45-19-19-45v-128h-384v384h128q26 0 45 19t19 45-19 45l-256 256q-19 19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-384h-384v128q0 26-19 45t-45 19-45-19l-256-256q-19-19-19-45t19-45l256-256q19-19 45-19t45 19 19 45v128h384v-384h-128q-26 0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45t-19 45-45 19h-128v384h384v-128q0-26 19-45t45-19 45 19l256 256q19 19 19 45z"}]}})},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,r){e.exports=r.p+"img/door.f14908b.jpg"},function(e,t,r){function injectStyle(e){r(391)}var i=r(7)(r(260),r(415),injectStyle,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(397)}var i=r(7)(r(263),r(421),injectStyle,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(396)}var i=r(7)(r(264),r(420),injectStyle,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(394)}var i=r(7)(r(265),r(418),injectStyle,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(398)}var i=r(7)(r(266),r(422),injectStyle,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(389)}var i=r(7)(r(267),r(413),injectStyle,null,null);e.exports=i.exports},function(e,t,r){var i=r(7)(r(268),r(412),null,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(390)}var i=r(7)(r(269),r(414),injectStyle,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(388)}var i=r(7)(r(270),r(411),injectStyle,null,null);e.exports=i.exports},function(e,t,r){function injectStyle(e){r(393)}var i=r(7)(r(271),r(417),injectStyle,null,null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"layout",on:{click:function(t){e.optIdx=-1}}},[r("ToolsHeader",{attrs:{title:"Layout",slogan:"可视化编辑"}}),e._v(" "),r("div",{staticClass:"content"},[r("LayoutCompts",{attrs:{comptsName:e.comptsName}}),e._v(" "),r("LayoutViews",{on:{drop:e.drop,sort:e.sort,opt:e.opt}},[e._l(e.compts,function(t,i){return[i===e.emptyIdx?r("EmptyCompt"):e._e(),e._v(" "),r(t.type,{tag:"DynamicCompt",attrs:{view:"view",model:t.model}})]}),e._v(" "),-1===e.emptyIdx?r("EmptyCompt"):e._e()],2),e._v(" "),r("transition",{attrs:{name:"slide-fade"}},[e.optIdx>=0&&e.optIdx<e.compts.length?r("div",{staticClass:"opt",on:{click:function(e){e.stopPropagation()}}},[r(e.compts[this.optIdx].type,{tag:"component",attrs:{view:"opt",model:e.compts[this.optIdx].model}})],1):e._e()])],1)],1)},staticRenderFns:[]}},function(e,t,r){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-scene",[i("a-assets",[i("img",{attrs:{id:"sky",src:r(400)}})]),e._v(" "),i("a-sky",{attrs:{src:"#sky"}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tools"},[r("ToolsHeader",{attrs:{title:"tools",slogan:"个性化工具"}}),e._v(" "),r("div",{staticClass:"content"},e._l(e.paths,function(t){return r("div",{staticClass:"path"},[r("div",{staticClass:"type"},[e._v(e._s(t.type))]),e._v(" "),r("ul",{staticClass:"routers"},[e._l(t.routers,function(i,n){return[r("router-link",{attrs:{tag:"li",to:t.base+i.path}},[e._v(e._s(i.name))])]})],2)])}))],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sprite"},[r("ToolsHeader",{attrs:{title:"Sprite",slogan:"合成帧序列图工具"}}),e._v(" "),r("div",{staticClass:"content"},[r("div",{ref:"imgs",staticClass:"imgs",class:e.direction},e._l(e.imgs,function(t,i){return r("img",{key:i,staticClass:"imgs-item",style:e.itemsStyle,attrs:{src:t.src,title:t.title,index:i},on:{dragstart:e.dragstart,drop:function(t){t.preventDefault(),e.moveImg(t)},dragover:function(e){e.preventDefault()}}})})),e._v(" "),"horizontal"===e.direction?[r("br")]:e._e(),e._v(" "),r("div",{staticClass:"add-img",class:e.direction},[r("input",{attrs:{type:"file",multiple:"",accept:"image/jpeg,image/jpg,image/png"},on:{change:e.uploadFile}})]),e._v(" "),r("div",{staticClass:"del-img",class:e.direction,attrs:{"data-tips":"把元素拖到此处删除"},on:{drop:function(t){t.preventDefault(),e.delImg(t)},dragover:function(e){e.preventDefault()}}})],2),e._v(" "),r("ToolsFooter",[r("span",{staticClass:"name"},[e._v("方向:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.direction,expression:"direction"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.direction=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"horizontal"}},[e._v("水平")]),e._v(" "),r("option",{attrs:{value:"vertical"}},[e._v("垂直")])]),e._v(" "),r("span",{staticClass:"name"},[e._v("间隔:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.span,expression:"span"}],attrs:{type:"number"},domProps:{value:e.span},on:{input:function(t){t.target.composing||(e.span=t.target.value)},blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("a",{staticClass:"btn-down",attrs:{href:"javascript:;"},on:{click:e.compose}},[e._v("下载")])])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"footer"},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"imgshared"},[r("ToolsHeader",{attrs:{title:"ImgShared",slogan:"图片分片工具"}}),e._v(" "),r("div",{ref:"content",staticClass:"content"},[e.imgUrl?e._e():[r("input",{attrs:{type:"file"},on:{change:e.change}})]],2),e._v(" "),e.imgUrl?r("ToolsFooter",[r("span",{staticClass:"name"},[e._v("高度:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.height,expression:"height"}],attrs:{type:"number"},domProps:{value:e.height},on:{input:[function(t){t.target.composing||(e.height=t.target.value)},e.changeHei],blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("a",{staticClass:"btn-down",attrs:{href:"javascript:;"},on:{click:e.shard}},[e._v("下载")])]):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"compts"},[r("ul",e._l(e.comptsName,function(t,i){return r("li",{directives:[{name:"draggable",rawName:"v-draggable",value:t.key,expression:"item.key"}],staticClass:"draggable"},[r("span",{staticClass:"name"},[e._v(e._s(t.compt.displayName))]),e._v(" "),r("span",{staticClass:"drag-label"},[r("icon",{attrs:{name:"arrows"}}),e._v("拖动")],1)])}))])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{class:e.clazz,style:e.style,attrs:{version:"1.1",role:e.label?"img":"presentation","aria-label":e.label,x:e.x,y:e.y,width:e.width,height:e.height,viewBox:e.box}},[e._t("default",[e.icon&&e.icon.paths?e._l(e.icon.paths,function(t){return r("path",e._b({},"path",t))}):e._e(),e._v(" "),e.icon&&e.icon.polygons?e._l(e.icon.polygons,function(t){return r("polygon",e._b({},"polygon",t))}):e._e(),e._v("\b\n    "),e.icon&&e.icon.raw?[r("g",{domProps:{innerHTML:e._s(e.icon.raw)}})]:e._e()])],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-compt"},["view"===e.view?[r("div",{staticClass:"title"},[e._v("\n      "+e._s(e.model.header)+"\n    ")])]:e._e(),e._v(" "),"opt"===e.view?[r("input",{directives:[{name:"model",rawName:"v-model",value:e.model.header,expression:"model.header"}],attrs:{type:"text"},domProps:{value:e.model.header},on:{input:function(t){t.target.composing||(e.model.header=t.target.value)}}})]:e._e()],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"img-compt"},["view"===e.view?[r("img",{attrs:{src:e.model.src,alt:""}})]:e._e(),e._v(" "),"opt"===e.view?[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.model.src,expression:"model.src"}],attrs:{type:"text",rows:"5"},domProps:{value:e.model.src},on:{input:function(t){t.target.composing||(e.model.src=t.target.value)}}})]:e._e()],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"views"},[r("div",{staticClass:"phone iphone6"},[r("div",{staticClass:"phone-head"}),e._v(" "),r("div",{staticClass:"phone-body"},[r("div",{directives:[{name:"dropzone",rawName:"v-dropzone",value:e.dropAction,expression:"dropAction"},{name:"sortable",rawName:"v-sortable",value:e.sortAction,expression:"sortAction"}],staticClass:"phone-content",on:{click:e.optAction}},[e._t("default")],2)]),e._v(" "),r("div",{staticClass:"phone-foot"})])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("a",{staticClass:"logo",attrs:{href:"javascript:;"}},[e._v(e._s(e.title))]),e._v(" "),r("span",{staticClass:"slogan"},[e._v(" "+e._s(e.slogan)+" ")])])},staticRenderFns:[]}},function(t,r){!function(e){if("object"==typeof r&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.AFRAME=e()}}(function(){var t;return function e(t,r,i){function s(o,a){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return s(r||e)},c,c.exports,e,t,r,i)}return r[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,r,i){(function(e){var n=n||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)},update:function(t,r){if(0===e.length)return!1;var i=0;for(t=void 0!==t?t:n.now();i<e.length;)e[i].update(t)||r?i++:e.splice(i,1);return!0}}}();"undefined"==typeof window&&void 0!==e?n.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?n.now=window.performance.now.bind(window.performance):void 0!==Date.now?n.now=Date.now:n.now=function(){return(new Date).getTime()},n.Tween=function(e){var t,r=e,i={},o={},a={},s=1e3,u=0,l=!1,c=!1,h=!1,d=0,f=null,p=n.Easing.Linear.None,m=n.Interpolation.Linear,g=[],y=null,v=!1,b=null,x=null,M=null;this.to=function(e,t){return o=e,void 0!==t&&(s=t),this},this.start=function(e){n.add(this),c=!0,v=!1,f=void 0!==e?e:n.now(),f+=d;for(var t in o){if(o[t]instanceof Array){if(0===o[t].length)continue;o[t]=[r[t]].concat(o[t])}void 0!==r[t]&&(i[t]=r[t],i[t]instanceof Array==!1&&(i[t]*=1),a[t]=i[t]||0)}return this},this.stop=function(){return c?(n.remove(this),c=!1,null!==M&&M.call(r,r),this.stopChainedTweens(),this):this},this.end=function(){return this.update(f+s),this},this.stopChainedTweens=function(){for(var e=0,t=g.length;e<t;e++)g[e].stop()},this.delay=function(e){return d=e,this},this.repeat=function(e){return u=e,this},this.repeatDelay=function(e){return t=e,this},this.yoyo=function(e){return l=e,this},this.easing=function(e){return p=e,this},this.interpolation=function(e){return m=e,this},this.chain=function(){return g=arguments,this},this.onStart=function(e){return y=e,this},this.onUpdate=function(e){return b=e,this},this.onComplete=function(e){return x=e,this},this.onStop=function(e){return M=e,this},this.update=function(e){var n,c,M;if(e<f)return!0;!1===v&&(null!==y&&y.call(r,r),v=!0),c=(e-f)/s,c=c>1?1:c,M=p(c);for(n in o)if(void 0!==i[n]){var w=i[n]||0,E=o[n];E instanceof Array?r[n]=m(E,M):("string"==typeof E&&(E="+"===E.charAt(0)||"-"===E.charAt(0)?w+parseFloat(E):parseFloat(E)),"number"==typeof E&&(r[n]=w+(E-w)*M))}if(null!==b&&b.call(r,M),1===c){if(u>0){isFinite(u)&&u--;for(n in a){if("string"==typeof o[n]&&(a[n]=a[n]+parseFloat(o[n])),l){var _=a[n];a[n]=o[n],o[n]=_}i[n]=a[n]}return l&&(h=!h),f=void 0!==t?e+t:e+d,!0}null!==x&&x.call(r,r);for(var T=0,A=g.length;T<A;T++)g[T].start(f+s);return!1}return!0}},n.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-n.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*n.Easing.Bounce.In(2*e):.5*n.Easing.Bounce.Out(2*e-1)+.5}}},n.Interpolation={Linear:function(e,t){var r=e.length-1,i=r*t,o=Math.floor(i),a=n.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],i):t>1?a(e[r],e[r-1],r-i):a(e[o],e[o+1>r?r:o+1],i-o)},Bezier:function(e,t){for(var r=0,i=e.length-1,o=Math.pow,a=n.Interpolation.Utils.Bernstein,s=0;s<=i;s++)r+=o(1-t,i-s)*o(t,s)*e[s]*a(i,s);return r},CatmullRom:function(e,t){var r=e.length-1,i=r*t,o=Math.floor(i),a=n.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(o=Math.floor(i=r*(1+t))),a(e[(o-1+r)%r],e[o],e[(o+1)%r],e[(o+2)%r],i-o)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[r]-(a(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):a(e[o?o-1:0],e[o],e[r<o+1?r:o+1],e[r<o+2?r:o+2],i-o)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,t){var r=n.Interpolation.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:function(){var e=[1];return function(t){var r=1;if(e[t])return e[t];for(var i=t;i>1;i--)r*=i;return e[t]=r,r}}(),CatmullRom:function(e,t,r,i,n){var o=.5*(r-e),a=.5*(i-t),s=n*n;return(2*t-2*r+o+a)*(n*s)+(-3*t+3*r-2*o-a)*s+o*n+t}}},function(e){"function"==typeof t&&t.amd?t([],function(){return n}):void 0!==r&&"object"==typeof i?r.exports=n:void 0!==e&&(e.TWEEN=n)}(this)}).call(this,e("_process"))},{_process:34}],2:[function(e,t,r){function anArray(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===i.call(e.buffer)||Array.isArray(e)}var i=Object.prototype.toString;t.exports=anArray},{}],3:[function(e,t,r){t.exports=function(e,t){return"number"==typeof e?e:"number"==typeof t?t:0}},{}],4:[function(e,t,r){"use strict";function placeHoldersCount(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function byteLength(e){return 3*e.length/4-placeHoldersCount(e)}function toByteArray(e){var t,r,i,a,s,u,l=e.length;s=placeHoldersCount(e),u=new o(3*l/4-s),i=s>0?l-4:l;var c=0;for(t=0,r=0;t<i;t+=4,r+=3)a=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],u[c++]=a>>16&255,u[c++]=a>>8&255,u[c++]=255&a;return 2===s?(a=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,u[c++]=255&a):1===s&&(a=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,u[c++]=a>>8&255,u[c++]=255&a),u}function tripletToBase64(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function encodeChunk(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],n.push(tripletToBase64(i));return n.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,o="",a=[],s=0,u=r-n;s<u;s+=16383)a.push(encodeChunk(e,s,s+16383>u?u:s+16383));return 1===n?(t=e[r-1],o+=i[t>>2],o+=i[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=i[t>>10],o+=i[t>>4&63],o+=i[t<<2&63],o+="="),a.push(o),a.join("")}r.byteLength=byteLength,r.toByteArray=toByteArray,r.fromByteArray=fromByteArray;for(var i=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)i[s]=a[s],n[a.charCodeAt(s)]=s;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],5:[function(e,t,r){"use strict";t.exports={createLink:function(e,t){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");i.href=e,i.rel="stylesheet";for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];i.setAttribute("data-"+n,o)}r.appendChild(i)},createStyle:function(e,t){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css";for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];i.setAttribute("data-"+n,o)}i.sheet?(i.innerHTML=e,i.sheet.cssText=e,r.appendChild(i)):i.styleSheet?(r.appendChild(i),i.styleSheet.cssText=e):(i.appendChild(document.createTextNode(e)),r.appendChild(i))}}},{}],6:[function(e,t,r){var i=e("buffer").Buffer;t.exports=function(e,t){if(i.isBuffer(e)&&i.isBuffer(t)){if("function"==typeof e.equals)return e.equals(t);if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}}},{buffer:7}],7:[function(e,t,r){(function(t){"use strict";function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=Buffer.prototype):(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,r)}function from(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,i):"string"==typeof t?fromString(e,t,r):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r,i){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof i?createBuffer(e,t).fill(r,i):createBuffer(e,t).fill(r):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromString(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|byteLength(t,r);e=createBuffer(e,i);var n=e.write(t,r);return n!==i&&(e=e.slice(0,n)),e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function fromArrayBuffer(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),Buffer.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=Buffer.prototype):e=fromArrayLike(e,t),e}function fromObject(e,t){if(Buffer.isBuffer(t)){var r=0|checked(t.length);return e=createBuffer(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&o(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}function slowToString(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function swap(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function bidirectionalIndexOf(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,i)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,i,n);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,i,n){function read(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,a=e.length,s=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,s/=2,r/=2}var u;if(n){var l=-1;for(u=r;u<a;u++)if(read(e,u)===read(t,-1===l?0:u-l)){if(-1===l&&(l=u),u-l+1===s)return l*o}else-1!==l&&(u-=u-l),l=-1}else for(r+s>a&&(r=a-s),u=r;u>=0;u--){for(var c=!0,h=0;h<s;h++)if(read(e,u+h)!==read(t,h)){c=!1;break}if(c)return u}return-1}function hexWrite(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function utf8Write(e,t,r,i){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,i)}function asciiWrite(e,t,r,i){return blitBuffer(asciiToBytes(t),e,r,i)}function latin1Write(e,t,r,i){return asciiWrite(e,t,r,i)}function base64Write(e,t,r,i){return blitBuffer(base64ToBytes(t),e,r,i)}function ucs2Write(e,t,r,i){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,i)}function base64Slice(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o=e[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s<=r){var u,l,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[n+1],128==(192&u)&&(h=(31&o)<<6|63&u)>127&&(a=h);break;case 3:u=e[n+1],l=e[n+2],128==(192&u)&&128==(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l)>2047&&(h<55296||h>57343)&&(a=h);break;case 4:u=e[n+1],l=e[n+2],c=e[n+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&h<1114112&&(a=h)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),n+=s}return decodeCodePointsArray(i)}function decodeCodePointsArray(e){var t=e.length;if(t<=a)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=a));return r}function asciiSlice(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function latin1Slice(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function hexSlice(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=toHex(e[o]);return n}function utf16leSlice(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,i,n,o){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-r,2);n<o;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function objectWriteUInt32(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-r,4);n<o;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function checkIEEE754(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,i,o){return o||checkIEEE754(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),n.write(e,t,r,i,23,4),r+4}function writeDouble(e,t,r,i,o){return o||checkIEEE754(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),n.write(e,t,r,i,52,8),r+8}function base64clean(e){if(e=stringtrim(e).replace(s,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var r,i=e.length,n=null,o=[],a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,i,n,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),i=r>>8,n=r%256,o.push(n),o.push(i);return o}function base64ToBytes(e){return i.toByteArray(base64clean(e))}function blitBuffer(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function isnan(e){return e!==e}var i=e("base64-js"),n=e("ieee754"),o=e("isarray");r.Buffer=Buffer,r.SlowBuffer=SlowBuffer,r.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),r.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return from(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,r){return alloc(null,e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function(e){return!(null==e||!e._isBuffer)},Buffer.compare=function(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=Buffer.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var a=e[r];if(!Buffer.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,n),n+=a.length}return i},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,r,i,n){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var o=n-i,a=r-t,s=Math.min(o,a),u=this.slice(i,n),l=e.slice(t,r),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a=4096;Buffer.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i;if(Buffer.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=Buffer.prototype;else{var n=t-e;i=new Buffer(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+e]}return i},Buffer.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},Buffer.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},Buffer.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},Buffer.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),n.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),n.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),n.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),n.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t|=0,r|=0,!i){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},Buffer.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t|=0,r|=0,!i){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);checkInt(this,e,t,r,n-1,-n)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);checkInt(this,e,t,r,n-1,-n)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,o=i-r;if(this===e&&r<t&&t<i)for(n=o-1;n>=0;--n)e[n+t]=this[n+r];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},Buffer.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,i).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var s=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":4,ieee754:16,isarray:22}],8:[function(e,t,r){function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" "),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,n=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(n=i))}),e.splice(n,0,r),e}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}}function load(){var e;try{e=r.storage.debug}catch(e){}return e}r=t.exports=e("./debug"),r.log=log,r.formatArgs=formatArgs,r.save=save,r.load=load,r.useColors=useColors,r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(load())},{"./debug":9}],9:[function(e,t,r){function selectColor(){return r.colors[i++%r.colors.length]}function debug(e){function disabled(){}function enabled(){var e=enabled;null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var i=0;t[0]=t[0].replace(/%([a-z%])/g,function(n,o){if("%%"===n)return n;i++;var a=r.formatters[o];if("function"==typeof a){var s=t[i];n=a.call(e,s),t.splice(i,1),i--}return n}),"function"==typeof r.formatArgs&&(t=r.formatArgs.apply(e,t)),(enabled.log||r.log||console.log.bind(console)).apply(e,t)}disabled.enabled=!1,enabled.enabled=!0;var t=r.enabled(e)?enabled:disabled;return t.namespace=e,t}function enable(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,n=0;n<i;n++)t[n]&&(e=t[n].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function disable(){r.enable("")}function enabled(e){var t,i;for(t=0,i=r.skips.length;t<i;t++)if(r.skips[t].test(e))return!1;for(t=0,i=r.names.length;t<i;t++)if(r.names[t].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=debug,r.coerce=coerce,r.disable=disable,r.enable=enable,r.enabled=enabled,r.names=[],r.skips=[],r.formatters={};var i=0},{}],10:[function(e,t,r){"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function assignKey(e,t,r){var o=t[r];if(void 0!==o&&null!==o){if(n.call(e,r)&&(void 0===e[r]||null===e[r]))throw new TypeError("Cannot convert undefined or null to object ("+r+")");n.call(e,r)&&i(o)?e[r]=assign(Object(e[r]),t[r]):e[r]=o}}function assign(e,t){if(e===t)return e;t=Object(t);for(var r in t)n.call(t,r)&&assignKey(e,t,r);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),a=0;a<i.length;a++)o.call(t,i[a])&&assignKey(e,t,i[a]);return e}var i=e("is-obj"),n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(e){e=toObject(e);for(var t=1;t<arguments.length;t++)assign(e,arguments[t]);return e}},{"is-obj":21}],11:[function(t,r,i){!function(t,r,i,o){"use strict";function st(e,t){for(var r=0,i=e.length;r<i;r++)gt(e[r],t)}function ot(e){for(var t,r=0,i=e.length;r<i;r++)t=e[r],f(t,L[at(t)])}function ut(e){return function(t){Q(t)&&(gt(t,e),st(t.querySelectorAll(D),e))}}function at(e){var t=Z.call(e,"is"),r=e.nodeName.toUpperCase(),i=N.call(C,t?T+t.toUpperCase():_+r);return t&&-1<i&&!ft(r,t)?-1:i}function ft(e,t){return-1<D.indexOf(e+'[is="'+t+'"]')}function lt(e){var t=e.currentTarget,r=e.attrChange,i=e.attrName,n=e.target;ae&&(!n||n===t)&&t.attributeChangedCallback&&"style"!==i&&e.prevValue!==e.newValue&&t.attributeChangedCallback(i,r===e[v]?null:e.prevValue,r===e[x]?null:e.newValue)}function ct(e){var t=ut(e);return function(e){a.push(t,e.target)}}function ht(e){oe&&(oe=!1,e.currentTarget.removeEventListener(w,ht)),st((e.target||r).querySelectorAll(D),e.detail===g?g:m),Y&&vt()}function pt(e,t){var r=this;K.call(r,e,t),s.call(r,{target:r})}function dt(e,t){V(e,t),c?c.observe(e,ee):(ne&&(e.setAttribute=pt,e[p]=l(e),e.addEventListener(E,s)),e.addEventListener(M,lt)),e.createdCallback&&ae&&(e.created=!0,e.createdCallback(),e.created=!1)}function vt(){for(var e,t=0,r=q.length;t<r;t++)e=q[t],I.contains(e)||(r--,q.splice(t--,1),gt(e,g))}function mt(e){throw new Error("A "+e+" type is already registered")}function gt(e,t){var r,i=at(e);-1<i&&(h(e,L[i]),i=0,t!==m||e[m]?t===g&&!e[g]&&(e[m]=!1,e[g]=!0,i=1):(e[g]=!1,e[m]=!0,i=1,Y&&N.call(q,e)<0&&q.push(e)),i&&(r=e[t+"Callback"])&&r.call(e))}if(!(o in r)){var a,s,u,l,c,h,f,p="__"+o+(1e5*Math.random()>>0),m="attached",g="detached",y="extends",v="ADDITION",b="MODIFICATION",x="REMOVAL",M="DOMAttrModified",w="DOMContentLoaded",E="DOMSubtreeModified",_="<",T="=",A=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,S=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],C=[],L=[],D="",I=r.documentElement,N=C.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},O=i.prototype,R=O.hasOwnProperty,j=O.isPrototypeOf,P=i.defineProperty,k=i.getOwnPropertyDescriptor,B=i.getOwnPropertyNames,z=i.getPrototypeOf,U=i.setPrototypeOf,F=!!i.__proto__,G=i.create||function yt(e){return e?(yt.prototype=e,new yt):this},V=U||(F?function(e,t){return e.__proto__=t,e}:B&&k?function(){function e(e,t){for(var r,i=B(t),n=0,o=i.length;n<o;n++)r=i[n],R.call(e,r)||P(e,r,k(t,r))}return function(t,r){do{e(t,r)}while((r=z(r))&&!j.call(r,t));return t}}():function(e,t){for(var r in t)e[r]=t[r];return e}),H=t.MutationObserver||t.WebKitMutationObserver,W=(t.HTMLElement||t.Element||t.Node).prototype,Y=!j.call(W,I),Q=Y?function(e){return 1===e.nodeType}:function(e){return j.call(W,e)},q=Y&&[],X=W.cloneNode,Z=W.getAttribute,K=W.setAttribute,J=W.removeAttribute,$=r.createElement,ee=H&&{attributes:!0,characterData:!0,attributeOldValue:!0},te=H||function(e){ne=!1,I.removeEventListener(M,te)},re=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,10)},ie=!1,ne=!0,oe=!0,ae=!0;U||F?(h=function(e,t){j.call(t,e)||dt(e,t)},f=dt):(h=function(e,t){e[p]||(e[p]=i(!0),dt(e,t))},f=h),Y?(ne=!1,function(){var t=k(W,"addEventListener"),r=t.value,i=function(e){var t=new CustomEvent(M,{bubbles:!0});t.attrName=e,t.prevValue=Z.call(this,e),t.newValue=null,t[x]=t.attrChange=2,J.call(this,e),this.dispatchEvent(t)},n=function(t,r){var i=this.hasAttribute(t),n=i&&Z.call(this,t);e=new CustomEvent(M,{bubbles:!0}),K.call(this,t,r),e.attrName=t,e.prevValue=i?n:null,e.newValue=r,i?e[b]=e.attrChange=1:e[v]=e.attrChange=0,this.dispatchEvent(e)},o=function(e){var t,r=e.currentTarget,i=r[p],n=e.propertyName;i.hasOwnProperty(n)&&(i=i[n],t=new CustomEvent(M,{bubbles:!0}),t.attrName=i.name,t.prevValue=i.value||null,t.newValue=i.value=r[n]||null,null==t.prevValue?t[v]=t.attrChange=0:t[b]=t.attrChange=1,r.dispatchEvent(t))};t.value=function(e,t,a){e===M&&this.attributeChangedCallback&&this.setAttribute!==n&&(this[p]={className:{name:"class",value:this.className}},this.setAttribute=n,this.removeAttribute=i,r.call(this,"propertychange",o)),r.call(this,e,t,a)},P(W,"addEventListener",t)}()):H||(I.addEventListener(M,te),I.setAttribute(p,1),I.removeAttribute(p),ne&&(s=function(e){var t,r,i,n=this;if(n===e.target){t=n[p],n[p]=r=l(n);for(i in r){if(!(i in t))return u(0,n,i,t[i],r[i],v);if(r[i]!==t[i])return u(1,n,i,t[i],r[i],b)}for(i in t)if(!(i in r))return u(2,n,i,t[i],r[i],x)}},u=function(e,t,r,i,n,o){var a={attrChange:e,currentTarget:t,attrName:r,prevValue:i,newValue:n};a[o]=e,lt(a)},l=function(e){for(var t,r,i={},n=e.attributes,o=0,a=n.length;o<a;o++)t=n[o],"setAttribute"!==(r=t.name)&&(i[r]=t.value);return i})),r[o]=function(e,t){if(i=e.toUpperCase(),ie||(ie=!0,H?(c=function(e,t){function n(e,t){for(var r=0,i=e.length;r<i;t(e[r++]));}return new H(function(r){for(var i,o,a,s=0,u=r.length;s<u;s++)i=r[s],"childList"===i.type?(n(i.addedNodes,e),n(i.removedNodes,t)):(o=i.target,ae&&o.attributeChangedCallback&&"style"!==i.attributeName&&(a=Z.call(o,i.attributeName))!==i.oldValue&&o.attributeChangedCallback(i.attributeName,i.oldValue,a))})}(ut(m),ut(g)),c.observe(r,{childList:!0,subtree:!0})):(a=[],re(function d(){for(;a.length;)a.shift().call(null,a.shift());re(d)}),r.addEventListener("DOMNodeInserted",ct(m)),r.addEventListener("DOMNodeRemoved",ct(g))),r.addEventListener(w,ht),r.addEventListener("readystatechange",ht),r.createElement=function(e,t){var i=$.apply(r,arguments),n=""+e,o=N.call(C,(t?T:_)+(t||n).toUpperCase()),a=-1<o;return t&&(i.setAttribute("is",t=t.toLowerCase()),a&&(a=ft(n.toUpperCase(),t))),ae=!r.createElement.innerHTMLHelper,a&&f(i,L[o]),i},W.cloneNode=function(e){var t=X.call(this,!!e),r=at(t);return-1<r&&f(t,L[r]),e&&ot(t.querySelectorAll(D)),t}),-2<N.call(C,T+i)+N.call(C,_+i)&&mt(e),!A.test(i)||-1<N.call(S,i))throw new Error("The type "+e+" is invalid");var i,n,o=function(){return u?r.createElement(l,i):r.createElement(l)},s=t||O,u=R.call(s,y),l=u?t[y].toUpperCase():i;return u&&-1<N.call(C,_+l)&&mt(l),n=C.push((u?T:_)+i)-1,D=D.concat(D.length?",":"",u?l+'[is="'+e.toLowerCase()+'"]':l),o.prototype=L[n]=R.call(s,"prototype")?s.prototype:G(W),st(r.querySelectorAll(D),m),o}}}(window,document,Object,"registerElement")},{}],12:[function(e,t,r){t.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],13:[function(e,t,r){function flattenVertexData(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");if(r=0|+(r||0),Array.isArray(e)&&Array.isArray(e[0])){var n=e[0].length,o=e.length*n;t&&"string"!=typeof t||(t=new(i(t||"float32"))(o+r));var a=t.length-r;if(o!==a)throw new Error("source length "+o+" ("+n+"x"+e.length+") does not match destination length "+a);for(var s=0,u=r;s<e.length;s++)for(var l=0;l<n;l++)t[u++]=e[s][l]}else if(t&&"string"!=typeof t)t.set(e,r);else{var c=i(t||"float32");0===r?t=new c(e):(t=new c(e.length+r),t.set(e,r))}return t}var i=e("dtype");t.exports=flattenVertexData},{dtype:12}],14:[function(e,t,r){function forEach(e,t,r){if(!i(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===n.call(e)?forEachArray(e,t,r):"string"==typeof e?forEachString(e,t,r):forEachObject(e,t,r)}function forEachArray(e,t,r){for(var i=0,n=e.length;i<n;i++)o.call(e,i)&&t.call(r,e[i],i,e)}function forEachString(e,t,r){for(var i=0,n=e.length;i<n;i++)t.call(r,e.charAt(i),i,e)}function forEachObject(e,t,r){for(var i in e)o.call(e,i)&&t.call(r,e[i],i,e)}var i=e("is-function");t.exports=forEach;var n=Object.prototype.toString,o=Object.prototype.hasOwnProperty},{"is-function":20}],15:[function(e,t,r){(function(e){"undefined"!=typeof window?t.exports=window:void 0!==e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,r){r.read=function(e,t,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=l}return(f?-1:1)*a*Math.pow(2,o-i)},r.write=function(e,t,r,i,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,h=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+h>=1?d/u:d*Math.pow(2,1-h),t*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,n),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&s,f+=p,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;e[r+f]=255&a,f+=p,a/=256,l-=8);e[r+f-p]|=128*m}},{}],17:[function(e,t,r){t.exports=function(e){if(!e||"string"!=typeof e)throw new Error("must specify property for indexof search");return new Function("array","value","start",["start = start || 0","for (var i=start; i<array.length; i++)",'  if (array[i]["'+e+'"] === value)',"      return i","return -1"].join("\n"))}},{}],18:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],19:[function(e,t,r){function isBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer(e.slice(0,0))}t.exports=function(e){return null!=e&&(isBuffer(e)||isSlowBuffer(e)||!!e._isBuffer)}},{}],20:[function(e,t,r){function isFunction(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=isFunction;var i=Object.prototype.toString},{}],21:[function(e,t,r){"use strict";t.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},{}],22:[function(e,t,r){var i={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},{}],23:[function(e,t,r){function TextLayout(e){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}function addGetter(e){Object.defineProperty(TextLayout.prototype,e,{get:wrapper(e),configurable:!0})}function wrapper(e){return new Function(["return function "+e+"() {","  return this._"+e,"}"].join("\n"))()}function getGlyphById(e,t){if(!e.chars||0===e.chars.length)return null;var r=o(e.chars,t);return r>=0?e.chars[r]:null}function getXHeight(e){for(var t=0;t<s.length;t++){var r=s[t].charCodeAt(0),i=o(e.chars,r);if(i>=0)return e.chars[i].height}return 0}function getMGlyph(e){for(var t=0;t<u.length;t++){var r=u[t].charCodeAt(0),i=o(e.chars,r);if(i>=0)return e.chars[i]}return 0}function getCapHeight(e){for(var t=0;t<l.length;t++){var r=l[t].charCodeAt(0),i=o(e.chars,r);if(i>=0)return e.chars[i].height}return 0}function getKerning(e,t,r){if(!e.kernings||0===e.kernings.length)return 0;for(var i=e.kernings,n=0;n<i.length;n++){var o=i[n];if(o.first===t&&o.second===r)return o.amount}return 0}function getAlignType(e){return"center"===e?f:"right"===e?p:d}var i=e("word-wrapper"),n=e("xtend"),o=e("indexof-property")("id"),a=e("as-number"),s=["x","e","a","o","n","s","r","c","u","m","v","w","z"],u=["m","w"],l=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],c="\t".charCodeAt(0),h=" ".charCodeAt(0),d=0,f=1,p=2;t.exports=function(e){return new TextLayout(e)},TextLayout.prototype.update=function(e){if(e=n({measure:this._measure},e),this._opt=e,this._opt.tabSize=a(this._opt.tabSize,4),!e.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,r=e.text||"",o=e.font;this._setupSpaceGlyphs(o);var s=i.lines(r,e),u=e.width||0;t.length=0;var l=s.reduce(function(e,t){return Math.max(e,t.width,u)},0),c=0,h=0,d=a(e.lineHeight,o.common.lineHeight),m=o.common.base,g=d-m,y=e.letterSpacing||0,v=d*s.length-g,b=getAlignType(this._opt.align);h-=v,this._width=l,this._height=v,this._descender=d-m,this._baseline=m,this._xHeight=getXHeight(o),this._capHeight=getCapHeight(o),this._lineHeight=d,this._ascender=d-g-this._xHeight;var x=this;s.forEach(function(e,i){for(var n,a=e.start,s=e.end,u=e.width,m=a;m<s;m++){var g=r.charCodeAt(m),v=x.getGlyph(o,g);if(v){n&&(c+=getKerning(o,n.id,v.id));var M=c;b===f?M+=(l-u)/2:b===p&&(M+=l-u),t.push({position:[M,h],data:v,index:m,line:i}),c+=v.xadvance+y,n=v}}h+=d,c=0}),this._linesTotal=s.length},TextLayout.prototype._setupSpaceGlyphs=function(e){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,e.chars&&0!==e.chars.length){var t=getGlyphById(e,h)||getMGlyph(e)||e.chars[0],r=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=n(t,{x:0,y:0,xadvance:r,id:c,xoffset:0,yoffset:0,width:0,height:0})}},TextLayout.prototype.getGlyph=function(e,t){var r=getGlyphById(e,t);return r||(t===c?this._fallbackTabGlyph:t===h?this._fallbackSpaceGlyph:null)},TextLayout.prototype.computeMetrics=function(e,t,r,i){var n,o,a=this._opt.letterSpacing||0,s=this._opt.font,u=0,l=0,c=0;if(!s.chars||0===s.chars.length)return{start:t,end:t,width:0};r=Math.min(e.length,r);for(var h=t;h<r;h++){var d=e.charCodeAt(h),n=this.getGlyph(s,d);if(n){n.xoffset;u+=o?getKerning(s,o.id,n.id):0;var f=u+n.xadvance+a,p=u+n.width;if(p>=i||f>=i)break;u=f,l=p,o=n}c++}return o&&(l+=o.xoffset),{start:t,end:t+c,width:l}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(addGetter)},{"as-number":3,"indexof-property":17,"word-wrapper":73,xtend:76}],24:[function(e,t,r){(function(r){function isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function getBinaryOpts(e){if(c)return l(e,{responseType:"arraybuffer"});if(void 0===window.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var t=new window.XMLHttpRequest;return t.overrideMimeType("text/plain; charset=x-user-defined"),l({xhr:t},e)}var i=e("xhr"),n=function(){},o=e("parse-bmfont-ascii"),a=e("parse-bmfont-xml"),s=e("parse-bmfont-binary"),u=e("./lib/is-binary"),l=e("xtend"),c=function(){return window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();t.exports=function(e,t){t="function"==typeof t?t:n,"string"==typeof e?e={uri:e}:e||(e={}),e.binary&&(e=getBinaryOpts(e)),i(e,function(i,l,c){if(i)return t(i);if(!/^2/.test(l.statusCode))return t(new Error("http status code: "+l.statusCode));if(!c)return t(new Error("no body result"));var h=!1;if(isArrayBuffer(c)){var d=new Uint8Array(c);c=new r(d,"binary")}u(c)&&(h=!0,"string"==typeof c&&(c=new r(c,"binary"))),h||(r.isBuffer(c)&&(c=c.toString(e.encoding)),c=c.trim());var f;try{var p=l.headers["content-type"];f=h?s(c):/json/.test(p)||"{"===c.charAt(0)?JSON.parse(c):/xml/.test(p)||"<"===c.charAt(0)?a(c):o(c)}catch(e){t(new Error("error parsing font "+e.message)),t=n}t(null,f)})}}).call(this,e("buffer").Buffer)},{"./lib/is-binary":25,buffer:7,"parse-bmfont-ascii":27,"parse-bmfont-binary":28,"parse-bmfont-xml":29,xhr:74,xtend:76}],25:[function(e,t,r){(function(r){var i=e("buffer-equal"),n=new r([66,77,70,3]);t.exports=function(e){return"string"==typeof e?"BMF"===e.substring(0,3):e.length>4&&i(e.slice(0,4),n)}}).call(this,e("buffer").Buffer)},{buffer:7,"buffer-equal":6}],26:[function(e,t,r){"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,o,a=toObject(e),s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var u in r)i.call(r,u)&&(a[u]=r[u]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var l=0;l<o.length;l++)n.call(r,o[l])&&(a[o[l]]=r[o[l]])}}return a}},{}],27:[function(e,t,r){function splitLine(e,t){if(!(e=e.replace(/\t+/g," ").trim()))return null;var r=e.indexOf(" ");if(-1===r)throw new Error("no named row at line "+t);var i=e.substring(0,r);e=e.substring(r+1),e=e.replace(/letter=[\'\"]\S+[\'\"]/gi,""),e=e.split("="),e=e.map(function(e){return e.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var n=[],o=0;o<e.length;o++){var a=e[o];0===o?n.push({key:a[0],data:""}):o===e.length-1?n[n.length-1].data=parseData(a[0]):(n[n.length-1].data=parseData(a[0]),n.push({key:a[1],data:""}))}var s={key:i,data:{}};return n.forEach(function(e){s.data[e.key]=e.data}),s}function parseData(e){return e&&0!==e.length?0===e.indexOf('"')||0===e.indexOf("'")?e.substring(1,e.length-1):-1!==e.indexOf(",")?parseIntList(e):parseInt(e,10):""}function parseIntList(e){return e.split(",").map(function(e){return parseInt(e,10)})}t.exports=function(e){if(!e)throw new Error("no data provided");e=e.toString().trim();var t={pages:[],chars:[],kernings:[]},r=e.split(/\r\n?|\n/g);if(0===r.length)throw new Error("no data in BMFont file");for(var i=0;i<r.length;i++){var n=splitLine(r[i],i);if(n)if("page"===n.key){if("number"!=typeof n.data.id)throw new Error("malformed file at line "+i+" -- needs page id=N");if("string"!=typeof n.data.file)throw new Error("malformed file at line "+i+' -- needs page file="path"');t.pages[n.data.id]=n.data.file}else"chars"===n.key||"kernings"===n.key||("char"===n.key?t.chars.push(n.data):"kerning"===n.key?t.kernings.push(n.data):t[n.key]=n.data)}return t}},{}],28:[function(e,t,r){function readBlock(e,t,r){if(r>t.length-1)return 0;var i=t.readUInt8(r++),n=t.readInt32LE(r);switch(r+=4,i){case 1:e.info=readInfo(t,r);break;case 2:e.common=readCommon(t,r);break;case 3:e.pages=readPages(t,r,n);break;case 4:e.chars=readChars(t,r,n);break;case 5:e.kernings=readKernings(t,r,n)}return 5+n}function readInfo(e,t){var r={};r.size=e.readInt16LE(t);var i=e.readUInt8(t+2);return r.smooth=i>>7&1,r.unicode=i>>6&1,r.italic=i>>5&1,r.bold=i>>4&1,i>>3&1&&(r.fixedHeight=1),r.charset=e.readUInt8(t+3)||"",r.stretchH=e.readUInt16LE(t+4),r.aa=e.readUInt8(t+6),r.padding=[e.readInt8(t+7),e.readInt8(t+8),e.readInt8(t+9),e.readInt8(t+10)],r.spacing=[e.readInt8(t+11),e.readInt8(t+12)],r.outline=e.readUInt8(t+13),r.face=readStringNT(e,t+14),r}function readCommon(e,t){var r={};r.lineHeight=e.readUInt16LE(t),r.base=e.readUInt16LE(t+2),r.scaleW=e.readUInt16LE(t+4),r.scaleH=e.readUInt16LE(t+6),r.pages=e.readUInt16LE(t+8);e.readUInt8(t+10);return r.packed=0,r.alphaChnl=e.readUInt8(t+11),r.redChnl=e.readUInt8(t+12),r.greenChnl=e.readUInt8(t+13),r.blueChnl=e.readUInt8(t+14),r}function readPages(e,t,r){for(var i=[],n=readNameNT(e,t),o=n.length+1,a=r/o,s=0;s<a;s++)i[s]=e.slice(t,t+n.length).toString("utf8"),t+=o;return i}function readChars(e,t,r){for(var i=[],n=r/20,o=0;o<n;o++){var a={},s=20*o;a.id=e.readUInt32LE(t+0+s),a.x=e.readUInt16LE(t+4+s),a.y=e.readUInt16LE(t+6+s),a.width=e.readUInt16LE(t+8+s),a.height=e.readUInt16LE(t+10+s),a.xoffset=e.readInt16LE(t+12+s),a.yoffset=e.readInt16LE(t+14+s),a.xadvance=e.readInt16LE(t+16+s),a.page=e.readUInt8(t+18+s),a.chnl=e.readUInt8(t+19+s),i[o]=a}return i}function readKernings(e,t,r){for(var i=[],n=r/10,o=0;o<n;o++){var a={},s=10*o;a.first=e.readUInt32LE(t+0+s),a.second=e.readUInt32LE(t+4+s),a.amount=e.readInt16LE(t+8+s),i[o]=a}return i}function readNameNT(e,t){for(var r=t;r<e.length&&0!==e[r];r++);return e.slice(t,r)}function readStringNT(e,t){return readNameNT(e,t).toString("utf8")}var i=[66,77,70];t.exports=function(e){if(e.length<6)throw new Error("invalid buffer length for BMFont");if(!i.every(function(t,r){return e.readUInt8(r)===t}))throw new Error("BMFont missing BMF byte header");var t=3;if(e.readUInt8(t++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var r={kernings:[],chars:[]},n=0;n<5;n++)t+=readBlock(r,e,t);return r}},{}],29:[function(e,t,r){function getAttribs(e){return getAttribList(e).reduce(function(e,t){return e[mapName(t.nodeName)]=t.nodeValue,e},{})}function getAttribList(e){for(var t=[],r=0;r<e.attributes.length;r++)t.push(e.attributes[r]);return t}function mapName(e){return o[e.toLowerCase()]||e}var i=e("./parse-attribs"),n=e("xml-parse-from-string"),o={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};t.exports=function(e){e=e.toString();var t=n(e),r={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(e){var n=t.getElementsByTagName(e)[0];n&&(r[e]=i(getAttribs(n)))});var o=t.getElementsByTagName("pages")[0];if(!o)throw new Error("malformed file -- no <pages> element");for(var a=o.getElementsByTagName("page"),s=0;s<a.length;s++){var u=a[s],l=parseInt(u.getAttribute("id"),10),c=u.getAttribute("file");if(isNaN(l))throw new Error('malformed file -- page "id" attribute is NaN');if(!c)throw new Error('malformed file -- needs page "file" attribute');r.pages[parseInt(l,10)]=c}return["chars","kernings"].forEach(function(e){var n=t.getElementsByTagName(e)[0];if(n)for(var o=e.substring(0,e.length-1),a=n.getElementsByTagName(o),s=0;s<a.length;s++){var u=a[s];r[e].push(i(getAttribs(u)))}}),r}},{"./parse-attribs":30,"xml-parse-from-string":75}],30:[function(e,t,r){function parseIntList(e){return e.split(",").map(function(e){return parseInt(e,10)})}t.exports=function(e){"chasrset"in e&&(e.charset=e.chasrset,delete e.chasrset);for(var t in e)"face"!==t&&"charset"!==t&&(e[t]="padding"===t||"spacing"===t?parseIntList(e[t]):parseInt(e[t],10));return e}},{}],31:[function(e,t,r){var i=e("trim"),n=e("for-each"),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return n(i(e).split("\n"),function(e){var r=e.indexOf(":"),n=i(e.slice(0,r)).toLowerCase(),a=i(e.slice(r+1));void 0===t[n]?t[n]=a:o(t[n])?t[n].push(a):t[n]=[t[n],a]}),t}},{"for-each":14,trim:47}],32:[function(e,t,r){(function(e){function normalizeArray(e,t){for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function filter(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return t.exec(e).slice(1)};r.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var n=i>=0?arguments[i]:e.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,r="/"===n.charAt(0))}return t=normalizeArray(filter(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},r.normalize=function(e){var t=r.isAbsolute(e),i="/"===n(e,-1);return e=normalizeArray(filter(e.split("/"),function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(filter(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function trim(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=trim(e.split("/")),n=trim(t.split("/")),o=Math.min(i.length,n.length),a=o,s=0;s<o;s++)if(i[s]!==n[s]){a=s;break}for(var u=[],s=a;s<i.length;s++)u.push("..");return u=u.concat(n.slice(a)),u.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return i(e)[3]};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:34}],33:[function(e,t,r){(function(e){var r=e.performance||{},i=function(){for(var e=["now","webkitNow","msNow","mozNow","oNow"];e.length;){var t=e.shift();if(t in r)return r[t].bind(r)}var i=Date.now||function(){return(new Date).getTime()},n=(r.timing||{}).navigationStart||i();return function(){return i()-n}}();i.performanceNow=r.now,i.noConflict=function(){r.now=i.performanceNow},i.conflict=function(){r.now=i},i.conflict(),t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t,r){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(i===setTimeout)return setTimeout(e,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}function cleanUpNextTick(){u&&a&&(u=!1,a.length?s=a.concat(s):l=-1,s.length&&drainQueue())}function drainQueue(){if(!u){var e=runTimeout(cleanUpNextTick);u=!0;for(var t=s.length;t;){for(a=s,s=[];++l<t;)a&&a[l].run();l=-1,t=s.length}a=null,u=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var i,n,o=t.exports={};!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){i=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var a,s=[],u=!1,l=-1;o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new Item(e,t)),1!==s.length||u||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],35:[function(e,t,r){!function(e){function bind(e,t){return function(){e.apply(t,arguments)}}function Promise(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],doResolve(e,bind(resolve,this),bind(reject,this))}function handle(e){var t=this;if(null===this._state)return void this._deferreds.push(e);i(function(){var r=t._state?e.onFulfilled:e.onRejected;if(null===r)return void(t._state?e.resolve:e.reject)(t._value);var i;try{i=r(t._value)}catch(t){return void e.reject(t)}e.resolve(i)})}function resolve(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void doResolve(bind(t,e),bind(resolve,this),bind(reject,this))}this._state=!0,this._value=e,finale.call(this)}catch(e){reject.call(this,e)}}function reject(e){this._state=!1,this._value=e,finale.call(this)}function finale(){for(var e=0,t=this._deferreds.length;e<t;e++)handle.call(this,this._deferreds[e]);this._deferreds=null}function Handler(e,t,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=i}function doResolve(e,t,r){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,r(e))})}catch(e){if(i)return;i=!0,r(e)}}var r=setTimeout,i="function"==typeof setImmediate&&setImmediate||function(e){r(e,1)},n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};Promise.prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){var r=this;return new Promise(function(i,n){handle.call(r,new Handler(e,t,i,n))})},Promise.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new Promise(function(t,r){function res(n,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(e){res(n,e)},r)}e[n]=o,0==--i&&t(e)}catch(e){r(e)}}if(0===e.length)return t([]);for(var i=e.length,n=0;n<e.length;n++)res(n,e[n])})},Promise.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Promise?e:new Promise(function(t){t(e)})},Promise.reject=function(e){return new Promise(function(t,r){r(e)})},Promise.race=function(e){return new Promise(function(t,r){for(var i=0,n=e.length;i<n;i++)e[i].then(t,r)})},Promise._setImmediateFn=function(e){i=e},void 0!==t&&t.exports?t.exports=Promise:e.Promise||(e.Promise=Promise)}(this)},{}],36:[function(e,t,r){var i=e("dtype"),n=e("an-array"),o=e("is-buffer"),a=[0,2,3],s=[2,1,3];t.exports=function(e,t){e&&(n(e)||o(e))||(t=e||{},e=null),t="number"==typeof t?{count:t}:t||{};for(var r="string"==typeof t.type?t.type:"uint16",u="number"==typeof t.count?t.count:1,l=t.start||0,c=!1!==t.clockwise?a:s,h=c[0],d=c[1],f=c[2],p=6*u,m=e||new(i(r))(p),g=0,y=0;g<p;g+=6,y+=4){var v=g+l;m[v+0]=y+0,m[v+1]=y+1,m[v+2]=y+2,m[v+3]=y+h,m[v+4]=y+d,m[v+5]=y+f}return m}},{"an-array":2,dtype:12,"is-buffer":19}],37:[function(e,t,r){function parse(e){var t=function(e){return e.trim()},r={};return getKeyValueChunks(e).map(t).filter(Boolean).forEach(function(e){var t=e.indexOf(":"),i=e.substr(0,t).trim(),n=e.substr(t+1).trim();r[i]=n}),r}function getKeyValueChunks(e){for(var t,r=[],i=0,n=/url\([^\)]+$/,o="";i<e.length;)t=e.indexOf(";",i),-1===t&&(t=e.length),o+=e.substring(i,t),n.test(o)?(o+=";",i=t+1):(r.push(o),o="",i=t+1);return r}function stringify(e){return Object.keys(e).map(function(t){return t+":"+e[t]}).join(";")}function normalize(e){return stringify(parse(e))}t.exports.parse=parse,t.exports.stringify=stringify,t.exports.normalize=normalize},{}],38:[function(e,t,r){function TextGeometry(e){c.call(this),"string"==typeof e&&(e={text:e}),this._opt=s({},e),e&&this.update(e)}var i=e("layout-bmfont-text"),n=e("inherits"),o=e("quad-indices"),a=e("three-buffer-vertex-data"),s=e("object-assign"),u=e("./lib/vertices"),l=e("./lib/utils"),c=THREE.BufferGeometry;t.exports=function(e){return new TextGeometry(e)},n(TextGeometry,c),TextGeometry.prototype.update=function(e){if("string"==typeof e&&(e={text:e}),e=s({},this._opt,e),!e.font)throw new TypeError("must specify a { font } in options");this.layout=i(e);var t=!1!==e.flipY,r=e.font,n=r.common.scaleW,l=r.common.scaleH,c=this.layout.glyphs.filter(function(e){var t=e.data;return t.width*t.height>0});this.visibleGlyphs=c;var h=u.positions(c),d=u.uvs(c,n,l,t),f=o({clockwise:!0,type:"uint16",count:c.length});if(a.index(this,f,1,"uint16"),a.attr(this,"position",h,2),a.attr(this,"uv",d,2),!e.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(e.multipage){var p=u.pages(c);a.attr(this,"page",p,1)}},TextGeometry.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var e=this.attributes.position.array,t=this.attributes.position.itemSize;if(!e||!t||e.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);l.computeSphere(e,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')},TextGeometry.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.boundingBox,t=this.attributes.position.array,r=this.attributes.position.itemSize;if(!t||!r||t.length<2)return void e.makeEmpty();l.computeBox(t,e)}},{"./lib/utils":39,"./lib/vertices":40,inherits:18,"layout-bmfont-text":23,"object-assign":26,"quad-indices":36,"three-buffer-vertex-data":41}],39:[function(e,t,r){function bounds(e){var t=e.length/i;n.min[0]=e[0],n.min[1]=e[1],n.max[0]=e[0],n.max[1]=e[1];for(var r=0;r<t;r++){var o=e[r*i+0],a=e[r*i+1];n.min[0]=Math.min(o,n.min[0]),n.min[1]=Math.min(a,n.min[1]),n.max[0]=Math.max(o,n.max[0]),n.max[1]=Math.max(a,n.max[1])}}var i=2,n={min:[0,0],max:[0,0]};t.exports.computeBox=function(e,t){bounds(e),t.min.set(n.min[0],n.min[1],0),t.max.set(n.max[0],n.max[1],0)},t.exports.computeSphere=function(e,t){bounds(e);var r=n.min[0],i=n.min[1],o=n.max[0],a=n.max[1],s=o-r,u=a-i,l=Math.sqrt(s*s+u*u);t.center.set(r+s/2,i+u/2,0),t.radius=l/2}},{}],40:[function(e,t,r){t.exports.pages=function(e){var t=new Float32Array(4*e.length*1),r=0;return e.forEach(function(e){var i=e.data.page||0;t[r++]=i,t[r++]=i,t[r++]=i,t[r++]=i}),t},t.exports.uvs=function(e,t,r,i){var n=new Float32Array(4*e.length*2),o=0;return e.forEach(function(e){var a=e.data,s=a.x+a.width,u=a.y+a.height,l=a.x/t,c=a.y/r,h=s/t,d=u/r;i&&(c=(r-a.y)/r,d=(r-u)/r),n[o++]=l,n[o++]=c,n[o++]=l,n[o++]=d,n[o++]=h,n[o++]=d,n[o++]=h,n[o++]=c}),n},t.exports.positions=function(e){var t=new Float32Array(4*e.length*2),r=0;return e.forEach(function(e){var i=e.data,n=e.position[0]+i.xoffset,o=e.position[1]+i.yoffset,a=i.width,s=i.height;t[r++]=n,t[r++]=o,t[r++]=n,t[r++]=o+s,t[r++]=n+a,t[r++]=o+s,t[r++]=n+a,t[r++]=o}),t}},{}],41:[function(e,t,r){function setIndex(e,t,r,i){"number"!=typeof r&&(r=1),"string"!=typeof i&&(i="uint16");var n=!e.index&&"function"!=typeof e.setIndex,o=n?e.getAttribute("index"):e.index,a=updateAttribute(o,t,r,i);a&&(n?e.addAttribute("index",a):e.index=a)}function setAttribute(e,t,r,i,n){if("number"!=typeof i&&(i=3),"string"!=typeof n&&(n="float32"),Array.isArray(r)&&Array.isArray(r[0])&&r[0].length!==i)throw new Error("Nested vertex array has unexpected size; expected "+i+" but found "+r[0].length);var o=e.getAttribute(t),a=updateAttribute(o,r,i,n);a&&e.addAttribute(t,a)}function updateAttribute(e,t,r,o){if(t=t||[],!e||rebuildAttribute(e,t,r)){t=i(t,o);var a=e&&"function"!=typeof e.setArray;return e&&!a||(a&&!n&&(n=!0,console.warn(["A WebGL buffer is being updated with a new size or itemSize, ","however this version of ThreeJS only supports fixed-size buffers.","\nThe old buffer may still be kept in memory.\n","To avoid memory leaks, it is recommended that you dispose ","your geometries and create new ones, or update to ThreeJS r82 or newer.\n","See here for discussion:\n","https://github.com/mrdoob/three.js/pull/9631"].join(""))),e=new THREE.BufferAttribute(t,r)),e.itemSize=r,e.needsUpdate=!0,"function"==typeof e.setArray&&e.setArray(t),e}return i(t,e.array),e.needsUpdate=!0,null}function rebuildAttribute(e,t,r){if(e.itemSize!==r)return!0;if(!e.array)return!0;var i=e.array.length;return Array.isArray(t)&&Array.isArray(t[0])?i!==t.length*r:i!==t.length}var i=e("flatten-vertex-data"),n=!1;t.exports.attr=setAttribute,t.exports.index=setIndex},{"flatten-vertex-data":13}],42:[function(e,r,i){!function(e,n){"object"==typeof i&&void 0!==r?n(i):"function"==typeof t&&t.amd?t(["exports"],n):n(e.THREE=e.THREE||{})}(this,function(e){"use strict";function EventDispatcher(){}function Vector2(e,t){this.x=e||0,this.y=t||0}function Texture(e,t,r,i,n,o,a,s,u,l){Object.defineProperty(this,"id",{value:ut++}),this.uuid=st.generateUUID(),this.name="",this.image=void 0!==e?e:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Texture.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:ce,this.wrapT=void 0!==i?i:ce,this.magFilter=void 0!==n?n:me,this.minFilter=void 0!==o?o:ye,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:Ne,this.type=void 0!==s?s:ve,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Je,this.version=0,this.onUpdate=null}function Vector4(e,t,r,i){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==i?i:1}function WebGLRenderTarget(e,t,r){this.uuid=st.generateUUID(),this.width=e,this.height=t,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t),r=r||{},void 0===r.minFilter&&(r.minFilter=me),this.texture=new Texture(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function WebGLRenderTargetCube(e,t,r){WebGLRenderTarget.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function Quaternion(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==i?i:1}function Vector3(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function Matrix4(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function CubeTexture(e,t,r,i,n,o,a,s,u,l){e=void 0!==e?e:[],t=void 0!==t?t:re,Texture.call(this,e,t,r,i,n,o,a,s,u,l),this.flipY=!1}function UniformContainer(){this.seq=[],this.map={}}function flatten(e,t,r){var i=e[0];if(i<=0||i>0)return e;var n=t*r,o=ht[n];if(void 0===o&&(o=new Float32Array(n),ht[n]=o),0!==t){i.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function allocTexUnits(e,t){var r=dt[t];void 0===r&&(r=new Int32Array(t),dt[t]=r);for(var i=0;i!==t;++i)r[i]=e.allocTextureUnit();return r}function setValue1f(e,t){e.uniform1f(this.addr,t)}function setValue1i(e,t){e.uniform1i(this.addr,t)}function setValue2fv(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function setValue3fv(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function setValue4fv(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function setValue2fm(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function setValue3fm(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function setValue4fm(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function setValueT1(e,t,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTexture2D(t||lt,i)}function setValueT6(e,t,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTextureCube(t||ct,i)}function setValue2iv(e,t){e.uniform2iv(this.addr,t)}function setValue3iv(e,t){e.uniform3iv(this.addr,t)}function setValue4iv(e,t){e.uniform4iv(this.addr,t)}function getSingularSetter(e){switch(e){case 5126:return setValue1f;case 35664:return setValue2fv;case 35665:return setValue3fv;case 35666:return setValue4fv;case 35674:return setValue2fm;case 35675:return setValue3fm;case 35676:return setValue4fm;case 35678:return setValueT1;case 35680:return setValueT6;case 5124:case 35670:return setValue1i;case 35667:case 35671:return setValue2iv;case 35668:case 35672:return setValue3iv;case 35669:case 35673:return setValue4iv}}function setValue1fv(e,t){e.uniform1fv(this.addr,t)}function setValue1iv(e,t){e.uniform1iv(this.addr,t)}function setValueV2a(e,t){e.uniform2fv(this.addr,flatten(t,this.size,2))}function setValueV3a(e,t){e.uniform3fv(this.addr,flatten(t,this.size,3))}function setValueV4a(e,t){e.uniform4fv(this.addr,flatten(t,this.size,4))}function setValueM2a(e,t){e.uniformMatrix2fv(this.addr,!1,flatten(t,this.size,4))}function setValueM3a(e,t){e.uniformMatrix3fv(this.addr,!1,flatten(t,this.size,9))}function setValueM4a(e,t){e.uniformMatrix4fv(this.addr,!1,flatten(t,this.size,16))}function setValueT1a(e,t,r){var i=t.length,n=allocTexUnits(r,i);e.uniform1iv(this.addr,n);for(var o=0;o!==i;++o)r.setTexture2D(t[o]||lt,n[o])}function setValueT6a(e,t,r){var i=t.length,n=allocTexUnits(r,i);e.uniform1iv(this.addr,n);for(var o=0;o!==i;++o)r.setTextureCube(t[o]||ct,n[o])}function getPureArraySetter(e){switch(e){case 5126:return setValue1fv;case 35664:return setValueV2a;case 35665:return setValueV3a;case 35666:return setValueV4a;case 35674:return setValueM2a;case 35675:return setValueM3a;case 35676:return setValueM4a;case 35678:return setValueT1a;case 35680:return setValueT6a;case 5124:case 35670:return setValue1iv;case 35667:case 35671:return setValue2iv;case 35668:case 35672:return setValue3iv;case 35669:case 35673:return setValue4iv}}function SingleUniform(e,t,r){this.id=e,this.addr=r,this.setValue=getSingularSetter(t.type)}function PureArrayUniform(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=getPureArraySetter(t.type)}function StructuredUniform(e){this.id=e,UniformContainer.call(this)}function addUniform(e,t){e.seq.push(t),e.map[t.id]=t}function parseUniform(e,t,r){var i=e.name,n=i.length;for(ft.lastIndex=0;;){var o=ft.exec(i),a=ft.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===n){addUniform(r,void 0===l?new SingleUniform(s,e,t):new PureArrayUniform(s,e,t));break}var c=r.map,h=c[s];void 0===h&&(h=new StructuredUniform(s),addUniform(r,h)),r=h}}function WebGLUniforms(e,t,r){UniformContainer.call(this),this.renderer=r;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;++n){var o=e.getActiveUniform(t,n),a=o.name;parseUniform(o,e.getUniformLocation(t,a),this)}}function Color(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function DataTexture(e,t,r,i,n,o,a,s,u,l,c,h){Texture.call(this,null,o,a,s,u,l,i,n,c,h),this.image={data:e,width:t,height:r},this.magFilter=void 0!==u?u:de,this.minFilter=void 0!==l?l:de,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Box2(e,t){this.min=void 0!==e?e:new Vector2(1/0,1/0),this.max=void 0!==t?t:new Vector2(-1/0,-1/0)}function LensFlarePlugin(e,t){function init(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);r=c.createBuffer(),i=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,r),c.bufferData(c.ARRAY_BUFFER,e,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),c.bufferData(c.ELEMENT_ARRAY_BUFFER,t,c.STATIC_DRAW),u=c.createTexture(),l=c.createTexture(),h.bindTexture(c.TEXTURE_2D,u),c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,16,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),h.bindTexture(c.TEXTURE_2D,l),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),n={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},o=createProgram(n),a={vertex:c.getAttribLocation(o,"position"),uv:c.getAttribLocation(o,"uv")},s={renderType:c.getUniformLocation(o,"renderType"),map:c.getUniformLocation(o,"map"),occlusionMap:c.getUniformLocation(o,"occlusionMap"),opacity:c.getUniformLocation(o,"opacity"),color:c.getUniformLocation(o,"color"),scale:c.getUniformLocation(o,"scale"),rotation:c.getUniformLocation(o,"rotation"),screenPosition:c.getUniformLocation(o,"screenPosition")}}function createProgram(t){var r=c.createProgram(),i=c.createShader(c.FRAGMENT_SHADER),n=c.createShader(c.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return c.shaderSource(i,o+t.fragmentShader),c.shaderSource(n,o+t.vertexShader),c.compileShader(i),c.compileShader(n),c.attachShader(r,i),c.attachShader(r,n),c.linkProgram(r),r}var r,i,n,o,a,s,u,l,c=e.context,h=e.state;this.render=function(n,d,f){if(0!==t.length){var p=new Vector3,m=f.w/f.z,g=.5*f.z,y=.5*f.w,v=16/f.w,b=new Vector2(v*m,v),x=new Vector3(1,1,0),M=new Vector2(1,1),w=new Box2;w.min.set(f.x,f.y),w.max.set(f.x+(f.z-16),f.y+(f.w-16)),void 0===o&&init(),c.useProgram(o),h.initAttributes(),h.enableAttribute(a.vertex),h.enableAttribute(a.uv),h.disableUnusedAttributes(),c.uniform1i(s.occlusionMap,0),c.uniform1i(s.map,1),c.bindBuffer(c.ARRAY_BUFFER,r),c.vertexAttribPointer(a.vertex,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(a.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),h.disable(c.CULL_FACE),h.setDepthWrite(!1);for(var E=0,_=t.length;E<_;E++){v=16/f.w,b.set(v*m,v);var T=t[E];if(p.set(T.matrixWorld.elements[12],T.matrixWorld.elements[13],T.matrixWorld.elements[14]),p.applyMatrix4(d.matrixWorldInverse),p.applyMatrix4(d.projectionMatrix),x.copy(p),M.x=f.x+x.x*g+g-8,M.y=f.y+x.y*y+y-8,!0===w.containsPoint(M)){h.activeTexture(c.TEXTURE0),h.bindTexture(c.TEXTURE_2D,null),h.activeTexture(c.TEXTURE1),h.bindTexture(c.TEXTURE_2D,u),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,M.x,M.y,16,16,0),c.uniform1i(s.renderType,0),c.uniform2f(s.scale,b.x,b.y),c.uniform3f(s.screenPosition,x.x,x.y,x.z),h.disable(c.BLEND),h.enable(c.DEPTH_TEST),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),h.activeTexture(c.TEXTURE0),h.bindTexture(c.TEXTURE_2D,l),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,M.x,M.y,16,16,0),c.uniform1i(s.renderType,1),h.disable(c.DEPTH_TEST),h.activeTexture(c.TEXTURE1),h.bindTexture(c.TEXTURE_2D,u),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),T.positionScreen.copy(x),T.customUpdateCallback?T.customUpdateCallback(T):T.updateLensFlares(),c.uniform1i(s.renderType,2),h.enable(c.BLEND);for(var A=0,S=T.lensFlares.length;A<S;A++){var C=T.lensFlares[A];C.opacity>.001&&C.scale>.001&&(x.x=C.x,x.y=C.y,x.z=C.z,v=C.size*C.scale/f.w,b.x=v*m,b.y=v,c.uniform3f(s.screenPosition,x.x,x.y,x.z),c.uniform2f(s.scale,b.x,b.y),c.uniform1f(s.rotation,C.rotation),c.uniform1f(s.opacity,C.opacity),c.uniform3f(s.color,C.color.r,C.color.g,C.color.b),h.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),e.setTexture2D(C.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}h.enable(c.CULL_FACE),h.enable(c.DEPTH_TEST),h.setDepthWrite(!0),e.resetGLState()}}}function SpritePlugin(e,t){function init(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);r=u.createBuffer(),i=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,r),u.bufferData(u.ARRAY_BUFFER,e,u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),u.bufferData(u.ELEMENT_ARRAY_BUFFER,t,u.STATIC_DRAW),n=createProgram(),o={position:u.getAttribLocation(n,"position"),uv:u.getAttribLocation(n,"uv")},a={uvOffset:u.getUniformLocation(n,"uvOffset"),uvScale:u.getUniformLocation(n,"uvScale"),rotation:u.getUniformLocation(n,"rotation"),scale:u.getUniformLocation(n,"scale"),color:u.getUniformLocation(n,"color"),map:u.getUniformLocation(n,"map"),opacity:u.getUniformLocation(n,"opacity"),modelViewMatrix:u.getUniformLocation(n,"modelViewMatrix"),projectionMatrix:u.getUniformLocation(n,"projectionMatrix"),fogType:u.getUniformLocation(n,"fogType"),fogDensity:u.getUniformLocation(n,"fogDensity"),fogNear:u.getUniformLocation(n,"fogNear"),fogFar:u.getUniformLocation(n,"fogFar"),fogColor:u.getUniformLocation(n,"fogColor"),alphaTest:u.getUniformLocation(n,"alphaTest")};var l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=8,l.height=8;var c=l.getContext("2d");c.fillStyle="white",c.fillRect(0,0,8,8),s=new Texture(l),s.needsUpdate=!0}function createProgram(){var t=u.createProgram(),r=u.createShader(u.VERTEX_SHADER),i=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),u.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),u.compileShader(r),u.compileShader(i),u.attachShader(t,r),u.attachShader(t,i),u.linkProgram(t),t}function painterSortStable(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var r,i,n,o,a,s,u=e.context,l=e.state,c=new Vector3,h=new Quaternion,d=new Vector3;this.render=function(f,p){if(0!==t.length){void 0===n&&init(),u.useProgram(n),l.initAttributes(),l.enableAttribute(o.position),l.enableAttribute(o.uv),l.disableUnusedAttributes(),l.disable(u.CULL_FACE),l.enable(u.BLEND),u.bindBuffer(u.ARRAY_BUFFER,r),u.vertexAttribPointer(o.position,2,u.FLOAT,!1,16,0),u.vertexAttribPointer(o.uv,2,u.FLOAT,!1,16,8),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),u.uniformMatrix4fv(a.projectionMatrix,!1,p.projectionMatrix.elements),l.activeTexture(u.TEXTURE0),u.uniform1i(a.map,0);var m=0,g=0,y=f.fog;y?(u.uniform3f(a.fogColor,y.color.r,y.color.g,y.color.b),y.isFog?(u.uniform1f(a.fogNear,y.near),u.uniform1f(a.fogFar,y.far),u.uniform1i(a.fogType,1),m=1,g=1):y.isFogExp2&&(u.uniform1f(a.fogDensity,y.density),u.uniform1i(a.fogType,2),m=2,g=2)):(u.uniform1i(a.fogType,0),m=0,g=0);for(var v=0,b=t.length;v<b;v++){var x=t[v];x.modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,x.matrixWorld),x.z=-x.modelViewMatrix.elements[14]}t.sort(painterSortStable);for(var M=[],v=0,b=t.length;v<b;v++){var x=t[v],w=x.material;if(!1!==w.visible){u.uniform1f(a.alphaTest,w.alphaTest),u.uniformMatrix4fv(a.modelViewMatrix,!1,x.modelViewMatrix.elements),x.matrixWorld.decompose(c,h,d),M[0]=d.x,M[1]=d.y;var E=0;f.fog&&w.fog&&(E=g),m!==E&&(u.uniform1i(a.fogType,E),m=E),null!==w.map?(u.uniform2f(a.uvOffset,w.map.offset.x,w.map.offset.y),u.uniform2f(a.uvScale,w.map.repeat.x,w.map.repeat.y)):(u.uniform2f(a.uvOffset,0,0),u.uniform2f(a.uvScale,1,1)),u.uniform1f(a.opacity,w.opacity),u.uniform3f(a.color,w.color.r,w.color.g,w.color.b),u.uniform1f(a.rotation,w.rotation),u.uniform2fv(a.scale,M),l.setBlending(w.blending,w.blendEquation,w.blendSrc,w.blendDst),l.setDepthTest(w.depthTest),l.setDepthWrite(w.depthWrite),w.map?e.setTexture2D(w.map,0):e.setTexture2D(s,0),u.drawElements(u.TRIANGLES,6,u.UNSIGNED_SHORT,0)}}l.enable(u.CULL_FACE),e.resetGLState()}}}function Material(){Object.defineProperty(this,"id",{value:bt++}),this.uuid=st.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=b,this.side=l,this.shading=f,this.vertexColors=p,this.opacity=1,this.transparent=!1,this.blendSrc=O,this.blendDst=R,this.blendEquation=_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function ShaderMaterial(e){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function MeshDepthMaterial(e){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=ot,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Box3(e,t){this.min=void 0!==e?e:new Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new Vector3(-1/0,-1/0,-1/0)}function Sphere(e,t){this.center=void 0!==e?e:new Vector3,this.radius=void 0!==t?t:0}function Matrix3(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function Plane(e,t){this.normal=void 0!==e?e:new Vector3(1,0,0),this.constant=void 0!==t?t:0}function Frustum(e,t,r,i,n,o){this.planes=[void 0!==e?e:new Plane,void 0!==t?t:new Plane,void 0!==r?r:new Plane,void 0!==i?i:new Plane,void 0!==n?n:new Plane,void 0!==o?o:new Plane]}function WebGLShadowMap(e,t,r,i){function getDepthMaterial(t,r,i,n){var o=t.geometry,a=null,s=M,u=t.customDepthMaterial;if(i&&(s=w,u=t.customDistanceMaterial),u)a=u;else{var d=!1;r.morphTargets&&(o&&o.isBufferGeometry?d=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(d=o.morphTargets&&o.morphTargets.length>0));var f=t.isSkinnedMesh&&r.skinning,p=0;d&&(p|=v),f&&(p|=b),a=s[p]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var m=a.uuid,g=r.uuid,y=E[m];void 0===y&&(y={},E[m]=y);var x=y[g];void 0===x&&(x=a.clone(),y[g]=x),a=x}a.visible=r.visible,a.wireframe=r.wireframe;var _=r.side;return j.renderSingleSided&&_==h&&(_=l),j.renderReverseSided&&(_===l?_=c:_===c&&(_=l)),a.side=_,a.clipShadows=r.clipShadows,a.clippingPlanes=r.clippingPlanes,a.wireframeLinewidth=r.wireframeLinewidth,a.linewidth=r.linewidth,i&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(n),a}function projectObject(e,t,r){if(!1!==e.visible){if(0!=(e.layers.mask&t.layers.mask)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!1===e.frustumCulled||!0===a.intersectsObject(e))){!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),y.push(e))}for(var i=e.children,n=0,o=i.length;n<o;n++)projectObject(i[n],t,r)}}var n=e.context,o=e.state,a=new Frustum,u=new Matrix4,d=t.shadows,f=new Vector2,p=new Vector2(i.maxTextureSize,i.maxTextureSize),m=new Vector3,g=new Vector3,y=[],v=1,b=2,x=1+(v|b),M=new Array(x),w=new Array(x),E={},_=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],T=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)],A=[new Vector4,new Vector4,new Vector4,new Vector4,new Vector4,new Vector4],S=new MeshDepthMaterial;S.depthPacking=at,S.clipping=!0;for(var C=vt.distanceRGBA,L=pt.clone(C.uniforms),D=0;D!==x;++D){var I=0!=(D&v),N=0!=(D&b),O=S.clone();O.morphTargets=I,O.skinning=N,M[D]=O;var R=new ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:L,vertexShader:C.vertexShader,fragmentShader:C.fragmentShader,morphTargets:I,skinning:N,clipping:!0});w[D]=R}var j=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=s,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,i){if(!1!==j.enabled&&(!1!==j.autoUpdate||!1!==j.needsUpdate)&&0!==d.length){o.buffers.color.setClear(1,1,1,1),o.disable(n.BLEND),o.setDepthTest(!0),o.setScissorTest(!1);for(var s,l,c=0,h=d.length;c<h;c++){var v=d[c],b=v.shadow;if(void 0!==b){var x=b.camera;if(f.copy(b.mapSize),f.min(p),v&&v.isPointLight){s=6,l=!0;var M=f.x,w=f.y;A[0].set(2*M,w,M,w),A[1].set(0,w,M,w),A[2].set(3*M,w,M,w),A[3].set(M,w,M,w),A[4].set(3*M,0,M,w),A[5].set(M,0,M,w),f.x*=4,f.y*=2}else s=1,l=!1;if(null===b.map){var E={minFilter:de,magFilter:de,format:Ne};b.map=new WebGLRenderTarget(f.x,f.y,E),x.updateProjectionMatrix()}b.isSpotLightShadow&&b.update(v),b&&b.isRectAreaLightShadow&&b.update(v);var S=b.map,C=b.matrix;g.setFromMatrixPosition(v.matrixWorld),x.position.copy(g),e.setRenderTarget(S),e.clear();for(var L=0;L<s;L++){if(l){m.copy(x.position),m.add(_[L]),x.up.copy(T[L]),x.lookAt(m);var D=A[L];o.viewport(D)}else m.setFromMatrixPosition(v.target.matrixWorld),x.lookAt(m);x.updateMatrixWorld(),x.matrixWorldInverse.getInverse(x.matrixWorld),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(x.projectionMatrix),C.multiply(x.matrixWorldInverse),u.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),a.setFromMatrix(u),y.length=0,projectObject(t,i,x);for(var I=0,N=y.length;I<N;I++){var O=y[I],R=r.update(O),P=O.material;if(P&&P.isMultiMaterial)for(var k=R.groups,B=P.materials,z=0,U=k.length;z<U;z++){var F=k[z],G=B[F.materialIndex];if(!0===G.visible){var V=getDepthMaterial(O,G,l,g);e.renderBufferDirect(x,null,R,V,O,F)}}else{var V=getDepthMaterial(O,P,l,g);e.renderBufferDirect(x,null,R,V,O,null)}}}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}var H=e.getClearColor(),W=e.getClearAlpha();e.setClearColor(H,W),j.needsUpdate=!1}}}function Ray(e,t){this.origin=void 0!==e?e:new Vector3,this.direction=void 0!==t?t:new Vector3}function Euler(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._order=i||Euler.DefaultOrder}function Layers(){this.mask=1}function Object3D(){function onRotationChange(){r.setFromEuler(t,!1)}function onQuaternionChange(){t.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:xt++}),this.uuid=st.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var e=new Vector3,t=new Euler,r=new Quaternion,i=new Vector3(1,1,1);t.onChange(onRotationChange),r.onChange(onQuaternionChange),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function Line3(e,t){this.start=void 0!==e?e:new Vector3,this.end=void 0!==t?t:new Vector3}function Triangle(e,t,r){this.a=void 0!==e?e:new Vector3,this.b=void 0!==t?t:new Vector3,this.c=void 0!==r?r:new Vector3}function Face3(e,t,r,i,n,o){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new Vector3,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new Color,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==o?o:0}function MeshBasicMaterial(e){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function BufferAttribute(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=st.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Int8BufferAttribute(e,t){BufferAttribute.call(this,new Int8Array(e),t)}function Uint8BufferAttribute(e,t){BufferAttribute.call(this,new Uint8Array(e),t)}function Uint8ClampedBufferAttribute(e,t){BufferAttribute.call(this,new Uint8ClampedArray(e),t)}function Int16BufferAttribute(e,t){BufferAttribute.call(this,new Int16Array(e),t)}function Uint16BufferAttribute(e,t){BufferAttribute.call(this,new Uint16Array(e),t)}function Int32BufferAttribute(e,t){BufferAttribute.call(this,new Int32Array(e),t)}function Uint32BufferAttribute(e,t){BufferAttribute.call(this,new Uint32Array(e),t)}function Float32BufferAttribute(e,t){BufferAttribute.call(this,new Float32Array(e),t)}function Float64BufferAttribute(e,t){BufferAttribute.call(this,new Float64Array(e),t)}function DirectGeometry(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function arrayMax(e){for(var t=e.length,r=-1/0;t--;)e[t]>r&&(r=e[t]);return r}function GeometryIdCount(){return Mt++}function Geometry(){Object.defineProperty(this,"id",{value:GeometryIdCount()}),this.uuid=st.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function BufferGeometry(){Object.defineProperty(this,"id",{value:GeometryIdCount()}),this.uuid=st.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Mesh(e,t){Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new BufferGeometry,this.material=void 0!==t?t:new MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=Xe,this.updateMorphTargets()}function BoxGeometry(e,t,r,i,n,o){Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:o},this.fromBufferGeometry(new BoxBufferGeometry(e,t,r,i,n,o)),this.mergeVertices()}function BoxBufferGeometry(e,t,r,i,n,o){function buildPlane(e,t,r,i,n,o,f,p,m,g,y){var v,b,x=o/m,M=f/g,w=o/2,E=f/2,_=p/2,T=m+1,A=g+1,S=0,C=0,L=new Vector3;for(b=0;b<A;b++){var D=b*M-E;for(v=0;v<T;v++){var I=v*x-w;L[e]=I*i,L[t]=D*n,L[r]=_,u.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[r]=p>0?1:-1,l.push(L.x,L.y,L.z),c.push(v/m),c.push(1-b/g),S+=1}}for(b=0;b<g;b++)for(v=0;v<m;v++){var N=h+v+T*b,O=h+v+T*(b+1),R=h+(v+1)+T*(b+1),j=h+(v+1)+T*b;s.push(N,O,j),s.push(O,R,j),C+=6}a.addGroup(d,C,y),d+=C,h+=S}BufferGeometry.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:o};var a=this;i=Math.floor(i)||1,n=Math.floor(n)||1,o=Math.floor(o)||1;var s=[],u=[],l=[],c=[],h=0,d=0;buildPlane("z","y","x",-1,-1,r,t,e,o,n,0),buildPlane("z","y","x",1,-1,r,t,-e,o,n,1),buildPlane("x","z","y",1,1,e,r,t,i,o,2),buildPlane("x","z","y",1,-1,e,r,-t,i,o,3),buildPlane("x","y","z",1,-1,e,t,r,i,n,4),buildPlane("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(s),this.addAttribute("position",new Float32BufferAttribute(u,3)),this.addAttribute("normal",new Float32BufferAttribute(l,3)),this.addAttribute("uv",new Float32BufferAttribute(c,2))}function PlaneGeometry(e,t,r,i){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i},this.fromBufferGeometry(new PlaneBufferGeometry(e,t,r,i))}function PlaneBufferGeometry(e,t,r,i){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};var n,o,a=e/2,s=t/2,u=Math.floor(r)||1,l=Math.floor(i)||1,c=u+1,h=l+1,d=e/u,f=t/l,p=[],m=[],g=[],y=[];for(o=0;o<h;o++){var v=o*f-s;for(n=0;n<c;n++){var b=n*d-a;m.push(b,-v,0),g.push(0,0,1),y.push(n/u),y.push(1-o/l)}}for(o=0;o<l;o++)for(n=0;n<u;n++){var x=n+c*o,M=n+c*(o+1),w=n+1+c*(o+1),E=n+1+c*o;p.push(x,M,E),p.push(M,w,E)}this.setIndex(p),this.addAttribute("position",new Float32BufferAttribute(m,3)),this.addAttribute("normal",new Float32BufferAttribute(g,3)),this.addAttribute("uv",new Float32BufferAttribute(y,2))}function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4}function PerspectiveCamera(e,t,r,i){Camera.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function OrthographicCamera(e,t,r,i,n,o){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=void 0!==n?n:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function WebGLIndexedBufferRenderer(e,t,r){function setMode(e){i=e}function setIndex(r){r.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(n=e.UNSIGNED_INT,o=4):r.array instanceof Uint16Array?(n=e.UNSIGNED_SHORT,o=2):(n=e.UNSIGNED_BYTE,o=1)}function render(t,a){e.drawElements(i,a,n,t*o),r.calls++,r.vertices+=a,i===e.TRIANGLES&&(r.faces+=a/3)}function renderInstances(a,s,u){var l=t.get("ANGLE_instanced_arrays");if(null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l.drawElementsInstancedANGLE(i,u,n,s*o,a.maxInstancedCount),r.calls++,r.vertices+=u*a.maxInstancedCount,i===e.TRIANGLES&&(r.faces+=a.maxInstancedCount*u/3)}var i,n,o;return{setMode:setMode,setIndex:setIndex,render:render,renderInstances:renderInstances}}function WebGLBufferRenderer(e,t,r){function setMode(e){i=e}function render(t,n){e.drawArrays(i,t,n),r.calls++,r.vertices+=n,i===e.TRIANGLES&&(r.faces+=n/3)}function renderInstances(n){var o=t.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=n.attributes.position,s=0;a.isInterleavedBufferAttribute?(s=a.data.count,o.drawArraysInstancedANGLE(i,0,s,n.maxInstancedCount)):(s=a.count,o.drawArraysInstancedANGLE(i,0,s,n.maxInstancedCount)),r.calls++,r.vertices+=s*n.maxInstancedCount,i===e.TRIANGLES&&(r.faces+=n.maxInstancedCount*s/3)}var i;return{setMode:setMode,render:render,renderInstances:renderInstances}}function WebGLLights(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Vector3,color:new Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":r={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":r={position:new Vector3,color:new Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"HemisphereLight":r={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":r={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return e[t.id]=r,r}}}function addLineNumbers(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function WebGLShader(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),addLineNumbers(r)),i}function getEncodingComponents(e){switch(e){case Je:return["Linear","( value )"];case $e:return["sRGB","( value )"];case tt:return["RGBE","( value )"];case rt:return["RGBM","( value, 7.0 )"];case it:return["RGBM","( value, 16.0 )"];case nt:return["RGBD","( value, 256.0 )"];case et:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function getTexelDecodingFunction(e,t){var r=getEncodingComponents(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function getTexelEncodingFunction(e,t){var r=getEncodingComponents(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function getToneMappingFunction(e,t){var r;switch(t){case J:r="Linear";break;case $:r="Reinhard";break;case ee:r="Uncharted2";break;case te:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function generateExtensions(e,t,r){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}function generateDefines(e){var t=[];for(var r in e){var i=e[r];!1!==i&&t.push("#define "+r+" "+i)}return t.join("\n")}function fetchAttributeLocations(e,t,r){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<n;o++){var a=e.getActiveAttrib(t,o),s=a.name;i[s]=e.getAttribLocation(t,s)}return i}function filterEmptyLine(e){return""!==e}function replaceLightNums(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function parseIncludes(e){function replace(e,t){var r=mt[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return parseIncludes(r)}var t=/#include +<([\w\d.]+)>/g;return e.replace(t,replace)}function unrollLoops(e){function replace(e,t,r,i){for(var n="",o=parseInt(t);o<parseInt(r);o++)n+=i.replace(/\[ i \]/g,"[ "+o+" ]");return n}var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(t,replace)}function WebGLProgram(e,t,r,i){var n=e.context,o=r.extensions,a=r.defines,l=r.__webglShader.vertexShader,c=r.__webglShader.fragmentShader,h="SHADOWMAP_TYPE_BASIC";i.shadowMapType===s?h="SHADOWMAP_TYPE_PCF":i.shadowMapType===u&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(r.envMap.mapping){case re:case ie:d="ENVMAP_TYPE_CUBE";break;case se:case ue:d="ENVMAP_TYPE_CUBE_UV";break;case ne:case oe:d="ENVMAP_TYPE_EQUIREC";break;case ae:d="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case ie:case oe:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case q:p="ENVMAP_BLENDING_MULTIPLY";break;case X:p="ENVMAP_BLENDING_MIX";break;case Z:p="ENVMAP_BLENDING_ADD"}}var m,g,y=e.gammaFactor>0?e.gammaFactor:1,v=generateExtensions(o,i,e.extensions),b=generateDefines(a),x=n.createProgram();r.isRawShaderMaterial?(m=[b,"\n"].filter(filterEmptyLine).join("\n"),g=[v,b,"\n"].filter(filterEmptyLine).join("\n")):(m=["precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,b,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+f:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),g=[v,"precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,b,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"","#define GAMMA_FACTOR "+y,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.envMap?"#define "+f:"",i.envMap?"#define "+p:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(i.numClippingPlanes-i.numClipIntersection),i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",i.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",i.toneMapping!==K?"#define TONE_MAPPING":"",i.toneMapping!==K?mt.tonemapping_pars_fragment:"",i.toneMapping!==K?getToneMappingFunction("toneMapping",i.toneMapping):"",i.outputEncoding||i.mapEncoding||i.envMapEncoding||i.emissiveMapEncoding?mt.encodings_pars_fragment:"",i.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",i.mapEncoding):"",i.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",i.outputEncoding):"",i.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),l=parseIncludes(l,i),l=replaceLightNums(l,i),c=parseIncludes(c,i),c=replaceLightNums(c,i),r.isShaderMaterial||(l=unrollLoops(l),c=unrollLoops(c));var M=m+l,w=g+c,E=WebGLShader(n,n.VERTEX_SHADER,M),_=WebGLShader(n,n.FRAGMENT_SHADER,w);n.attachShader(x,E),n.attachShader(x,_),void 0!==r.index0AttributeName?n.bindAttribLocation(x,0,r.index0AttributeName):!0===i.morphTargets&&n.bindAttribLocation(x,0,"position"),n.linkProgram(x);var T=n.getProgramInfoLog(x),A=n.getShaderInfoLog(E),S=n.getShaderInfoLog(_),C=!0,L=!0;!1===n.getProgramParameter(x,n.LINK_STATUS)?(C=!1,console.error("THREE.WebGLProgram: shader error: ",n.getError(),"gl.VALIDATE_STATUS",n.getProgramParameter(x,n.VALIDATE_STATUS),"gl.getProgramInfoLog",T,A,S)):""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==A&&""!==S||(L=!1),L&&(this.diagnostics={runnable:C,material:r,programLog:T,vertexShader:{log:A,prefix:m},fragmentShader:{log:S,prefix:g}}),n.deleteShader(E),n.deleteShader(_);var D;this.getUniforms=function(){return void 0===D&&(D=new WebGLUniforms(n,x,e)),D};var I;return this.getAttributes=function(){return void 0===I&&(I=fetchAttributeLocations(n,x)),I},this.destroy=function(){n.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=wt++,this.code=t,this.usedTimes=1,this.program=x,this.vertexShader=E,this.fragmentShader=_,this}function WebGLPrograms(e,t){function allocateBones(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var r=t.maxVertexUniforms,i=Math.floor((r-20)/4),n=i;return void 0!==e&&e&&e.isSkinnedMesh&&(n=Math.min(e.skeleton.bones.length,n))<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)"),n}function getTextureEncodingFromMap(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=Je,r===Je&&t&&(r=et),r}var r=[],i={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},n=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(r,n,o,a,s,u){var l=i[r.type],f=allocateBones(u),p=e.getPrecision();null!==r.precision&&(p=t.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",p,"instead.");var m=e.getCurrentRenderTarget();return{shaderID:l,precision:p,supportsVertexTextures:t.vertexTextures,outputEncoding:getTextureEncodingFromMap(m?m.texture:null,e.gammaOutput),map:!!r.map,mapEncoding:getTextureEncodingFromMap(r.map,e.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:getTextureEncodingFromMap(r.envMap,e.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===se||r.envMap.mapping===ue),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(r.emissiveMap,e.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!o,useFog:r.fog,fogExp:o&&o.isFogExp2,flatShading:r.shading===d,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:r.skinning,maxBones:f,useVertexTexture:t.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:a,numClipIntersection:s,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&n.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===h,flipSided:r.side===c,depthPacking:void 0!==r.depthPacking&&r.depthPacking}},this.getProgramCode=function(e,t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var o=0;o<n.length;o++)r.push(t[n[o]]);return r.join()},this.acquireProgram=function(t,i,n){for(var o,a=0,s=r.length;a<s;a++){var u=r[a];if(u.code===n){o=u,++o.usedTimes;break}}return void 0===o&&(o=new WebGLProgram(e,n,t,i),r.push(o)),o},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function WebGLGeometries(e,t,r){function onGeometryDispose(e){var n=e.target,o=i[n.id];null!==o.index&&deleteAttribute(o.index),deleteAttributes(o.attributes),n.removeEventListener("dispose",onGeometryDispose),delete i[n.id];var a=t.get(n);a.wireframe&&deleteAttribute(a.wireframe),t.delete(n);var s=t.get(o);s.wireframe&&deleteAttribute(s.wireframe),t.delete(o),r.memory.geometries--}function getAttributeBuffer(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function deleteAttribute(t){var r=getAttributeBuffer(t);void 0!==r&&(e.deleteBuffer(r),removeAttributeBuffer(t))}function deleteAttributes(e){for(var t in e)deleteAttribute(e[t])}function removeAttributeBuffer(e){e.isInterleavedBufferAttribute?t.delete(e.data):t.delete(e)}var i={};return{get:function(e){var t=e.geometry;if(void 0!==i[t.id])return i[t.id];t.addEventListener("dispose",onGeometryDispose);var n;return t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new BufferGeometry).setFromObject(e)),n=t._bufferGeometry),i[t.id]=n,r.memory.geometries++,n}}}function WebGLObjects(e,t,r){function update(t){var r=i.get(t);t.geometry.isGeometry&&r.updateFromObject(t);var n=r.index,o=r.attributes;null!==n&&updateAttribute(n,e.ELEMENT_ARRAY_BUFFER);for(var a in o)updateAttribute(o[a],e.ARRAY_BUFFER);var s=r.morphAttributes;for(var a in s)for(var u=s[a],l=0,c=u.length;l<c;l++)updateAttribute(u[l],e.ARRAY_BUFFER);return r}function updateAttribute(e,r){var i=e.isInterleavedBufferAttribute?e.data:e,n=t.get(i);void 0===n.__webglBuffer?createBuffer(n,i,r):n.version!==i.version&&updateBuffer(n,i,r)}function createBuffer(t,r,i){t.__webglBuffer=e.createBuffer(),e.bindBuffer(i,t.__webglBuffer);var n=r.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(i,r.array,n);var o=e.FLOAT,a=r.array;a instanceof Float32Array?o=e.FLOAT:a instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):a instanceof Uint16Array?o=e.UNSIGNED_SHORT:a instanceof Int16Array?o=e.SHORT:a instanceof Uint32Array?o=e.UNSIGNED_INT:a instanceof Int32Array?o=e.INT:a instanceof Int8Array?o=e.BYTE:a instanceof Uint8Array&&(o=e.UNSIGNED_BYTE),t.bytesPerElement=a.BYTES_PER_ELEMENT,t.type=o,t.version=r.version,r.onUploadCallback()}function updateBuffer(t,r,i){e.bindBuffer(i,t.__webglBuffer),!1===r.dynamic?e.bufferData(i,r.array,e.STATIC_DRAW):-1===r.updateRange.count?e.bufferSubData(i,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0),t.version=r.version}function getAttributeBuffer(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function getAttributeProperties(e){return e.isInterleavedBufferAttribute?t.get(e.data):t.get(e)}function getWireframeAttribute(r){var i=t.get(r);if(void 0!==i.wireframe)return i.wireframe;var n=[],o=r.index,a=r.attributes;if(null!==o)for(var s=o.array,u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],d=s[u+2];n.push(c,h,h,d,d,c)}else for(var s=a.position.array,u=0,l=s.length/3-1;u<l;u+=3){var c=u+0,h=u+1,d=u+2;n.push(c,h,h,d,d,c)}var f=new(arrayMax(n)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(n,1);return updateAttribute(f,e.ELEMENT_ARRAY_BUFFER),i.wireframe=f,f}var i=new WebGLGeometries(e,t,r);return{getAttributeBuffer:getAttributeBuffer,getAttributeProperties:getAttributeProperties,getWireframeAttribute:getWireframeAttribute,update:update}}function WebGLTextures(e,t,r,i,n,o,a){function clampToMaxSize(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(e.width*r),i.height=Math.floor(e.height*r);return i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function isPowerOfTwo(e){return st.isPowerOfTwo(e.width)&&st.isPowerOfTwo(e.height)}function makePowerOfTwo(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=st.nearestPowerOfTwo(e.width),t.height=st.nearestPowerOfTwo(e.height);return t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function textureNeedsPowerOfTwo(e){return e.wrapS!==ce||e.wrapT!==ce||e.minFilter!==de&&e.minFilter!==me}function filterFallback(t){return t===de||t===fe||t===pe?e.NEAREST:e.LINEAR}function onTextureDispose(e){var t=e.target;t.removeEventListener("dispose",onTextureDispose),deallocateTexture(t),s.textures--}function onRenderTargetDispose(e){var t=e.target;t.removeEventListener("dispose",onRenderTargetDispose),deallocateRenderTarget(t),s.textures--}function deallocateTexture(t){var r=i.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}i.delete(t)}function deallocateRenderTarget(t){var r=i.get(t),n=i.get(t.texture);if(t){if(void 0!==n.__webglTexture&&e.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(r.__webglFramebuffer[o]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[o]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);i.delete(t.texture),i.delete(t)}}function setTexture2D(t,n){var o=i.get(t);if(t.version>0&&o.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==a.complete)return void uploadTexture(o,t,n);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function setTextureCube(t,a){var u=i.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",onTextureDispose),u.__image__webglTextureCube=e.createTexture(),s.textures++),r.activeTexture(e.TEXTURE0+a),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var l=t&&t.isCompressedTexture,c=t.image[0]&&t.image[0].isDataTexture,h=[],d=0;d<6;d++)h[d]=l||c?c?t.image[d].image:t.image[d]:clampToMaxSize(t.image[d],n.maxCubemapSize);var f=h[0],p=isPowerOfTwo(f),m=o(t.format),g=o(t.type);setTextureParameters(e.TEXTURE_CUBE_MAP,t,p);for(var d=0;d<6;d++)if(l)for(var y,v=h[d].mipmaps,b=0,x=v.length;b<x;b++)y=v[b],t.format!==Ne&&t.format!==Ie?r.getCompressedTextureFormats().indexOf(m)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,b,m,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,b,m,y.width,y.height,0,m,g,y.data);else c?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,m,h[d].width,h[d].height,0,m,g,h[d].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,m,m,g,h[d]);t.generateMipmaps&&p&&e.generateMipmap(e.TEXTURE_CUBE_MAP),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+a),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function setTextureCubeDynamic(t,n){r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)}function setTextureParameters(r,a,s){var u;if(s?(e.texParameteri(r,e.TEXTURE_WRAP_S,o(a.wrapS)),e.texParameteri(r,e.TEXTURE_WRAP_T,o(a.wrapT)),e.texParameteri(r,e.TEXTURE_MAG_FILTER,o(a.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,o(a.minFilter))):(e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===ce&&a.wrapT===ce||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(r,e.TEXTURE_MAG_FILTER,filterFallback(a.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,filterFallback(a.minFilter)),a.minFilter!==de&&a.minFilter!==me&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),u=t.get("EXT_texture_filter_anisotropic")){if(a.type===_e&&null===t.get("OES_texture_float_linear"))return;if(a.type===Te&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(r,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,n.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function uploadTexture(t,i,a){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",onTextureDispose),t.__webglTexture=e.createTexture(),s.textures++),r.activeTexture(e.TEXTURE0+a),r.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var l=clampToMaxSize(i.image,n.maxTextureSize);textureNeedsPowerOfTwo(i)&&!1===isPowerOfTwo(l)&&(l=makePowerOfTwo(l));var c=isPowerOfTwo(l),h=o(i.format),d=o(i.type);setTextureParameters(e.TEXTURE_2D,i,c);var f,p=i.mipmaps;if(i.isDepthTexture){var m=e.DEPTH_COMPONENT;if(i.type===_e){if(!u)throw new Error("Float Depth Texture only supported in WebGL2.0");m=e.DEPTH_COMPONENT32F}else u&&(m=e.DEPTH_COMPONENT16);i.format===Pe&&m===e.DEPTH_COMPONENT&&i.type!==Me&&i.type!==Ee&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Me,d=o(i.type)),i.format===ke&&(m=e.DEPTH_STENCIL,i.type!==Le&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Le,d=o(i.type))),r.texImage2D(e.TEXTURE_2D,0,m,l.width,l.height,0,h,d,null)}else if(i.isDataTexture)if(p.length>0&&c){for(var g=0,y=p.length;g<y;g++)f=p[g],r.texImage2D(e.TEXTURE_2D,g,h,f.width,f.height,0,h,d,f.data);i.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,h,l.width,l.height,0,h,d,l.data);else if(i.isCompressedTexture)for(var g=0,y=p.length;g<y;g++)f=p[g],i.format!==Ne&&i.format!==Ie?r.getCompressedTextureFormats().indexOf(h)>-1?r.compressedTexImage2D(e.TEXTURE_2D,g,h,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,g,h,f.width,f.height,0,h,d,f.data);else if(p.length>0&&c){for(var g=0,y=p.length;g<y;g++)f=p[g],r.texImage2D(e.TEXTURE_2D,g,h,h,d,f);i.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,h,h,d,l);i.generateMipmaps&&c&&e.generateMipmap(e.TEXTURE_2D),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function setupFrameBufferTexture(t,n,a,s){var u=o(n.texture.format),l=o(n.texture.type);r.texImage2D(s,0,u,n.width,n.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,i.get(n.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function setupRenderBufferStorage(t,r){e.bindRenderbuffer(e.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,r.width,r.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function setupDepthTexture(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),setTexture2D(r.depthTexture,0);var n=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Pe)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,n,0);else{if(r.depthTexture.format!==ke)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,n,0)}}function setupDepthRenderbuffer(t){var r=i.get(t),n=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");setupDepthTexture(r.__webglFramebuffer,t)}else if(n){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),setupRenderBufferStorage(r.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),setupRenderBufferStorage(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function setupRenderTarget(t){var n=i.get(t),o=i.get(t.texture);t.addEventListener("dispose",onRenderTargetDispose),o.__webglTexture=e.createTexture(),s.textures++;var a=!0===t.isWebGLRenderTargetCube,u=isPowerOfTwo(t);if(a){n.__webglFramebuffer=[];for(var l=0;l<6;l++)n.__webglFramebuffer[l]=e.createFramebuffer()}else n.__webglFramebuffer=e.createFramebuffer();if(a){r.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),setTextureParameters(e.TEXTURE_CUBE_MAP,t.texture,u);for(var l=0;l<6;l++)setupFrameBufferTexture(n.__webglFramebuffer[l],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+l);t.texture.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,o.__webglTexture),setTextureParameters(e.TEXTURE_2D,t.texture,u),setupFrameBufferTexture(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&setupDepthRenderbuffer(t)}function updateRenderTargetMipmap(t){var n=t.texture;if(n.generateMipmaps&&isPowerOfTwo(t)&&n.minFilter!==de&&n.minFilter!==me){var o=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(n).__webglTexture;r.bindTexture(o,a),e.generateMipmap(o),r.bindTexture(o,null)}}var s=a.memory,u="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=setTexture2D,this.setTextureCube=setTextureCube,this.setTextureCubeDynamic=setTextureCubeDynamic,this.setupRenderTarget=setupRenderTarget,this.updateRenderTargetMipmap=updateRenderTargetMipmap}function WebGLProperties(){var e={};return{get:function(t){var r=t.uuid,i=e[r];return void 0===i&&(i={},e[r]=i),i},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}}function WebGLState(e,t,r){function ColorBuffer(){var t=!1,r=new Vector4,i=null,n=new Vector4;return{setMask:function(r){i===r||t||(e.colorMask(r,r,r,r),i=r)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),r.set(t,i,o,a),!1===n.equals(r)&&(e.clearColor(t,i,o,a),n.copy(r))},reset:function(){t=!1,i=null,n.set(0,0,0,1)}}}function DepthBuffer(){var t=!1,r=null,i=null,n=null;return{setTest:function(t){t?enable(e.DEPTH_TEST):disable(e.DEPTH_TEST)},setMask:function(i){r===i||t||(e.depthMask(i),r=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case U:e.depthFunc(e.NEVER);break;case F:e.depthFunc(e.ALWAYS);break;case G:e.depthFunc(e.LESS);break;case V:e.depthFunc(e.LEQUAL);break;case H:e.depthFunc(e.EQUAL);break;case W:e.depthFunc(e.GEQUAL);break;case Y:e.depthFunc(e.GREATER);break;case Q:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){n!==t&&(e.clearDepth(t),n=t)},reset:function(){t=!1,r=null,i=null,n=null}}}function StencilBuffer(){var t=!1,r=null,i=null,n=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){t?enable(e.STENCIL_TEST):disable(e.STENCIL_TEST)},setMask:function(i){r===i||t||(e.stencilMask(i),r=i)},setFunc:function(t,r,a){i===t&&n===r&&o===a||(e.stencilFunc(t,r,a),i=t,n=r,o=a)},setOp:function(t,r,i){a===t&&s===r&&u===i||(e.stencilOp(t,r,i),a=t,s=r,u=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,r=null,i=null,n=null,o=null,a=null,s=null,u=null,l=null}}}function createTexture(t,r,i){var n=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<i;a++)e.texImage2D(r+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n);return o}function init(){a.setClear(0,0,0,1),s.setClear(1),u.setClear(0),enable(e.DEPTH_TEST),setDepthFunc(V),setFlipSided(!1),setCullFace(n),enable(e.CULL_FACE),enable(e.BLEND),setBlending(b)}function initAttributes(){for(var e=0,t=c.length;e<t;e++)c[e]=0}function enableAttribute(r){if(c[r]=1,0===h[r]&&(e.enableVertexAttribArray(r),h[r]=1),0!==d[r]){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,0),d[r]=0}}function enableAttributeAndDivisor(t,r,i){c[t]=1,0===h[t]&&(e.enableVertexAttribArray(t),h[t]=1),d[t]!==r&&(i.vertexAttribDivisorANGLE(t,r),d[t]=r)}function disableUnusedAttributes(){for(var t=0,r=h.length;t!==r;++t)h[t]!==c[t]&&(e.disableVertexAttribArray(t),h[t]=0)}function enable(t){!0!==f[t]&&(e.enable(t),f[t]=!0)}function disable(t){!1!==f[t]&&(e.disable(t),f[t]=!1)}function getCompressedTextureFormats(){if(null===p&&(p=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<r.length;i++)p.push(r[i]);return p}function setBlending(t,i,n,o,a,s,u,l){t!==y?enable(e.BLEND):disable(e.BLEND),t===m&&l===C||(t===x?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===M?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===w?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),m=t,C=l),t===E?(a=a||i,s=s||n,u=u||o,i===g&&a===T||(e.blendEquationSeparate(r(i),r(a)),g=i,T=a),n===v&&o===_&&s===A&&u===S||(e.blendFuncSeparate(r(n),r(o),r(s),r(u)),v=n,_=o,A=s,S=u)):(g=null,v=null,_=null,T=null,A=null,S=null)}function setColorWrite(e){a.setMask(e)}function setDepthTest(e){s.setTest(e)}function setDepthWrite(e){s.setMask(e)}function setDepthFunc(e){s.setFunc(e)}function setStencilTest(e){u.setTest(e)}function setStencilWrite(e){u.setMask(e)}function setStencilFunc(e,t,r){u.setFunc(e,t,r)}function setStencilOp(e,t,r){u.setOp(e,t,r)}function setFlipSided(t){L!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),L=t)}function setCullFace(t){t!==i?(enable(e.CULL_FACE),t!==D&&(t===n?e.cullFace(e.BACK):t===o?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):disable(e.CULL_FACE),D=t}function setLineWidth(t){t!==I&&(k&&e.lineWidth(t),I=t)}function setPolygonOffset(t,r,i){t?(enable(e.POLYGON_OFFSET_FILL),N===r&&O===i||(e.polygonOffset(r,i),N=r,O=i)):disable(e.POLYGON_OFFSET_FILL)}function getScissorTest(){return R}function setScissorTest(t){R=t,t?enable(e.SCISSOR_TEST):disable(e.SCISSOR_TEST)}function activeTexture(t){void 0===t&&(t=e.TEXTURE0+j-1),B!==t&&(e.activeTexture(t),B=t)}function bindTexture(t,r){null===B&&activeTexture();var i=z[B];void 0===i&&(i={type:void 0,texture:void 0},z[B]=i),i.type===t&&i.texture===r||(e.bindTexture(t,r||Z[t]),i.type=t,i.texture=r)}function compressedTexImage2D(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}}function texImage2D(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}}function scissor(t){!1===q.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),q.copy(t))}function viewport(t){!1===X.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),X.copy(t))}function reset(){for(var t=0;t<h.length;t++)1===h[t]&&(e.disableVertexAttribArray(t),h[t]=0);f={},p=null,B=null,z={},m=null,L=null,D=null,a.reset(),s.reset(),u.reset()}var a=new ColorBuffer,s=new DepthBuffer,u=new StencilBuffer,l=e.getParameter(e.MAX_VERTEX_ATTRIBS),c=new Uint8Array(l),h=new Uint8Array(l),d=new Uint8Array(l),f={},p=null,m=null,g=null,v=null,_=null,T=null,A=null,S=null,C=!1,L=null,D=null,I=null,N=null,O=null,R=null,j=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),P=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),k=parseFloat(P)>=1,B=null,z={},q=new Vector4,X=new Vector4,Z={};return Z[e.TEXTURE_2D]=createTexture(e.TEXTURE_2D,e.TEXTURE_2D,1),Z[e.TEXTURE_CUBE_MAP]=createTexture(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:a,depth:s,stencil:u},init:init,initAttributes:initAttributes,enableAttribute:enableAttribute,enableAttributeAndDivisor:enableAttributeAndDivisor,disableUnusedAttributes:disableUnusedAttributes,enable:enable,disable:disable,getCompressedTextureFormats:getCompressedTextureFormats,setBlending:setBlending,setColorWrite:setColorWrite,setDepthTest:setDepthTest,setDepthWrite:setDepthWrite,setDepthFunc:setDepthFunc,setStencilTest:setStencilTest,setStencilWrite:setStencilWrite,setStencilFunc:setStencilFunc,setStencilOp:setStencilOp,setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:setLineWidth,setPolygonOffset:setPolygonOffset,getScissorTest:getScissorTest,setScissorTest:setScissorTest,activeTexture:activeTexture,bindTexture:bindTexture,compressedTexImage2D:compressedTexImage2D,texImage2D:texImage2D,scissor:scissor,viewport:viewport,reset:reset}}function WebGLCapabilities(e,t,r){function getMaxAnisotropy(){if(void 0!==i)return i;var r=t.get("EXT_texture_filter_anisotropic");return i=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function getMaxPrecision(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var i,n=void 0!==r.precision?r.precision:"highp",o=getMaxPrecision(n);o!==n&&(console.warn("THREE.WebGLRenderer:",n,"not supported, using",o,"instead."),n=o);var a=!0===r.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),s=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_TEXTURE_SIZE),c=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),h=e.getParameter(e.MAX_VERTEX_ATTRIBS),d=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),f=e.getParameter(e.MAX_VARYING_VECTORS),p=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),m=u>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:getMaxAnisotropy,getMaxPrecision:getMaxPrecision,precision:n,logarithmicDepthBuffer:a,maxTextures:s,maxVertexTextures:u,maxTextureSize:l,maxCubemapSize:c,maxAttributes:h,maxVertexUniforms:d,maxVaryings:f,maxFragmentUniforms:p,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g}}function WebGLExtensions(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var i;switch(r){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(r)}return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=i,i}}}function WebGLClipping(){function resetGlobalState(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function projectPlanes(t,r,i,n){var u=null!==t?t.length:0,l=null;if(0!==u){if(l=s.value,!0!==n||null===l){var c=i+4*u,h=r.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var d=0,f=i;d!==u;++d,f+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(l,f),l[f+3]=o.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=u,l}var e=this,t=null,r=0,i=!1,n=!1,o=new Plane,a=new Matrix3,s={value:null,needsUpdate:!1};this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,o){var a=0!==e.length||n||0!==r||i;return i=n,t=projectPlanes(e,o,0),r=e.length,a},this.beginShadows=function(){n=!0,projectPlanes(null)},this.endShadows=function(){n=!1,resetGlobalState()},this.setState=function(e,o,a,u,l,c){if(!i||null===e||0===e.length||n&&!a)n?projectPlanes(null):resetGlobalState();else{var h=n?0:r,d=4*h,f=l.clippingState||null;s.value=f,f=projectPlanes(e,u,d,c);for(var p=0;p!==d;++p)f[p]=t[p];l.clippingState=f,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=h}}}function WebGLRenderer(e){function getTargetPixelRatio(){return null===G?re:1}function setDefaultGLState(){st.init(),st.scissor(Q.copy(ie).multiplyScalar(re)),st.viewport(X.copy(oe).multiplyScalar(re)),st.buffers.color.setClear(K.r,K.g,K.b,$,l)}function resetGLState(){F=null,Y=null,W="",H=-1,st.reset()}function onContextLost(e){e.preventDefault(),resetGLState(),setDefaultGLState(),ut.clear()}function onMaterialDispose(e){var t=e.target;t.removeEventListener("dispose",onMaterialDispose),deallocateMaterial(t)}function deallocateMaterial(e){releaseMaterialProgramReference(e),ut.delete(e)}function releaseMaterialProgramReference(e){var t=ut.get(e).program;e.program=void 0,void 0!==t&&ht.releaseProgram(t)}function setupVertexAttributes(e,t,r,i){var n;if(r&&r.isInstancedBufferGeometry&&null===(n=ot.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),st.initAttributes();var o=r.attributes,a=t.getAttributes(),s=e.defaultAttributeValues;for(var u in a){var l=a[u];if(l>=0){var c=o[u];if(void 0!==c){var h=c.normalized,d=c.itemSize,f=ct.getAttributeProperties(c),p=f.__webglBuffer,m=f.type,g=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var y=c.data,v=y.stride,b=c.offset;y&&y.isInstancedInterleavedBuffer?(st.enableAttributeAndDivisor(l,y.meshPerAttribute,n),void 0===r.maxInstancedCount&&(r.maxInstancedCount=y.meshPerAttribute*y.count)):st.enableAttribute(l),it.bindBuffer(it.ARRAY_BUFFER,p),it.vertexAttribPointer(l,d,m,h,v*g,(i*v+b)*g)}else c.isInstancedBufferAttribute?(st.enableAttributeAndDivisor(l,c.meshPerAttribute,n),void 0===r.maxInstancedCount&&(r.maxInstancedCount=c.meshPerAttribute*c.count)):st.enableAttribute(l),it.bindBuffer(it.ARRAY_BUFFER,p),it.vertexAttribPointer(l,d,m,h,0,i*d*g)}else if(void 0!==s){var x=s[u];if(void 0!==x)switch(x.length){case 2:it.vertexAttrib2fv(l,x);break;case 3:it.vertexAttrib3fv(l,x);break;case 4:it.vertexAttrib4fv(l,x);break;default:it.vertexAttrib1fv(l,x)}}}}st.disableUnusedAttributes()}function absNumericalSort(e,t){return Math.abs(t[0])-Math.abs(e[0])}function painterSortStable(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function reversePainterSortStable(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function pushRenderItem(e,t,r,i,n){var o,a;r.transparent?(o=b,a=++x):(o=g,a=++v);var s=o[a];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=r,s.z=Je.z,s.group=n):(s={id:e.id,object:e,geometry:t,material:r,z:Je.z,group:n},o.push(s))}function isObjectViewable(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Qe.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),isSphereViewable(Qe)}function isSpriteViewable(e){return Qe.center.set(0,0,0),Qe.radius=.7071067811865476,Qe.applyMatrix4(e.matrixWorld),isSphereViewable(Qe)}function isSphereViewable(e){if(!ae.intersectsSphere(e))return!1;var t=se.numPlanes;if(0===t)return!0;var r=U.clippingPlanes,i=e.center,n=-e.radius,o=0;do{if(r[o].distanceToPoint(i)<n)return!1}while(++o!==t);return!0}function projectObject(e,t){if(!1!==e.visible){if(0!=(e.layers.mask&t.layers.mask))if(e.isLight)m.push(e);else if(e.isSprite)!1!==e.frustumCulled&&!0!==isSpriteViewable(e)||w.push(e);else if(e.isLensFlare)E.push(e);else if(e.isImmediateRenderObject)!0===U.sortObjects&&(Je.setFromMatrixPosition(e.matrixWorld),Je.applyMatrix4(qe)),pushRenderItem(e,null,e.material,Je.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!1===e.frustumCulled||!0===isObjectViewable(e))){var r=e.material;if(!0===r.visible){!0===U.sortObjects&&(Je.setFromMatrixPosition(e.matrixWorld),Je.applyMatrix4(qe));var i=ct.update(e);if(r.isMultiMaterial)for(var n=i.groups,o=r.materials,a=0,s=n.length;a<s;a++){var u=n[a],l=o[u.materialIndex];!0===l.visible&&pushRenderItem(e,i,l,Je.z,u)}else pushRenderItem(e,i,r,Je.z,null)}}for(var c=e.children,a=0,s=c.length;a<s;a++)projectObject(c[a],t)}}function renderObjects(e,t,r,i){for(var n=0,o=e.length;n<o;n++){var a=e[n],s=a.object,u=a.geometry,l=void 0===i?a.material:i,c=a.group;if(s.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(U,t,r,u,l,c),s.isImmediateRenderObject){setMaterial(l);var h=setProgram(r,t.fog,l,s);W="",s.render(function(e){U.renderBufferImmediate(e,h,l)})}else U.renderBufferDirect(r,t.fog,u,l,s,c);s.onAfterRender(U,t,r,u,l,c)}}function initMaterial(e,t,r){var i=ut.get(e),n=ht.getParameters(e,tt,t,se.numPlanes,se.numIntersection,r),o=ht.getProgramCode(e,n),a=i.program,s=!0;if(void 0===a)e.addEventListener("dispose",onMaterialDispose);else if(a.code!==o)releaseMaterialProgramReference(e);else{if(void 0!==n.shaderID)return;s=!1}if(s){if(n.shaderID){var u=vt[n.shaderID];i.__webglShader={name:e.type,uniforms:pt.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else i.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=i.__webglShader,a=ht.acquireProgram(e,n,o),i.program=a,e.program=a}var l=a.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var c=0;c<U.maxMorphTargets;c++)l["morphTarget"+c]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var c=0;c<U.maxMorphNormals;c++)l["morphNormal"+c]>=0&&e.numSupportedMorphNormals++}var h=i.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=se.numPlanes,i.numIntersection=se.numIntersection,h.clippingPlanes=se.uniform),i.fog=t,i.lightsHash=tt.hash,e.lights&&(h.ambientLightColor.value=tt.ambient,h.directionalLights.value=tt.directional,h.spotLights.value=tt.spot,h.rectAreaLights.value=tt.rectArea,h.pointLights.value=tt.point,h.hemisphereLights.value=tt.hemi,h.directionalShadowMap.value=tt.directionalShadowMap,h.directionalShadowMatrix.value=tt.directionalShadowMatrix,h.spotShadowMap.value=tt.spotShadowMap,h.spotShadowMatrix.value=tt.spotShadowMatrix,h.pointShadowMap.value=tt.pointShadowMap,h.pointShadowMatrix.value=tt.pointShadowMatrix);var d=i.program.getUniforms(),f=WebGLUniforms.seqWithValue(d.seq,h);i.uniformsList=f}function setMaterial(e){e.side===h?st.disable(it.CULL_FACE):st.enable(it.CULL_FACE),st.setFlipSided(e.side===c),!0===e.transparent?st.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):st.setBlending(y),st.setDepthFunc(e.depthFunc),st.setDepthTest(e.depthTest),st.setDepthWrite(e.depthWrite),st.setColorWrite(e.colorWrite),st.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function setProgram(e,t,r,i){Z=0;var n=ut.get(r);if(ue&&(je||e!==Y)){var o=e===Y&&r.id===H;se.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,n,o)}!1===r.needsUpdate&&(void 0===n.program?r.needsUpdate=!0:r.fog&&n.fog!==t?r.needsUpdate=!0:r.lights&&n.lightsHash!==tt.hash?r.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===se.numPlanes&&n.numIntersection===se.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(initMaterial(r,t,i),r.needsUpdate=!1);var a=!1,s=!1,u=!1,l=n.program,c=l.getUniforms(),h=n.__webglShader.uniforms;if(l.id!==F&&(it.useProgram(l.program),F=l.id,a=!0,s=!0,u=!0),r.id!==H&&(H=r.id,s=!0),a||e!==Y){if(c.set(it,e,"projectionMatrix"),at.logarithmicDepthBuffer&&c.setValue(it,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==Y&&(Y=e,s=!0,u=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var d=c.map.cameraPosition;void 0!==d&&d.setValue(it,Je.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&c.setValue(it,"viewMatrix",e.matrixWorldInverse),c.set(it,U,"toneMappingExposure"),c.set(it,U,"toneMappingWhitePoint")}if(r.skinning){c.setOptional(it,i,"bindMatrix"),c.setOptional(it,i,"bindMatrixInverse");var f=i.skeleton;f&&(at.floatVertexTextures&&f.useVertexTexture?(c.set(it,f,"boneTexture"),c.set(it,f,"boneTextureWidth"),c.set(it,f,"boneTextureHeight")):c.setOptional(it,f,"boneMatrices"))}return s&&(r.lights&&markUniformsLightsNeedsUpdate(h,u),t&&r.fog&&refreshUniformsFog(h,t),(r.isMeshBasicMaterial||r.isMeshLambertMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.isMeshNormalMaterial||r.isMeshDepthMaterial)&&refreshUniformsCommon(h,r),r.isLineBasicMaterial?refreshUniformsLine(h,r):r.isLineDashedMaterial?(refreshUniformsLine(h,r),refreshUniformsDash(h,r)):r.isPointsMaterial?refreshUniformsPoints(h,r):r.isMeshLambertMaterial?refreshUniformsLambert(h,r):r.isMeshToonMaterial?refreshUniformsToon(h,r):r.isMeshPhongMaterial?refreshUniformsPhong(h,r):r.isMeshPhysicalMaterial?refreshUniformsPhysical(h,r):r.isMeshStandardMaterial?refreshUniformsStandard(h,r):r.isMeshDepthMaterial?r.displacementMap&&(h.displacementMap.value=r.displacementMap,h.displacementScale.value=r.displacementScale,h.displacementBias.value=r.displacementBias):r.isMeshNormalMaterial&&refreshUniformsNormal(h,r),void 0!==h.ltcMat&&(h.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==h.ltcMag&&(h.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),WebGLUniforms.upload(it,n.uniformsList,h,U)),c.set(it,i,"modelViewMatrix"),c.set(it,i,"normalMatrix"),c.setValue(it,"modelMatrix",i.matrixWorld),l}function refreshUniformsCommon(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var r;if(t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r){r.isWebGLRenderTarget&&(r=r.texture);var i=r.offset,n=r.repeat;e.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function refreshUniformsLine(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function refreshUniformsDash(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function refreshUniformsPoints(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*re,e.scale.value=.5*te,e.map.value=t.map,null!==t.map){var r=t.map.offset,i=t.map.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}}function refreshUniformsFog(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function refreshUniformsLambert(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function refreshUniformsPhong(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function refreshUniformsToon(e,t){refreshUniformsPhong(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function refreshUniformsStandard(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function refreshUniformsPhysical(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,refreshUniformsStandard(e,t)}function refreshUniformsNormal(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function markUniformsLightsNeedsUpdate(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function setupShadows(e){for(var t=0,r=0,i=e.length;r<i;r++){var n=e[r];n.castShadow&&(tt.shadows[t++]=n)}tt.shadows.length=t}function setupLights(e,t){var r,i,n,o,a,s,u,l=0,c=0,h=0,d=t.matrixWorldInverse,f=0,p=0,m=0,g=0,y=0;for(r=0,i=e.length;r<i;r++)if(n=e[r],o=n.color,a=n.intensity,s=n.distance,u=n.shadow&&n.shadow.map?n.shadow.map.texture:null,n.isAmbientLight)l+=o.r*a,c+=o.g*a,h+=o.b*a;else if(n.isDirectionalLight){var v=dt.get(n);v.color.copy(n.color).multiplyScalar(n.intensity),v.direction.setFromMatrixPosition(n.matrixWorld),Je.setFromMatrixPosition(n.target.matrixWorld),v.direction.sub(Je),v.direction.transformDirection(d),v.shadow=n.castShadow,n.castShadow&&(v.shadowBias=n.shadow.bias,v.shadowRadius=n.shadow.radius,v.shadowMapSize=n.shadow.mapSize),tt.directionalShadowMap[f]=u,tt.directionalShadowMatrix[f]=n.shadow.matrix,tt.directional[f++]=v}else if(n.isSpotLight){var v=dt.get(n);v.position.setFromMatrixPosition(n.matrixWorld),v.position.applyMatrix4(d),v.color.copy(o).multiplyScalar(a),v.distance=s,v.direction.setFromMatrixPosition(n.matrixWorld),Je.setFromMatrixPosition(n.target.matrixWorld),v.direction.sub(Je),v.direction.transformDirection(d),v.coneCos=Math.cos(n.angle),v.penumbraCos=Math.cos(n.angle*(1-n.penumbra)),v.decay=0===n.distance?0:n.decay,v.shadow=n.castShadow,n.castShadow&&(v.shadowBias=n.shadow.bias,v.shadowRadius=n.shadow.radius,v.shadowMapSize=n.shadow.mapSize),tt.spotShadowMap[m]=u,tt.spotShadowMatrix[m]=n.shadow.matrix,tt.spot[m++]=v}else if(n.isRectAreaLight){var v=dt.get(n);v.color.copy(o).multiplyScalar(a/(n.width*n.height)),v.position.setFromMatrixPosition(n.matrixWorld),v.position.applyMatrix4(d),et.identity(),$e.copy(n.matrixWorld),$e.premultiply(d),et.extractRotation($e),v.halfWidth.set(.5*n.width,0,0),v.halfHeight.set(0,.5*n.height,0),v.halfWidth.applyMatrix4(et),v.halfHeight.applyMatrix4(et),tt.rectArea[g++]=v}else if(n.isPointLight){var v=dt.get(n);v.position.setFromMatrixPosition(n.matrixWorld),v.position.applyMatrix4(d),v.color.copy(n.color).multiplyScalar(n.intensity),v.distance=n.distance,v.decay=0===n.distance?0:n.decay,v.shadow=n.castShadow,n.castShadow&&(v.shadowBias=n.shadow.bias,v.shadowRadius=n.shadow.radius,v.shadowMapSize=n.shadow.mapSize),tt.pointShadowMap[p]=u,void 0===tt.pointShadowMatrix[p]&&(tt.pointShadowMatrix[p]=new Matrix4),Je.setFromMatrixPosition(n.matrixWorld).negate(),tt.pointShadowMatrix[p].identity().setPosition(Je),tt.point[p++]=v}else if(n.isHemisphereLight){var v=dt.get(n);v.direction.setFromMatrixPosition(n.matrixWorld),v.direction.transformDirection(d),v.direction.normalize(),v.skyColor.copy(n.color).multiplyScalar(a),v.groundColor.copy(n.groundColor).multiplyScalar(a),tt.hemi[y++]=v}tt.ambient[0]=l,tt.ambient[1]=c,tt.ambient[2]=h,tt.directional.length=f,tt.spot.length=m,tt.rectArea.length=g,tt.point.length=p,tt.hemi.length=y,tt.hash=f+","+p+","+m+","+g+","+y+","+tt.shadows.length}function allocTextureUnit(){var e=Z;return e>=at.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+at.maxTextures),Z+=1,e}function paramThreeToGL(e){var t;if(e===le)return it.REPEAT;if(e===ce)return it.CLAMP_TO_EDGE;if(e===he)return it.MIRRORED_REPEAT;if(e===de)return it.NEAREST;if(e===fe)return it.NEAREST_MIPMAP_NEAREST;if(e===pe)return it.NEAREST_MIPMAP_LINEAR;if(e===me)return it.LINEAR;if(e===ge)return it.LINEAR_MIPMAP_NEAREST;if(e===ye)return it.LINEAR_MIPMAP_LINEAR;if(e===ve)return it.UNSIGNED_BYTE;if(e===Ae)return it.UNSIGNED_SHORT_4_4_4_4;if(e===Se)return it.UNSIGNED_SHORT_5_5_5_1;if(e===Ce)return it.UNSIGNED_SHORT_5_6_5;if(e===be)return it.BYTE;if(e===xe)return it.SHORT;if(e===Me)return it.UNSIGNED_SHORT;if(e===we)return it.INT;if(e===Ee)return it.UNSIGNED_INT;if(e===_e)return it.FLOAT;if(e===Te&&null!==(t=ot.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===De)return it.ALPHA;if(e===Ie)return it.RGB;if(e===Ne)return it.RGBA;if(e===Oe)return it.LUMINANCE;if(e===Re)return it.LUMINANCE_ALPHA;if(e===Pe)return it.DEPTH_COMPONENT;if(e===ke)return it.DEPTH_STENCIL;if(e===_)return it.FUNC_ADD;if(e===T)return it.FUNC_SUBTRACT;if(e===A)return it.FUNC_REVERSE_SUBTRACT;if(e===L)return it.ZERO;if(e===D)return it.ONE;if(e===I)return it.SRC_COLOR;if(e===N)return it.ONE_MINUS_SRC_COLOR;if(e===O)return it.SRC_ALPHA;if(e===R)return it.ONE_MINUS_SRC_ALPHA;if(e===j)return it.DST_ALPHA;if(e===P)return it.ONE_MINUS_DST_ALPHA;if(e===k)return it.DST_COLOR;if(e===B)return it.ONE_MINUS_DST_COLOR;if(e===z)return it.SRC_ALPHA_SATURATE;if((e===Be||e===ze||e===Ue||e===Fe)&&null!==(t=ot.get("WEBGL_compressed_texture_s3tc"))){if(e===Be)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===ze)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ue)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Fe)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Ge||e===Ve||e===He||e===We)&&null!==(t=ot.get("WEBGL_compressed_texture_pvrtc"))){if(e===Ge)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Ve)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===He)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===We)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Ye&&null!==(t=ot.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===S||e===C)&&null!==(t=ot.get("EXT_blend_minmax"))){if(e===S)return t.MIN_EXT;if(e===C)return t.MAX_EXT}return e===Le&&null!==(t=ot.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",t),e=e||{};var r=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,o=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,u=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,f=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,m=[],g=[],v=-1,b=[],x=-1,M=new Float32Array(8),w=[],E=[];this.domElement=r,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=J,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var U=this,F=null,G=null,V=null,H=-1,W="",Y=null,Q=new Vector4,q=null,X=new Vector4,Z=0,K=new Color(0),$=0,ee=r.width,te=r.height,re=1,ie=new Vector4(0,0,ee,te),ne=!1,oe=new Vector4(0,0,ee,te),ae=new Frustum,se=new WebGLClipping,ue=!1,je=!1,Qe=new Sphere,qe=new Matrix4,Je=new Vector3,$e=new Matrix4,et=new Matrix4,tt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},rt={calls:0,vertices:0,faces:0,points:0};this.info={render:rt,memory:{geometries:0,textures:0},programs:null};var it;try{var nt={alpha:n,depth:o,stencil:s,antialias:u,premultipliedAlpha:l,preserveDrawingBuffer:f};if(null===(it=i||r.getContext("webgl",nt)||r.getContext("experimental-webgl",nt)))throw null!==r.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===it.getShaderPrecisionFormat&&(it.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),r.addEventListener("webglcontextlost",onContextLost,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var ot=new WebGLExtensions(it);ot.get("WEBGL_depth_texture"),ot.get("OES_texture_float"),ot.get("OES_texture_float_linear"),ot.get("OES_texture_half_float"),ot.get("OES_texture_half_float_linear"),ot.get("OES_standard_derivatives"),ot.get("ANGLE_instanced_arrays"),ot.get("OES_element_index_uint")&&(BufferGeometry.MaxIndex=4294967296);var at=new WebGLCapabilities(it,ot,e),st=new WebGLState(it,ot,paramThreeToGL),ut=new WebGLProperties,lt=new WebGLTextures(it,ot,st,ut,at,paramThreeToGL,this.info),ct=new WebGLObjects(it,ut,this.info),ht=new WebGLPrograms(this,at),dt=new WebGLLights;this.info.programs=ht.programs;var ft,mt,gt,yt,bt=new WebGLBufferRenderer(it,ot,rt),xt=new WebGLIndexedBufferRenderer(it,ot,rt);setDefaultGLState(),this.context=it,this.capabilities=at,this.extensions=ot,this.properties=ut,this.state=st;var Mt=new WebGLShadowMap(this,tt,ct,at);this.shadowMap=Mt;var wt=new SpritePlugin(this,w),Et=new LensFlarePlugin(this,E);this.getContext=function(){return it},this.getContextAttributes=function(){return it.getContextAttributes()},this.forceContextLoss=function(){ot.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return at.getMaxAnisotropy()},this.getPrecision=function(){return at.precision},this.getPixelRatio=function(){return re},this.setPixelRatio=function(e){void 0!==e&&(re=e,this.setSize(oe.z,oe.w,!1))},this.getSize=function(){return{width:ee,height:te}},this.setSize=function(e,t,i){ee=e,te=t,r.width=e*re,r.height=t*re,!1!==i&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,i){st.viewport(oe.set(e,t,r,i))},this.setScissor=function(e,t,r,i){st.scissor(ie.set(e,t,r,i))},this.setScissorTest=function(e){st.setScissorTest(ne=e)},this.getClearColor=function(){return K},this.setClearColor=function(e,t){K.set(e),$=void 0!==t?t:1,st.buffers.color.setClear(K.r,K.g,K.b,$,l)},this.getClearAlpha=function(){return $},this.setClearAlpha=function(e){$=e,st.buffers.color.setClear(K.r,K.g,K.b,$,l)},this.clear=function(e,t,r){var i=0;(void 0===e||e)&&(i|=it.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=it.DEPTH_BUFFER_BIT),(void 0===r||r)&&(i|=it.STENCIL_BUFFER_BIT),it.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,r,i){this.setRenderTarget(e),this.clear(t,r,i)},this.resetGLState=resetGLState,this.dispose=function(){b=[],x=-1,g=[],v=-1,r.removeEventListener("webglcontextlost",onContextLost,!1)},this.renderBufferImmediate=function(e,t,r){st.initAttributes();var i=ut.get(e);e.hasPositions&&!i.position&&(i.position=it.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=it.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=it.createBuffer()),e.hasColors&&!i.color&&(i.color=it.createBuffer());var n=t.getAttributes();if(e.hasPositions&&(it.bindBuffer(it.ARRAY_BUFFER,i.position),it.bufferData(it.ARRAY_BUFFER,e.positionArray,it.DYNAMIC_DRAW),st.enableAttribute(n.position),it.vertexAttribPointer(n.position,3,it.FLOAT,!1,0,0)),e.hasNormals){if(it.bindBuffer(it.ARRAY_BUFFER,i.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&r.shading===d)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,u=(s[o+0]+s[o+3]+s[o+6])/3,l=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=u,s[o+1]=l,s[o+2]=c,s[o+3]=u,s[o+4]=l,s[o+5]=c,s[o+6]=u,s[o+7]=l,s[o+8]=c}it.bufferData(it.ARRAY_BUFFER,e.normalArray,it.DYNAMIC_DRAW),st.enableAttribute(n.normal),it.vertexAttribPointer(n.normal,3,it.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(it.bindBuffer(it.ARRAY_BUFFER,i.uv),it.bufferData(it.ARRAY_BUFFER,e.uvArray,it.DYNAMIC_DRAW),st.enableAttribute(n.uv),it.vertexAttribPointer(n.uv,2,it.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==p&&(it.bindBuffer(it.ARRAY_BUFFER,i.color),it.bufferData(it.ARRAY_BUFFER,e.colorArray,it.DYNAMIC_DRAW),st.enableAttribute(n.color),it.vertexAttribPointer(n.color,3,it.FLOAT,!1,0,0)),st.disableUnusedAttributes(),it.drawArrays(it.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,i,n,o){setMaterial(i);var a=setProgram(e,t,i,n),s=!1,u=r.id+"_"+a.id+"_"+i.wireframe;u!==W&&(W=u,s=!0);var l=n.morphTargetInfluences;if(void 0!==l){for(var c=[],h=0,d=l.length;h<d;h++){var f=l[h];c.push([f,h])}c.sort(absNumericalSort),c.length>8&&(c.length=8);for(var p=r.morphAttributes,h=0,d=c.length;h<d;h++){var f=c[h];if(M[h]=f[0],0!==f[0]){var m=f[1];!0===i.morphTargets&&p.position&&r.addAttribute("morphTarget"+h,p.position[m]),!0===i.morphNormals&&p.normal&&r.addAttribute("morphNormal"+h,p.normal[m])}else!0===i.morphTargets&&r.removeAttribute("morphTarget"+h),!0===i.morphNormals&&r.removeAttribute("morphNormal"+h)}for(var h=c.length,g=M.length;h<g;h++)M[h]=0;a.getUniforms().setValue(it,"morphTargetInfluences",M),s=!0}var m=r.index,y=r.attributes.position,v=1;!0===i.wireframe&&(m=ct.getWireframeAttribute(r),v=2);var b;null!==m?(b=xt,b.setIndex(m)):b=bt,s&&(setupVertexAttributes(i,a,r),null!==m&&it.bindBuffer(it.ELEMENT_ARRAY_BUFFER,ct.getAttributeBuffer(m)));var x=0;null!==m?x=m.count:void 0!==y&&(x=y.count);var w=r.drawRange.start*v,E=r.drawRange.count*v,_=null!==o?o.start*v:0,T=null!==o?o.count*v:1/0,A=Math.max(w,_),S=Math.min(x,w+E,_+T)-1,C=Math.max(0,S-A+1);if(0!==C){if(n.isMesh)if(!0===i.wireframe)st.setLineWidth(i.wireframeLinewidth*getTargetPixelRatio()),b.setMode(it.LINES);else switch(n.drawMode){case Xe:b.setMode(it.TRIANGLES);break;case Ze:b.setMode(it.TRIANGLE_STRIP);break;case Ke:b.setMode(it.TRIANGLE_FAN)}else if(n.isLine){var L=i.linewidth;void 0===L&&(L=1),st.setLineWidth(L*getTargetPixelRatio()),n.isLineSegments?b.setMode(it.LINES):b.setMode(it.LINE_STRIP)}else n.isPoints&&b.setMode(it.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&b.renderInstances(r,A,C):b.render(A,C)}},this.render=function(e,t,r,i){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");W="",H=-1,Y=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),qe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ae.setFromMatrix(qe),m.length=0,v=-1,x=-1,w.length=0,E.length=0,je=this.localClippingEnabled,ue=se.init(this.clippingPlanes,je,t),projectObject(e,t),g.length=v+1,b.length=x+1,!0===U.sortObjects&&(g.sort(painterSortStable),b.sort(reversePainterSortStable)),ue&&se.beginShadows(),setupShadows(m),Mt.render(e,t),setupLights(m,t),ue&&se.endShadows(),rt.calls=0,rt.vertices=0,rt.faces=0,rt.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var n=e.background;if(null===n?st.buffers.color.setClear(K.r,K.g,K.b,$,l):n&&n.isColor&&(st.buffers.color.setClear(n.r,n.g,n.b,1,l),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),n&&n.isCubeTexture?(void 0===gt&&(gt=new PerspectiveCamera,yt=new Mesh(new BoxBufferGeometry(5,5,5),new ShaderMaterial({uniforms:vt.cube.uniforms,vertexShader:vt.cube.vertexShader,fragmentShader:vt.cube.fragmentShader,side:c,depthTest:!1,depthWrite:!1,fog:!1}))),gt.projectionMatrix.copy(t.projectionMatrix),gt.matrixWorld.extractRotation(t.matrixWorld),gt.matrixWorldInverse.getInverse(gt.matrixWorld),yt.material.uniforms.tCube.value=n,yt.modelViewMatrix.multiplyMatrices(gt.matrixWorldInverse,yt.matrixWorld),ct.update(yt),U.renderBufferDirect(gt,null,yt.geometry,yt.material,yt,null)):n&&n.isTexture&&(void 0===ft&&(ft=new OrthographicCamera(-1,1,1,-1,0,1),mt=new Mesh(new PlaneBufferGeometry(2,2),new MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1}))),mt.material.map=n,ct.update(mt),U.renderBufferDirect(ft,null,mt.geometry,mt.material,mt,null)),e.overrideMaterial){var o=e.overrideMaterial;renderObjects(g,e,t,o),renderObjects(b,e,t,o)}else st.setBlending(y),renderObjects(g,e,t),renderObjects(b,e,t);wt.render(e,t),Et.render(e,t,X),r&&lt.updateRenderTargetMipmap(r),st.setDepthTest(!0),st.setDepthWrite(!0),st.setColorWrite(!0)},this.setFaceCulling=function(e,t){st.setCullFace(e),st.setFlipSided(t===a)},this.allocTextureUnit=allocTextureUnit,this.setTexture2D=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),lt.setTexture2D(t,r)}}(),this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),lt.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?lt.setTextureCube(t,r):lt.setTextureCubeDynamic(t,r)}}(),this.getCurrentRenderTarget=function(){return G},this.setRenderTarget=function(e){G=e,e&&void 0===ut.get(e).__webglFramebuffer&&lt.setupRenderTarget(e);var t,r=e&&e.isWebGLRenderTargetCube;if(e){var i=ut.get(e);t=r?i.__webglFramebuffer[e.activeCubeFace]:i.__webglFramebuffer,Q.copy(e.scissor),q=e.scissorTest,X.copy(e.viewport)}else t=null,Q.copy(ie).multiplyScalar(re),q=ne,X.copy(oe).multiplyScalar(re);if(V!==t&&(it.bindFramebuffer(it.FRAMEBUFFER,t),V=t),st.scissor(Q),st.setScissorTest(q),st.viewport(X),r){var n=ut.get(e.texture);it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,i,n,o){if(!1===(e&&e.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=ut.get(e).__webglFramebuffer;if(a){var s=!1;a!==V&&(it.bindFramebuffer(it.FRAMEBUFFER,a),s=!0);try{var u=e.texture,l=u.format,c=u.type;if(l!==Ne&&paramThreeToGL(l)!==it.getParameter(it.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===ve||paramThreeToGL(c)===it.getParameter(it.IMPLEMENTATION_COLOR_READ_TYPE)||c===_e&&(ot.get("OES_texture_float")||ot.get("WEBGL_color_buffer_float"))||c===Te&&ot.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");it.checkFramebufferStatus(it.FRAMEBUFFER)===it.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&r>=0&&r<=e.height-n&&it.readPixels(t,r,i,n,paramThreeToGL(l),paramThreeToGL(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&it.bindFramebuffer(it.FRAMEBUFFER,V)}}}}function FogExp2(e,t){this.name="",this.color=new Color(e),this.density=void 0!==t?t:25e-5}function Fog(e,t,r){this.name="",this.color=new Color(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function LensFlare(e,t,r,i,n){Object3D.call(this),this.lensFlares=[],this.positionScreen=new Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,i,n)}function SpriteMaterial(e){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Sprite(e){Object3D.call(this),this.type="Sprite",this.material=void 0!==e?e:new SpriteMaterial}function LOD(){Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Skeleton(e,t,r){if(this.useVertexTexture=void 0===r||r,this.identityMatrix=new Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var i=Math.sqrt(4*this.bones.length);i=st.nextPowerOfTwo(Math.ceil(i)),i=Math.max(i,4),this.boneTextureWidth=i,this.boneTextureHeight=i,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Ne,_e)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var n=0,o=this.bones.length;n<o;n++)this.boneInverses.push(new Matrix4)}}function Bone(){Object3D.call(this),this.type="Bone"}function SkinnedMesh(e,t,r){Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4;var i=[];if(this.geometry&&void 0!==this.geometry.bones){for(var n,o,a=0,s=this.geometry.bones.length;a<s;++a)o=this.geometry.bones[a],n=new Bone,i.push(n),n.name=o.name,n.position.fromArray(o.pos),n.quaternion.fromArray(o.rotq),void 0!==o.scl&&n.scale.fromArray(o.scl);for(var a=0,s=this.geometry.bones.length;a<s;++a)o=this.geometry.bones[a],-1!==o.parent&&null!==o.parent&&void 0!==i[o.parent]?i[o.parent].add(i[a]):this.add(i[a])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new Skeleton(i,void 0,r),this.matrixWorld)}function LineBasicMaterial(e){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Line(e,t,r){if(1===r)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new LineSegments(e,t);Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new BufferGeometry,this.material=void 0!==t?t:new LineBasicMaterial({color:16777215*Math.random()})}function LineSegments(e,t){Line.call(this,e,t),this.type="LineSegments"}function PointsMaterial(e){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Points(e,t){Object3D.call(this),this.type="Points",this.geometry=void 0!==e?e:new BufferGeometry,this.material=void 0!==t?t:new PointsMaterial({color:16777215*Math.random()})}function Group(){Object3D.call(this),this.type="Group"}function VideoTexture(e,t,r,i,n,o,a,s,u){function update(){requestAnimationFrame(update),e.readyState>=e.HAVE_CURRENT_DATA&&(l.needsUpdate=!0)}Texture.call(this,e,t,r,i,n,o,a,s,u),this.generateMipmaps=!1;var l=this;update()}function CompressedTexture(e,t,r,i,n,o,a,s,u,l,c,h){Texture.call(this,null,o,a,s,u,l,i,n,c,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function CanvasTexture(e,t,r,i,n,o,a,s,u){Texture.call(this,e,t,r,i,n,o,a,s,u),this.needsUpdate=!0}function DepthTexture(e,t,r,i,n,o,a,s,u,l){if((l=void 0!==l?l:Pe)!==Pe&&l!==ke)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&l===Pe&&(r=Me),void 0===r&&l===ke&&(r=Le),Texture.call(this,null,i,n,o,a,s,l,r,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:de,this.minFilter=void 0!==s?s:de,this.flipY=!1,this.generateMipmaps=!1}function WireframeGeometry(e){function sortFunction(e,t){return e-t}BufferGeometry.call(this),this.type="WireframeGeometry";var t,r,i,n,o,a,s,u,l=[],c=[0,0],h={},d=["a","b","c"];if(e&&e.isGeometry){var f=e.faces;for(t=0,i=f.length;t<i;t++){var p=f[t];for(r=0;r<3;r++)c[0]=p[d[r]],c[1]=p[d[(r+1)%3]],c.sort(sortFunction),s=c.toString(),void 0===h[s]&&(h[s]={index1:c[0],index2:c[1]})}for(s in h)a=h[s],u=e.vertices[a.index1],l.push(u.x,u.y,u.z),u=e.vertices[a.index2],l.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var m,g,y,v,b,x,M,w;if(u=new Vector3,null!==e.index){for(m=e.attributes.position,g=e.index,y=e.groups,0===y.length&&e.addGroup(0,g.count),n=0,o=y.length;n<o;++n)for(v=y[n],b=v.start,x=v.count,t=b,i=b+x;t<i;t+=3)for(r=0;r<3;r++)c[0]=g.getX(t+r),c[1]=g.getX(t+(r+1)%3),c.sort(sortFunction),s=c.toString(),void 0===h[s]&&(h[s]={index1:c[0],index2:c[1]});for(s in h)a=h[s],u.fromBufferAttribute(m,a.index1),l.push(u.x,u.y,u.z),u.fromBufferAttribute(m,a.index2),l.push(u.x,u.y,u.z)}else for(m=e.attributes.position,t=0,i=m.count/3;t<i;t++)for(r=0;r<3;r++)M=3*t+r,u.fromBufferAttribute(m,M),l.push(u.x,u.y,u.z),w=3*t+(r+1)%3,u.fromBufferAttribute(m,w),l.push(u.x,u.y,u.z)}this.addAttribute("position",new Float32BufferAttribute(l,3))}function ParametricGeometry(e,t,r){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new ParametricBufferGeometry(e,t,r)),this.mergeVertices()}function ParametricBufferGeometry(e,t,r){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var i,n,o=[],a=[],s=[],u=t+1;for(i=0;i<=r;i++){var l=i/r;for(n=0;n<=t;n++){var c=n/t,h=e(c,l);a.push(h.x,h.y,h.z),s.push(c,l)}}for(i=0;i<r;i++)for(n=0;n<t;n++){var d=i*u+n,f=i*u+n+1,p=(i+1)*u+n+1,m=(i+1)*u+n;o.push(d,f,m),o.push(f,p,m)}this.setIndex(o),this.addAttribute("position",new Float32BufferAttribute(a,3)),this.addAttribute("uv",new Float32BufferAttribute(s,2)),this.computeVertexNormals()}function PolyhedronGeometry(e,t,r,i){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},this.fromBufferGeometry(new PolyhedronBufferGeometry(e,t,r,i)),this.mergeVertices()}function PolyhedronBufferGeometry(e,t,r,i){function subdivideFace(e,t,r,i){var n,o,a=Math.pow(2,i),s=[];for(n=0;n<=a;n++){s[n]=[];var u=e.clone().lerp(r,n/a),l=t.clone().lerp(r,n/a),c=a-n;for(o=0;o<=c;o++)s[n][o]=0===o&&n===a?u:u.clone().lerp(l,o/c)}for(n=0;n<a;n++)for(o=0;o<2*(a-n)-1;o++){var h=Math.floor(o/2);o%2==0?(pushVertex(s[n][h+1]),pushVertex(s[n+1][h]),pushVertex(s[n][h])):(pushVertex(s[n][h+1]),pushVertex(s[n+1][h+1]),pushVertex(s[n+1][h]))}}function correctSeam(){for(var e=0;e<o.length;e+=6){var t=o[e+0],r=o[e+2],i=o[e+4],n=Math.max(t,r,i),a=Math.min(t,r,i);n>.9&&a<.1&&(t<.2&&(o[e+0]+=1),r<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}function pushVertex(e){n.push(e.x,e.y,e.z)}function getVertexByIndex(t,r){var i=3*t;r.x=e[i+0],r.y=e[i+1],r.z=e[i+2]}function correctUVs(){for(var e=new Vector3,t=new Vector3,r=new Vector3,i=new Vector3,a=new Vector2,s=new Vector2,u=new Vector2,l=0,c=0;l<n.length;l+=9,c+=6){e.set(n[l+0],n[l+1],n[l+2]),t.set(n[l+3],n[l+4],n[l+5]),r.set(n[l+6],n[l+7],n[l+8]),a.set(o[c+0],o[c+1]),s.set(o[c+2],o[c+3]),u.set(o[c+4],o[c+5]),i.copy(e).add(t).add(r).divideScalar(3);var h=azimuth(i);correctUV(a,c+0,e,h),correctUV(s,c+2,t,h),correctUV(u,c+4,r,h)}}function correctUV(e,t,r,i){i<0&&1===e.x&&(o[t]=e.x-1),0===r.x&&0===r.z&&(o[t]=i/2/Math.PI+.5)}function azimuth(e){return Math.atan2(e.z,-e.x)}function inclination(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},r=r||1,i=i||0;var n=[],o=[];!function(e){for(var r=new Vector3,i=new Vector3,n=new Vector3,o=0;o<t.length;o+=3)getVertexByIndex(t[o+0],r),getVertexByIndex(t[o+1],i),getVertexByIndex(t[o+2],n),subdivideFace(r,i,n,e)}(i),function(e){for(var t=new Vector3,r=0;r<n.length;r+=3)t.x=n[r+0],t.y=n[r+1],t.z=n[r+2],t.normalize().multiplyScalar(e),n[r+0]=t.x,n[r+1]=t.y,n[r+2]=t.z}(r),function(){for(var e=new Vector3,t=0;t<n.length;t+=3){e.x=n[t+0],e.y=n[t+1],e.z=n[t+2];var r=azimuth(e)/2/Math.PI+.5,i=inclination(e)/Math.PI+.5;o.push(r,1-i)}correctUVs(),correctSeam()}(),this.addAttribute("position",new Float32BufferAttribute(n,3)),this.addAttribute("normal",new Float32BufferAttribute(n.slice(),3)),this.addAttribute("uv",new Float32BufferAttribute(o,2)),this.normalizeNormals()}function TetrahedronGeometry(e,t){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new TetrahedronBufferGeometry(e,t)),this.mergeVertices()}function TetrahedronBufferGeometry(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,r,i,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function OctahedronGeometry(e,t){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new OctahedronBufferGeometry(e,t)),this.mergeVertices()}function OctahedronBufferGeometry(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,r,i,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function IcosahedronGeometry(e,t){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new IcosahedronBufferGeometry(e,t)),this.mergeVertices()}function IcosahedronBufferGeometry(e,t){var r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,i,n,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function DodecahedronGeometry(e,t){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new DodecahedronBufferGeometry(e,t)),this.mergeVertices()}function DodecahedronBufferGeometry(e,t){var r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,n,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function TubeGeometry(e,t,r,i,n,o){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:n},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new TubeBufferGeometry(e,t,r,i,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function TubeBufferGeometry(e,t,r,i,n){function generateSegment(n){var a=e.getPointAt(n/t),c=o.normals[n],f=o.binormals[n];for(s=0;s<=i;s++){var p=s/i*Math.PI*2,m=Math.sin(p),g=-Math.cos(p);l.x=g*c.x+m*f.x,l.y=g*c.y+m*f.y,l.z=g*c.z+m*f.z,l.normalize(),d.push(l.x,l.y,l.z),u.x=a.x+r*l.x,u.y=a.y+r*l.y,u.z=a.z+r*l.z,h.push(u.x,u.y,u.z)}}function generateIndices(){for(s=1;s<=t;s++)for(a=1;a<=i;a++){var e=(i+1)*(s-1)+(a-1),r=(i+1)*s+(a-1),n=(i+1)*s+a,o=(i+1)*(s-1)+a;p.push(e,r,o),p.push(r,n,o)}}function generateUVs(){for(a=0;a<=t;a++)for(s=0;s<=i;s++)c.x=a/t,c.y=s/i,f.push(c.x,c.y)}BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:n},t=t||64,r=r||1,i=i||8,n=n||!1;var o=e.computeFrenetFrames(t,n);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new Vector3,l=new Vector3,c=new Vector2,h=[],d=[],f=[],p=[];!function(){for(a=0;a<t;a++)generateSegment(a);generateSegment(!1===n?t:0),generateUVs(),generateIndices()}(),this.setIndex(p),this.addAttribute("position",new Float32BufferAttribute(h,3)),this.addAttribute("normal",new Float32BufferAttribute(d,3)),this.addAttribute("uv",new Float32BufferAttribute(f,2))}function TorusKnotGeometry(e,t,r,i,n,o,a){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(e,t,r,i,n,o)),this.mergeVertices()}function TorusKnotBufferGeometry(e,t,r,i,n,o){function calculatePositionOnCurve(e,t,r,i,n){var o=Math.cos(e),a=Math.sin(e),s=r/t*e,u=Math.cos(s);n.x=i*(2+u)*.5*o,n.y=i*(2+u)*a*.5,n.z=i*Math.sin(s)*.5}BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:o},e=e||100,t=t||40,r=Math.floor(r)||64,i=Math.floor(i)||8,n=n||2,o=o||3;var a,s,u=[],l=[],c=[],h=[],d=new Vector3,f=new Vector3,p=(new Vector2,new Vector3),m=new Vector3,g=new Vector3,y=new Vector3,v=new Vector3;for(a=0;a<=r;++a){var b=a/r*n*Math.PI*2;for(calculatePositionOnCurve(b,n,o,e,p),calculatePositionOnCurve(b+.01,n,o,e,m),y.subVectors(m,p),v.addVectors(m,p),g.crossVectors(y,v),v.crossVectors(g,y),g.normalize(),v.normalize(),s=0;s<=i;++s){var x=s/i*Math.PI*2,M=-t*Math.cos(x),w=t*Math.sin(x);d.x=p.x+(M*v.x+w*g.x),d.y=p.y+(M*v.y+w*g.y),d.z=p.z+(M*v.z+w*g.z),l.push(d.x,d.y,d.z),f.subVectors(d,p).normalize(),c.push(f.x,f.y,f.z),h.push(a/r),h.push(s/i)}}for(s=1;s<=r;s++)for(a=1;a<=i;a++){var E=(i+1)*(s-1)+(a-1),_=(i+1)*s+(a-1),T=(i+1)*s+a,A=(i+1)*(s-1)+a;u.push(E,_,A),u.push(_,T,A)}this.setIndex(u),this.addAttribute("position",new Float32BufferAttribute(l,3)),this.addAttribute("normal",new Float32BufferAttribute(c,3)),this.addAttribute("uv",new Float32BufferAttribute(h,2))}function TorusGeometry(e,t,r,i,n){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},this.fromBufferGeometry(new TorusBufferGeometry(e,t,r,i,n))}function TorusBufferGeometry(e,t,r,i,n){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},e=e||100,t=t||40,r=Math.floor(r)||8,i=Math.floor(i)||6,n=n||2*Math.PI;var o,a,s=[],u=[],l=[],c=[],h=new Vector3,d=new Vector3,f=new Vector3;for(o=0;o<=r;o++)for(a=0;a<=i;a++){var p=a/i*n,m=o/r*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(p),d.y=(e+t*Math.cos(m))*Math.sin(p),d.z=t*Math.sin(m),u.push(d.x,d.y,d.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),f.subVectors(d,h).normalize(),l.push(f.x,f.y,f.z),c.push(a/i),c.push(o/r)}for(o=1;o<=r;o++)for(a=1;a<=i;a++){var g=(i+1)*o+a-1,y=(i+1)*(o-1)+a-1,v=(i+1)*(o-1)+a,b=(i+1)*o+a;s.push(g,y,b),s.push(y,v,b)}this.setIndex(s),this.addAttribute("position",new Float32BufferAttribute(u,3)),this.addAttribute("normal",new Float32BufferAttribute(l,3)),this.addAttribute("uv",new Float32BufferAttribute(c,2))}function ExtrudeGeometry(e,t){if(void 0===e)return void(e=[]);Geometry.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals()}function TextGeometry(e,t){t=t||{};var r=t.font;if(!1===(r&&r.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var i=r.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ExtrudeGeometry.call(this,i,t),this.type="TextGeometry"}function SphereGeometry(e,t,r,i,n,o,a){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new SphereBufferGeometry(e,t,r,i,n,o,a))}function SphereBufferGeometry(e,t,r,i,n,o,a){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,l=o+a,c=0,h=[],d=new Vector3,f=new Vector3,p=[],m=[],g=[],y=[];for(u=0;u<=r;u++){var v=[],b=u/r;for(s=0;s<=t;s++){var x=s/t;d.x=-e*Math.cos(i+x*n)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(i+x*n)*Math.sin(o+b*a),m.push(d.x,d.y,d.z),f.set(d.x,d.y,d.z).normalize(),g.push(f.x,f.y,f.z),y.push(x,1-b),v.push(c++)}h.push(v)}for(u=0;u<r;u++)for(s=0;s<t;s++){var M=h[u][s+1],w=h[u][s],E=h[u+1][s],_=h[u+1][s+1];(0!==u||o>0)&&p.push(M,w,_),(u!==r-1||l<Math.PI)&&p.push(w,E,_)}this.setIndex(p),this.addAttribute("position",new Float32BufferAttribute(m,3)),this.addAttribute("normal",new Float32BufferAttribute(g,3)),this.addAttribute("uv",new Float32BufferAttribute(y,2))}function RingGeometry(e,t,r,i,n,o){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:o},this.fromBufferGeometry(new RingBufferGeometry(e,t,r,i,n,o))}function RingBufferGeometry(e,t,r,i,n,o){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:o},e=e||20,t=t||50,n=void 0!==n?n:0,o=void 0!==o?o:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):1;var a,s,u,l=[],c=[],h=[],d=[],f=e,p=(t-e)/i,m=new Vector3,g=new Vector2;for(s=0;s<=i;s++){for(u=0;u<=r;u++)a=n+u/r*o,m.x=f*Math.cos(a),m.y=f*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,d.push(g.x,g.y);f+=p}for(s=0;s<i;s++){var y=s*(r+1);for(u=0;u<r;u++){a=u+y;var v=a,b=a+r+1,x=a+r+2,M=a+1;l.push(v,b,M),l.push(b,x,M)}}this.setIndex(l),this.addAttribute("position",new Float32BufferAttribute(c,3)),this.addAttribute("normal",new Float32BufferAttribute(h,3)),this.addAttribute("uv",new Float32BufferAttribute(d,2))}function LatheGeometry(e,t,r,i){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},this.fromBufferGeometry(new LatheBufferGeometry(e,t,r,i)),this.mergeVertices()}function LatheBufferGeometry(e,t,r,i){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t)||12,r=r||0,i=i||2*Math.PI,i=st.clamp(i,0,2*Math.PI);var n,o,a,s=[],u=[],l=[],c=1/t,h=new Vector3,d=new Vector2;for(o=0;o<=t;o++){var f=r+o*c*i,p=Math.sin(f),m=Math.cos(f);for(a=0;a<=e.length-1;a++)h.x=e[a].x*p,h.y=e[a].y,h.z=e[a].x*m,u.push(h.x,h.y,h.z),d.x=o/t,d.y=a/(e.length-1),l.push(d.x,d.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){n=a+o*e.length;var g=n,y=n+e.length,v=n+e.length+1,b=n+1;s.push(g,y,b),s.push(y,v,b)}if(this.setIndex(s),this.addAttribute("position",new Float32BufferAttribute(u,3)),this.addAttribute("uv",new Float32BufferAttribute(l,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,M=new Vector3,w=new Vector3,E=new Vector3;for(n=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)M.x=x[a+0],M.y=x[a+1],M.z=x[a+2],w.x=x[n+a+0],w.y=x[n+a+1],w.z=x[n+a+2],E.addVectors(M,w).normalize(),x[a+0]=x[n+a+0]=E.x,x[a+1]=x[n+a+1]=E.y,x[a+2]=x[n+a+2]=E.z}}function ShapeGeometry(e,t){Geometry.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ShapeBufferGeometry(e,t)),this.mergeVertices()}function ShapeBufferGeometry(e,t){function addShape(e){var a,u,l,c=i.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===Et.isClockWise(d))for(d=d.reverse(),a=0,u=f.length;a<u;a++)l=f[a],!0===Et.isClockWise(l)&&(f[a]=l.reverse());var p=Et.triangulateShape(d,f);for(a=0,u=f.length;a<u;a++)l=f[a],d=d.concat(l);for(a=0,u=d.length;a<u;a++){var m=d[a];i.push(m.x,m.y,0),n.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=p.length;a<u;a++){var g=p[a],y=g[0]+c,v=g[1]+c,b=g[2]+c;r.push(y,v,b),s+=3}}BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],i=[],n=[],o=[],a=0,s=0;if(!1===Array.isArray(e))addShape(e);else for(var u=0;u<e.length;u++)addShape(e[u]),this.addGroup(a,s,u),a+=s,s=0;this.setIndex(r),this.addAttribute("position",new Float32BufferAttribute(i,3)),this.addAttribute("normal",new Float32BufferAttribute(n,3)),this.addAttribute("uv",new Float32BufferAttribute(o,2))}function EdgesGeometry(e,t){function sortFunction(e,t){return e-t}BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,i,n=[],o=Math.cos(st.DEG2RAD*t),a=[0,0],s={},u=["a","b","c"];e.isBufferGeometry?(i=new Geometry,i.fromBufferGeometry(e)):i=e.clone(),i.mergeVertices(),i.computeFaceNormals();for(var l=i.vertices,c=i.faces,h=0,d=c.length;h<d;h++)for(var f=c[h],p=0;p<3;p++)a[0]=f[u[p]],a[1]=f[u[(p+1)%3]],a.sort(sortFunction),r=a.toString(),void 0===s[r]?s[r]={index1:a[0],index2:a[1],face1:h,face2:void 0}:s[r].face2=h;for(r in s){var m=s[r];if(void 0===m.face2||c[m.face1].normal.dot(c[m.face2].normal)<=o){var g=l[m.index1];n.push(g.x,g.y,g.z),g=l[m.index2],n.push(g.x,g.y,g.z)}}this.addAttribute("position",new Float32BufferAttribute(n,3))}function CylinderGeometry(e,t,r,i,n,o,a,s){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new CylinderBufferGeometry(e,t,r,i,n,o,a,s)),this.mergeVertices()}function CylinderBufferGeometry(e,t,r,i,n,o,a,s){function generateCap(r){var n,o,p,y=new Vector2,v=new Vector3,b=0,x=!0===r?e:t,M=!0===r?1:-1;for(o=f,n=1;n<=i;n++)c.push(0,m*M,0),h.push(0,M,0),d.push(.5,.5),f++;for(p=f,n=0;n<=i;n++){var w=n/i,E=w*s+a,_=Math.cos(E),T=Math.sin(E);v.x=x*T,v.y=m*M,v.z=x*_,c.push(v.x,v.y,v.z),h.push(0,M,0),y.x=.5*_+.5,y.y=.5*T*M+.5,d.push(y.x,y.y),f++}for(n=0;n<i;n++){var A=o+n,S=p+n;!0===r?l.push(S,S+1,A):l.push(S+1,S,A),b+=3}u.addGroup(g,b,!0===r?1:2),g+=b}BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:o,thetaStart:a,thetaLength:s};var u=this;e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,i=Math.floor(i)||8,n=Math.floor(n)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],d=[],f=0,p=[],m=r/2,g=0;!function(){var o,y,v=new Vector3,b=new Vector3,x=0,M=(t-e)/r;for(y=0;y<=n;y++){var w=[],E=y/n,_=E*(t-e)+e;for(o=0;o<=i;o++){var T=o/i,A=T*s+a,S=Math.sin(A),C=Math.cos(A);b.x=_*S,b.y=-E*r+m,b.z=_*C,c.push(b.x,b.y,b.z),v.set(S,M,C).normalize(),h.push(v.x,v.y,v.z),d.push(T,1-E),w.push(f++)}p.push(w)}for(o=0;o<i;o++)for(y=0;y<n;y++){var L=p[y][o],D=p[y+1][o],I=p[y+1][o+1],N=p[y][o+1];l.push(L,D,N),l.push(D,I,N),x+=6}u.addGroup(g,x,0),g+=x}(),!1===o&&(e>0&&generateCap(!0),t>0&&generateCap(!1)),this.setIndex(l),this.addAttribute("position",new Float32BufferAttribute(c,3)),this.addAttribute("normal",new Float32BufferAttribute(h,3)),this.addAttribute("uv",new Float32BufferAttribute(d,2))}function ConeGeometry(e,t,r,i,n,o,a){CylinderGeometry.call(this,0,e,t,r,i,n,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:o,thetaLength:a}}function ConeBufferGeometry(e,t,r,i,n,o,a){CylinderBufferGeometry.call(this,0,e,t,r,i,n,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:o,thetaLength:a}}function CircleGeometry(e,t,r,i){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},this.fromBufferGeometry(new CircleBufferGeometry(e,t,r,i))}function CircleBufferGeometry(e,t,r,i){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var n,o,a=[],s=[],u=[],l=[],c=new Vector3,h=new Vector2;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,n=3;o<=t;o++,n+=3){var d=r+o/t*i;c.x=e*Math.cos(d),c.y=e*Math.sin(d),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[n]/e+1)/2,h.y=(s[n+1]/e+1)/2,l.push(h.x,h.y)}for(n=1;n<=t;n++)a.push(n,n+1,0);this.setIndex(a),this.addAttribute("position",new Float32BufferAttribute(s,3)),this.addAttribute("normal",new Float32BufferAttribute(u,3)),this.addAttribute("uv",new Float32BufferAttribute(l,2))}function ShadowMaterial(){ShaderMaterial.call(this,{uniforms:pt.merge([yt.lights,{opacity:{value:1}}]),vertexShader:mt.shadow_vert,fragmentShader:mt.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function RawShaderMaterial(e){ShaderMaterial.call(this,e),this.type="RawShaderMaterial"}function MultiMaterial(e){this.uuid=st.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(e)?e:[],this.visible=!0}function MeshStandardMaterial(e){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshPhysicalMaterial(e){MeshStandardMaterial.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function MeshPhongMaterial(e){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshToonMaterial(e){MeshPhongMaterial.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function MeshNormalMaterial(e){Material.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshLambertMaterial(e){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function LineDashedMaterial(e){Material.call(this),this.type="LineDashedMaterial",this.color=new Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function LoadingManager(e,t,r){var i=this,n=!1,o=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){a++,!1===n&&void 0!==i.onStart&&i.onStart(e,o,a),n=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,a),o===a&&(n=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)}}function FileLoader(e){this.manager=void 0!==e?e:St}function CompressedTextureLoader(e){this.manager=void 0!==e?e:St,this._parser=null}function DataTextureLoader(e){this.manager=void 0!==e?e:St,this._parser=null}function ImageLoader(e){this.manager=void 0!==e?e:St}function CubeTextureLoader(e){this.manager=void 0!==e?e:St}function TextureLoader(e){this.manager=void 0!==e?e:St}function Light(e,t){Object3D.call(this),this.type="Light",this.color=new Color(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function HemisphereLight(e,t,r){Light.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(t)}function LightShadow(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.matrix=new Matrix4}function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}function SpotLight(e,t,r,i,n,o){Light.call(this,e,t),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==o?o:1,this.shadow=new SpotLightShadow}function PointLight(e,t,r,i){Light.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==i?i:1,this.shadow=new LightShadow(new PerspectiveCamera(90,1,.5,500))}function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}function DirectionalLight(e,t){Light.call(this,e,t),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}function AmbientLight(e,t){Light.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Interpolant(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function CubicInterpolant(e,t,r,i){Interpolant.call(this,e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function LinearInterpolant(e,t,r,i){Interpolant.call(this,e,t,r,i)}function DiscreteInterpolant(e,t,r,i){Interpolant.call(this,e,t,r,i)}function KeyframeTrackConstructor(e,t,r,i){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=Ct.convertArray(t,this.TimeBufferType),this.values=Ct.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function VectorKeyframeTrack(e,t,r,i){KeyframeTrackConstructor.call(this,e,t,r,i)}function QuaternionLinearInterpolant(e,t,r,i){Interpolant.call(this,e,t,r,i)}function QuaternionKeyframeTrack(e,t,r,i){KeyframeTrackConstructor.call(this,e,t,r,i)}function NumberKeyframeTrack(e,t,r,i){KeyframeTrackConstructor.call(this,e,t,r,i)}function StringKeyframeTrack(e,t,r,i){KeyframeTrackConstructor.call(this,e,t,r,i)}function BooleanKeyframeTrack(e,t,r){KeyframeTrackConstructor.call(this,e,t,r)}function ColorKeyframeTrack(e,t,r,i){KeyframeTrackConstructor.call(this,e,t,r,i)}function KeyframeTrack(e,t,r,i){KeyframeTrackConstructor.apply(this,arguments)}function AnimationClip(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=st.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function MaterialLoader(e){this.manager=void 0!==e?e:St,this.textures={}}function BufferGeometryLoader(e){this.manager=void 0!==e?e:St}function Loader(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function JSONLoader(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:St,this.withCredentials=!1}function ObjectLoader(e){this.manager=void 0!==e?e:St,this.texturePath=""}function CatmullRom(e,t,r,i,n){var o=.5*(i-t),a=.5*(n-r),s=e*e;return(2*r-2*i+o+a)*(e*s)+(-3*r+3*i-2*o-a)*s+o*e+r}function QuadraticBezierP0(e,t){var r=1-e;return r*r*t}function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}function QuadraticBezierP2(e,t){return e*e*t}function QuadraticBezier(e,t,r,i){return QuadraticBezierP0(e,t)+QuadraticBezierP1(e,r)+QuadraticBezierP2(e,i)}function CubicBezierP0(e,t){var r=1-e;return r*r*r*t}function CubicBezierP1(e,t){var r=1-e;return 3*r*r*e*t}function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}function CubicBezierP3(e,t){return e*e*e*t}function CubicBezier(e,t,r,i,n){return CubicBezierP0(e,t)+CubicBezierP1(e,r)+CubicBezierP2(e,i)+CubicBezierP3(e,n)}function Curve(){}function LineCurve(e,t){this.v1=e,this.v2=t}function CurvePath(){this.curves=[],this.autoClose=!1}function EllipseCurve(e,t,r,i,n,o,a,s){this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0}function SplineCurve(e){this.points=void 0===e?[]:e}function CubicBezierCurve(e,t,r,i){this.v0=e,this.v1=t,this.v2=r,this.v3=i}function QuadraticBezierCurve(e,t,r){this.v0=e,this.v1=t,this.v2=r}function Path(e){CurvePath.call(this),this.currentPoint=new Vector2,e&&this.fromPoints(e)}function Shape(){Path.apply(this,arguments),this.holes=[]}function ShapePath(){this.subPaths=[],this.currentPath=null}function Font(e){this.data=e}function FontLoader(e){this.manager=void 0!==e?e:St}function AudioLoader(e){this.manager=void 0!==e?e:St}function RectAreaLight(e,t,r,i){Light.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==r?r:10,this.height=void 0!==i?i:10}function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function CubeCamera(e,t,r){Object3D.call(this),this.type="CubeCamera";var i=new PerspectiveCamera(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Vector3(1,0,0)),this.add(i);var n=new PerspectiveCamera(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new Vector3(-1,0,0)),this.add(n);var o=new PerspectiveCamera(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Vector3(0,1,0)),this.add(o);var a=new PerspectiveCamera(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Vector3(0,-1,0)),this.add(a);var s=new PerspectiveCamera(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Vector3(0,0,1)),this.add(s);var u=new PerspectiveCamera(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new Vector3(0,0,-1)),this.add(u);var l={format:Ie,magFilter:me,minFilter:me};this.renderTarget=new WebGLRenderTargetCube(r,r,l),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,l=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,i,r),r.activeCubeFace=1,e.render(t,n,r),r.activeCubeFace=2,e.render(t,o,r),r.activeCubeFace=3,e.render(t,a,r),r.activeCubeFace=4,e.render(t,s,r),r.texture.generateMipmaps=l,r.activeCubeFace=5,e.render(t,u,r),e.setRenderTarget(null)}}function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=Nt.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Audio(e){Object3D.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function PositionalAudio(e){Audio.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function AudioAnalyser(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function PropertyMixer(e,t,r){this.binding=e,this.valueSize=r;var i,n=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":n=Array,i=this._select;break;default:i=this._lerp}this.buffer=new n(4*r),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function PropertyBinding(e,t,r){this.path=t,this.parsedPath=r||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function AnimationObjectGroup(e){this.uuid=st.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var r=0,i=arguments.length;r!==i;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function AnimationAction(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var i=t.tracks,n=i.length,o=new Array(n),a={endingStart:qe,endingEnd:qe},s=0;s!==n;++s){var u=i[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Qe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function AnimationMixer(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Uniform(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function InterleavedBufferAttribute(e,t,r,i){this.uuid=st.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===i}function InterleavedBuffer(e,t){this.uuid=st.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function InstancedInterleavedBuffer(e,t,r){InterleavedBuffer.call(this,e,t),this.meshPerAttribute=r||1}function InstancedBufferAttribute(e,t,r){BufferAttribute.call(this,e,t),this.meshPerAttribute=r||1}function Raycaster(e,t,r,i){this.ray=new Ray(e,t),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(e,t){return e.distance-t.distance}function intersectObject(e,t,r,i){if(!1!==e.visible&&(e.raycast(t,r),!0===i))for(var n=e.children,o=0,a=n.length;o<a;o++)intersectObject(n[o],t,r,!0)}function Clock(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Spherical(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function Cylindrical(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function MorphBlendMesh(e,t){Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,i=r-1,n=r/1;this.createAnimation("__default",0,i,n),this.setAnimationWeight("__default",1)}function ImmediateRenderObject(e){Object3D.call(this),this.material=e,this.render=function(e){}}function VertexNormalsHelper(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==r?r:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new BufferGeometry,l=new Float32BufferAttribute(2*a*3,3);u.addAttribute("position",l),LineSegments.call(this,u,new LineBasicMaterial({color:n,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function SpotLightHelper(e){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new BufferGeometry,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,n=1;i<32;i++,n++){var o=i/32*Math.PI*2,a=n/32*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(a),Math.sin(a),1)}t.addAttribute("position",new Float32BufferAttribute(r,3));var s=new LineBasicMaterial({fog:!1});this.cone=new LineSegments(t,s),this.add(this.cone),this.update()}function SkeletonHelper(e){this.bones=this.getBoneList(e);for(var t=new BufferGeometry,r=[],i=[],n=new Color(0,0,1),o=new Color(0,1,0),a=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(n.r,n.g,n.b),i.push(o.r,o.g,o.b))}t.addAttribute("position",new Float32BufferAttribute(r,3)),t.addAttribute("color",new Float32BufferAttribute(i,3));var u=new LineBasicMaterial({vertexColors:g,depthTest:!1,depthWrite:!1,transparent:!0});LineSegments.call(this,t,u),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function PointLightHelper(e,t){this.light=e,this.light.updateMatrixWorld();var r=new SphereBufferGeometry(t,4,2),i=new MeshBasicMaterial({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),Mesh.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function RectAreaLightHelper(e){Object3D.call(this),this.light=e,this.light.updateMatrixWorld();var t=new MeshBasicMaterial({color:e.color,fog:!1}),r=new MeshBasicMaterial({color:e.color,fog:!1,wireframe:!0}),i=new BufferGeometry;i.addAttribute("position",new BufferAttribute(new Float32Array(18),3)),this.add(new Mesh(i,t)),this.add(new Mesh(i,r)),this.update()}function HemisphereLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var r=new OctahedronBufferGeometry(t);r.rotateY(.5*Math.PI);var i=new MeshBasicMaterial({vertexColors:g,wireframe:!0}),n=r.getAttribute("position"),o=new Float32Array(3*n.count);r.addAttribute("color",new BufferAttribute(o,3)),this.add(new Mesh(r,i)),this.update()}function GridHelper(e,t,r,i){e=e||10,t=t||10,r=new Color(void 0!==r?r:4473924),i=new Color(void 0!==i?i:8947848);for(var n=t/2,o=e/t,a=e/2,s=[],u=[],l=0,c=0,h=-a;l<=t;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=l===n?r:i;d.toArray(u,c),c+=3,d.toArray(u,c),c+=3,d.toArray(u,c),c+=3,d.toArray(u,c),c+=3}var f=new BufferGeometry;f.addAttribute("position",new Float32BufferAttribute(s,3)),f.addAttribute("color",new Float32BufferAttribute(u,3));var p=new LineBasicMaterial({vertexColors:g});LineSegments.call(this,f,p)}function PolarGridHelper(e,t,r,i,n,o){e=e||10,t=t||16,r=r||8,i=i||64,n=new Color(void 0!==n?n:4473924),o=new Color(void 0!==o?o:8947848);var a,s,u,l,c,h,d,f=[],p=[];for(l=0;l<=t;l++)u=l/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,f.push(0,0,0),f.push(a,0,s),d=1&l?n:o,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(l=0;l<=r;l++)for(d=1&l?n:o,h=e-e/r*l,c=0;c<i;c++)u=c/i*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,f.push(a,0,s),p.push(d.r,d.g,d.b),u=(c+1)/i*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,f.push(a,0,s),p.push(d.r,d.g,d.b);var m=new BufferGeometry;m.addAttribute("position",new Float32BufferAttribute(f,3)),m.addAttribute("color",new Float32BufferAttribute(p,3));var y=new LineBasicMaterial({vertexColors:g});LineSegments.call(this,m,y)}function FaceNormalsHelper(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==r?r:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new BufferGeometry,l=new Float32BufferAttribute(2*a*3,3);u.addAttribute("position",l),LineSegments.call(this,u,new LineBasicMaterial({color:n,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function DirectionalLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var r=new BufferGeometry;r.addAttribute("position",new Float32BufferAttribute([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new LineBasicMaterial({fog:!1});this.add(new Line(r,i)),r=new BufferGeometry,r.addAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.add(new Line(r,i)),this.update()}function CameraHelper(e){function addLine(e,t,r){addPoint(e,r),addPoint(t,r)}function addPoint(e,t){i.push(0,0,0),n.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}var t=new BufferGeometry,r=new LineBasicMaterial({color:16777215,vertexColors:m}),i=[],n=[],o={},a=new Color(16755200),s=new Color(16711680),u=new Color(43775),l=new Color(16777215),c=new Color(3355443);addLine("n1","n2",a),addLine("n2","n4",a),addLine("n4","n3",a),addLine("n3","n1",a),addLine("f1","f2",a),addLine("f2","f4",a),addLine("f4","f3",a),addLine("f3","f1",a),addLine("n1","f1",a),addLine("n2","f2",a),addLine("n3","f3",a),addLine("n4","f4",a),addLine("p","n1",s),addLine("p","n2",s),addLine("p","n3",s),addLine("p","n4",s),addLine("u1","u2",u),addLine("u2","u3",u),addLine("u3","u1",u),addLine("c","t",l),addLine("p","c",c),addLine("cn1","cn2",c),addLine("cn3","cn4",c),addLine("cf1","cf2",c),addLine("cf3","cf4",c),t.addAttribute("position",new Float32BufferAttribute(i,3)),t.addAttribute("color",new Float32BufferAttribute(n,3)),LineSegments.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function BoxHelper(e,t){void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),n=new BufferGeometry;n.setIndex(new BufferAttribute(r,1)),n.addAttribute("position",new BufferAttribute(i,3)),LineSegments.call(this,n,new LineBasicMaterial({color:t})),void 0!==e&&this.update(e)}function ArrowHelper(e,t,r,i,n,o){Object3D.call(this),void 0===i&&(i=16776960),void 0===r&&(r=1),void 0===n&&(n=.2*r),void 0===o&&(o=.2*n),void 0===Ot&&(Ot=new BufferGeometry,Ot.addAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),Rt=new CylinderBufferGeometry(0,.5,1,5,1),Rt.translate(0,-.5,0)),this.position.copy(t),this.line=new Line(Ot,new LineBasicMaterial({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(Rt,new MeshBasicMaterial({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,n,o)}function AxisHelper(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new BufferGeometry;i.addAttribute("position",new Float32BufferAttribute(t,3)),i.addAttribute("color",new Float32BufferAttribute(r,3));var n=new LineBasicMaterial({vertexColors:g});LineSegments.call(this,i,n)}function CubicPoly(){function init(n,o,a,s){e=n,t=a,r=-3*n+3*o-2*a-s,i=2*n-2*o+a+s}var e=0,t=0,r=0,i=0;return{initCatmullRom:function(e,t,r,i,n){init(t,r,n*(r-e),n*(i-t))},initNonuniformCatmullRom:function(e,t,r,i,n,o,a){var s=(t-e)/n-(r-e)/(n+o)+(r-t)/o,u=(r-t)/o-(i-t)/(o+a)+(i-r)/a;s*=o,u*=o,init(t,r,s,u)},calc:function(n){var o=n*n;return e+t*n+r*o+i*(o*n)}}}function CatmullRomCurve3(e){this.points=e||[],this.closed=!1}function CubicBezierCurve3(e,t,r,i){this.v0=e,this.v1=t,this.v2=r,this.v3=i}function QuadraticBezierCurve3(e,t,r){this.v0=e,this.v1=t,this.v2=r}function LineCurve3(e,t){this.v1=e,this.v2=t}function ArcCurve(e,t,r,i,n,o){EllipseCurve.call(this,e,t,r,r,i,n,o)}function Face4(e,t,r,i,n,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(e,t,r,n,o,a)}function MeshFaceMaterial(e){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new MultiMaterial(e)}function PointCloud(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(e,t)}function Particle(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(e)}function ParticleSystem(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(e,t)}function PointCloudMaterial(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function ParticleBasicMaterial(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function ParticleSystemMaterial(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function Vertex(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(e,t,r)}function DynamicBufferAttribute(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new BufferAttribute(e,t).setDynamic(!0)}function Int8Attribute(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(e,t)}function Uint8Attribute(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(e,t)}function Uint8ClampedAttribute(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(e,t)}function Int16Attribute(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(e,t)}function Uint16Attribute(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(e,t)}function Int32Attribute(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(e,t)}function Uint32Attribute(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(e,t)}function Float32Attribute(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(e,t)}function Float64Attribute(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(e,t)}function ClosedSplineCurve3(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,e),this.type="catmullrom",this.closed=!0}function SplineCurve3(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,e),this.type="catmullrom"}function Spline(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,e),this.type="catmullrom"}function BoundingBoxHelper(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(e,t)}function EdgesHelper(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(e.geometry),new LineBasicMaterial({color:void 0!==t?t:16777215}))}function WireframeHelper(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(e.geometry),new LineBasicMaterial({color:void 0!==t?t:16777215}))}function XHRLoader(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(e)}function BinaryTextureLoader(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(e)}function Projector(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function CanvasRenderer(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}}(),EventDispatcher.prototype={addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners,i=r[e];if(void 0!==i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,r=t[e.type];if(void 0!==r){e.target=this;var i=[],n=0,o=r.length;for(n=0;n<o;n++)i[n]=r[n];for(n=0;n<o;n++)i[n].call(this,e)}}}};var t="84",r={LEFT:0,MIDDLE:1,RIGHT:2},i=0,n=1,o=2,a=0,s=1,u=2,l=0,c=1,h=2,d=1,f=2,p=0,m=1,g=2,y=0,b=1,x=2,M=3,w=4,E=5,_=100,T=101,A=102,S=103,C=104,L=200,D=201,I=202,N=203,O=204,R=205,j=206,P=207,k=208,B=209,z=210,U=0,F=1,G=2,V=3,H=4,W=5,Y=6,Q=7,q=0,X=1,Z=2,K=0,J=1,$=2,ee=3,te=4,re=301,ie=302,ne=303,oe=304,ae=305,se=306,ue=307,le=1e3,ce=1001,he=1002,de=1003,fe=1004,pe=1005,me=1006,ge=1007,ye=1008,ve=1009,be=1010,xe=1011,Me=1012,we=1013,Ee=1014,_e=1015,Te=1016,Ae=1017,Se=1018,Ce=1019,Le=1020,De=1021,Ie=1022,Ne=1023,Oe=1024,Re=1025,je=Ne,Pe=1026,ke=1027,Be=2001,ze=2002,Ue=2003,Fe=2004,Ge=2100,Ve=2101,He=2102,We=2103,Ye=2151,Qe=2201,qe=2400,Xe=0,Ze=1,Ke=2,Je=3e3,$e=3001,et=3007,tt=3002,rt=3004,it=3005,nt=3006,ot=3200,at=3201,st={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),i=0;return function(){for(var n=0;n<36;n++)8===n||13===n||18===n||23===n?r[n]="-":14===n?r[n]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),e=15&i,i>>=4,r[n]=t[19===n?3&e|8:e]);return r.join("")}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*st.DEG2RAD},radToDeg:function(e){return e*st.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};Vector2.prototype={constructor:Vector2,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new Vector2,t=new Vector2),e.set(r,r),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,o=this.y-e.y;return this.x=n*r-o*i+e.x,this.y=n*i+o*r+e.y,this}};var ut=0;Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=300,Texture.prototype={constructor:Texture,isTexture:!0,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=st.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:function(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(r)}),t.image=r.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case le:e.x=e.x-Math.floor(e.x);break;case ce:e.x=e.x<0?0:1;break;case he:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case le:e.y=e.y-Math.floor(e.y);break;case ce:e.y=e.y<0?0:1;break;case he:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(Texture.prototype,EventDispatcher.prototype),Vector4.prototype={constructor:Vector4,isVector4:!0,set:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*n,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*n,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*n,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*n,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,i,n,o=e.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+d)<.1&&Math.abs(h+f)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(c+1)/2,y=(p+1)/2,v=(s+l)/4,b=(u+d)/4,x=(h+f)/4;return m>g&&m>y?m<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(m),i=v/r,n=b/r):g>y?g<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(g),r=v/i,n=x/i):y<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(y),r=b/n,i=x/n),this.set(r,i,n,t),this}var M=Math.sqrt((f-h)*(f-h)+(u-d)*(u-d)+(l-s)*(l-s));return Math.abs(M)<.001&&(M=1),this.x=(f-h)/M,this.y=(u-d)/M,this.z=(l-s)/M,this.w=Math.acos((a+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new Vector4,t=new Vector4),e.set(r,r,r,r),t.set(i,i,i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},WebGLRenderTarget.prototype={constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(WebGLRenderTarget.prototype,EventDispatcher.prototype),WebGLRenderTargetCube.prototype=Object.create(WebGLRenderTarget.prototype),WebGLRenderTargetCube.prototype.constructor=WebGLRenderTargetCube,WebGLRenderTargetCube.prototype.isWebGLRenderTargetCube=!0,Quaternion.prototype={constructor:Quaternion,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),i=Math.cos(e._y/2),n=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2),u=e.order;return"XYZ"===u?(this._x=o*i*n+r*a*s,this._y=r*a*n-o*i*s,this._z=r*i*s+o*a*n,this._w=r*i*n-o*a*s):"YXZ"===u?(this._x=o*i*n+r*a*s,this._y=r*a*n-o*i*s,this._z=r*i*s-o*a*n,this._w=r*i*n+o*a*s):"ZXY"===u?(this._x=o*i*n-r*a*s,this._y=r*a*n+o*i*s,this._z=r*i*s+o*a*n,this._w=r*i*n-o*a*s):"ZYX"===u?(this._x=o*i*n-r*a*s,this._y=r*a*n+o*i*s,this._z=r*i*s-o*a*n,this._w=r*i*n+o*a*s):"YZX"===u?(this._x=o*i*n+r*a*s,this._y=r*a*n+o*i*s,this._z=r*i*s-o*a*n,this._w=r*i*n-o*a*s):"XZY"===u&&(this._x=o*i*n-r*a*s,this._y=r*a*n-o*i*s,this._z=r*i*s+o*a*n,this._w=r*i*n+o*a*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,i=r[0],n=r[4],o=r[8],a=r[1],s=r[5],u=r[9],l=r[2],c=r[6],h=r[10],d=i+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-u)*t,this._y=(o-l)*t,this._z=(a-n)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(c-u)/t,this._x=.25*t,this._y=(n+a)/t,this._z=(o+l)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(o-l)/t,this._x=(n+a)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(a-n)/t,this._x=(o+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(r,i){return void 0===e&&(e=new Vector3),t=r.dot(i)+1,t<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,i=e._y,n=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=r*l+o*a+i*u-n*s,this._y=i*l+o*s+n*a-r*u,this._z=n*l+o*u+r*s-i*a,this._w=o*l-r*a-i*s-n*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,i=this._y,n=this._z,o=this._w,a=o*e._w+r*e._x+i*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=n,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(r+this._x),this._y=.5*(i+this._y),this._z=.5*(n+this._z),this;var u=Math.atan2(s,a),l=Math.sin((1-t)*u)/s,c=Math.sin(t*u)/s;return this._w=o*l+this._w*c,this._x=r*l+this._x*c,this._y=i*l+this._y*c,this._z=n*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(Quaternion,{slerp:function(e,t,r,i){return r.copy(e).slerp(t,i)},slerpFlat:function(e,t,r,i,n,o,a){var s=r[i+0],u=r[i+1],l=r[i+2],c=r[i+3],h=n[o+0],d=n[o+1],f=n[o+2],p=n[o+3];if(c!==p||s!==h||u!==d||l!==f){var m=1-a,g=s*h+u*d+l*f+c*p,y=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){var b=Math.sqrt(v),x=Math.atan2(b,g*y);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var M=a*y;if(s=s*m+h*M,u=u*m+d*M,l=l*m+f*M,c=c*m+p*M,m===1-a){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),Vector3.prototype={constructor:Vector3,isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return!1===(t&&t.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new Quaternion),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;this.x=n[0]*t+n[4]*r+n[8]*i+n[12],this.y=n[1]*t+n[5]*r+n[9]*i+n[13],this.z=n[2]*t+n[6]*r+n[10]*i+n[14];var o=n[3]*t+n[7]*r+n[11]*i+n[15];return this.divideScalar(o)},applyQuaternion:function(e){var t=this.x,r=this.y,i=this.z,n=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*i-a*r,l=s*r+a*t-n*i,c=s*i+n*r-o*t,h=-n*t-o*r-a*i;return this.x=u*s+h*-n+l*-a-c*-o,this.y=l*s+h*-o+c*-n-u*-a,this.z=c*s+h*-a+u*-o-l*-n,this},project:function(){var e;return function(t){return void 0===e&&(e=new Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new Vector3,t=new Vector3),e.set(r,r,r),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,i=this.y,n=this.z;return this.x=i*e.z-n*e.y,this.y=n*e.x-r*e.z,this.z=r*e.y-i*e.x,this},crossVectors:function(e,t){var r=e.x,i=e.y,n=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-n*a,this.y=n*o-r*s,this.z=r*a-i*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(st.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var r=e;e=t,t=r}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},Matrix4.prototype={constructor:Matrix4,isMatrix4:!0,set:function(e,t,r,i,n,o,a,s,u,l,c,h,d,f,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=n,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Matrix4).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new Vector3);var r=this.elements,i=t.elements,n=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return r[0]=i[0]*n,r[1]=i[1]*n,r[2]=i[2]*n,r[4]=i[4]*o,r[5]=i[5]*o,r[6]=i[6]*o,r[8]=i[8]*a,r[9]=i[9]*a,r[10]=i[10]*a,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,i=e.y,n=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(i),u=Math.sin(i),l=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){var h=o*l,d=o*c,f=a*l,p=a*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=d+f*u,t[5]=h-p*u,t[9]=-a*s,t[2]=p-h*u,t[6]=f+d*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*l,g=s*c,y=u*l,v=u*c;t[0]=m+v*a,t[4]=y*a-g,t[8]=o*u,t[1]=o*c,t[5]=o*l,t[9]=-a,t[2]=g*a-y,t[6]=v+m*a,t[10]=o*s}else if("ZXY"===e.order){var m=s*l,g=s*c,y=u*l,v=u*c;t[0]=m-v*a,t[4]=-o*c,t[8]=y+g*a,t[1]=g+y*a,t[5]=o*l,t[9]=v-m*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var h=o*l,d=o*c,f=a*l,p=a*c;t[0]=s*l,t[4]=f*u-d,t[8]=h*u+p,t[1]=s*c,t[5]=p*u+h,t[9]=d*u-f,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,x=o*u,M=a*s,w=a*u;t[0]=s*l,t[4]=w-b*c,t[8]=M*c+x,t[1]=c,t[5]=o*l,t[9]=-a*l,t[2]=-u*l,t[6]=x*c+M,t[10]=b-w*c}else if("XZY"===e.order){var b=o*s,x=o*u,M=a*s,w=a*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=b*c+w,t[5]=o*l,t[9]=x*c-M,t[2]=M*c-x,t[6]=a*l,t[10]=w*c+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z,o=e.w,a=r+r,s=i+i,u=n+n,l=r*a,c=r*s,h=r*u,d=i*s,f=i*u,p=n*u,m=o*a,g=o*s,y=o*u;return t[0]=1-(d+p),t[4]=c-y,t[8]=h+g,t[1]=c+y,t[5]=1-(l+p),t[9]=f-m,t[2]=h-g,t[6]=f+m,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,r;return function(i,n,o){void 0===e&&(e=new Vector3,t=new Vector3,r=new Vector3);var a=this.elements;return r.subVectors(i,n).normalize(),0===r.lengthSq()&&(r.z=1),e.crossVectors(o,r).normalize(),0===e.lengthSq()&&(r.z+=1e-4,e.crossVectors(o,r).normalize()),t.crossVectors(r,e),a[0]=e.x,a[4]=t.x,a[8]=r.x,a[1]=e.y,a[5]=t.y,a[9]=r.y,a[2]=e.z,a[6]=t.z,a[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,i=t.elements,n=this.elements,o=r[0],a=r[4],s=r[8],u=r[12],l=r[1],c=r[5],h=r[9],d=r[13],f=r[2],p=r[6],m=r[10],g=r[14],y=r[3],v=r[7],b=r[11],x=r[15],M=i[0],w=i[4],E=i[8],_=i[12],T=i[1],A=i[5],S=i[9],C=i[13],L=i[2],D=i[6],I=i[10],N=i[14],O=i[3],R=i[7],j=i[11],P=i[15];return n[0]=o*M+a*T+s*L+u*O,n[4]=o*w+a*A+s*D+u*R,n[8]=o*E+a*S+s*I+u*j,n[12]=o*_+a*C+s*N+u*P,n[1]=l*M+c*T+h*L+d*O,n[5]=l*w+c*A+h*D+d*R,n[9]=l*E+c*S+h*I+d*j,n[13]=l*_+c*C+h*N+d*P,n[2]=f*M+p*T+m*L+g*O,n[6]=f*w+p*A+m*D+g*R,n[10]=f*E+p*S+m*I+g*j,n[14]=f*_+p*C+m*N+g*P,n[3]=y*M+v*T+b*L+x*O,n[7]=y*w+v*A+b*D+x*R,n[11]=y*E+v*S+b*I+x*j,n[15]=y*_+v*C+b*N+x*P,this},multiplyToArray:function(e,t,r){var i=this.elements;return this.multiplyMatrices(e,t),r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new Vector3);for(var r=0,i=t.count;r<i;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+n*s*c-i*u*c-n*a*h+r*u*h+i*a*d-r*s*d)+e[7]*(+t*s*d-t*u*h+n*o*h-i*o*d+i*u*l-n*s*l)+e[11]*(+t*u*c-t*a*d-n*o*c+r*o*d+n*a*l-r*u*l)+e[15]*(-i*a*l-t*s*c+t*a*h+i*o*c-r*o*h+r*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,i=e.elements,n=i[0],o=i[1],a=i[2],s=i[3],u=i[4],l=i[5],c=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],g=i[12],y=i[13],v=i[14],b=i[15],x=f*v*h-y*p*h+y*c*m-l*v*m-f*c*b+l*p*b,M=g*p*h-d*v*h-g*c*m+u*v*m+d*c*b-u*p*b,w=d*y*h-g*f*h+g*l*m-u*y*m-d*l*b+u*f*b,E=g*f*c-d*y*c-g*l*p+u*y*p+d*l*v-u*f*v,_=n*x+o*M+a*w+s*E;if(0===_){var T="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var A=1/_;return r[0]=x*A,r[1]=(y*p*s-f*v*s-y*a*m+o*v*m+f*a*b-o*p*b)*A,r[2]=(l*v*s-y*c*s+y*a*h-o*v*h-l*a*b+o*c*b)*A,r[3]=(f*c*s-l*p*s-f*a*h+o*p*h+l*a*m-o*c*m)*A,r[4]=M*A,r[5]=(d*v*s-g*p*s+g*a*m-n*v*m-d*a*b+n*p*b)*A,r[6]=(g*c*s-u*v*s-g*a*h+n*v*h+u*a*b-n*c*b)*A,r[7]=(u*p*s-d*c*s+d*a*h-n*p*h-u*a*m+n*c*m)*A,r[8]=w*A,r[9]=(g*f*s-d*y*s-g*o*m+n*y*m+d*o*b-n*f*b)*A,r[10]=(u*y*s-g*l*s+g*o*h-n*y*h-u*o*b+n*l*b)*A,r[11]=(d*l*s-u*f*s-d*o*h+n*f*h+u*o*m-n*l*m)*A,r[12]=E*A,r[13]=(d*y*a-g*f*a+g*o*p-n*y*p-d*o*v+n*f*v)*A,r[14]=(g*l*a-u*y*a-g*o*c+n*y*c+u*o*v-n*l*v)*A,r[15]=(u*f*a-d*l*a+d*o*c-n*f*c-u*o*p+n*l*p)*A,this},scale:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=1-r,o=e.x,a=e.y,s=e.z,u=n*o,l=n*a;return this.set(u*o+r,u*a-i*s,u*s+i*a,0,u*a+i*s,l*a+r,l*s-i*o,0,u*s-i*a,l*s+i*o,n*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e,t;return function(r,i,n){void 0===e&&(e=new Vector3,t=new Matrix4);var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),u=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),r.x=o[12],r.y=o[13],r.z=o[14],t.elements.set(this.elements);var l=1/a,c=1/s,h=1/u;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,i.setFromRotationMatrix(t),n.x=a,n.y=s,n.z=u,this}}(),makePerspective:function(e,t,r,i,n,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*n/(t-e),u=2*n/(r-i),l=(t+e)/(t-e),c=(r+i)/(r-i),h=-(o+n)/(o-n),d=-2*o*n/(o-n);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,r,i,n,o){var a=this.elements,s=1/(t-e),u=1/(r-i),l=1/(o-n),c=(t+e)*s,h=(r+i)*u,d=(o+n)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},CubeTexture.prototype=Object.create(Texture.prototype),CubeTexture.prototype.constructor=CubeTexture,CubeTexture.prototype.isCubeTexture=!0,Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var lt=new Texture,ct=new CubeTexture,ht=[],dt=[];StructuredUniform.prototype.setValue=function(e,t){for(var r=this.seq,i=0,n=r.length;i!==n;++i){var o=r[i];o.setValue(e,t[o.id])}};var ft=/([\w\d_]+)(\])?(\[|\.)?/g;WebGLUniforms.prototype.setValue=function(e,t,r){var i=this.map[t];void 0!==i&&i.setValue(e,r,this.renderer)},WebGLUniforms.prototype.set=function(e,t,r){var i=this.map[r];void 0!==i&&i.setValue(e,t[r],this.renderer)},WebGLUniforms.prototype.setOptional=function(e,t,r){var i=t[r];void 0!==i&&this.setValue(e,r,i)},WebGLUniforms.upload=function(e,t,r,i){for(var n=0,o=t.length;n!==o;++n){var a=t[n],s=r[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}},WebGLUniforms.seqWithValue=function(e,t){for(var r=[],i=0,n=e.length;i!==n;++i){var o=e[i];o.id in t&&r.push(o)}return r};var pt={merge:function(e){for(var t={},r=0;r<e.length;r++){var i=this.clone(e[r]);for(var n in i)t[n]=i[n]}return t},clone:function(e){var t={};for(var r in e){t[r]={};for(var i in e[r]){var n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}},mt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};Color.prototype={constructor:Color,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function hue2rgb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(e,t,r){if(e=st.euclideanModulo(e,1),t=st.clamp(t,0,1),r=st.clamp(r,0,1),0===t)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+t):r+t-r*t,n=2*r-i;this.r=hue2rgb(n,i,e+1/3),this.g=hue2rgb(n,i,e),this.b=hue2rgb(n,i,e-1/3)}return this}}(),setStyle:function(e){function handleAlpha(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var t;if(t=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=t[1],n=t[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,handleAlpha(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,handleAlpha(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){var o=parseFloat(r[1])/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return handleAlpha(r[5]),this.setHSL(o,a,s)}}}else if(t=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=t[1],l=u.length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=gt[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,i=e||{h:0,s:0,l:0},n=this.r,o=this.g,a=this.b,s=Math.max(n,o,a),u=Math.min(n,o,a),l=(u+s)/2;if(u===s)t=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case n:t=(o-a)/c+(o<a?6:0);break;case o:t=(a-n)/c+2;break;case a:t=(n-o)/c+4}t/=6}return i.h=t,i.s=r,i.l=l,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=r,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var gt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DataTexture.prototype=Object.create(Texture.prototype),DataTexture.prototype.constructor=DataTexture,DataTexture.prototype.isDataTexture=!0;var yt={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Vector4(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Vector4(0,0,1,1)}}},vt={basic:{uniforms:pt.merge([yt.common,yt.aomap,yt.lightmap,yt.fog]),vertexShader:mt.meshbasic_vert,fragmentShader:mt.meshbasic_frag},lambert:{uniforms:pt.merge([yt.common,yt.aomap,yt.lightmap,yt.emissivemap,yt.fog,yt.lights,{emissive:{value:new Color(0)}}]),vertexShader:mt.meshlambert_vert,fragmentShader:mt.meshlambert_frag},phong:{uniforms:pt.merge([yt.common,yt.aomap,yt.lightmap,yt.emissivemap,yt.bumpmap,yt.normalmap,yt.displacementmap,yt.gradientmap,yt.fog,yt.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:mt.meshphong_vert,fragmentShader:mt.meshphong_frag},standard:{uniforms:pt.merge([yt.common,yt.aomap,yt.lightmap,yt.emissivemap,yt.bumpmap,yt.normalmap,yt.displacementmap,yt.roughnessmap,yt.metalnessmap,yt.fog,yt.lights,{emissive:{value:new Color(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},points:{uniforms:pt.merge([yt.points,yt.fog]),vertexShader:mt.points_vert,fragmentShader:mt.points_frag},dashed:{uniforms:pt.merge([yt.common,yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mt.linedashed_vert,fragmentShader:mt.linedashed_frag},depth:{uniforms:pt.merge([yt.common,yt.displacementmap]),vertexShader:mt.depth_vert,fragmentShader:mt.depth_frag},normal:{uniforms:pt.merge([yt.common,yt.bumpmap,yt.normalmap,yt.displacementmap,{opacity:{value:1}}]),vertexShader:mt.normal_vert,fragmentShader:mt.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mt.cube_vert,fragmentShader:mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:mt.equirect_vert,fragmentShader:mt.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new Vector3}},vertexShader:mt.distanceRGBA_vert,fragmentShader:mt.distanceRGBA_frag}};vt.physical={uniforms:pt.merge([vt.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},Box2.prototype={constructor:Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Vector2;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new Vector2;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Vector2;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new Vector2).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Vector2;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};var bt=0;Material.prototype={constructor:Material,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]="overdraw"===t?Number(r):r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function extractFromCache(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}var t=void 0===e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(r.blending=this.blending),this.shading!==f&&(r.shading=this.shading),this.side!==l&&(r.side=this.side),this.vertexColors!==p&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,t){var i=extractFromCache(e.textures),n=extractFromCache(e.images);i.length>0&&(r.textures=i),n.length>0&&(r.images=n)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var i=t.length;r=new Array(i);for(var n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Material.prototype,EventDispatcher.prototype),ShaderMaterial.prototype=Object.create(Material.prototype),ShaderMaterial.prototype.constructor=ShaderMaterial,ShaderMaterial.prototype.isShaderMaterial=!0,ShaderMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pt.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},ShaderMaterial.prototype.toJSON=function(e){var t=Material.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},MeshDepthMaterial.prototype=Object.create(Material.prototype),MeshDepthMaterial.prototype.constructor=MeshDepthMaterial,MeshDepthMaterial.prototype.isMeshDepthMaterial=!0,MeshDepthMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Box3.prototype={constructor:Box3,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,i=1/0,n=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<r&&(r=c),h<i&&(i=h),l>n&&(n=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(n,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,i=1/0,n=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<r&&(r=c),h<i&&(i=h),l>n&&(n=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(n,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Vector3;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Vector3;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Vector3;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new Vector3;return function(t){var r=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var i,n,o=t.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(i=0,n=a.length;i<n;i++)e.copy(a[i]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(i=0,n=s.count;i<n;i++)e.fromBufferAttribute(s,i).applyMatrix4(t.matrixWorld),r.expandByPoint(e)}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e;return function(t){return void 0===e&&(e=new Vector3),this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=e.constant&&r>=e.constant},clampPoint:function(e,t){return(t||new Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Vector3;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Vector3;return function(t){var r=t||new Sphere;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Sphere.prototype={constructor:Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e;return function(t,r){void 0===e&&(e=new Box3);var i=this.center;void 0!==r?i.copy(r):e.setFromPoints(t).getCenter(i);for(var n=0,o=0,a=t.length;o<a;o++)n=Math.max(n,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),i=t||new Vector3;return i.copy(e),r>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){var t=e||new Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},Matrix3.prototype={constructor:Matrix3,isMatrix3:!0,set:function(e,t,r,i,n,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=i,l[2]=a,l[3]=t,l[4]=n,l[5]=s,l[6]=r,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new Vector3);for(var r=0,i=t.count;r<i;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-r*n*l+r*a*s+i*n*u-i*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=e.elements,i=this.elements,n=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],d=r[8],f=d*u-l*h,p=l*c-d*s,m=h*s-u*c,g=n*f+o*p+a*m;if(0===g){var y="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(y);return console.warn(y),this.identity()}var v=1/g;return i[0]=f*v,i[1]=(a*h-d*o)*v,i[2]=(l*o-a*u)*v,i[3]=p*v,i[4]=(d*n-a*c)*v,i[5]=(a*s-l*n)*v,i[6]=m*v,i[7]=(o*c-h*n)*v,i[8]=(u*n-o*s)*v,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}},Plane.prototype={constructor:Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Vector3,t=new Vector3;return function(r,i,n){var o=e.subVectors(n,i).cross(t.subVectors(r,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e);return(t||new Vector3).copy(this.normal).multiplyScalar(r)},intersectLine:function(){var e=new Vector3;return function(t,r){var i=r||new Vector3,n=t.delta(e),o=this.normal.dot(n);if(0!==o){var a=-(t.start.dot(this.normal)+this.constant)/o;if(!(a<0||a>1))return i.copy(n).multiplyScalar(a).add(t.start)}else if(0===this.distanceToPoint(t.start))return i.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Vector3,t=new Matrix3;return function(r,i){var n=this.coplanarPoint(e).applyMatrix4(r),o=i||t.getNormalMatrix(r),a=this.normal.applyMatrix3(o).normalize();return this.constant=-n.dot(a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},Frustum.prototype={constructor:Frustum,set:function(e,t,r,i,n,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(n),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=r[7],h=r[8],d=r[9],f=r[10],p=r[11],m=r[12],g=r[13],y=r[14],v=r[15];return t[0].setComponents(a-i,c-s,p-h,v-m).normalize(),t[1].setComponents(a+i,c+s,p+h,v+m).normalize(),t[2].setComponents(a+n,c+u,p+d,v+g).normalize(),t[3].setComponents(a-n,c-u,p-d,v-g).normalize(),t[4].setComponents(a-o,c-l,p-f,v-y).normalize(),t[5].setComponents(a+o,c+l,p+f,v+y).normalize(),this},intersectsObject:function(){var e=new Sphere;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Sphere;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,i=-e.radius,n=0;n<6;n++){if(t[n].distanceToPoint(r)<i)return!1}return!0},intersectsBox:function(){var e=new Vector3,t=new Vector3;return function(r){for(var i=this.planes,n=0;n<6;n++){var o=i[n];e.x=o.normal.x>0?r.min.x:r.max.x,t.x=o.normal.x>0?r.max.x:r.min.x,e.y=o.normal.y>0?r.min.y:r.max.y,t.y=o.normal.y>0?r.max.y:r.min.y,e.z=o.normal.z>0?r.min.z:r.max.z,t.z=o.normal.z>0?r.max.z:r.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}},Ray.prototype={constructor:Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new Vector3;r.subVectors(e,this.origin);var i=r.dot(this.direction);return i<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Vector3;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new Vector3,t=new Vector3,r=new Vector3;return function(i,n,o,a){e.copy(i).add(n).multiplyScalar(.5),t.copy(n).sub(i).normalize(),r.copy(this.origin).sub(e);var s,u,l,c,h=.5*i.distanceTo(n),d=-this.direction.dot(t),f=r.dot(this.direction),p=-r.dot(t),m=r.lengthSq(),g=Math.abs(1-d*d);if(g>0)if(s=d*p-f,u=d*f-p,c=h*g,s>=0)if(u>=-c)if(u<=c){var y=1/g;s*=y,u*=y,l=s*(s+d*u+2*f)+u*(d*s+u+2*p)+m}else u=h,s=Math.max(0,-(d*u+f)),l=-s*s+u*(u+2*p)+m;else u=-h,s=Math.max(0,-(d*u+f)),l=-s*s+u*(u+2*p)+m;else u<=-c?(s=Math.max(0,-(-d*h+f)),u=s>0?-h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+m):u<=c?(s=0,u=Math.min(Math.max(-h,-p),h),l=u*(u+2*p)+m):(s=Math.max(0,-(d*h+f)),u=s>0?h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+m);else u=d>0?-h:h,s=Math.max(0,-(d*u+f)),l=-s*s+u*(u+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(u).add(e),l}}(),intersectSphere:function(){var e=new Vector3;return function(t,r){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),n=e.dot(e)-i*i,o=t.radius*t.radius;if(n>o)return null;var a=Math.sqrt(o-n),s=i-a,u=i+a;return s<0&&u<0?null:s<0?this.at(u,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,i,n,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),l>=0?(n=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(n=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),r>o||n>i?null:((n>r||r!==r)&&(r=n),(o<i||i!==i)&&(i=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),r>s||a>i?null:((a>r||r!==r)&&(r=a),(s<i||i!==i)&&(i=s),i<0?null:this.at(r>=0?r:i,t)))},intersectsBox:function(){var e=new Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new Vector3,t=new Vector3,r=new Vector3,i=new Vector3;return function(n,o,a,s,u){t.subVectors(o,n),r.subVectors(a,n),i.crossVectors(t,r);var l,c=this.direction.dot(i);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,n);var h=l*this.direction.dot(r.crossVectors(e,r));if(h<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>c)return null;var f=-l*e.dot(i);return f<0?null:this.at(f/c,u)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Euler.DefaultOrder="XYZ",Euler.prototype={constructor:Euler,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var i=st.clamp,n=e.elements,o=n[0],a=n[4],s=n[8],u=n[1],l=n[5],c=n[9],h=n[2],d=n[6],f=n[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,r,i){return void 0===e&&(e=new Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Quaternion;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Layers.prototype={constructor:Layers,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!=(this.mask&e.mask)}};var xt=0;Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.prototype={constructor:Object3D,isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Quaternion;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Vector3;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,i=this.children.length;r<i;r++){var n=this.children[r],o=n.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){var t=e||new Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Vector3,t=new Vector3;return function(r){var i=r||new Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldRotation:function(){var e=new Quaternion;return function(t){var r=t||new Euler;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new Vector3,t=new Quaternion;return function(r){var i=r||new Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new Quaternion;return function(t){var r=t||new Vector3;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){function extractFromCache(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}var t=void 0===e||""===e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var n=0;n<this.children.length;n++)i.children.push(this.children[n].toJSON(e).object)}if(t){var o=extractFromCache(e.geometries),a=extractFromCache(e.materials),s=extractFromCache(e.textures),u=extractFromCache(e.images);o.length>0&&(r.geometries=o),a.length>0&&(r.materials=a),s.length>0&&(r.textures=s),u.length>0&&(r.images=u)}return r.object=i,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var i=e.children[r];this.add(i.clone())}return this}},Object.assign(Object3D.prototype,EventDispatcher.prototype),Line3.prototype={constructor:Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new Vector3;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Vector3,t=new Vector3;return function(r,i){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var n=t.dot(t),o=t.dot(e),a=o/n;return i&&(a=st.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,r){var i=this.closestPointToPointParameter(e,t),n=r||new Vector3;return this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},Triangle.normal=function(){var e=new Vector3;return function(t,r,i,n){var o=n||new Vector3;o.subVectors(i,r),e.subVectors(t,r),o.cross(e);var a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}}(),Triangle.barycoordFromPoint=function(){var e=new Vector3,t=new Vector3,r=new Vector3;return function(i,n,o,a,s){e.subVectors(a,n),t.subVectors(o,n),r.subVectors(i,n);var u=e.dot(e),l=e.dot(t),c=e.dot(r),h=t.dot(t),d=t.dot(r),f=u*h-l*l,p=s||new Vector3;if(0===f)return p.set(-2,-1,-1);var m=1/f,g=(h*c-l*d)*m,y=(u*d-l*c)*m;return p.set(1-g-y,y,g)}}(),Triangle.containsPoint=function(){var e=new Vector3;return function(t,r,i,n){var o=Triangle.barycoordFromPoint(t,r,i,n,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),Triangle.prototype={constructor:Triangle,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new Vector3,t=new Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,r,i;return function(n,o){void 0===e&&(e=new Plane,t=[new Line3,new Line3,new Line3],r=new Vector3,i=new Vector3);var a=o||new Vector3,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(n,r),!0===this.containsPoint(r))a.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var u=0;u<t.length;u++){t[u].closestPointToPoint(r,!0,i);var l=r.distanceToSquared(i);l<s&&(s=l,a.copy(i))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Face3.prototype={constructor:Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},MeshBasicMaterial.prototype=Object.create(Material.prototype),MeshBasicMaterial.prototype.constructor=MeshBasicMaterial,MeshBasicMaterial.prototype.isMeshBasicMaterial=!0,MeshBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},BufferAttribute.prototype={constructor:BufferAttribute,isBufferAttribute:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new Color),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];t[r++]=o.a,t[r++]=o.b,t[r++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Vector2),t[r++]=o.x,t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Vector3),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;i<n;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Vector4),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int8BufferAttribute.prototype.constructor=Int8BufferAttribute,Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute,Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute,Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int16BufferAttribute.prototype.constructor=Int16BufferAttribute,Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute,Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int32BufferAttribute.prototype.constructor=Int32BufferAttribute,Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute,Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float32BufferAttribute.prototype.constructor=Float32BufferAttribute,Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float64BufferAttribute.prototype.constructor=Float64BufferAttribute,Object.assign(DirectGeometry.prototype,{computeGroups:function(e){for(var t,r=[],i=void 0,n=e.faces,o=0;o<n.length;o++){var a=n[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:i})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,i=e.vertices,n=e.faceVertexUvs,o=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,s=e.morphTargets,u=s.length;if(u>0){t=[];for(var l=0;l<u;l++)t[l]=[];this.morphTargets.position=t}var c,h=e.morphNormals,d=h.length;if(d>0){c=[];for(var l=0;l<d;l++)c[l]=[];this.morphTargets.normal=c}for(var f=e.skinIndices,p=e.skinWeights,m=f.length===i.length,g=p.length===i.length,l=0;l<r.length;l++){var y=r[l];this.vertices.push(i[y.a],i[y.b],i[y.c]);var v=y.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{var b=y.normal;this.normals.push(b,b,b)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var M=y.color;this.colors.push(M,M,M)}if(!0===o){var w=n[0][l];void 0!==w?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(!0===a){var w=n[1][l];void 0!==w?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var E=0;E<u;E++){var _=s[E].vertices;t[E].push(_[y.a],_[y.b],_[y.c])}for(var E=0;E<d;E++){var T=h[E].vertexNormals[l];c[E].push(T.a,T.b,T.c)}m&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),g&&this.skinWeights.push(p[y.a],p[y.b],p[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Mt=0;Geometry.prototype={constructor:Geometry,isGeometry:!0,applyMatrix:function(e){for(var t=(new Matrix3).getNormalMatrix(e),r=0,i=this.vertices.length;r<i;r++){this.vertices[r].applyMatrix4(e)}for(var r=0,i=this.faces.length;r<i;r++){var n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(var o=0,a=n.vertexNormals.length;o<a;o++)n.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new Matrix4),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new Matrix4),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new Matrix4),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,i){return void 0===e&&(e=new Matrix4),e.makeTranslation(t,r,i),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,i){return void 0===e&&(e=new Matrix4),e.makeScale(t,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new Object3D),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function addFace(e,r,i,n){var d=void 0!==o?[l[e].clone(),l[r].clone(),l[i].clone()]:[],f=void 0!==a?[t.colors[e].clone(),t.colors[r].clone(),t.colors[i].clone()]:[],p=new Face3(e,r,i,d,f,n);t.faces.push(p),void 0!==s&&t.faceVertexUvs[0].push([c[e].clone(),c[r].clone(),c[i].clone()]),void 0!==u&&t.faceVertexUvs[1].push([h[e].clone(),h[r].clone(),h[i].clone()])}var t=this,r=null!==e.index?e.index.array:void 0,i=e.attributes,n=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,u=void 0!==i.uv2?i.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=[],c=[],h=[],d=0,f=0;d<n.length;d+=3,f+=2)t.vertices.push(new Vector3(n[d],n[d+1],n[d+2])),void 0!==o&&l.push(new Vector3(o[d],o[d+1],o[d+2])),void 0!==a&&t.colors.push(new Color(a[d],a[d+1],a[d+2])),void 0!==s&&c.push(new Vector2(s[f],s[f+1])),void 0!==u&&h.push(new Vector2(u[f],u[f+1]));if(void 0!==r){var p=e.groups;if(p.length>0)for(var d=0;d<p.length;d++)for(var m=p[d],g=m.start,y=m.count,f=g,v=g+y;f<v;f+=3)addFace(r[f],r[f+1],r[f+2],m.materialIndex);else for(var d=0;d<r.length;d+=3)addFace(r[d],r[d+1],r[d+2])}else for(var d=0;d<n.length/3;d+=3)addFace(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,i=new Matrix4;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new Vector3,t=new Vector3,r=0,i=this.faces.length;r<i;r++){var n=this.faces[r],o=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,r,i,n,o,a;for(a=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)a[t]=new Vector3;if(e){var s,u,l,c=new Vector3,h=new Vector3;for(i=0,n=this.faces.length;i<n;i++)o=this.faces[i],s=this.vertices[o.a],u=this.vertices[o.b],l=this.vertices[o.c],c.subVectors(l,u),h.subVectors(s,u),c.cross(h),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(this.computeFaceNormals(),i=0,n=this.faces.length;i<n;i++)o=this.faces[i],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,r=this.vertices.length;t<r;t++)a[t].normalize();for(i=0,n=this.faces.length;i<n;i++){o=this.faces[i];var d=o.vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){r=this.faces[e];var i=r.vertexNormals;3===i.length?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,i,n;for(r=0,i=this.faces.length;r<i;r++)for(n=this.faces[r],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var o=new Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,s,u=this.morphNormals[e].faceNormals,l=this.morphNormals[e].vertexNormals;for(r=0,i=this.faces.length;r<i;r++)a=new Vector3,s={a:new Vector3,b:new Vector3,c:new Vector3},u.push(a),l.push(s)}var c=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var a,s;for(r=0,i=this.faces.length;r<i;r++)n=this.faces[r],a=c.faceNormals[r],s=c.vertexNormals[r],a.copy(n.normal),s.a.copy(n.vertexNormals[0]),s.b.copy(n.vertexNormals[1]),s.c.copy(n.vertexNormals[2])}for(r=0,i=this.faces.length;r<i;r++)n=this.faces[r],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,i=t.length;r<i;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(!1===(e&&e.isGeometry))return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var i,n=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,l=this.faceVertexUvs[0],c=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===r&&(r=0),void 0!==t&&(i=(new Matrix3).getNormalMatrix(t));for(var f=0,p=a.length;f<p;f++){var m=a[f],g=m.clone();void 0!==t&&g.applyMatrix4(t),o.push(g)}for(var f=0,p=d.length;f<p;f++)h.push(d[f].clone());for(f=0,p=u.length;f<p;f++){var y,v,b,x=u[f],M=x.vertexNormals,w=x.vertexColors;y=new Face3(x.a+n,x.b+n,x.c+n),y.normal.copy(x.normal),void 0!==i&&y.normal.applyMatrix3(i).normalize();for(var E=0,_=M.length;E<_;E++)v=M[E].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),y.vertexNormals.push(v);y.color.copy(x.color);for(var E=0,_=w.length;E<_;E++)b=w[E],y.vertexColors.push(b.clone());y.materialIndex=x.materialIndex+r,s.push(y)}for(f=0,p=c.length;f<p;f++){var T=c[f],A=[];if(void 0!==T){for(var E=0,_=T.length;E<_;E++)A.push(T[E].clone());l.push(A)}}},mergeMesh:function(e){if(!1===(e&&e.isMesh))return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e,t,r,i,n,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(r=0,i=this.vertices.length;r<i;r++)e=this.vertices[r],t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h),void 0===u[t]?(u[t]=r,l.push(this.vertices[r]),c[r]=l.length-1):c[r]=c[u[t]];var d=[];for(r=0,i=this.faces.length;r<i;r++){n=this.faces[r],n.a=c[n.a],n.b=c[n.b],n.c=c[n.c],o=[n.a,n.b,n.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){d.push(r);break}}for(r=d.length-1;r>=0;r--){var p=d[r];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},sortFacesByMaterialIndex:function(){function materialIndexSort(e,t){return e.materialIndex-t.materialIndex}for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(materialIndexSort);var i,n,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(i=[]),a&&a.length===t&&(n=[]);for(var r=0;r<t;r++){var s=e[r]._id;i&&i.push(o[s]),n&&n.push(a[s])}i&&(this.faceVertexUvs[0]=i),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){function setBit(e,t,r){return r?e|1<<t:e&~(1<<t)}function getNormalIndex(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=s.length/3,s.push(e.x,e.y,e.z),u[t])}function getColorIndex(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=l.length,l.push(e.getHex()),c[t])}function getUvIndex(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var i=[],n=0;n<this.vertices.length;n++){var o=this.vertices[n];i.push(o.x,o.y,o.z)}for(var a=[],s=[],u={},l=[],c={},h=[],d={},n=0;n<this.faces.length;n++){var f=this.faces[n],p=void 0!==this.faceVertexUvs[0][n],m=f.normal.length()>0,g=f.vertexNormals.length>0,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,v=f.vertexColors.length>0,b=0;if(b=setBit(b,0,0),b=setBit(b,1,!0),b=setBit(b,2,!1),b=setBit(b,3,p),b=setBit(b,4,m),b=setBit(b,5,g),b=setBit(b,6,y),b=setBit(b,7,v),a.push(b),a.push(f.a,f.b,f.c),a.push(f.materialIndex),p){var x=this.faceVertexUvs[0][n];a.push(getUvIndex(x[0]),getUvIndex(x[1]),getUvIndex(x[2]))}if(m&&a.push(getNormalIndex(f.normal)),g){var M=f.vertexNormals;a.push(getNormalIndex(M[0]),getNormalIndex(M[1]),getNormalIndex(M[2]))}if(y&&a.push(getColorIndex(f.color)),v){var w=f.vertexColors;a.push(getColorIndex(w[0]),getColorIndex(w[1]),getColorIndex(w[2]))}}return e.data={},e.data.vertices=i,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Geometry).copy(this)},copy:function(e){var t,r,i,n,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,r=u.length;t<r;t++)this.colors.push(u[t].clone());var l=e.faces;for(t=0,r=l.length;t<r;t++)this.faces.push(l[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,n=c.length;i<n;i++){var h=c[i],d=[];for(o=0,a=h.length;o<a;o++){var f=h[o];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,r=p.length;t<r;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],i=0,n=p[t].vertices.length;i<n;i++)m.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(m.normals=[],i=0,n=p[t].normals.length;i<n;i++)m.normals.push(p[t].normals[i].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,r=g.length;t<r;t++){var y={};if(void 0!==g[t].vertexNormals)for(y.vertexNormals=[],i=0,n=g[t].vertexNormals.length;i<n;i++){var v=g[t].vertexNormals[i],b={};b.a=v.a.clone(),b.b=v.b.clone(),b.c=v.c.clone(),y.vertexNormals.push(b)}if(void 0!==g[t].faceNormals)for(y.faceNormals=[],i=0,n=g[t].faceNormals.length;i<n;i++)y.faceNormals.push(g[t].faceNormals[i].clone());this.morphNormals.push(y)}var x=e.skinWeights;for(t=0,r=x.length;t<r;t++)this.skinWeights.push(x[t].clone());var M=e.skinIndices;for(t=0,r=M.length;t<r;t++)this.skinIndices.push(M[t].clone());var w=e.lineDistances;for(t=0,r=w.length;t<r;t++)this.lineDistances.push(w[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var _=e.boundingSphere;return null!==_&&(this.boundingSphere=_.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Geometry.prototype,EventDispatcher.prototype),BufferGeometry.prototype={constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(arrayMax(e)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e},addAttribute:function(e,t){return!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new BufferAttribute(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){(new Matrix3).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new Matrix4),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new Matrix4),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new Matrix4),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,i){return void 0===e&&(e=new Matrix4),e.makeTranslation(t,r,i),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,i){return void 0===e&&(e=new Matrix4),e.makeScale(t,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new Object3D),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new Float32BufferAttribute(3*t.vertices.length,3),i=new Float32BufferAttribute(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new Float32BufferAttribute(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var r=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(r=void 0,t.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate,r.normalsNeedUpdate=t.normalsNeedUpdate,r.colorsNeedUpdate=t.colorsNeedUpdate,r.uvsNeedUpdate=t.uvsNeedUpdate,r.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=r}var i;return!0===t.verticesNeedUpdate&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new DirectGeometry).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new BufferAttribute(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new BufferAttribute(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new BufferAttribute(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var n=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new BufferAttribute(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new BufferAttribute(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var a=arrayMax(e.indices)>65535?Uint32Array:Uint16Array,s=new a(3*e.indices.length);this.setIndex(new BufferAttribute(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var u in e.morphTargets){for(var l=[],c=e.morphTargets[u],h=0,d=c.length;h<d;h++){var f=c[h],p=new Float32BufferAttribute(3*f.length,3);l.push(p.copyVector3sArray(f))}this.morphAttributes[u]=l}if(e.skinIndices.length>0){var m=new Float32BufferAttribute(4*e.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var g=new Float32BufferAttribute(4*e.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Box3,t=new Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);var r=this.attributes.position;if(r){var i=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(i);for(var n=0,o=0,a=r.count;o<a;o++)t.x=r.getX(o),t.y=r.getY(o),t.z=r.getZ(o),n=Math.max(n,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new BufferAttribute(new Float32Array(i.length),3));else for(var n=t.normal.array,o=0,a=n.length;o<a;o++)n[o]=0;var s,u,l,c=t.normal.array,h=new Vector3,d=new Vector3,f=new Vector3,p=new Vector3,m=new Vector3;if(e){var g=e.array;0===r.length&&this.addGroup(0,g.length);for(var y=0,v=r.length;y<v;++y)for(var b=r[y],x=b.start,M=b.count,o=x,a=x+M;o<a;o+=3)s=3*g[o+0],u=3*g[o+1],l=3*g[o+2],h.fromArray(i,s),d.fromArray(i,u),f.fromArray(i,l),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}else for(var o=0,a=i.length;o<a;o+=9)h.fromArray(i,o),d.fromArray(i,o+3),f.fromArray(i,o+6),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),c[o]=p.x,c[o+1]=p.y,c[o+2]=p.z,c[o+3]=p.x,c[o+4]=p.y,c[o+5]=p.z,c[o+6]=p.x,c[o+7]=p.y,c[o+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!1===(e&&e.isBufferGeometry))return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var r=this.attributes;for(var i in r)if(void 0!==e.attributes[i])for(var n=r[i],o=n.array,a=e.attributes[i],s=a.array,u=a.itemSize,l=0,c=u*t;l<s.length;l++,c++)o[c]=s[l];return this},normalizeNormals:function(){for(var e,t,r,i,n=this.attributes.normal.array,o=0,a=n.length;o<a;o+=3)e=n[o],t=n[o+1],r=n[o+2],i=1/Math.sqrt(e*e+t*t+r*r),n[o]*=i,n[o+1]*=i,n[o+2]*=i},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new BufferGeometry,t=this.index.array,r=this.attributes;for(var i in r){for(var n=r[i],o=n.array,a=n.itemSize,s=new o.constructor(t.length*a),u=0,l=0,c=0,h=t.length;c<h;c++){u=t[c]*a;for(var d=0;d<a;d++)s[l++]=o[u++]}e.addAttribute(i,new BufferAttribute(s,a))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var n=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:n}}var o=this.attributes;for(var r in o){var a=o[r],n=Array.prototype.slice.call(a.array);e.data.attributes[r]={itemSize:a.itemSize,type:a.array.constructor.name,array:n,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new BufferGeometry).copy(this)},copy:function(e){var t,r,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var u=[],l=s[t];for(r=0,i=l.length;r<i;r++)u.push(l[r].clone());this.morphAttributes[t]=u}var c=e.groups;for(r=0,i=c.length;r<i;r++){var h=c[r];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},BufferGeometry.MaxIndex=65535,Object.assign(BufferGeometry.prototype,EventDispatcher.prototype),Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Object3D.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,r=e.length;t<r;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){function uvIntersection(e,t,r,i,n,o,a){return Triangle.barycoordFromPoint(e,t,r,i,p),n.multiplyScalar(p.x),o.multiplyScalar(p.y),a.multiplyScalar(p.z),n.add(o).add(a),n.clone()}function checkIntersection(e,t,r,i,n,o,a){var s=e.material;if(null===(s.side===c?r.intersectTriangle(o,n,i,!0,a):r.intersectTriangle(i,n,o,s.side!==h,a)))return null;g.copy(a),g.applyMatrix4(e.matrixWorld);var u=t.ray.origin.distanceTo(g);return u<t.near||u>t.far?null:{distance:u,point:g.clone(),object:e}}function checkBufferGeometryIntersection(e,t,r,a,s,u,c,h){i.fromBufferAttribute(a,u),n.fromBufferAttribute(a,c),o.fromBufferAttribute(a,h);var p=checkIntersection(e,t,r,i,n,o,m);return p&&(s&&(l.fromBufferAttribute(s,u),d.fromBufferAttribute(s,c),f.fromBufferAttribute(s,h),p.uv=uvIntersection(m,i,n,o,l,d,f)),p.face=new Face3(u,c,h,Triangle.normal(i,n,o)),p.faceIndex=u),p}var e=new Matrix4,t=new Ray,r=new Sphere,i=new Vector3,n=new Vector3,o=new Vector3,a=new Vector3,s=new Vector3,u=new Vector3,l=new Vector2,d=new Vector2,f=new Vector2,p=new Vector3,m=new Vector3,g=new Vector3;return function(c,h){var p=this.geometry,g=this.material,y=this.matrixWorld;if(void 0!==g&&(null===p.boundingSphere&&p.computeBoundingSphere(),r.copy(p.boundingSphere),r.applyMatrix4(y),!1!==c.ray.intersectsSphere(r)&&(e.getInverse(y),t.copy(c.ray).applyMatrix4(e),null===p.boundingBox||!1!==t.intersectsBox(p.boundingBox)))){var v;if(p.isBufferGeometry){var b,x,M,w,E,_=p.index,T=p.attributes.position,A=p.attributes.uv;if(null!==_)for(w=0,E=_.count;w<E;w+=3)b=_.getX(w),x=_.getX(w+1),M=_.getX(w+2),(v=checkBufferGeometryIntersection(this,c,t,T,A,b,x,M))&&(v.faceIndex=Math.floor(w/3),h.push(v));else for(w=0,E=T.count;w<E;w+=3)b=w,x=w+1,M=w+2,(v=checkBufferGeometryIntersection(this,c,t,T,A,b,x,M))&&(v.index=b,h.push(v))}else if(p.isGeometry){var S,C,L,D,I=g&&g.isMultiMaterial,N=!0===I?g.materials:null,O=p.vertices,R=p.faces,j=p.faceVertexUvs[0];j.length>0&&(D=j);for(var P=0,k=R.length;P<k;P++){var B=R[P],z=!0===I?N[B.materialIndex]:g;if(void 0!==z){if(S=O[B.a],C=O[B.b],L=O[B.c],!0===z.morphTargets){var U=p.morphTargets,F=this.morphTargetInfluences;i.set(0,0,0),n.set(0,0,0),o.set(0,0,0);for(var G=0,V=U.length;G<V;G++){var H=F[G];if(0!==H){var W=U[G].vertices;i.addScaledVector(a.subVectors(W[B.a],S),H),n.addScaledVector(s.subVectors(W[B.b],C),H),o.addScaledVector(u.subVectors(W[B.c],L),H)}}i.add(S),n.add(C),o.add(L),S=i,C=n,L=o}if(v=checkIntersection(this,c,t,S,C,L,m)){if(D){var Y=D[P];l.copy(Y[0]),d.copy(Y[1]),f.copy(Y[2]),v.uv=uvIntersection(m,S,C,L,l,d,f)}v.face=B,v.faceIndex=P,h.push(v)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),BoxGeometry.prototype=Object.create(Geometry.prototype),BoxGeometry.prototype.constructor=BoxGeometry,BoxBufferGeometry.prototype=Object.create(BufferGeometry.prototype),BoxBufferGeometry.prototype.constructor=BoxBufferGeometry,PlaneGeometry.prototype=Object.create(Geometry.prototype),PlaneGeometry.prototype.constructor=PlaneGeometry,PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry,Camera.prototype=Object.create(Object3D.prototype),Camera.prototype.constructor=Camera,Camera.prototype.isCamera=!0,Camera.prototype.getWorldDirection=function(){var e=new Quaternion;return function(t){var r=t||new Vector3;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),Camera.prototype.lookAt=function(){var e=new Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),Camera.prototype.clone=function(){return(new this.constructor).copy(this)},Camera.prototype.copy=function(e){return Object3D.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(e){return Camera.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*st.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*st.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*st.RAD2DEG*Math.atan(Math.tan(.5*st.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,i,n,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:i,width:n,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*st.DEG2RAD*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,o=this.view;if(null!==o){var a=o.fullWidth,s=o.fullHeight;n+=o.offsetX*i/a,t-=o.offsetY*r/s,i*=o.width/a,r*=o.height/s}var u=this.filmOffset;0!==u&&(n+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(e){return Camera.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,i,n,o){this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:i,width:n,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,o=r+e,a=i+t,s=i-t;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;n+=c*(this.view.offsetX/u),o=n+c*(this.view.width/u),a-=h*(this.view.offsetY/l),s=a-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(n,o,a,s,this.near,this.far)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var wt=0;FogExp2.prototype.isFogExp2=!0,FogExp2.prototype.clone=function(){return new FogExp2(this.color.getHex(),this.density)},FogExp2.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Fog.prototype.isFog=!0,Fog.prototype.clone=function(){return new Fog(this.color.getHex(),this.near,this.far)},Fog.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Scene.prototype=Object.create(Object3D.prototype),Scene.prototype.constructor=Scene,Scene.prototype.copy=function(e,t){return Object3D.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},Scene.prototype.toJSON=function(e){var t=Object3D.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},LensFlare.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LensFlare,isLensFlare:!0,copy:function(e){Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,r=e.lensFlares.length;t<r;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,r,i,n,o){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===o&&(o=1),void 0===n&&(n=new Color(16777215)),void 0===i&&(i=b),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:n,blending:i})},updateLensFlares:function(){var e,t,r=this.lensFlares.length,i=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;e<r;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+i*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),SpriteMaterial.prototype=Object.create(Material.prototype),SpriteMaterial.prototype.constructor=SpriteMaterial,SpriteMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(){var e=new Vector3;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.distanceSqToPoint(e);i>this.scale.x*this.scale.y/4||r.push({distance:Math.sqrt(i),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,copy:function(e){Object3D.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var n=t[r];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,i=0;i<r.length&&!(t<r[i].distance);i++);r.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new Vector3;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,r)}}(),update:function(){var e=new Vector3,t=new Vector3;return function(r){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=e.distanceTo(t);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&n>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,i=0,n=r.length;i<n;i++){var o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Matrix4;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){for(var e,t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new Matrix4;return function(){for(var t=0,r=this.bones.length;t<r;t++){var i=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(i,this.boneInverses[t]),e.toArray(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}}),Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0}),SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],r=1/t.lengthManhattan();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var i=new Vector4,n=this.geometry.attributes.skinWeight,e=0;e<n.count;e++){i.x=n.getX(e),i.y=n.getY(e),i.z=n.getZ(e),i.w=n.getW(e);var r=1/i.lengthManhattan();r!==1/0?i.multiplyScalar(r):i.set(1,0,0,0),n.setXYZW(e,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),LineBasicMaterial.prototype=Object.create(Material.prototype),LineBasicMaterial.prototype.constructor=LineBasicMaterial,LineBasicMaterial.prototype.isLineBasicMaterial=!0,LineBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,raycast:function(){var e=new Matrix4,t=new Ray,r=new Sphere;return function(i,n){var o=i.linePrecision,a=o*o,s=this.geometry,u=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(u),!1!==i.ray.intersectsSphere(r)){e.getInverse(u),t.copy(i.ray).applyMatrix4(e);var l=new Vector3,c=new Vector3,h=new Vector3,d=new Vector3,f=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,m=s.attributes,g=m.position.array;if(null!==p)for(var y=p.array,v=0,b=y.length-1;v<b;v+=f){var x=y[v],M=y[v+1];l.fromArray(g,3*x),c.fromArray(g,3*M);var w=t.distanceSqToSegment(l,c,d,h);if(!(w>a)){d.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(d);E<i.near||E>i.far||n.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var v=0,b=g.length/3-1;v<b;v+=f){l.fromArray(g,3*v),c.fromArray(g,3*v+3);var w=t.distanceSqToSegment(l,c,d,h);if(!(w>a)){d.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(d);E<i.near||E>i.far||n.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry)for(var _=s.vertices,T=_.length,v=0;v<T-1;v+=f){var w=t.distanceSqToSegment(_[v],_[v+1],d,h);if(!(w>a)){d.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(d);E<i.near||E>i.far||n.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0}),PointsMaterial.prototype=Object.create(Material.prototype),PointsMaterial.prototype.constructor=PointsMaterial,PointsMaterial.prototype.isPointsMaterial=!0,PointsMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(){var e=new Matrix4,t=new Ray,r=new Sphere;return function(i,n){function testPoint(e,r){var a=t.distanceSqToPoint(e);if(a<c){var u=t.closestPointToPoint(e);u.applyMatrix4(s);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;n.push({distance:l,distanceToRay:Math.sqrt(a),point:u.clone(),index:r,face:null,object:o})}}var o=this,a=this.geometry,s=this.matrixWorld,u=i.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(s),!1!==i.ray.intersectsSphere(r)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new Vector3;if(a.isBufferGeometry){var d=a.index,f=a.attributes,p=f.position.array;if(null!==d)for(var m=d.array,g=0,y=m.length;g<y;g++){var v=m[g];h.fromArray(p,3*v),testPoint(h,v)}else for(var g=0,b=p.length/3;g<b;g++)h.fromArray(p,3*g),testPoint(h,g)}else for(var x=a.vertices,g=0,b=x.length;g<b;g++)testPoint(x[g],g)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group}),VideoTexture.prototype=Object.create(Texture.prototype),VideoTexture.prototype.constructor=VideoTexture,CompressedTexture.prototype=Object.create(Texture.prototype),CompressedTexture.prototype.constructor=CompressedTexture,CompressedTexture.prototype.isCompressedTexture=!0,CanvasTexture.prototype=Object.create(Texture.prototype),CanvasTexture.prototype.constructor=CanvasTexture,DepthTexture.prototype=Object.create(Texture.prototype),DepthTexture.prototype.constructor=DepthTexture,DepthTexture.prototype.isDepthTexture=!0,WireframeGeometry.prototype=Object.create(BufferGeometry.prototype),WireframeGeometry.prototype.constructor=WireframeGeometry,ParametricGeometry.prototype=Object.create(Geometry.prototype),ParametricGeometry.prototype.constructor=ParametricGeometry,ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry,PolyhedronGeometry.prototype=Object.create(Geometry.prototype),PolyhedronGeometry.prototype.constructor=PolyhedronGeometry,PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry,TetrahedronGeometry.prototype=Object.create(Geometry.prototype),TetrahedronGeometry.prototype.constructor=TetrahedronGeometry,TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry,OctahedronGeometry.prototype=Object.create(Geometry.prototype),OctahedronGeometry.prototype.constructor=OctahedronGeometry,OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry,IcosahedronGeometry.prototype=Object.create(Geometry.prototype),IcosahedronGeometry.prototype.constructor=IcosahedronGeometry,IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry,DodecahedronGeometry.prototype=Object.create(Geometry.prototype),DodecahedronGeometry.prototype.constructor=DodecahedronGeometry,DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry,TubeGeometry.prototype=Object.create(Geometry.prototype),TubeGeometry.prototype.constructor=TubeGeometry,TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TubeBufferGeometry.prototype.constructor=TubeBufferGeometry,TorusKnotGeometry.prototype=Object.create(Geometry.prototype),TorusKnotGeometry.prototype.constructor=TorusKnotGeometry,TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry,TorusGeometry.prototype=Object.create(Geometry.prototype),TorusGeometry.prototype.constructor=TorusGeometry,TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Et={area:function(e){for(var t=e.length,r=0,i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return.5*r},triangulate:function(){function snip(e,t,r,i,n,o){var a,s,u,l,c,h,d,f,p;if(s=e[o[t]].x,u=e[o[t]].y,l=e[o[r]].x,c=e[o[r]].y,h=e[o[i]].x,d=e[o[i]].y,(l-s)*(d-u)-(c-u)*(h-s)<=0)return!1;var m,g,y,v,b,x,M,w,E,_,T,A,S,C,L;for(m=h-l,g=d-c,y=s-h,v=u-d,b=l-s,x=c-u,a=0;a<n;a++)if(f=e[o[a]].x,p=e[o[a]].y,!(f===s&&p===u||f===l&&p===c||f===h&&p===d)&&(M=f-s,w=p-u,E=f-l,_=p-c,T=f-h,A=p-d,L=m*_-g*E,S=b*w-x*M,C=y*A-v*T,L>=-Number.EPSILON&&C>=-Number.EPSILON&&S>=-Number.EPSILON))return!1;return!0}return function(e,t){var r=e.length;if(r<3)return null;var i,n,o,a=[],s=[],u=[];if(Et.area(e)>0)for(n=0;n<r;n++)s[n]=n;else for(n=0;n<r;n++)s[n]=r-1-n;var l=r,c=2*l;for(n=l-1;l>2;){if(c--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),t?u:a;if(i=n,l<=i&&(i=0),n=i+1,l<=n&&(n=0),o=n+1,l<=o&&(o=0),snip(e,i,n,o,l,s)){var h,d,f,p,m;for(h=s[i],d=s[n],f=s[o],a.push([e[h],e[d],e[f]]),u.push([s[i],s[n],s[o]]),p=n,m=n+1;m<l;p++,m++)s[p]=s[m];l--,c=2*l}}return t?u:a}}(),triangulateShape:function(e,t){function removeDupEndPts(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function point_in_segment_2D_colin(e,t,r){return e.x!==t.x?e.x<t.x?e.x<=r.x&&r.x<=t.x:t.x<=r.x&&r.x<=e.x:e.y<t.y?e.y<=r.y&&r.y<=t.y:t.y<=r.y&&r.y<=e.y}function intersect_segments_2D(e,t,r,i,n){var o=t.x-e.x,a=t.y-e.y,s=i.x-r.x,u=i.y-r.y,l=e.x-r.x,c=e.y-r.y,h=a*s-o*u,d=a*l-o*c;if(Math.abs(h)>Number.EPSILON){var f;if(h>0){if(d<0||d>h)return[];if((f=u*l-s*c)<0||f>h)return[]}else{if(d>0||d<h)return[];if((f=u*l-s*c)>0||f<h)return[]}if(0===f)return!n||0!==d&&d!==h?[e]:[];if(f===h)return!n||0!==d&&d!==h?[t]:[];if(0===d)return[r];if(d===h)return[i];var p=f/h;return[{x:e.x+p*o,y:e.y+p*a}]}if(0!==d||u*l!=s*c)return[];var m=0===o&&0===a,g=0===s&&0===u;if(m&&g)return e.x!==r.x||e.y!==r.y?[]:[e];if(m)return point_in_segment_2D_colin(r,i,e)?[e]:[];if(g)return point_in_segment_2D_colin(e,t,r)?[r]:[];var y,v,b,x,M,w,E,_;return 0!==o?(e.x<t.x?(y=e,b=e.x,v=t,x=t.x):(y=t,b=t.x,v=e,x=e.x),r.x<i.x?(M=r,E=r.x,w=i,_=i.x):(M=i,E=i.x,w=r,_=r.x)):(e.y<t.y?(y=e,b=e.y,v=t,x=t.y):(y=t,b=t.y,v=e,x=e.y),r.y<i.y?(M=r,E=r.y,w=i,_=i.y):(M=i,E=i.y,w=r,_=r.y)),b<=E?x<E?[]:x===E?n?[]:[M]:x<=_?[M,v]:[M,w]:b>_?[]:b===_?n?[]:[y]:x<=_?[y,v]:[y,w]}function isPointInsideAngle(e,t,r,i){var n=t.x-e.x,o=t.y-e.y,a=r.x-e.x,s=r.y-e.y,u=i.x-e.x,l=i.y-e.y,c=n*s-o*a,h=n*l-o*u;if(Math.abs(c)>Number.EPSILON){var d=u*s-l*a;return c>0?h>=0&&d>=0:h>=0||d>=0}return h>0}removeDupEndPts(e),t.forEach(removeDupEndPts);for(var r,i,n,o,a,s,u={},l=e.concat(),c=0,h=t.length;c<h;c++)Array.prototype.push.apply(l,t[c]);for(r=0,i=l.length;r<i;r++)a=l[r].x+":"+l[r].y,void 0!==u[a]&&console.warn("THREE.ShapeUtils: Duplicate point",a,r),u[a]=r;var d=function(e,t){for(var r,i,n,o,a,s,u,l,c,h,d,f=e.concat(),p=[],m=[],g=0,y=t.length;g<y;g++)p.push(g);for(var v=0,b=2*p.length;p.length>0;){if(--b<0){console.log("Infinite Loop! Holes left:"+p.length+", Probably Hole outside Shape!");break}for(n=v;n<f.length;n++){o=f[n],i=-1;for(var g=0;g<p.length;g++)if(s=p[g],u=o.x+":"+o.y+":"+s,void 0===m[u]){r=t[s];for(var x=0;x<r.length;x++)if(a=r[x],function(e,t){var i=f.length-1,n=e-1;n<0&&(n=i);var o=e+1;o>i&&(o=0);var a=isPointInsideAngle(f[e],f[n],f[o],r[t]);if(!a)return!1;var s=r.length-1,u=t-1;u<0&&(u=s);var l=t+1;return l>s&&(l=0),!!(a=isPointInsideAngle(r[t],r[u],r[l],f[e]))}(n,x)&&!function(e,t){var r,i,n;for(r=0;r<f.length;r++)if(i=r+1,i%=f.length,n=intersect_segments_2D(e,t,f[r],f[i],!0),n.length>0)return!0;return!1}(o,a)&&!function(e,r){var i,n,o,a,s;for(i=0;i<p.length;i++)for(n=t[p[i]],o=0;o<n.length;o++)if(a=o+1,a%=n.length,s=intersect_segments_2D(e,r,n[o],n[a],!0),s.length>0)return!0;return!1}(o,a)){i=x,p.splice(g,1),l=f.slice(0,n+1),c=f.slice(n),h=r.slice(i),d=r.slice(0,i+1),f=l.concat(h).concat(d).concat(c),v=n;break}if(i>=0)break;m[u]=!0}if(i>=0)break}}return f}(e,t),f=Et.triangulate(d,!1);for(r=0,i=f.length;r<i;r++)for(o=f[r],n=0;n<3;n++)a=o[n].x+":"+o[n].y,void 0!==(s=u[a])&&(o[n]=s);return f.concat()},isClockWise:function(e){return Et.area(e)<0}};ExtrudeGeometry.prototype=Object.create(Geometry.prototype),ExtrudeGeometry.prototype.constructor=ExtrudeGeometry,ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var r=e.length,i=0;i<r;i++){var n=e[i];this.addShape(n,t)}},ExtrudeGeometry.prototype.addShape=function(e,t){function scalePt2(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}function getBevelVec(e,t,r){var i,n,o=1,a=e.x-t.x,s=e.y-t.y,u=r.x-e.x,l=r.y-e.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),f=Math.sqrt(u*u+l*l),p=t.x-s/d,m=t.y+a/d,g=r.x-l/f,y=r.y+u/f,v=((g-p)*l-(y-m)*u)/(a*l-s*u);i=p+a*v-e.x,n=m+s*v-e.y;var b=i*i+n*n;if(b<=2)return new Vector2(i,n);o=Math.sqrt(b/2)}else{var x=!1;a>Number.EPSILON?u>Number.EPSILON&&(x=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(l)&&(x=!0),x?(i=-s,n=a,o=Math.sqrt(c)):(i=a,n=s,o=Math.sqrt(c/2))}return new Vector2(i/o,n/o)}function sidewalls(e,t){var r,i;for(B=e.length;--B>=0;){r=B,i=B-1,i<0&&(i=e.length-1);var n=0,o=f+2*c;for(n=0;n<o;n++){var a=j*n,s=j*(n+1);f4(t+r+a,t+i+a,t+i+s,t+r+s,e,n,o,r,i)}}}function v(e,t,r){M.vertices.push(new Vector3(e,t,r))}function f3(e,t,r){e+=w,t+=w,r+=w,M.faces.push(new Face3(e,t,r,null,null,0));var i=g.generateTopUV(M,e,t,r);M.faceVertexUvs[0].push(i)}function f4(e,t,r,i,n,o,a,s,u){e+=w,t+=w,r+=w,i+=w,M.faces.push(new Face3(e,t,i,null,null,1)),M.faces.push(new Face3(t,r,i,null,null,1));var l=g.generateSideWallUV(M,e,t,r,i);M.faceVertexUvs[0].push([l[0],l[1],l[3]]),M.faceVertexUvs[0].push([l[1],l[2],l[3]])}var r,i,n,o,a,s=void 0!==t.amount?t.amount:100,u=void 0!==t.bevelThickness?t.bevelThickness:6,l=void 0!==t.bevelSize?t.bevelSize:u-2,c=void 0!==t.bevelSegments?t.bevelSegments:3,h=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.curveSegments?t.curveSegments:12,f=void 0!==t.steps?t.steps:1,p=t.extrudePath,m=!1,g=void 0!==t.UVGenerator?t.UVGenerator:ExtrudeGeometry.WorldUVGenerator;p&&(r=p.getSpacedPoints(f),m=!0,h=!1,i=void 0!==t.frames?t.frames:p.computeFrenetFrames(f,!1),n=new Vector3,o=new Vector3,a=new Vector3),h||(c=0,u=0,l=0);var y,b,x,M=this,w=this.vertices.length,E=e.extractPoints(d),_=E.shape,T=E.holes,A=!Et.isClockWise(_);if(A){for(_=_.reverse(),b=0,x=T.length;b<x;b++)y=T[b],Et.isClockWise(y)&&(T[b]=y.reverse());A=!1}var S=Et.triangulateShape(_,T),C=_;for(b=0,x=T.length;b<x;b++)y=T[b],_=_.concat(y);for(var L,D,I,N,O,R,j=_.length,P=S.length,k=[],B=0,z=C.length,U=z-1,F=B+1;B<z;B++,U++,F++)U===z&&(U=0),F===z&&(F=0),k[B]=getBevelVec(C[B],C[U],C[F]);var G,V=[],H=k.concat();for(b=0,x=T.length;b<x;b++){for(y=T[b],G=[],B=0,z=y.length,U=z-1,F=B+1;B<z;B++,U++,F++)U===z&&(U=0),F===z&&(F=0),G[B]=getBevelVec(y[B],y[U],y[F]);V.push(G),H=H.concat(G)}for(L=0;L<c;L++){for(I=L/c,N=u*Math.cos(I*Math.PI/2),D=l*Math.sin(I*Math.PI/2),B=0,z=C.length;B<z;B++)O=scalePt2(C[B],k[B],D),v(O.x,O.y,-N);for(b=0,x=T.length;b<x;b++)for(y=T[b],G=V[b],B=0,z=y.length;B<z;B++)O=scalePt2(y[B],G[B],D),v(O.x,O.y,-N)}for(D=l,B=0;B<j;B++)O=h?scalePt2(_[B],H[B],D):_[B],m?(o.copy(i.normals[0]).multiplyScalar(O.x),n.copy(i.binormals[0]).multiplyScalar(O.y),a.copy(r[0]).add(o).add(n),v(a.x,a.y,a.z)):v(O.x,O.y,0);var W;for(W=1;W<=f;W++)for(B=0;B<j;B++)O=h?scalePt2(_[B],H[B],D):_[B],m?(o.copy(i.normals[W]).multiplyScalar(O.x),n.copy(i.binormals[W]).multiplyScalar(O.y),a.copy(r[W]).add(o).add(n),v(a.x,a.y,a.z)):v(O.x,O.y,s/f*W);for(L=c-1;L>=0;L--){for(I=L/c,N=u*Math.cos(I*Math.PI/2),D=l*Math.sin(I*Math.PI/2),B=0,z=C.length;B<z;B++)O=scalePt2(C[B],k[B],D),v(O.x,O.y,s+N);for(b=0,x=T.length;b<x;b++)for(y=T[b],G=V[b],B=0,z=y.length;B<z;B++)O=scalePt2(y[B],G[B],D),m?v(O.x,O.y+r[f-1].y,r[f-1].x+N):v(O.x,O.y,s+N)}!function(){if(h){var e=0,t=j*e;for(B=0;B<P;B++)R=S[B],f3(R[2]+t,R[1]+t,R[0]+t);for(e=f+2*c,t=j*e,B=0;B<P;B++)R=S[B],f3(R[0]+t,R[1]+t,R[2]+t)}else{for(B=0;B<P;B++)R=S[B],f3(R[2],R[1],R[0]);for(B=0;B<P;B++)R=S[B],f3(R[0]+j*f,R[1]+j*f,R[2]+j*f)}}(),function(){var e=0;for(sidewalls(C,e),e+=C.length,b=0,x=T.length;b<x;b++)y=T[b],sidewalls(y,e),e+=y.length}()},ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,r,i){var n=e.vertices,o=n[t],a=n[r],s=n[i];return[new Vector2(o.x,o.y),new Vector2(a.x,a.y),new Vector2(s.x,s.y)]},generateSideWallUV:function(e,t,r,i,n){var o=e.vertices,a=o[t],s=o[r],u=o[i],l=o[n];return Math.abs(a.y-s.y)<.01?[new Vector2(a.x,1-a.z),new Vector2(s.x,1-s.z),new Vector2(u.x,1-u.z),new Vector2(l.x,1-l.z)]:[new Vector2(a.y,1-a.z),new Vector2(s.y,1-s.z),new Vector2(u.y,1-u.z),new Vector2(l.y,1-l.z)]}},TextGeometry.prototype=Object.create(ExtrudeGeometry.prototype),TextGeometry.prototype.constructor=TextGeometry,SphereGeometry.prototype=Object.create(Geometry.prototype),SphereGeometry.prototype.constructor=SphereGeometry,SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype),SphereBufferGeometry.prototype.constructor=SphereBufferGeometry,RingGeometry.prototype=Object.create(Geometry.prototype),RingGeometry.prototype.constructor=RingGeometry,RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype),RingBufferGeometry.prototype.constructor=RingBufferGeometry,LatheGeometry.prototype=Object.create(Geometry.prototype),LatheGeometry.prototype.constructor=LatheGeometry,LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype),LatheBufferGeometry.prototype.constructor=LatheBufferGeometry,ShapeGeometry.prototype=Object.create(Geometry.prototype),ShapeGeometry.prototype.constructor=ShapeGeometry,ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry,EdgesGeometry.prototype=Object.create(BufferGeometry.prototype),EdgesGeometry.prototype.constructor=EdgesGeometry,CylinderGeometry.prototype=Object.create(Geometry.prototype),CylinderGeometry.prototype.constructor=CylinderGeometry,CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry,ConeGeometry.prototype=Object.create(CylinderGeometry.prototype),ConeGeometry.prototype.constructor=ConeGeometry,ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype),ConeBufferGeometry.prototype.constructor=ConeBufferGeometry,CircleGeometry.prototype=Object.create(Geometry.prototype),CircleGeometry.prototype.constructor=CircleGeometry,CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var _t=Object.freeze({WireframeGeometry:WireframeGeometry,ParametricGeometry:ParametricGeometry,ParametricBufferGeometry:ParametricBufferGeometry,TetrahedronGeometry:TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronBufferGeometry,OctahedronGeometry:OctahedronGeometry,OctahedronBufferGeometry:OctahedronBufferGeometry,IcosahedronGeometry:IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronBufferGeometry,DodecahedronGeometry:DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronBufferGeometry,PolyhedronGeometry:PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronBufferGeometry,TubeGeometry:TubeGeometry,TubeBufferGeometry:TubeBufferGeometry,TorusKnotGeometry:TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotBufferGeometry,TorusGeometry:TorusGeometry,TorusBufferGeometry:TorusBufferGeometry,TextGeometry:TextGeometry,SphereGeometry:SphereGeometry,SphereBufferGeometry:SphereBufferGeometry,RingGeometry:RingGeometry,RingBufferGeometry:RingBufferGeometry,PlaneGeometry:PlaneGeometry,PlaneBufferGeometry:PlaneBufferGeometry,LatheGeometry:LatheGeometry,LatheBufferGeometry:LatheBufferGeometry,ShapeGeometry:ShapeGeometry,ShapeBufferGeometry:ShapeBufferGeometry,ExtrudeGeometry:ExtrudeGeometry,EdgesGeometry:EdgesGeometry,ConeGeometry:ConeGeometry,ConeBufferGeometry:ConeBufferGeometry,CylinderGeometry:CylinderGeometry,CylinderBufferGeometry:CylinderBufferGeometry,CircleGeometry:CircleGeometry,CircleBufferGeometry:CircleBufferGeometry,BoxGeometry:BoxGeometry,BoxBufferGeometry:BoxBufferGeometry});ShadowMaterial.prototype=Object.create(ShaderMaterial.prototype),ShadowMaterial.prototype.constructor=ShadowMaterial,ShadowMaterial.prototype.isShadowMaterial=!0,RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype),RawShaderMaterial.prototype.constructor=RawShaderMaterial,RawShaderMaterial.prototype.isRawShaderMaterial=!0,MultiMaterial.prototype={constructor:MultiMaterial,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},r=this.materials,i=0,n=r.length;i<n;i++){var o=r[i].toJSON(e);delete o.metadata,t.materials.push(o)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},MeshStandardMaterial.prototype=Object.create(Material.prototype),MeshStandardMaterial.prototype.constructor=MeshStandardMaterial,MeshStandardMaterial.prototype.isMeshStandardMaterial=!0,MeshStandardMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype),MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial,MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0,MeshPhysicalMaterial.prototype.copy=function(e){return MeshStandardMaterial.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},MeshPhongMaterial.prototype=Object.create(Material.prototype),MeshPhongMaterial.prototype.constructor=MeshPhongMaterial,MeshPhongMaterial.prototype.isMeshPhongMaterial=!0,MeshPhongMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshToonMaterial.prototype=Object.create(MeshPhongMaterial.prototype),MeshToonMaterial.prototype.constructor=MeshToonMaterial,MeshToonMaterial.prototype.isMeshToonMaterial=!0,MeshToonMaterial.prototype.copy=function(e){return MeshPhongMaterial.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},MeshNormalMaterial.prototype=Object.create(Material.prototype),MeshNormalMaterial.prototype.constructor=MeshNormalMaterial,MeshNormalMaterial.prototype.isMeshNormalMaterial=!0,MeshNormalMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshLambertMaterial.prototype=Object.create(Material.prototype),MeshLambertMaterial.prototype.constructor=MeshLambertMaterial,MeshLambertMaterial.prototype.isMeshLambertMaterial=!0,MeshLambertMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},LineDashedMaterial.prototype=Object.create(Material.prototype),LineDashedMaterial.prototype.constructor=LineDashedMaterial,LineDashedMaterial.prototype.isLineDashedMaterial=!0,LineDashedMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Tt=Object.freeze({ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MultiMaterial:MultiMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshBasicMaterial:MeshBasicMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material}),At={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},St=new LoadingManager;Object.assign(FileLoader.prototype,{load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var n=this,o=At.get(e);if(void 0!==o)return n.manager.itemStart(e),setTimeout(function(){t&&t(o),n.manager.itemEnd(e)},0),o;var a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);if(s){var u=s[1],l=!!s[2],c=s[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":h=new ArrayBuffer(c.length);for(var f=new Uint8Array(h),p=0;p<c.length;p++)f[p]=c.charCodeAt(p);"blob"===d&&(h=new Blob([h],{type:u}));break;case"document":var m=new DOMParser;h=m.parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c}window.setTimeout(function(){t&&t(h),n.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){i&&i(t),n.manager.itemError(e)},0)}}else{var g=new XMLHttpRequest;g.open("GET",e,!0),g.addEventListener("load",function(r){var o=r.target.response;At.add(e,o),200===this.status?(t&&t(o),n.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(o),n.manager.itemEnd(e)):(i&&i(r),n.manager.itemError(e))},!1),void 0!==r&&g.addEventListener("progress",function(e){r(e)},!1),g.addEventListener("error",function(t){i&&i(t),n.manager.itemError(e)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),g.send(null)}return n.manager.itemStart(e),g},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Object.assign(CompressedTextureLoader.prototype,{load:function(e,t,r,i){var n=this,o=[],a=new CompressedTexture;a.image=o;var s=new FileLoader(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,c=e.length;l<c;++l)!function(l){s.load(e[l],function(e){var r=n._parser(e,!0);o[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(u+=1)&&(1===r.mipmapCount&&(a.minFilter=me),a.format=r.format,a.needsUpdate=!0,t&&t(a))},r,i)}(l);else s.load(e,function(e){var r=n._parser(e,!0);if(r.isCubemap)for(var i=r.mipmaps.length/r.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var u=0;u<r.mipmapCount;u++)o[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+u]),o[s].format=r.format,o[s].width=r.width,o[s].height=r.height}else a.image.width=r.width,a.image.height=r.height,a.mipmaps=r.mipmaps;1===r.mipmapCount&&(a.minFilter=me),a.format=r.format,a.needsUpdate=!0,t&&t(a)},r,i);return a},setPath:function(e){return this.path=e,this}}),Object.assign(DataTextureLoader.prototype,{load:function(e,t,r,i){var n=this,o=new DataTexture,a=new FileLoader(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var r=n._parser(e);r&&(void 0!==r.image?o.image=r.image:void 0!==r.data&&(o.image.width=r.width,o.image.height=r.height,o.image.data=r.data),o.wrapS=void 0!==r.wrapS?r.wrapS:ce,o.wrapT=void 0!==r.wrapT?r.wrapT:ce,o.magFilter=void 0!==r.magFilter?r.magFilter:me,o.minFilter=void 0!==r.minFilter?r.minFilter:ye,o.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(o.format=r.format),void 0!==r.type&&(o.type=r.type),void 0!==r.mipmaps&&(o.mipmaps=r.mipmaps),1===r.mipmapCount&&(o.minFilter=me),o.needsUpdate=!0,t&&t(o,r))},r,i),o}}),Object.assign(ImageLoader.prototype,{load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var n=this,o=At.get(e);if(void 0!==o)return n.manager.itemStart(e),setTimeout(function(){t&&t(o),n.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){At.add(e,this),t&&t(this),n.manager.itemEnd(e)},!1),a.addEventListener("error",function(t){i&&i(t),n.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(CubeTextureLoader.prototype,{load:function(e,t,r,i){var n=new CubeTexture,o=new ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var a=0,s=0;s<e.length;++s)!function(r){o.load(e[r],function(e){n.images[r]=e,6==++a&&(n.needsUpdate=!0,t&&t(n))},void 0,i)}(s);return n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(TextureLoader.prototype,{load:function(e,t,r,i){var n=new Texture,o=new ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(r){var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);n.format=i?Ie:Ne,n.image=r,n.needsUpdate=!0,void 0!==t&&t(n)},r,i),n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(LightShadow.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,update:function(e){var t=2*st.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||500,n=this.camera;t===n.fov&&r===n.aspect&&i===n.far||(n.fov=t,n.aspect=r,n.far=i,n.updateProjectionMatrix())}}),SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow}),DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});var Ct={arraySlice:function(e,t,r){return Ct.isTypedArray(e)?new e.constructor(e.subarray(t,r)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function compareTime(t,r){return e[t]-e[r]}for(var t=e.length,r=new Array(t),i=0;i!==t;++i)r[i]=i;return r.sort(compareTime),r},sortedArray:function(e,t,r){for(var i=e.length,n=new e.constructor(i),o=0,a=0;a!==i;++o)for(var s=r[o]*t,u=0;u!==t;++u)n[a++]=e[s+u];return n},flattenJSON:function(e,t,r,i){for(var n=1,o=e[0];void 0!==o&&void 0===o[i];)o=e[n++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(t.push(o.time),r.push.apply(r,a)),o=e[n++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(t.push(o.time),a.toArray(r,r.length)),o=e[n++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(t.push(o.time),r.push(a)),o=e[n++]}while(void 0!==o)}}};Interpolant.prototype={constructor:Interpolant,evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{var o;r:{i:if(!(e<i)){for(var a=r+2;;){if(void 0===i){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,n)}if(r===a)break;if(n=i,i=t[++r],e<i)break t}o=t.length;break r}{if(e>=n)break e;var s=t[1];e<s&&(r=2,n=s);for(var a=r-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===a)break;if(i=n,n=t[--r-1],e>=n)break t}o=r,r=0}}for(;r<o;){var u=r+o>>>1;e<t[u]?o=u:r=u+1}if(i=t[r],void 0===(n=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,n,e)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i,o=0;o!==i;++o)t[o]=r[n+o];return t},interpolate_:function(e,t,r,i){throw new Error("call to abstract method")},intervalChanged_:function(e,t,r){}},Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_}),CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:qe,endingEnd:qe},intervalChanged_:function(e,t,r){var i=this.parameterPositions,n=e-2,o=e+1,a=i[n],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:n=e,a=2*t-r;break;case 2402:n=i.length-2,a=t+i[n]-i[n+1];break;default:n=e,a=r}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*r-t;break;case 2402:o=1,s=r+i[1]-i[0];break;default:o=e-1,s=t}var u=.5*(r-t),l=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-r),this._offsetPrev=n*l,this._offsetNext=o*l},interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(r-t)/(i-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,y=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p,x=0;x!==a;++x)n[x]=g*o[l+x]+y*o[u+x]+v*o[s+x]+b*o[c+x];return n}}),LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(r-t)/(i-t),c=1-l,h=0;h!==a;++h)n[h]=o[u+h]*c+o[s+h]*l;return n}}),DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(e,t,r,i){return this.copySampleValue_(e-1)}});var Lt;Lt={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(r)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,i=r.length,n=0,o=i-1;n!==i&&r[n]<e;)++n;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==n||o!==i){n>=o&&(o=Math.max(o,1),n=o-1);var a=this.getValueSize();this.times=Ct.arraySlice(r,n,o),this.values=Ct.arraySlice(this.values,n*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var r=this.times,i=this.values,n=r.length;0===n&&(console.error("track is empty",this),e=!1);for(var o=null,a=0;a!==n;a++){var s=r[a];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("out of order keys",this,a,s,o),e=!1;break}o=s}if(void 0!==i&&Ct.isTypedArray(i))for(var a=0,u=i.length;a!==u;++a){var l=i[a];if(isNaN(l)){console.error("value is not a valid number",this,a,l),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),i=2302===this.getInterpolation(),n=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(i)s=!0;else for(var l=a*r,c=l-r,h=l+r,d=0;d!==r;++d){var f=t[l+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(a!==n){e[n]=e[a];for(var p=a*r,m=n*r,d=0;d!==r;++d)t[m+d]=t[p+d]}++n}}if(o>0){e[n]=e[o];for(var p=o*r,m=n*r,d=0;d!==r;++d)t[m+d]=t[p+d];++n}return n!==e.length&&(this.times=Ct.arraySlice(e,0,n),this.values=Ct.arraySlice(t,0,n*r)),this}},VectorKeyframeTrack.prototype=Object.assign(Object.create(Lt),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"}),QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=(r-t)/(i-t),l=s+a;s!==l;s+=4)Quaternion.slerpFlat(n,0,o,s-a,o,s,u);return n}}),QuaternionKeyframeTrack.prototype=Object.assign(Object.create(Lt),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),NumberKeyframeTrack.prototype=Object.assign(Object.create(Lt),{constructor:NumberKeyframeTrack,ValueTypeName:"number"}),StringKeyframeTrack.prototype=Object.assign(Object.create(Lt),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),BooleanKeyframeTrack.prototype=Object.assign(Object.create(Lt),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ColorKeyframeTrack.prototype=Object.assign(Object.create(Lt),{constructor:ColorKeyframeTrack,ValueTypeName:"color"}),KeyframeTrack.prototype=Lt,Lt.constructor=KeyframeTrack,Object.assign(KeyframeTrack,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=KeyframeTrack._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],i=[];Ct.flattenJSON(e.keys,r,i,"value"),e.times=r,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Ct.convertArray(e.times,Array),values:Ct.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("Unsupported typeName: "+e)}}),AnimationClip.prototype={constructor:AnimationClip,resetDuration:function(){for(var e=this.tracks,t=0,r=0,i=e.length;r!==i;++r){var n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(AnimationClip,{parse:function(e){for(var t=[],r=e.tracks,i=1/(e.fps||1),n=0,o=r.length;n!==o;++n)t.push(KeyframeTrack.parse(r[n]).scale(i));return new AnimationClip(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t},n=0,o=r.length;n!==o;++n)t.push(KeyframeTrack.toJSON(r[n]));return i},CreateFromMorphTargetSequence:function(e,t,r,i){for(var n=t.length,o=[],a=0;a<n;a++){var s=[],u=[];s.push((a+n-1)%n,a,(a+1)%n),u.push(0,1,0);var l=Ct.getKeyframeOrder(s);s=Ct.sortedArray(s,1,l),u=Ct.sortedArray(u,1,l),i||0!==s[0]||(s.push(n),u.push(u[0])),o.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/r))}return new AnimationClip(e,-1,o)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var i=e;r=i.geometry&&i.geometry.animations||i.animations}for(var n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var i={},n=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(n);if(u&&u.length>1){var l=u[1],c=i[l];c||(i[l]=c=[]),c.push(s)}}var h=[];for(var l in i)h.push(AnimationClip.CreateFromMorphTargetSequence(l,i[l],t,r));return h},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var r=function(e,t,r,i,n){if(0!==r.length){var o=[],a=[];Ct.flattenJSON(r,o,a,i),0!==o.length&&n.push(new e(t,o,a))}},i=[],n=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)c[l[h].morphTargets[d]]=-1;for(var f in c){for(var p=[],m=[],d=0;d!==l[h].morphTargets.length;++d){var g=l[h];p.push(g.time),m.push(g.morphTarget===f?1:0)}i.push(new NumberKeyframeTrack(".morphTargetInfluence["+f+"]",p,m))}o=c.length*(a||1)}else{var y=".bones["+t[u].name+"]";r(VectorKeyframeTrack,y+".position",l,"pos",i),r(QuaternionKeyframeTrack,y+".quaternion",l,"rot",i),r(VectorKeyframeTrack,y+".scale",l,"scl",i)}}return 0===i.length?null:new AnimationClip(n,o,i)}}),Object.assign(MaterialLoader.prototype,{load:function(e,t,r,i){var n=this;new FileLoader(n.manager).load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},setTextures:function(e){this.textures=e},parse:function(e){function getTexture(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var t=this.textures,r=new Tt[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.shading&&(r.shading=e.shading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=getTexture(e.map)),void 0!==e.alphaMap&&(r.alphaMap=getTexture(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=getTexture(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=getTexture(e.normalMap)),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new Vector2).fromArray(i)}if(void 0!==e.displacementMap&&(r.displacementMap=getTexture(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=getTexture(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=getTexture(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=getTexture(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=getTexture(e.specularMap)),void 0!==e.envMap&&(r.envMap=getTexture(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=getTexture(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=getTexture(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=getTexture(e.gradientMap)),void 0!==e.materials)for(var n=0,o=e.materials.length;n<o;n++)r.materials.push(this.parse(e.materials[n]));return r}}),Object.assign(BufferGeometryLoader.prototype,{load:function(e,t,r,i){var n=this;new FileLoader(n.manager).load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},parse:function(e){var t=new BufferGeometry,r=e.data.index,i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==r){var n=new i[r.type](r.array);t.setIndex(new BufferAttribute(n,1))}var o=e.data.attributes;for(var a in o){var s=o[a],n=new i[s.type](s.array);t.addAttribute(a,new BufferAttribute(n,s.itemSize,s.normalized))}var u=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==u)for(var l=0,c=u.length;l!==c;++l){var h=u[l];t.addGroup(h.start,h.count,h.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new Vector3;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new Sphere(f,d.radius)}return t}}),Loader.prototype={constructor:Loader,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,r){for(var i=[],n=0;n<e.length;++n)i[n]=this.createMaterial(e[n],t,r);return i},createMaterial:function(){var e,t,r,i={NoBlending:y,NormalBlending:b,AdditiveBlending:x,SubtractiveBlending:M,MultiplyBlending:w,CustomBlending:E};return function(n,o,a){function loadTexture(e,r,i,n,u){var l,c=o+e,h=Loader.Handlers.get(c);null!==h?l=h.load(c):(t.setCrossOrigin(a),l=t.load(c)),void 0!==r&&(l.repeat.fromArray(r),1!==r[0]&&(l.wrapS=le),1!==r[1]&&(l.wrapT=le)),void 0!==i&&l.offset.fromArray(i),void 0!==n&&("repeat"===n[0]&&(l.wrapS=le),"mirror"===n[0]&&(l.wrapS=he),"repeat"===n[1]&&(l.wrapT=le),"mirror"===n[1]&&(l.wrapT=he)),void 0!==u&&(l.anisotropy=u);var d=st.generateUUID();return s[d]=l,d}void 0===e&&(e=new Color),void 0===t&&(t=new TextureLoader),void 0===r&&(r=new MaterialLoader);var s={},u={uuid:st.generateUUID(),type:"MeshLambertMaterial"};for(var l in n){var d=n[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=d;break;case"blending":u.blending=i[d];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":u.color=e.fromArray(d).getHex();break;case"colorSpecular":u.specular=e.fromArray(d).getHex();break;case"colorEmissive":u.emissive=e.fromArray(d).getHex();break;case"specularCoef":u.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=loadTexture(d,n.mapDiffuseRepeat,n.mapDiffuseOffset,n.mapDiffuseWrap,n.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=loadTexture(d,n.mapEmissiveRepeat,n.mapEmissiveOffset,n.mapEmissiveWrap,n.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=loadTexture(d,n.mapLightRepeat,n.mapLightOffset,n.mapLightWrap,n.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=loadTexture(d,n.mapAORepeat,n.mapAOOffset,n.mapAOWrap,n.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=loadTexture(d,n.mapBumpRepeat,n.mapBumpOffset,n.mapBumpWrap,n.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=d;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=loadTexture(d,n.mapNormalRepeat,n.mapNormalOffset,n.mapNormalWrap,n.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=[d,d];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=loadTexture(d,n.mapSpecularRepeat,n.mapSpecularOffset,n.mapSpecularWrap,n.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=loadTexture(d,n.mapMetalnessRepeat,n.mapMetalnessOffset,n.mapMetalnessWrap,n.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=loadTexture(d,n.mapRoughnessRepeat,n.mapRoughnessOffset,n.mapRoughnessWrap,n.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=loadTexture(d,n.mapAlphaRepeat,n.mapAlphaOffset,n.mapAlphaWrap,n.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=c;break;case"doubleSided":u.side=h;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[l]=d;break;case"vertexColors":!0===d&&(u.vertexColors=g),"face"===d&&(u.vertexColors=m);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,d)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),r.setTextures(s),r.parse(u)}}()},Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,i=t.length;r<i;r+=2){var n=t[r],o=t[r+1];if(n.test(e))return o}return null}},Object.assign(JSONLoader.prototype,{load:function(e,t,r,i){var n=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Loader.prototype.extractUrlBase(e),a=new FileLoader(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(r){var i=JSON.parse(r),a=i.metadata;if(void 0!==a){var s=a.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var u=n.parse(i,o);t(u.geometry,u.materials)},r,i)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var r=new Geometry,i=void 0!==e.scale?1/e.scale:1;if(function(t){function isBitSet(e,t){return e&1<<t}var i,n,o,a,s,u,l,c,h,d,f,p,m,g,y,v,b,x,M,w,E,_,T,A,S,C,L,D=e.faces,I=e.vertices,N=e.normals,O=e.colors,R=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&R++;for(i=0;i<R;i++)r.faceVertexUvs[i]=[]}for(a=0,s=I.length;a<s;)x=new Vector3,x.x=I[a++]*t,x.y=I[a++]*t,x.z=I[a++]*t,r.vertices.push(x);for(a=0,s=D.length;a<s;)if(d=D[a++],f=isBitSet(d,0),p=isBitSet(d,1),m=isBitSet(d,3),g=isBitSet(d,4),y=isBitSet(d,5),v=isBitSet(d,6),b=isBitSet(d,7),f){if(w=new Face3,w.a=D[a],w.b=D[a+1],w.c=D[a+3],E=new Face3,E.a=D[a+1],E.b=D[a+2],E.c=D[a+3],a+=4,p&&(h=D[a++],w.materialIndex=h,E.materialIndex=h),o=r.faces.length,m)for(i=0;i<R;i++)for(A=e.uvs[i],r.faceVertexUvs[i][o]=[],r.faceVertexUvs[i][o+1]=[],n=0;n<4;n++)c=D[a++],C=A[2*c],L=A[2*c+1],S=new Vector2(C,L),2!==n&&r.faceVertexUvs[i][o].push(S),0!==n&&r.faceVertexUvs[i][o+1].push(S);if(g&&(l=3*D[a++],w.normal.set(N[l++],N[l++],N[l]),E.normal.copy(w.normal)),y)for(i=0;i<4;i++)l=3*D[a++],T=new Vector3(N[l++],N[l++],N[l]),2!==i&&w.vertexNormals.push(T),0!==i&&E.vertexNormals.push(T);if(v&&(u=D[a++],_=O[u],w.color.setHex(_),E.color.setHex(_)),b)for(i=0;i<4;i++)u=D[a++],_=O[u],2!==i&&w.vertexColors.push(new Color(_)),0!==i&&E.vertexColors.push(new Color(_));r.faces.push(w),r.faces.push(E)}else{if(M=new Face3,M.a=D[a++],M.b=D[a++],M.c=D[a++],p&&(h=D[a++],M.materialIndex=h),o=r.faces.length,m)for(i=0;i<R;i++)for(A=e.uvs[i],r.faceVertexUvs[i][o]=[],n=0;n<3;n++)c=D[a++],C=A[2*c],L=A[2*c+1],S=new Vector2(C,L),r.faceVertexUvs[i][o].push(S);if(g&&(l=3*D[a++],M.normal.set(N[l++],N[l++],N[l])),y)for(i=0;i<3;i++)l=3*D[a++],T=new Vector3(N[l++],N[l++],N[l]),M.vertexNormals.push(T);if(v&&(u=D[a++],M.color.setHex(O[u])),b)for(i=0;i<3;i++)u=D[a++],M.vertexColors.push(new Color(O[u]));r.faces.push(M)}}(i),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,n=e.skinWeights.length;i<n;i+=t){var o=e.skinWeights[i],a=t>1?e.skinWeights[i+1]:0,s=t>2?e.skinWeights[i+2]:0,u=t>3?e.skinWeights[i+3]:0;r.skinWeights.push(new Vector4(o,a,s,u))}if(e.skinIndices)for(var i=0,n=e.skinIndices.length;i<n;i+=t){var l=e.skinIndices[i],c=t>1?e.skinIndices[i+1]:0,h=t>2?e.skinIndices[i+2]:0,d=t>3?e.skinIndices[i+3]:0;r.skinIndices.push(new Vector4(l,c,h,d))}r.bones=e.bones,r.bones&&r.bones.length>0&&(r.skinWeights.length!==r.skinIndices.length||r.skinIndices.length!==r.vertices.length)&&console.warn("When skinning, number of vertices ("+r.vertices.length+"), skinIndices ("+r.skinIndices.length+"), and skinWeights ("+r.skinWeights.length+") should match.")}(),function(t){if(void 0!==e.morphTargets)for(var i=0,n=e.morphTargets.length;i<n;i++){r.morphTargets[i]={},r.morphTargets[i].name=e.morphTargets[i].name,r.morphTargets[i].vertices=[];for(var o=r.morphTargets[i].vertices,a=e.morphTargets[i].vertices,s=0,u=a.length;s<u;s+=3){var l=new Vector3;l.x=a[s]*t,l.y=a[s+1]*t,l.z=a[s+2]*t,o.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var c=r.faces,h=e.morphColors[0].colors,i=0,n=c.length;i<n;i++)c[i].color.fromArray(h,3*i)}}(i),function(){var t=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var n=0;n<i.length;n++){var o=AnimationClip.parseAnimation(i[n],r.bones);o&&t.push(o)}if(r.morphTargets){var a=AnimationClip.CreateClipsFromMorphTargetSequences(r.morphTargets,10);t=t.concat(a)}t.length>0&&(r.animations=t)}(),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:r};var n=Loader.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:r,materials:n}}}),Object.assign(ObjectLoader.prototype,{load:function(e,t,r,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var n=this;new FileLoader(n.manager).load(e,function(r){var o=null;try{o=JSON.parse(r)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");n.parse(o,t)},r,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),i=this.parseImages(e.images,function(){void 0!==t&&t(a)}),n=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,n),a=this.parseObject(e.object,r,o);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new JSONLoader,i=new BufferGeometryLoader,n=0,o=e.length;n<o;n++){var a,s=e[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new _t[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new _t[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new _t[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new _t[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new _t[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new _t[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new _t[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new _t[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new _t[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new _t[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new _t[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":a=i.parse(s);break;case"Geometry":a=r.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e,t){var r={};if(void 0!==e){var i=new MaterialLoader;i.setTextures(t);for(var n=0,o=e.length;n<o;n++){var a=i.parse(e[n]);r[a.uuid]=a}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var i=AnimationClip.parse(e[r]);t.push(i)}return t},parseImages:function(e,t){var r=this,i={};if(void 0!==e&&e.length>0){var n=new LoadingManager(t),o=new ImageLoader(n);o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var u=e[a],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:r.texturePath+u.url;i[u.uuid]=function(e){return r.manager.itemStart(e),o.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e)})}(l)}}return i},parseTextures:function(e,t){function parseConstant(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={UVMapping:300,CubeReflectionMapping:re,CubeRefractionMapping:ie,EquirectangularReflectionMapping:ne,EquirectangularRefractionMapping:oe,SphericalReflectionMapping:ae,CubeUVReflectionMapping:se,CubeUVRefractionMapping:ue},i={RepeatWrapping:le,ClampToEdgeWrapping:ce,MirroredRepeatWrapping:he},n={NearestFilter:de,NearestMipMapNearestFilter:fe,NearestMipMapLinearFilter:pe,LinearFilter:me,LinearMipMapNearestFilter:ge,LinearMipMapLinearFilter:ye},o={};if(void 0!==e)for(var a=0,s=e.length;a<s;a++){var u=e[a];void 0===u.image&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),void 0===t[u.image]&&console.warn("THREE.ObjectLoader: Undefined image",u.image);var l=new Texture(t[u.image]);l.needsUpdate=!0,l.uuid=u.uuid,void 0!==u.name&&(l.name=u.name),void 0!==u.mapping&&(l.mapping=parseConstant(u.mapping,r)),void 0!==u.offset&&l.offset.fromArray(u.offset),void 0!==u.repeat&&l.repeat.fromArray(u.repeat),void 0!==u.wrap&&(l.wrapS=parseConstant(u.wrap[0],i),l.wrapT=parseConstant(u.wrap[1],i)),void 0!==u.minFilter&&(l.minFilter=parseConstant(u.minFilter,n)),void 0!==u.magFilter&&(l.magFilter=parseConstant(u.magFilter,n)),void 0!==u.anisotropy&&(l.anisotropy=u.anisotropy),void 0!==u.flipY&&(l.flipY=u.flipY),o[u.uuid]=l}return o},parseObject:function(){var e=new Matrix4;return function(t,r,i){function getGeometry(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function getMaterial(e){if(void 0!==e)return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}var n;switch(t.type){case"Scene":n=new Scene,void 0!==t.background&&Number.isInteger(t.background)&&(n.background=new Color(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new Fog(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new FogExp2(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new PerspectiveCamera(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":n=new AmbientLight(t.color,t.intensity);break;case"DirectionalLight":n=new DirectionalLight(t.color,t.intensity);break;case"PointLight":n=new PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":n=new SpotLight(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var o=getGeometry(t.geometry),a=getMaterial(t.material);n=o.bones&&o.bones.length>0?new SkinnedMesh(o,a):new Mesh(o,a);break;case"LOD":n=new LOD;break;case"Line":n=new Line(getGeometry(t.geometry),getMaterial(t.material),t.mode);break;case"LineSegments":n=new LineSegments(getGeometry(t.geometry),getMaterial(t.material));break;case"PointCloud":case"Points":n=new Points(getGeometry(t.geometry),getMaterial(t.material));break;case"Sprite":n=new Sprite(getMaterial(t.material));break;case"Group":n=new Group;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:n=new Object3D}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.children)for(var s in t.children)n.add(this.parseObject(t.children[s],r,i));if("LOD"===t.type)for(var u=t.levels,l=0;l<u.length;l++){var c=u[l],s=n.getObjectByProperty("uuid",c.object);void 0!==s&&n.addLevel(s,c.distance)}return n}}()}),Curve.prototype={constructor:Curve,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){isNaN(e)&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){isNaN(e)&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(isNaN(e)&&(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,i=[],n=this.getPoint(0),o=0;for(i.push(0),r=1;r<=e;r++)t=this.getPoint(r/e),o+=t.distanceTo(n),i.push(o),n=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,i=this.getLengths(),n=0,o=i.length;r=t||e*i[o-1];for(var a,s=0,u=o-1;s<=u;)if(n=Math.floor(s+(u-s)/2),(a=i[n]-r)<0)s=n+1;else{if(!(a>0)){u=n;break}u=n-1}if(n=u,i[n]===r){var l=n/(o-1);return l}var c=i[n],h=i[n+1],d=h-c,f=(r-c)/d,l=(n+f)/(o-1);return l},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var i=this.getPoint(t);return this.getPoint(r).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,i,n,o=new Vector3,a=[],s=[],u=[],l=new Vector3,c=new Matrix4;for(r=0;r<=e;r++)i=r/e,a[r]=this.getTangentAt(i),a[r].normalize();s[0]=new Vector3,u[0]=new Vector3;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),f=Math.abs(a[0].y),p=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),f<=h&&(h=f,o.set(0,1,0)),p<=h&&o.set(0,0,1),l.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],l),u[0].crossVectors(a[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),u[r]=u[r-1].clone(),l.crossVectors(a[r-1],a[r]),l.length()>Number.EPSILON&&(l.normalize(),n=Math.acos(st.clamp(a[r-1].dot(a[r]),-1,1)),s[r].applyMatrix4(c.makeRotationAxis(l,n))),u[r].crossVectors(a[r],s[r]);if(!0===t)for(n=Math.acos(st.clamp(s[0].dot(s[e]),-1,1)),n/=e,a[0].dot(l.crossVectors(s[0],s[e]))>0&&(n=-n),r=1;r<=e;r++)s[r].applyMatrix4(c.makeRotationAxis(a[r],n*r)),u[r].crossVectors(a[r],s[r]);return{tangents:a,normals:s,binormals:u}}},LineCurve.prototype=Object.create(Curve.prototype),LineCurve.prototype.constructor=LineCurve,LineCurve.prototype.isLineCurve=!0,LineCurve.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},LineCurve.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new LineCurve(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=t){var n=r[i]-t,o=this.curves[i],a=o.getLength(),s=0===a?0:1-n/a;return o.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){isNaN(e)&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],i=0,n=this.curves;i<n.length;i++)for(var o=n[i],a=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];t&&t.equals(l)||(r.push(l),t=l)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Geometry,r=0,i=e.length;r<i;r++){var n=e[r];t.vertices.push(new Vector3(n.x,n.y,n.z||0))}return t}}),EllipseCurve.prototype=Object.create(Curve.prototype),EllipseCurve.prototype.constructor=EllipseCurve,EllipseCurve.prototype.isEllipseCurve=!0,EllipseCurve.prototype.getPoint=function(e){for(var t=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=t;for(;r>t;)r-=t;r<Number.EPSILON&&(r=i?0:t),!0!==this.aClockwise||i||(r===t?r=-t:r-=t);var n=this.aStartAngle+e*r,o=this.aX+this.xRadius*Math.cos(n),a=this.aY+this.yRadius*Math.sin(n);if(0!==this.aRotation){var s=Math.cos(this.aRotation),u=Math.sin(this.aRotation),l=o-this.aX,c=a-this.aY;o=l*s-c*u+this.aX,a=l*u+c*s+this.aY}return new Vector2(o,a)},SplineCurve.prototype=Object.create(Curve.prototype),SplineCurve.prototype.constructor=SplineCurve,SplineCurve.prototype.isSplineCurve=!0,SplineCurve.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,i=Math.floor(r),n=r-i,o=t[0===i?i:i-1],a=t[i],s=t[i>t.length-2?t.length-1:i+1],u=t[i>t.length-3?t.length-1:i+2];return new Vector2(CatmullRom(n,o.x,a.x,s.x,u.x),CatmullRom(n,o.y,a.y,s.y,u.y))},CubicBezierCurve.prototype=Object.create(Curve.prototype),CubicBezierCurve.prototype.constructor=CubicBezierCurve,CubicBezierCurve.prototype.getPoint=function(e){var t=this.v0,r=this.v1,i=this.v2,n=this.v3;return new Vector2(CubicBezier(e,t.x,r.x,i.x,n.x),CubicBezier(e,t.y,r.y,i.y,n.y))},QuadraticBezierCurve.prototype=Object.create(Curve.prototype),QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve,QuadraticBezierCurve.prototype.getPoint=function(e){var t=this.v0,r=this.v1,i=this.v2;return new Vector2(QuadraticBezier(e,t.x,r.x,i.x),QuadraticBezier(e,t.y,r.y,i.y))};var Dt=Object.assign(Object.create(CurvePath.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new LineCurve(this.currentPoint.clone(),new Vector2(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,i){var n=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(r,i));this.curves.push(n),this.currentPoint.set(r,i)},bezierCurveTo:function(e,t,r,i,n,o){var a=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(r,i),new Vector2(n,o));this.curves.push(a),this.currentPoint.set(n,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),r=new SplineCurve(t);this.curves.push(r),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,i,n,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,r,i,n,o)},absarc:function(e,t,r,i,n,o){this.absellipse(e,t,r,r,i,n,o)},ellipse:function(e,t,r,i,n,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+u,t+l,r,i,n,o,a,s)},absellipse:function(e,t,r,i,n,o,a,s){var u=new EllipseCurve(e,t,r,i,n,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)}});Path.prototype=Dt,Dt.constructor=Path,Shape.prototype=Object.assign(Object.create(Dt),{constructor:Shape,getPointsHoles:function(e){for(var t=[],r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),ShapePath.prototype={moveTo:function(e,t){this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,i){this.currentPath.quadraticCurveTo(e,t,r,i)},bezierCurveTo:function(e,t,r,i,n,o){this.currentPath.bezierCurveTo(e,t,r,i,n,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function toShapesNoHoles(e){for(var t=[],r=0,i=e.length;r<i;r++){var n=e[r],o=new Shape;o.curves=n.curves,t.push(o)}return t}var r=Et.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return toShapesNoHoles(i);var n,o,a,s=[];if(1===i.length)return o=i[0],a=new Shape,a.curves=o.curves,s.push(a),s;var u=!r(i[0].getPoints());u=e?!u:u;var l,c=[],h=[],d=[],f=0;h[f]=void 0,d[f]=[];for(var p=0,m=i.length;p<m;p++)o=i[p],l=o.getPoints(),n=r(l),n=e?!n:n,n?(!u&&h[f]&&f++,h[f]={s:new Shape,p:l},h[f].s.curves=o.curves,u&&f++,d[f]=[]):d[f].push({h:o,p:l[0]});if(!h[0])return toShapesNoHoles(i);if(h.length>1){for(var g=!1,y=[],v=0,b=h.length;v<b;v++)c[v]=[];for(var v=0,b=h.length;v<b;v++)for(var x=d[v],M=0;M<x.length;M++){for(var w=x[M],E=!0,_=0;_<h.length;_++)(function(e,t){for(var r=t.length,i=!1,n=r-1,o=0;o<r;n=o++){var a=t[n],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[n],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return i})(w.p,h[_].p)&&(v!==_&&y.push({froms:v,tos:_,hole:M}),E?(E=!1,c[_].push(w)):g=!0);E&&c[v].push(w)}y.length>0&&(g||(d=c))}for(var T,p=0,A=h.length;p<A;p++){a=h[p].s,s.push(a),T=d[p];for(var S=0,C=T.length;S<C;S++)a.holes.push(T[S].h)}return s}},Object.assign(Font.prototype,{isFont:!0,generateShapes:function(e,t,r){function createPath(e,t,n,o){var a=i.glyphs[e]||i.glyphs["?"];if(a){var s,u,l,c,h,d,f,p,m,g,y,v=new ShapePath,b=[];if(a.o)for(var x=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),M=0,w=x.length;M<w;){var E=x[M++];switch(E){case"m":s=x[M++]*t+n,u=x[M++]*t+o,v.moveTo(s,u);break;case"l":s=x[M++]*t+n,u=x[M++]*t+o,v.lineTo(s,u);break;case"q":if(l=x[M++]*t+n,c=x[M++]*t+o,f=x[M++]*t+n,p=x[M++]*t+o,v.quadraticCurveTo(f,p,l,c),y=b[b.length-1]){h=y.x,d=y.y;for(var _=1;_<=r;_++){var T=_/r;QuadraticBezier(T,h,f,l),QuadraticBezier(T,d,p,c)}}break;case"b":if(l=x[M++]*t+n,c=x[M++]*t+o,f=x[M++]*t+n,p=x[M++]*t+o,m=x[M++]*t+n,g=x[M++]*t+o,v.bezierCurveTo(f,p,m,g,l,c),y=b[b.length-1]){h=y.x,d=y.y;for(var _=1;_<=r;_++){var T=_/r;CubicBezier(T,h,f,m,l),CubicBezier(T,d,p,g,c)}}}}return{offsetX:a.ha*t,path:v}}}void 0===t&&(t=100),void 0===r&&(r=4);for(var i=this.data,n=function(e){for(var r=String(e).split(""),n=t/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*n,a=0,s=0,u=[],l=0;l<r.length;l++){var c=r[l];if("\n"===c)a=0,s-=o;else{var h=createPath(c,n,a,s);a+=h.offsetX,u.push(h.path)}}return u}(e),o=[],a=0,s=n.length;a<s;a++)Array.prototype.push.apply(o,n[a].toShapes());return o}}),Object.assign(FontLoader.prototype,{load:function(e,t,r,i){var n=this;new FileLoader(this.manager).load(e,function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var i=n.parse(r);t&&t(i)},r,i)},parse:function(e){return new Font(e)}});var It,Nt={getContext:function(){return void 0===It&&(It=new(window.AudioContext||window.webkitAudioContext)),It},setContext:function(e){It=e}};Object.assign(AudioLoader.prototype,{load:function(e,t,r,i){var n=new FileLoader(this.manager);n.setResponseType("arraybuffer"),n.load(e,function(e){Nt.getContext().decodeAudioData(e,function(e){t(e)})},r,i)}}),RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this}}),Object.assign(StereoCamera.prototype,{update:function(){var e,t,r,i,n,o,a,s=new Matrix4,u=new Matrix4;return function(l){if(e!==this||t!==l.focus||r!==l.fov||i!==l.aspect*this.aspect||n!==l.near||o!==l.far||a!==l.zoom){e=this,t=l.focus,r=l.fov,i=l.aspect*this.aspect,n=l.near,o=l.far,a=l.zoom;var c,h,d=l.projectionMatrix.clone(),f=this.eyeSep/2,p=f*n/t,m=n*Math.tan(st.DEG2RAD*r*.5)/a;u.elements[12]=-f,s.elements[12]=f,c=-m*i+p,h=m*i+p,d.elements[0]=2*n/(h-c),d.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(d),c=-m*i-p,h=m*i-p,d.elements[0]=2*n/(h-c),d.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(s)}}()}),CubeCamera.prototype=Object.create(Object3D.prototype),CubeCamera.prototype.constructor=CubeCamera,AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Vector3,t=new Quaternion,r=new Vector3,i=new Vector3;return function(n){Object3D.prototype.updateMatrixWorld.call(this,n);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,r),i.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(i.x,this.context.currentTime),o.forwardY.setValueAtTime(i.y,this.context.currentTime),o.forwardZ.setValueAtTime(i.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Vector3;return function(t){Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),PropertyMixer.prototype={constructor:PropertyMixer,accumulate:function(e,t){var r=this.buffer,i=this.valueSize,n=e*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)r[n+a]=r[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(r,n,0,s,i)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,n<1){var a=3*t;this._mixBufferRegion(r,i,a,1-n,t)}for(var s=t,u=t+t;s!==u;++s)if(r[s]!==r[s+t]){o.setValue(r,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,i=3*r;e.getValue(t,i);for(var n=r,o=i;n!==o;++n)t[n]=t[i+n%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,i,n){if(i>=.5)for(var o=0;o!==n;++o)e[t+o]=e[r+o]},_slerp:function(e,t,r,i,n){Quaternion.slerpFlat(e,t,e,t,e,r,i)},_lerp:function(e,t,r,i,n){for(var o=1-i,a=0;a!==n;++a){var s=t+a;e[s]=e[s]*o+e[r+a]*i}}},PropertyBinding.prototype={constructor:PropertyBinding,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[r])return void console.error("  can not bind to objectName of node, undefined",this);e=e[r]}if(void 0!==o){if(void 0===e[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[o]}}var s=e[i];if(void 0===s){var u=t.nodeName;return void console.error("  trying to update property for track: "+u+"."+i+" but it wasn't found.",e)}var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===n){n=a;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)e[t++]=r[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++]},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),PropertyBinding.Composite=function(e,t,r){var i=r||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)},PropertyBinding.Composite.prototype={constructor:PropertyBinding.Composite,getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,i=this._bindings[r];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},PropertyBinding.create=function(e,t,r){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,r):new PropertyBinding(e,t,r)},PropertyBinding.parseTrackName=function(e){var t=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/,r=t.exec(e);if(!r)throw new Error("cannot parse trackName at all: "+e);var i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};if(null===i.propertyName||0===i.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return i},PropertyBinding.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=function(e){for(var r=0;r<e.bones.length;r++){var i=e.bones[r];if(i.name===t)return i}return null}(e.skeleton);if(r)return r}if(e.children){var i=function(e){for(var r=0;r<e.length;r++){var n=e[r];if(n.name===t||n.uuid===t)return n;var o=i(n.children);if(o)return o}return null},n=i(e.children);if(n)return n}return null},AnimationObjectGroup.prototype={constructor:AnimationObjectGroup,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,r=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,u=s.length,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],d=h.uuid,f=n[d],p=void 0;if(void 0===f){f=r++,n[d]=f,t.push(h);for(var m=0,g=u;m!==g;++m)s[m].push(new PropertyBinding(h,o[m],a[m]))}else if(f<i){p=t[f];var y=--i,v=t[y];n[v.uuid]=f,t[f]=v,n[d]=y,t[y]=h;for(var m=0,g=u;m!==g;++m){var b=s[m],x=b[y],M=b[f];b[f]=x,void 0===M&&(M=new PropertyBinding(h,o[m],a[m])),b[y]=M}}else t[f]!==p&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=i},remove:function(e){for(var t=this._objects,r=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,o=n.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=i[l];if(void 0!==c&&c>=r){var h=r++,d=t[h];i[d.uuid]=c,t[c]=d,i[l]=h,t[h]=u;for(var f=0,p=o;f!==p;++f){var m=n[f],g=m[h],y=m[c];m[c]=g,m[h]=y}}}this.nCachedObjects_=r},uncache:function(e){for(var t=this._objects,r=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,o=this._bindings,a=o.length,s=0,u=arguments.length;s!==u;++s){var l=arguments[s],c=l.uuid,h=n[c];if(void 0!==h)if(delete n[c],h<i){var d=--i,f=t[d],p=--r,m=t[p];n[f.uuid]=h,t[h]=f,n[m.uuid]=d,t[d]=m,t.pop();for(var g=0,y=a;g!==y;++g){var v=o[g],b=v[d],x=v[p];v[h]=b,v[d]=x,v.pop()}}else{var p=--r,m=t[p];n[m.uuid]=h,t[h]=m,t.pop();for(var g=0,y=a;g!==y;++g){var v=o[g];v[h]=v[p],v.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,i=r[e],n=this._bindings;if(void 0!==i)return n[i];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);i=n.length,r[e]=i,o.push(e),a.push(t),n.push(c);for(var h=l,d=s.length;h!==d;++h){var f=s[h];c[h]=new PropertyBinding(f,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var i=this._paths,n=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=r,o[r]=s,o.pop(),n[r]=n[a],n.pop(),i[r]=i[a],i.pop()}}},AnimationAction.prototype={constructor:AnimationAction,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var i=this._clip.duration,n=e._clip.duration,o=n/i,a=i/n;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var i=this._mixer,n=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=n,s[1]=n+r,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,i){var n=this._startTime;if(null!==n){var o=(e-n)*r;if(o<0||0===r)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(i,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var r=this._clip.duration,i=this.loop,n=this._loopCount;if(2200===i){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=2202===i;if(-1===n&&(e>=0?(n=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=r||t<0){var a=Math.floor(t/r);t-=r*a,n+=Math.abs(a);var s=this.repetitions-n;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&n))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var i=this._interpolantSettings;r?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=e?this.zeroSlopeAtStart?2401:qe:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:qe:2402)},_scheduleFading:function(e,t,r){var i=this._mixer,n=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=n,s[0]=t,a[1]=n+e,s[1]=r,this}},AnimationMixer.prototype={constructor:AnimationMixer,clipAction:function(e,t){var r=t||this._root,i=r.uuid,n="string"==typeof e?AnimationClip.findByName(r,e):e,o=null!==n?n.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[i];if(void 0!==u)return u;s=a.knownActions[0],null===n&&(n=s._clip)}if(null===n)return null;var l=new AnimationAction(this,n,t);return this._bindAction(l,s),this._addInactiveAction(l,o,i),l},existingAction:function(e,t){var r=t||this._root,i=r.uuid,n="string"==typeof e?AnimationClip.findByName(r,e):e,o=n?n.uuid:e,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[i]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==t;++n)e[n].reset();for(var n=0;n!==i;++n)r[n].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),o=this._accuIndex^=1,a=0;a!==r;++a){var s=t[a];s.enabled&&s._update(i,e,n,o)}for(var u=this._bindings,l=this._nActiveBindings,a=0;a!==l;++a)u[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(void 0!==n){for(var o=n.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var i in r){var n=r[i].actionByRoot,o=n[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var u in s){var l=s[u];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}},Object.assign(AnimationMixer.prototype,{_bindAction:function(e,t){var r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,o=e._propertyBindings,a=e._interpolants,s=r.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==n;++c){var h=i[c],d=h.name,f=l[d];if(void 0!==f)o[c]=f;else{if(void 0!==(f=o[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;f=new PropertyMixer(PropertyBinding.create(r,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,d),o[c]=f}a[c].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,i=this._actionsByClip[r];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,r,t)}for(var n=e._propertyBindings,o=0,a=n.length;o!==a;++o){var s=n[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,i=t.length;r!==i;++r){var n=t[r];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var i=this._actions,n=this._actionsByClip,o=n[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;var n=e._clip.uuid,o=this._actionsByClip,a=o[n],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,i=t.length;r!==i;++r){var n=t[r];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_addInactiveBinding:function(e,t,r){var i=this._bindingsByRootAndName,n=i[t],o=this._bindings;void 0===n&&(n={},i[t]=n),n[r]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[n];e:{for(var l in a)break e;delete o[i]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&(r=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n},_controlInterpolantsResultBuffer:new Float32Array(1)}),Object.assign(AnimationMixer.prototype,EventDispatcher.prototype),Uniform.prototype.clone=function(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())},InstancedBufferGeometry.prototype=Object.create(BufferGeometry.prototype),InstancedBufferGeometry.prototype.constructor=InstancedBufferGeometry,InstancedBufferGeometry.prototype.isInstancedBufferGeometry=!0,InstancedBufferGeometry.prototype.addGroup=function(e,t,r){this.groups.push({start:e,count:t,materialIndex:r})},InstancedBufferGeometry.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var r=e.attributes;for(var i in r){var n=r[i];this.addAttribute(i,n.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var u=o[a];this.addGroup(u.start,u.count,u.materialIndex)}return this},InterleavedBufferAttribute.prototype={constructor:InterleavedBufferAttribute,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}},InterleavedBuffer.prototype={constructor:InterleavedBuffer,isInterleavedBuffer:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}},InstancedInterleavedBuffer.prototype=Object.create(InterleavedBuffer.prototype),InstancedInterleavedBuffer.prototype.constructor=InstancedInterleavedBuffer,InstancedInterleavedBuffer.prototype.isInstancedInterleavedBuffer=!0,InstancedInterleavedBuffer.prototype.copy=function(e){return InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},InstancedBufferAttribute.prototype=Object.create(BufferAttribute.prototype),InstancedBufferAttribute.prototype.constructor=InstancedBufferAttribute,InstancedBufferAttribute.prototype.isInstancedBufferAttribute=!0,InstancedBufferAttribute.prototype.copy=function(e){return BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Raycaster.prototype={constructor:Raycaster,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var r=[];return intersectObject(e,this,r,t),r.sort(ascSort),r},intersectObjects:function(e,t){var r=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,n=e.length;i<n;i++)intersectObject(e[i],this,r,t);return r.sort(ascSort),r}},Clock.prototype={constructor:Clock,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},Spherical.prototype={constructor:Spherical,set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(st.clamp(e.y/this.radius,-1,1))),this}},Cylindrical.prototype={constructor:Cylindrical,set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}},MorphBlendMesh.prototype=Object.create(Mesh.prototype),MorphBlendMesh.prototype.constructor=MorphBlendMesh,MorphBlendMesh.prototype.createAnimation=function(e,t,r,i){var n={start:t,end:r,length:r-t+1,fps:i,duration:(r-t)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=n,this.animationsList.push(n)},MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,r=/([a-z]+)_?(\d+)/i,i={},n=this.geometry,o=0,a=n.morphTargets.length;o<a;o++){var s=n.morphTargets[o],u=s.name.match(r);if(u&&u.length>1){var l=u[1];i[l]||(i[l]={start:1/0,end:-1/0});var c=i[l];o<c.start&&(c.start=o),o>c.end&&(c.end=o),t||(t=l)}}for(var l in i){var c=i[l];this.createAnimation(l,c.start,c.end,e)}this.firstAnimation=t},MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},MorphBlendMesh.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},MorphBlendMesh.prototype.update=function(e){for(var t=0,r=this.animationsList.length;t<r;t++){var i=this.animationsList[t];if(i.active){var n=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),i.time<0&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var o=i.start+st.clamp(Math.floor(i.time/n),0,i.length-1),a=i.weight;o!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*a,this.morphTargetInfluences[o]=0,i.lastFrame=i.currentFrame,i.currentFrame=o);var s=i.time%n/n;i.directionBackwards&&(s=1-s),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=s*a,this.morphTargetInfluences[i.lastFrame]=(1-s)*a):this.morphTargetInfluences[i.currentFrame]=a}}},ImmediateRenderObject.prototype=Object.create(Object3D.prototype),ImmediateRenderObject.prototype.constructor=ImmediateRenderObject,ImmediateRenderObject.prototype.isImmediateRenderObject=!0,VertexNormalsHelper.prototype=Object.create(LineSegments.prototype),VertexNormalsHelper.prototype.constructor=VertexNormalsHelper,VertexNormalsHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,r=new Matrix3;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,l=0,c=0,h=u.length;c<h;c++)for(var d=u[c],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[i[f]]],g=d.vertexNormals[f];e.copy(m).applyMatrix4(n),t.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1}else if(a&&a.isBufferGeometry)for(var y=a.attributes.position,v=a.attributes.normal,l=0,f=0,p=y.count;f<p;f++)e.set(y.getX(f),y.getY(f),y.getZ(f)).applyMatrix4(n),t.set(v.getX(f),v.getY(f),v.getZ(f)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1;return o.needsUpdate=!0,this}}(),SpotLightHelper.prototype=Object.create(Object3D.prototype),SpotLightHelper.prototype.constructor=SpotLightHelper,SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},SpotLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3;return function(){var r=this.light.distance?this.light.distance:1e3,i=r*Math.tan(this.light.angle);this.cone.scale.set(i,i,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),SkeletonHelper.prototype=Object.create(LineSegments.prototype),SkeletonHelper.prototype.constructor=SkeletonHelper,SkeletonHelper.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t},SkeletonHelper.prototype.update=function(){var e=new Vector3,t=new Matrix4,r=new Matrix4;return function(){var i=this.geometry,n=i.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var o=0,a=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(t.multiplyMatrices(r,s.matrixWorld),e.setFromMatrixPosition(t),n.setXYZ(a,e.x,e.y,e.z),t.multiplyMatrices(r,s.parent.matrixWorld),e.setFromMatrixPosition(t),n.setXYZ(a+1,e.x,e.y,e.z),a+=2)}i.getAttribute("position").needsUpdate=!0}}(),PointLightHelper.prototype=Object.create(Mesh.prototype),PointLightHelper.prototype.constructor=PointLightHelper,PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},RectAreaLightHelper.prototype=Object.create(Object3D.prototype),RectAreaLightHelper.prototype.constructor=RectAreaLightHelper,RectAreaLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},RectAreaLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3;return function(){var r=this.children[0],i=this.children[1];if(this.light.target){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld);var n=t.clone().sub(e);r.lookAt(n),i.lookAt(n)}r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var o=.5*this.light.width,a=.5*this.light.height,s=r.geometry.getAttribute("position"),u=s.array;u[0]=o,u[1]=-a,u[2]=0,u[3]=o,u[4]=a,u[5]=0,u[6]=-o,u[7]=a,u[8]=0,u[9]=-o,u[10]=a,u[11]=0,u[12]=-o,u[13]=-a,u[14]=0,u[15]=o,u[16]=-a,u[17]=0,s.needsUpdate=!0}}(),HemisphereLightHelper.prototype=Object.create(Object3D.prototype),HemisphereLightHelper.prototype.constructor=HemisphereLightHelper,HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},HemisphereLightHelper.prototype.update=function(){var e=new Vector3,t=new Color,r=new Color;return function(){var i=this.children[0],n=i.geometry.getAttribute("color");t.copy(this.light.color).multiplyScalar(this.light.intensity),r.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var o=0,a=n.count;o<a;o++){var s=o<a/2?t:r;n.setXYZ(o,s.r,s.g,s.b)}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),n.needsUpdate=!0}}(),GridHelper.prototype=Object.create(LineSegments.prototype),GridHelper.prototype.constructor=GridHelper,PolarGridHelper.prototype=Object.create(LineSegments.prototype),PolarGridHelper.prototype.constructor=PolarGridHelper,FaceNormalsHelper.prototype=Object.create(LineSegments.prototype),FaceNormalsHelper.prototype.constructor=FaceNormalsHelper,FaceNormalsHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,r=new Matrix3;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,n=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),n.setXYZ(u,e.x,e.y,e.z),u+=1,n.setXYZ(u,t.x,t.y,t.z),u+=1}return n.needsUpdate=!0,this}}(),DirectionalLightHelper.prototype=Object.create(Object3D.prototype),DirectionalLightHelper.prototype.constructor=DirectionalLightHelper,DirectionalLightHelper.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},DirectionalLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,r=new Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e);var i=this.children[0],n=this.children[1];i.lookAt(r),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),n.lookAt(r),n.scale.z=r.length()}}(),CameraHelper.prototype=Object.create(LineSegments.prototype),CameraHelper.prototype.constructor=CameraHelper,CameraHelper.prototype.update=function(){function setPoint(n,o,a,s){r.set(o,a,s).unproject(i);var u=t[n];if(void 0!==u)for(var l=e.getAttribute("position"),c=0,h=u.length;c<h;c++)l.setXYZ(u[c],r.x,r.y,r.z)}var e,t,r=new Vector3,i=new Camera;return function(){e=this.geometry,t=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),setPoint("c",0,0,-1),setPoint("t",0,0,1),setPoint("n1",-1,-1,-1),setPoint("n2",1,-1,-1),setPoint("n3",-1,1,-1),setPoint("n4",1,1,-1),setPoint("f1",-1,-1,1),setPoint("f2",1,-1,1),setPoint("f3",-1,1,1),setPoint("f4",1,1,1),setPoint("u1",.7,1.1,-1),setPoint("u2",-.7,1.1,-1),setPoint("u3",0,2,-1),setPoint("cf1",-1,0,1),setPoint("cf2",1,0,1),setPoint("cf3",0,-1,1),setPoint("cf4",0,1,1),setPoint("cn1",-1,0,-1),setPoint("cn2",1,0,-1),setPoint("cn3",0,-1,-1),setPoint("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),BoxHelper.prototype=Object.create(LineSegments.prototype),BoxHelper.prototype.constructor=BoxHelper,BoxHelper.prototype.update=function(){var e=new Box3;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var r=e.min,i=e.max,n=this.geometry.attributes.position,o=n.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=r.x,o[4]=i.y,o[5]=i.z,o[6]=r.x,o[7]=r.y,o[8]=i.z,o[9]=i.x,o[10]=r.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=r.z,o[15]=r.x,o[16]=i.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=i.x,o[22]=r.y,o[23]=r.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Ot,Rt;ArrowHelper.prototype=Object.create(Object3D.prototype),ArrowHelper.prototype.constructor=ArrowHelper,ArrowHelper.prototype.setDirection=function(){var e,t=new Vector3;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),ArrowHelper.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},ArrowHelper.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},AxisHelper.prototype=Object.create(LineSegments.prototype),AxisHelper.prototype.constructor=AxisHelper;var jt=new Vector3,Pt=new CubicPoly,kt=new CubicPoly,Bt=new CubicPoly;CatmullRomCurve3.prototype=Object.create(Curve.prototype),CatmullRomCurve3.prototype.constructor=CatmullRomCurve3,CatmullRomCurve3.prototype.getPoint=function(e){var t=this.points,r=t.length;r<2&&console.log("duh, you need at least 2 points");var i=(r-(this.closed?0:1))*e,n=Math.floor(i),o=i-n;this.closed?n+=n>0?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length:0===o&&n===r-1&&(n=r-2,o=1);var a,s,u,l;if(this.closed||n>0?a=t[(n-1)%r]:(jt.subVectors(t[0],t[1]).add(t[0]),a=jt),s=t[n%r],u=t[(n+1)%r],this.closed||n+2<r?l=t[(n+2)%r]:(jt.subVectors(t[r-1],t[r-2]).add(t[r-1]),l=jt),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var c="chordal"===this.type?.5:.25,h=Math.pow(a.distanceToSquared(s),c),d=Math.pow(s.distanceToSquared(u),c),f=Math.pow(u.distanceToSquared(l),c);d<1e-4&&(d=1),h<1e-4&&(h=d),f<1e-4&&(f=d),Pt.initNonuniformCatmullRom(a.x,s.x,u.x,l.x,h,d,f),kt.initNonuniformCatmullRom(a.y,s.y,u.y,l.y,h,d,f),Bt.initNonuniformCatmullRom(a.z,s.z,u.z,l.z,h,d,f)}else if("catmullrom"===this.type){var p=void 0!==this.tension?this.tension:.5;Pt.initCatmullRom(a.x,s.x,u.x,l.x,p),kt.initCatmullRom(a.y,s.y,u.y,l.y,p),Bt.initCatmullRom(a.z,s.z,u.z,l.z,p)}return new Vector3(Pt.calc(o),kt.calc(o),Bt.calc(o))},CubicBezierCurve3.prototype=Object.create(Curve.prototype),CubicBezierCurve3.prototype.constructor=CubicBezierCurve3,CubicBezierCurve3.prototype.getPoint=function(e){var t=this.v0,r=this.v1,i=this.v2,n=this.v3;return new Vector3(CubicBezier(e,t.x,r.x,i.x,n.x),CubicBezier(e,t.y,r.y,i.y,n.y),CubicBezier(e,t.z,r.z,i.z,n.z))},QuadraticBezierCurve3.prototype=Object.create(Curve.prototype),QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3,QuadraticBezierCurve3.prototype.getPoint=function(e){var t=this.v0,r=this.v1,i=this.v2;return new Vector3(QuadraticBezier(e,t.x,r.x,i.x),QuadraticBezier(e,t.y,r.y,i.y),QuadraticBezier(e,t.z,r.z,i.z))},LineCurve3.prototype=Object.create(Curve.prototype),LineCurve3.prototype.constructor=LineCurve3,LineCurve3.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},ArcCurve.prototype=Object.create(EllipseCurve.prototype),ArcCurve.prototype.constructor=ArcCurve;var zt={createMultiMaterialObject:function(e,t){for(var r=new Group,i=0,n=t.length;i<n;i++)r.add(new Mesh(e,t[i]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var i=new Matrix4;i.getInverse(r.matrixWorld),e.applyMatrix(i),t.remove(e),r.add(e)}};Curve.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype),SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype),Spline.prototype=Object.create(CatmullRomCurve3.prototype),Object.assign(Spline.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(Box2.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Box3.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Line3.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},st.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Matrix4.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,i,n,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,r,n,o)}}),Plane.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Quaternion.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ray.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Shape.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,e)}}),Object.assign(Vector2.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),Object.assign(Vector4.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),Geometry.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(Object3D.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),PerspectiveCamera.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(BufferGeometry.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new Color}}}),Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(WebGLRenderer.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?o:n},set:function(e){var t=e!==n;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Audio.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new AudioLoader).load(e,function(e){t.setBuffer(e)}),this},AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Ut={merge:function(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Ft={crossOrigin:void 0,loadTexture:function(e,t,r,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new TextureLoader;n.setCrossOrigin(this.crossOrigin);var o=n.load(e,r,void 0,i);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,r,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new CubeTextureLoader;n.setCrossOrigin(this.crossOrigin);var o=n.load(e,r,void 0,i);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};e.WebGLRenderTargetCube=WebGLRenderTargetCube,e.WebGLRenderTarget=WebGLRenderTarget,e.WebGLRenderer=WebGLRenderer,e.ShaderLib=vt,e.UniformsLib=yt,e.UniformsUtils=pt,e.ShaderChunk=mt,e.FogExp2=FogExp2,e.Fog=Fog,e.Scene=Scene,e.LensFlare=LensFlare,e.Sprite=Sprite,e.LOD=LOD,e.SkinnedMesh=SkinnedMesh,e.Skeleton=Skeleton,e.Bone=Bone,e.Mesh=Mesh,e.LineSegments=LineSegments,e.Line=Line,e.Points=Points,e.Group=Group,e.VideoTexture=VideoTexture,e.DataTexture=DataTexture,e.CompressedTexture=CompressedTexture,e.CubeTexture=CubeTexture,e.CanvasTexture=CanvasTexture,e.DepthTexture=DepthTexture,e.Texture=Texture,e.CompressedTextureLoader=CompressedTextureLoader,e.DataTextureLoader=DataTextureLoader,e.CubeTextureLoader=CubeTextureLoader,e.TextureLoader=TextureLoader,e.ObjectLoader=ObjectLoader,e.MaterialLoader=MaterialLoader,e.BufferGeometryLoader=BufferGeometryLoader,e.DefaultLoadingManager=St,e.LoadingManager=LoadingManager,e.JSONLoader=JSONLoader,e.ImageLoader=ImageLoader,e.FontLoader=FontLoader,e.FileLoader=FileLoader,e.Loader=Loader,e.Cache=At,e.AudioLoader=AudioLoader,e.SpotLightShadow=SpotLightShadow,e.SpotLight=SpotLight,e.PointLight=PointLight,e.RectAreaLight=RectAreaLight,e.HemisphereLight=HemisphereLight,e.DirectionalLightShadow=DirectionalLightShadow,e.DirectionalLight=DirectionalLight,e.AmbientLight=AmbientLight,e.LightShadow=LightShadow,e.Light=Light,e.StereoCamera=StereoCamera,e.PerspectiveCamera=PerspectiveCamera,e.OrthographicCamera=OrthographicCamera,e.CubeCamera=CubeCamera,e.Camera=Camera,e.AudioListener=AudioListener,e.PositionalAudio=PositionalAudio,e.AudioContext=Nt,e.AudioAnalyser=AudioAnalyser,e.Audio=Audio,e.VectorKeyframeTrack=VectorKeyframeTrack,e.StringKeyframeTrack=StringKeyframeTrack,e.QuaternionKeyframeTrack=QuaternionKeyframeTrack,e.NumberKeyframeTrack=NumberKeyframeTrack,e.ColorKeyframeTrack=ColorKeyframeTrack,e.BooleanKeyframeTrack=BooleanKeyframeTrack,e.PropertyMixer=PropertyMixer,e.PropertyBinding=PropertyBinding,e.KeyframeTrack=KeyframeTrack,e.AnimationUtils=Ct,e.AnimationObjectGroup=AnimationObjectGroup,e.AnimationMixer=AnimationMixer,e.AnimationClip=AnimationClip,e.Uniform=Uniform,e.InstancedBufferGeometry=InstancedBufferGeometry,e.BufferGeometry=BufferGeometry,e.GeometryIdCount=GeometryIdCount,e.Geometry=Geometry,e.InterleavedBufferAttribute=InterleavedBufferAttribute,e.InstancedInterleavedBuffer=InstancedInterleavedBuffer,e.InterleavedBuffer=InterleavedBuffer,e.InstancedBufferAttribute=InstancedBufferAttribute,e.Face3=Face3,e.Object3D=Object3D,e.Raycaster=Raycaster,e.Layers=Layers,e.EventDispatcher=EventDispatcher,e.Clock=Clock,e.QuaternionLinearInterpolant=QuaternionLinearInterpolant,e.LinearInterpolant=LinearInterpolant,e.DiscreteInterpolant=DiscreteInterpolant,e.CubicInterpolant=CubicInterpolant,e.Interpolant=Interpolant,e.Triangle=Triangle,e.Math=st,e.Spherical=Spherical,e.Cylindrical=Cylindrical,e.Plane=Plane,e.Frustum=Frustum,e.Sphere=Sphere,e.Ray=Ray,e.Matrix4=Matrix4,e.Matrix3=Matrix3,e.Box3=Box3,e.Box2=Box2,e.Line3=Line3,e.Euler=Euler,e.Vector4=Vector4,e.Vector3=Vector3,e.Vector2=Vector2,e.Quaternion=Quaternion,e.Color=Color,e.MorphBlendMesh=MorphBlendMesh,e.ImmediateRenderObject=ImmediateRenderObject,e.VertexNormalsHelper=VertexNormalsHelper,e.SpotLightHelper=SpotLightHelper,e.SkeletonHelper=SkeletonHelper,e.PointLightHelper=PointLightHelper,e.RectAreaLightHelper=RectAreaLightHelper,e.HemisphereLightHelper=HemisphereLightHelper,e.GridHelper=GridHelper,e.PolarGridHelper=PolarGridHelper,e.FaceNormalsHelper=FaceNormalsHelper,e.DirectionalLightHelper=DirectionalLightHelper,e.CameraHelper=CameraHelper,e.BoxHelper=BoxHelper,e.ArrowHelper=ArrowHelper,e.AxisHelper=AxisHelper,e.CatmullRomCurve3=CatmullRomCurve3,e.CubicBezierCurve3=CubicBezierCurve3,e.QuadraticBezierCurve3=QuadraticBezierCurve3,e.LineCurve3=LineCurve3,e.ArcCurve=ArcCurve,e.EllipseCurve=EllipseCurve,e.SplineCurve=SplineCurve,e.CubicBezierCurve=CubicBezierCurve,e.QuadraticBezierCurve=QuadraticBezierCurve,e.LineCurve=LineCurve,e.Shape=Shape,e.Path=Path,e.ShapePath=ShapePath,e.Font=Font,e.CurvePath=CurvePath,e.Curve=Curve,e.ShapeUtils=Et,e.SceneUtils=zt,e.WireframeGeometry=WireframeGeometry,e.ParametricGeometry=ParametricGeometry,e.ParametricBufferGeometry=ParametricBufferGeometry,e.TetrahedronGeometry=TetrahedronGeometry,e.TetrahedronBufferGeometry=TetrahedronBufferGeometry,e.OctahedronGeometry=OctahedronGeometry,e.OctahedronBufferGeometry=OctahedronBufferGeometry,e.IcosahedronGeometry=IcosahedronGeometry,e.IcosahedronBufferGeometry=IcosahedronBufferGeometry,e.DodecahedronGeometry=DodecahedronGeometry,e.DodecahedronBufferGeometry=DodecahedronBufferGeometry,e.PolyhedronGeometry=PolyhedronGeometry,e.PolyhedronBufferGeometry=PolyhedronBufferGeometry,e.TubeGeometry=TubeGeometry,e.TubeBufferGeometry=TubeBufferGeometry,e.TorusKnotGeometry=TorusKnotGeometry,e.TorusKnotBufferGeometry=TorusKnotBufferGeometry,e.TorusGeometry=TorusGeometry,e.TorusBufferGeometry=TorusBufferGeometry,e.TextGeometry=TextGeometry,e.SphereGeometry=SphereGeometry,e.SphereBufferGeometry=SphereBufferGeometry,e.RingGeometry=RingGeometry,e.RingBufferGeometry=RingBufferGeometry,e.PlaneGeometry=PlaneGeometry,e.PlaneBufferGeometry=PlaneBufferGeometry,e.LatheGeometry=LatheGeometry,e.LatheBufferGeometry=LatheBufferGeometry,e.ShapeGeometry=ShapeGeometry,e.ShapeBufferGeometry=ShapeBufferGeometry,e.ExtrudeGeometry=ExtrudeGeometry,e.EdgesGeometry=EdgesGeometry,e.ConeGeometry=ConeGeometry,e.ConeBufferGeometry=ConeBufferGeometry,e.CylinderGeometry=CylinderGeometry,e.CylinderBufferGeometry=CylinderBufferGeometry,e.CircleGeometry=CircleGeometry,e.CircleBufferGeometry=CircleBufferGeometry,e.BoxGeometry=BoxGeometry,e.BoxBufferGeometry=BoxBufferGeometry,e.ShadowMaterial=ShadowMaterial,e.SpriteMaterial=SpriteMaterial,e.RawShaderMaterial=RawShaderMaterial,e.ShaderMaterial=ShaderMaterial,e.PointsMaterial=PointsMaterial,e.MultiMaterial=MultiMaterial,e.MeshPhysicalMaterial=MeshPhysicalMaterial,e.MeshStandardMaterial=MeshStandardMaterial,e.MeshPhongMaterial=MeshPhongMaterial,e.MeshToonMaterial=MeshToonMaterial;e.MeshNormalMaterial=MeshNormalMaterial,e.MeshLambertMaterial=MeshLambertMaterial,e.MeshDepthMaterial=MeshDepthMaterial,e.MeshBasicMaterial=MeshBasicMaterial,e.LineDashedMaterial=LineDashedMaterial,e.LineBasicMaterial=LineBasicMaterial,e.Material=Material,e.Float64BufferAttribute=Float64BufferAttribute,e.Float32BufferAttribute=Float32BufferAttribute,e.Uint32BufferAttribute=Uint32BufferAttribute,e.Int32BufferAttribute=Int32BufferAttribute,e.Uint16BufferAttribute=Uint16BufferAttribute,e.Int16BufferAttribute=Int16BufferAttribute,e.Uint8ClampedBufferAttribute=Uint8ClampedBufferAttribute,e.Uint8BufferAttribute=Uint8BufferAttribute,e.Int8BufferAttribute=Int8BufferAttribute,e.BufferAttribute=BufferAttribute,e.REVISION=t,e.MOUSE=r,e.CullFaceNone=i,e.CullFaceBack=n,e.CullFaceFront=o,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=a,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=s,e.PCFSoftShadowMap=u,e.FrontSide=l,e.BackSide=c,e.DoubleSide=h,e.FlatShading=d,e.SmoothShading=f,e.NoColors=p,e.FaceColors=m,e.VertexColors=g,e.NoBlending=y,e.NormalBlending=b,e.AdditiveBlending=x,e.SubtractiveBlending=M,e.MultiplyBlending=w,e.CustomBlending=E,e.AddEquation=_,e.SubtractEquation=T,e.ReverseSubtractEquation=A,e.MinEquation=S,e.MaxEquation=C,e.ZeroFactor=L,e.OneFactor=D,e.SrcColorFactor=I,e.OneMinusSrcColorFactor=N,e.SrcAlphaFactor=O,e.OneMinusSrcAlphaFactor=R,e.DstAlphaFactor=j,e.OneMinusDstAlphaFactor=P,e.DstColorFactor=k,e.OneMinusDstColorFactor=B,e.SrcAlphaSaturateFactor=z,e.NeverDepth=U,e.AlwaysDepth=F,e.LessDepth=G,e.LessEqualDepth=V,e.EqualDepth=H,e.GreaterEqualDepth=W,e.GreaterDepth=Y,e.NotEqualDepth=Q,e.MultiplyOperation=q,e.MixOperation=X,e.AddOperation=Z,e.NoToneMapping=K,e.LinearToneMapping=J,e.ReinhardToneMapping=$,e.Uncharted2ToneMapping=ee,e.CineonToneMapping=te,e.UVMapping=300,e.CubeReflectionMapping=re,e.CubeRefractionMapping=ie,e.EquirectangularReflectionMapping=ne,e.EquirectangularRefractionMapping=oe,e.SphericalReflectionMapping=ae,e.CubeUVReflectionMapping=se,e.CubeUVRefractionMapping=ue,e.RepeatWrapping=le,e.ClampToEdgeWrapping=ce,e.MirroredRepeatWrapping=he,e.NearestFilter=de,e.NearestMipMapNearestFilter=fe,e.NearestMipMapLinearFilter=pe,e.LinearFilter=me,e.LinearMipMapNearestFilter=ge,e.LinearMipMapLinearFilter=ye,e.UnsignedByteType=ve,e.ByteType=be,e.ShortType=xe,e.UnsignedShortType=Me,e.IntType=we,e.UnsignedIntType=Ee,e.FloatType=_e,e.HalfFloatType=Te,e.UnsignedShort4444Type=Ae,e.UnsignedShort5551Type=Se,e.UnsignedShort565Type=Ce,e.UnsignedInt248Type=Le,e.AlphaFormat=De,e.RGBFormat=Ie,e.RGBAFormat=Ne,e.LuminanceFormat=Oe,e.LuminanceAlphaFormat=Re,e.RGBEFormat=je,e.DepthFormat=Pe,e.DepthStencilFormat=ke,e.RGB_S3TC_DXT1_Format=Be,e.RGBA_S3TC_DXT1_Format=ze,e.RGBA_S3TC_DXT3_Format=Ue,e.RGBA_S3TC_DXT5_Format=Fe,e.RGB_PVRTC_4BPPV1_Format=Ge,e.RGB_PVRTC_2BPPV1_Format=Ve,e.RGBA_PVRTC_4BPPV1_Format=He,e.RGBA_PVRTC_2BPPV1_Format=We,e.RGB_ETC1_Format=Ye,e.LoopOnce=2200,e.LoopRepeat=Qe,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=qe,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=Xe,e.TriangleStripDrawMode=Ze,e.TriangleFanDrawMode=Ke,e.LinearEncoding=Je,e.sRGBEncoding=$e,e.GammaEncoding=et,e.RGBEEncoding=tt,e.LogLuvEncoding=3003,e.RGBM7Encoding=rt,e.RGBM16Encoding=it,e.RGBDEncoding=nt,e.BasicDepthPacking=ot,e.RGBADepthPacking=at,e.CubeGeometry=BoxGeometry,e.Face4=Face4,e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=MeshFaceMaterial,e.PointCloud=PointCloud,e.Particle=Particle,e.ParticleSystem=ParticleSystem,e.PointCloudMaterial=PointCloudMaterial,e.ParticleBasicMaterial=ParticleBasicMaterial,e.ParticleSystemMaterial=ParticleSystemMaterial,e.Vertex=Vertex,e.DynamicBufferAttribute=DynamicBufferAttribute,e.Int8Attribute=Int8Attribute,e.Uint8Attribute=Uint8Attribute,e.Uint8ClampedAttribute=Uint8ClampedAttribute,e.Int16Attribute=Int16Attribute,e.Uint16Attribute=Uint16Attribute,e.Int32Attribute=Int32Attribute,e.Uint32Attribute=Uint32Attribute,e.Float32Attribute=Float32Attribute,e.Float64Attribute=Float64Attribute,e.ClosedSplineCurve3=ClosedSplineCurve3,e.SplineCurve3=SplineCurve3,e.Spline=Spline,e.BoundingBoxHelper=BoundingBoxHelper,e.EdgesHelper=EdgesHelper,e.WireframeHelper=WireframeHelper,e.XHRLoader=XHRLoader,e.BinaryTextureLoader=BinaryTextureLoader,e.GeometryUtils=Ut,e.ImageUtils=Ft,e.Projector=Projector,e.CanvasRenderer=CanvasRenderer,Object.defineProperty(e,"__esModule",{value:!0})})},{}],43:[function(e,t,r){THREE.ColladaLoader=function(){function load(e,t,r,i){var n=0;if(document.implementation&&document.implementation.createDocument){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState?0===o.status||200===o.status?o.response?(h=t,parse(o.response,void 0,e)):i?i({type:"error",url:e}):console.error("ColladaLoader: Empty or non-existing file ("+e+")"):i?i({type:"error",url:e}):console.error("ColladaLoader: Couldn't load \""+e+'" ('+o.status+")"):3===o.readyState&&r&&(0===n&&(n=o.getResponseHeader("Content-Length")),r({total:n,loaded:o.responseText.length}))},o.open("GET",e,!0),o.send(null)}else alert("Don't know how to parse XML!")}function parse(d,M,w){if(l=(new DOMParser).parseFromString(d,"text/xml"),M=M||h,void 0!==w){var _=w.split("/");_.pop(),a=(_.length<1?".":_.join("/"))+"/"}parseAsset(),setUpConversion(),f=parseLib("library_images image",_Image,"image"),y=parseLib("library_materials material",Material,"material"),v=parseLib("library_effects effect",Effect,"effect"),g=parseLib("library_geometries geometry",Geometry,"geometry"),b=parseLib("library_cameras camera",Camera,"camera"),x=parseLib("library_lights light",Light,"light"),m=parseLib("library_controllers controller",Controller,"controller"),p=parseLib("library_animations animation",Animation,"animation"),n=parseLib("library_visual_scenes visual_scene",VisualScene,"visual_scene"),o=parseLib("library_kinematics_models kinematics_model",KinematicsModel,"kinematics_model"),s=[],u=[],e=parseScene(),c=new THREE.Group;for(var T=0;T<e.nodes.length;T++)c.add(createSceneGraph(e.nodes[T]));c.scale.multiplyScalar(E),createAnimations(),t=parseKinematicsModel(),createKinematics();var A={scene:c,morphs:s,skins:u,animations:r,kinematics:i,dae:{images:f,materials:y,cameras:b,lights:x,effects:v,geometries:g,controllers:m,animations:p,visualScenes:n,visualScene:e,scene:e,kinematicsModels:o,kinematicsModel:t}};return M&&M(A),A}function setPreferredShading(e){M=e}function parseAsset(){var e=l.querySelectorAll("asset"),t=e[0];if(t&&t.childNodes)for(var r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];switch(i.nodeName){case"unit":var n=i.getAttribute("meter");n&&(E=parseFloat(n));break;case"up_axis":_=i.textContent.charAt(0)}}}function parseLib(e,t,r){for(var i=l.querySelectorAll(e),n={},o=0,a=i.length,s=0;s<a;s++){var u=i[s],c=(new t).parse(u);c.id&&0!==c.id.length||(c.id=r+o++),n[c.id]=c}return n}function parseScene(){var e=l.querySelectorAll("scene instance_visual_scene")[0];if(e){var t=e.getAttribute("url").replace(/^#/,"");return n[t.length>0?t:"visual_scene0"]}return null}function parseKinematicsModel(){var e=l.querySelectorAll("instance_kinematics_model")[0];if(e){var t=e.getAttribute("url").replace(/^#/,"");return o[t.length>0?t:"kinematics_model0"]}return null}function createAnimations(){r=[],recurseHierarchy(c)}function recurseHierarchy(t){var i=e.getChildById(t.colladaId,!0),n=null;if(i&&i.keys){n={fps:60,hierarchy:[{node:i,keys:i.keys,sids:i.sids}],node:t,name:"animation_"+t.name,length:0},r.push(n);for(var o=0,a=i.keys.length;o<a;o++)n.length=Math.max(n.length,i.keys[o].time)}else n={hierarchy:[{keys:[],sids:[]}]};for(var o=0,a=t.children.length;o<a;o++)for(var s=recurseHierarchy(t.children[o]),u=0,l=s.hierarchy.length;u<l;u++)n.hierarchy.push({keys:[],sids:[]});return n}function calcAnimationBounds(){var e,t=1e6,r=-t,i=0;for(var n in p){var o=p[n];e=e||o.id;for(var a=0;a<o.sampler.length;a++){var s=o.sampler[a];s.create(),t=Math.min(t,s.startTime),r=Math.max(r,s.endTime),i=Math.max(i,s.input.length)}}return{start:t,end:r,frames:i,ID:e}}function createMorph(e,t){var r=t instanceof InstanceController?m[t.url]:t;if(!r||!r.morph)return void console.log("could not find morph controller!");for(var i=r.morph,n=0;n<i.targets.length;n++){var o=i.targets[n],a=g[o];if(a.mesh&&a.mesh.primitives&&a.mesh.primitives.length){var s=a.mesh.primitives[0].geometry;s.vertices.length===e.vertices.length&&e.morphTargets.push({name:"target_1",vertices:s.vertices})}}e.morphTargets.push({name:"target_Z",vertices:e.vertices})}function setupSkeleton(e,t,r,i){if(e.world=e.world||new THREE.Matrix4,e.localworld=e.localworld||new THREE.Matrix4,e.world.copy(e.matrix),e.localworld.copy(e.matrix),e.channels&&e.channels.length){var n=e.channels[0],o=n.sampler.output[r];o instanceof THREE.Matrix4&&(e.world.copy(o),e.localworld.copy(o),0===r&&e.matrix.copy(o))}i&&e.world.multiplyMatrices(i,e.world),t.push(e);for(var a=0;a<e.nodes.length;a++)setupSkeleton(e.nodes[a],t,r,e.world)}function setupSkinningMatrices(e,t){for(var r=0;r<e.length;r++){var i=e[r],n=-1;if("JOINT"==i.type){for(var o=0;o<t.joints.length;o++)if(i.sid===t.joints[o]){n=o;break}if(n>=0){var a=t.invBindMatrices[n];i.invBindMatrix=a,i.skinningMatrix=new THREE.Matrix4,i.skinningMatrix.multiplyMatrices(i.world,a),i.animatrix=new THREE.Matrix4,i.animatrix.copy(i.localworld),i.weights=[];for(var o=0;o<t.weights.length;o++)for(var s=0;s<t.weights[o].length;s++){var u=t.weights[o][s];u.joint===n&&i.weights.push(u)}}else console.warn("ColladaLoader: Could not find joint '"+i.sid+"'."),i.skinningMatrix=new THREE.Matrix4,i.weights=[]}}}function flattenSkeleton(e){var t=[],r=function(e,t,i){var n={};n.name=t.sid,n.parent=e,n.matrix=t.matrix;var o=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];n.matrix.decompose(o[0],o[1],o[2]),n.pos=[o[0].x,o[0].y,o[0].z],n.scl=[o[2].x,o[2].y,o[2].z],n.rotq=[o[1].x,o[1].y,o[1].z,o[1].w],i.push(n);for(var a in t.nodes)r(t.sid,t.nodes[a],i)};return r(-1,e,t),t}function skinToBindPose(e,t,r){var i=[];setupSkeleton(t,i,-1),setupSkinningMatrices(i,r.skin);for(var n=new THREE.Vector3,o=[],a=0;a<e.vertices.length;a++)o.push(new THREE.Vector3);for(a=0;a<i.length;a++)if("JOINT"==i[a].type)for(var s=0;s<i[a].weights.length;s++){var u=i[a].weights[s],l=u.index,c=u.weight,h=e.vertices[l],d=o[l];n.x=h.x,n.y=h.y,n.z=h.z,n.applyMatrix4(i[a].skinningMatrix),d.x+=n.x*c,d.y+=n.y*c,d.z+=n.z*c}for(var a=0;a<e.vertices.length;a++)e.vertices[a]=o[a]}function applySkin(t,r,i){var n=m[r.url];if(i=void 0!==i?i:40,!n||!n.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!r.skeleton||!r.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var o=calcAnimationBounds(),a=e.getChildById(r.skeleton[0],!0)||e.getChildBySid(r.skeleton[0],!0),s=flattenSkeleton(a),u=n.skin.joints,l=[],c=0;c<u.length;c++)for(var h=0;h<s.length;h++)s[h].name===u[c]&&(l[c]=s[h]);for(var c=0;c<l.length;c++)for(var h=0;h<l.length;h++)l[c].parent===l[h].name&&(l[c].parent=h);var c,h,d;new THREE.Vector3;for(c=0;c<t.vertices.length;c++)t.vertices[c].applyMatrix4(n.skin.bindShapeMatrix);for(var f=[],p=[],g=n.skin.weights,c=0;c<g.length;c++){var y=new THREE.Vector4(g[c][0]?g[c][0].joint:0,g[c][1]?g[c][1].joint:0,g[c][2]?g[c][2].joint:0,g[c][3]?g[c][3].joint:0),d=new THREE.Vector4(g[c][0]?g[c][0].weight:0,g[c][1]?g[c][1].weight:0,g[c][2]?g[c][2].weight:0,g[c][3]?g[c][3].weight:0);f.push(y),p.push(d)}t.skinIndices=f,t.skinWeights=p,t.bones=l;for(var v={name:o.ID,fps:30,length:o.frames/30,hierarchy:[]},h=0;h<l.length;h++)v.hierarchy.push({parent:l[h].parent,name:l[h].name,keys:[]});for(console.log("ColladaLoader:",o.ID+" has "+l.length+" bones."),skinToBindPose(t,a,n),i=0;i<o.frames;i++){var b=[];setupSkeleton(a,b,i),setupSkinningMatrices(b,n.skin);for(var c=0;c<b.length;c++)for(var h=0;h<v.hierarchy.length;h++)if(v.hierarchy[h].name===b[c].sid){var x={};x.time=i/30,x.matrix=b[c].animatrix,0===i&&(b[c].matrix=x.matrix);var M=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];x.matrix.decompose(M[0],M[1],M[2]),x.pos=[M[0].x,M[0].y,M[0].z],x.scl=[M[2].x,M[2].y,M[2].z],x.rot=M[1],v.hierarchy[h].keys.push(x)}t.animation=v}}function createKinematics(){if(t&&0===t.joints.length)return void(i=void 0);var r={};i={joints:t&&t.joints,getJointValue:function(e){var t=r[e];if(t)return t.position;console.log("getJointValue: joint "+e+" doesn't exist")},setJointValue:function(e,t){var i=r[e];if(i){var n=i.joint;if(t>n.limits.max||t<n.limits.min)console.log("setJointValue: joint "+e+" value "+t+" outside of limits (min: "+n.limits.min+", max: "+n.limits.max+")");else if(n.static)console.log("setJointValue: joint "+e+" is static");else{var a=i.node,s=n.axis,u=i.transforms,l=new THREE.Matrix4;for(o=0;o<u.length;o++){var c=u[o];if(c.sid&&-1!==c.sid.indexOf("joint"+e))switch(n.type){case"revolute":l.multiply(h.makeRotationAxis(s,THREE.Math.degToRad(t)));break;case"prismatic":l.multiply(h.makeTranslation(s.x*t,s.y*t,s.z*t));break;default:console.warn("setJointValue: unknown joint type: "+n.type)}else{var h=new THREE.Matrix4;switch(c.type){case"matrix":l.multiply(c.obj);break;case"translate":l.multiply(h.makeTranslation(c.obj.x,c.obj.y,c.obj.z));break;case"rotate":l.multiply(h.makeRotationAxis(c.obj,c.angle))}}}var d=l.elements,f=Array.prototype.slice.call(d),p=[f[0],f[4],f[8],f[12],f[1],f[5],f[9],f[13],f[2],f[6],f[10],f[14],f[3],f[7],f[11],f[15]];a.matrix.set.apply(a.matrix,p),a.matrix.decompose(a.position,a.quaternion,a.scale)}}else console.log("setJointValue: joint "+e+" doesn't exist")}};var n=l.querySelector("scene instance_kinematics_scene");if(n)for(var o=0;o<n.childNodes.length;o++){var a=n.childNodes[o];if(1==a.nodeType)switch(a.nodeName){case"bind_joint_axis":var s=a.getAttribute("target").split("/").pop(),u=a.querySelector("axis param").textContent,h=parseInt(u.split("joint").pop().split(".")[0]),d=l.querySelector('[sid="'+s+'"]');if(d){var f=d.parentElement;!function(i,n){var o=n.getAttribute("id"),a=e.getChildById(o,!0),s=t.joints[i];c.traverse(function(e){e.colladaId==o&&(r[i]={node:e,transforms:a.transforms,joint:s,position:s.zeroPosition})})}(h,f)}}}}function createSceneGraph(e,t){var r,i,n,o,a=new THREE.Object3D;for(n=0;n<e.controllers.length;n++){var l=m[e.controllers[n].url];switch(l.type){case"skin":if(g[l.skin.source]){var c=new InstanceGeometry;c.url=l.skin.source,c.instance_material=e.controllers[n].instance_material,e.geometries.push(c),!0,r=e.controllers[n]}else if(m[l.skin.source]){var h=m[l.skin.source];if(i=h,h.morph&&g[h.morph.source]){var c=new InstanceGeometry;c.url=h.morph.source,c.instance_material=e.controllers[n].instance_material,e.geometries.push(c)}}break;case"morph":if(g[l.morph.source]){var c=new InstanceGeometry;c.url=l.morph.source,c.instance_material=e.controllers[n].instance_material,e.geometries.push(c),i=e.controllers[n]}console.log("ColladaLoader: Morph-controller partially supported.")}}var d={};for(n=0;n<e.geometries.length;n++){var f,p=e.geometries[n],M=p.instance_material,E=g[p.url],_={},T=[],A=0;if(E){if(!E.mesh||!E.mesh.primitives)continue;if(0===a.name.length&&(a.name=E.id),M)for(o=0;o<M.length;o++){var S=M[o],C=y[S.target],L=C.instance_effect.url,D=v[L].shader,I=D.material;if(E.doubleSided){if(!(S.symbol in d)){var N=I.clone();N.side=THREE.DoubleSide,d[S.symbol]=N}I=d[S.symbol]}I.opacity=I.opacity?I.opacity:1,_[S.symbol]=A,T.push(I),f=I,f.name=null===C.name||""===C.name?C.id:C.name,A++}var O,R=f||new THREE.MeshLambertMaterial({color:14540253,side:E.doubleSided?THREE.DoubleSide:THREE.FrontSide}),j=E.mesh.geometry3js;if(A>1)for(R=new THREE.MultiMaterial(T),o=0;o<j.faces.length;o++){var P=j.faces[o];P.materialIndex=_[P.daeMaterial]}void 0!==r?(applySkin(j,r),j.morphTargets.length>0?(R.morphTargets=!0,R.skinning=!1):(R.morphTargets=!1,R.skinning=!0),O=new THREE.SkinnedMesh(j,R,!1),O.name="skin_"+u.length,u.push(O)):void 0!==i?(createMorph(j,i),R.morphTargets=!0,O=new THREE.Mesh(j,R),O.name="morph_"+s.length,s.push(O)):O=!0===j.isLineStrip?new THREE.Line(j):new THREE.Mesh(j,R),a.add(O)}}for(n=0;n<e.cameras.length;n++){var k=e.cameras[n],B=b[k.url],z=new THREE.PerspectiveCamera(B.yfov,parseFloat(B.aspect_ratio),parseFloat(B.znear),parseFloat(B.zfar));a.add(z)}for(n=0;n<e.lights.length;n++){var U=null,F=e.lights[n],G=x[F.url];if(G&&G.technique){var V=G.color.getHex(),H=G.intensity,W=G.distance,Y=G.falloff_angle;switch(G.technique){case"directional":U=new THREE.DirectionalLight(V,H,W),U.position.set(0,0,1);break;case"point":U=new THREE.PointLight(V,H,W);break;case"spot":U=new THREE.SpotLight(V,H,W,Y),U.position.set(0,0,1);break;case"ambient":U=new THREE.AmbientLight(V)}}U&&a.add(U)}if(a.name=e.name||e.id||"",a.colladaId=e.id||"",a.layer=e.layer||"",a.matrix=e.matrix,a.matrix.decompose(a.position,a.quaternion,a.scale),w.centerGeometry&&a.geometry){var Q=a.geometry.center();Q.multiply(a.scale),Q.applyQuaternion(a.quaternion),a.position.sub(Q)}for(n=0;n<e.nodes.length;n++)a.add(createSceneGraph(e.nodes[n],e));return a}function getLibraryNode(e){for(var t=l.querySelectorAll("library_nodes node"),r=0;r<t.length;r++){var i=t[r].attributes.getNamedItem("id");if(i&&i.value===e)return t[r]}}function getChannelsForNode(e){var t=[],r=1e6,i=-1e6;for(var n in p)for(var o=p[n],a=0;a<o.channel.length;a++){var s=o.channel[a],u=o.sampler[a],n=s.target.split("/")[0];n==e.id&&(u.create(),s.sampler=u,r=Math.min(r,u.startTime),i=Math.max(i,u.endTime),t.push(s))}return t.length&&(e.startTime=r,e.endTime=i),t}function bakeAnimations(e){if(e.channels&&e.channels.length){for(var t=[],r=[],i=0,n=e.channels.length;i<n;i++){var o,a=e.channels[i],s=a.fullSid,u=a.sampler,l=u.input,c=e.getTransformBySid(a.sid);if(a.arrIndices){o=[];for(var h=0,d=a.arrIndices.length;h<d;h++)o[h]=getConvertedIndex(a.arrIndices[h])}else o=getConvertedMember(a.member);if(c){-1===r.indexOf(s)&&r.push(s);for(var h=0,d=l.length;h<d;h++){var f=l[h],p=u.getData(c.type,h,o),m=findKey(t,f);if(!m){m=new Key(f);var g=findTimeNdx(t,f);t.splice(-1===g?t.length:g,0,m)}m.addTarget(s,c,o,p)}}else console.log('Could not find transform "'+a.sid+'" in node '+e.id)}for(var i=0;i<r.length;i++)for(var y=r[i],h=0;h<t.length;h++){var m=t[h];m.hasTarget(y)||interpolateKeys(t,m,h,y)}e.keys=t,e.sids=r}}function findKey(e,t){for(var r=null,i=0,n=e.length;i<n&&null===r;i++){var o=e[i];if(o.time===t)r=o;else if(o.time>t)break}return r}function findTimeNdx(e,t){for(var r=-1,i=0,n=e.length;i<n&&-1===r;i++){e[i].time>=t&&(r=i)}return r}function interpolateKeys(e,t,r,i){var n=getPrevKeyWith(e,i,r?r-1:0),o=getNextKeyWith(e,i,r+1);if(n&&o){var a,s=(t.time-n.time)/(o.time-n.time),u=n.getTarget(i),l=o.getTarget(i).data,c=u.data;if("matrix"===u.type)a=c;else if(c.length){a=[];for(var h=0;h<c.length;++h)a[h]=c[h]+(l[h]-c[h])*s}else a=c+(l-c)*s;t.addTarget(i,u.transform,u.member,a)}}function getNextKeyWith(e,t,r){for(;r<e.length;r++){var i=e[r];if(i.hasTarget(t))return i}return null}function getPrevKeyWith(e,t,r){for(r=r>=0?r:r+e.length;r>=0;r--){var i=e[r];if(i.hasTarget(t))return i}return null}function _Image(){this.id="",this.init_from=""}function Controller(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function Morph(){this.method=null,this.source=null,this.targets=null,this.weights=null}function Skin(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function VisualScene(){this.id="",this.name="",this.nodes=[],this.scene=new THREE.Group}function Node(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new THREE.Matrix4}function Transform(){this.sid="",this.type="",this.data=[],this.obj=null}function InstanceController(){this.url="",this.skeleton=[],this.instance_material=[]}function InstanceMaterial(){this.symbol="",this.target=""}function InstanceGeometry(){this.url="",this.instance_material=[]}function Geometry(){this.id="",this.mesh=null}function Mesh(e){this.geometry=e.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function Polygons(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new THREE.Geometry}function Polylist(){Polygons.call(this),this.vcount=[]}function LineStrips(){Polygons.call(this),this.vcount=1}function Triangles(){Polygons.call(this),this.vcount=3}function Accessor(){this.source="",this.count=0,this.stride=0,this.params=[]}function Vertices(){this.input={}}function Input(){this.semantic="",this.offset=0,this.source="",this.set=0}function Source(e){this.id=e,this.type=null}function Material(){this.id="",this.name="",this.instance_effect=null}function ColorOrTexture(){this.color=new THREE.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function Shader(e,t){this.type=e,this.effect=t,this.material=null}function Surface(e){this.effect=e,this.init_from=null,this.format=null}function Sampler2D(e){this.effect=e,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function Effect(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function InstanceEffect(){this.url=""}function Animation(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function Channel(e){this.animation=e,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function Sampler(e){this.id="",this.animation=e,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function Key(e){this.targets=[],this.time=e}function Camera(){this.id="",this.name="",this.technique=""}function InstanceCamera(){this.url=""}function Light(){this.id="",this.name="",this.technique=""}function InstanceLight(){this.url=""}function KinematicsModel(){this.id="",this.name="",this.joints=[],this.links=[]}function Joint(){this.sid="",this.name="",this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0}function Link(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function Attachment(){this.joint="",this.transforms=[],this.links=[]}function _source(e){var t=e.getAttribute("id");return void 0!=d[t]?d[t]:(d[t]=new Source(t).parse(e),d[t])}function _bools(e){for(var t=_strings(e),r=[],i=0,n=t.length;i<n;i++)r.push("true"===t[i]||"1"===t[i]);return r}function _floats(e){for(var t=_strings(e),r=[],i=0,n=t.length;i<n;i++)r.push(parseFloat(t[i]));return r}function _ints(e){for(var t=_strings(e),r=[],i=0,n=t.length;i<n;i++)r.push(parseInt(t[i],10));return r}function _strings(e){return e.length>0?_trimString(e).split(/\s+/):[]}function _trimString(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function _attr_as_int(e,t,r){return e.hasAttribute(t)?parseInt(e.getAttribute(t),10):r}function loadTextureImage(e,t){(new THREE.ImageLoader).load(t,function(t){e.image=t,e.needsUpdate=!0})}function extractDoubleSided(e,t){e.doubleSided=!1;var r=t.querySelectorAll("extra double_sided")[0];r&&r&&1===parseInt(r.textContent,10)&&(e.doubleSided=!0)}function setUpConversion(){if(!0!==w.convertUpAxis||_===w.upAxis)T=null;else switch(_){case"X":T="Y"===w.upAxis?"XtoY":"XtoZ";break;case"Y":T="X"===w.upAxis?"YtoX":"YtoZ";break;case"Z":T="X"===w.upAxis?"ZtoX":"ZtoY"}}function fixCoords(e,t){if(!0===w.convertUpAxis&&_!==w.upAxis)switch(T){case"XtoY":var r=e[0];e[0]=t*e[1],e[1]=r;break;case"XtoZ":var r=e[2];e[2]=e[1],e[1]=e[0],e[0]=r;break;case"YtoX":var r=e[0];e[0]=e[1],e[1]=t*r;break;case"YtoZ":var r=e[1];e[1]=t*e[2],e[2]=r;break;case"ZtoX":var r=e[0];e[0]=e[1],e[1]=e[2],e[2]=r;break;case"ZtoY":var r=e[1];e[1]=e[2],e[2]=t*r}}function getConvertedTranslation(e,t){if(!0!==w.convertUpAxis||_===w.upAxis)return t;switch(e){case"X":t="XtoY"===T?-1*t:t;break;case"Y":t="YtoZ"===T||"YtoX"===T?-1*t:t;break;case"Z":t="ZtoY"===T?-1*t:t}return t}function getConvertedVec3(e,t){var r=[e[t],e[t+1],e[t+2]];return fixCoords(r,-1),new THREE.Vector3(r[0],r[1],r[2])}function getConvertedMat4(e){if(w.convertUpAxis){var t=[e[0],e[4],e[8]];fixCoords(t,-1),e[0]=t[0],e[4]=t[1],e[8]=t[2],t=[e[1],e[5],e[9]],fixCoords(t,-1),e[1]=t[0],e[5]=t[1],e[9]=t[2],t=[e[2],e[6],e[10]],fixCoords(t,-1),e[2]=t[0],e[6]=t[1],e[10]=t[2],t=[e[0],e[1],e[2]],fixCoords(t,-1),e[0]=t[0],e[1]=t[1],e[2]=t[2],t=[e[4],e[5],e[6]],fixCoords(t,-1),e[4]=t[0],e[5]=t[1],e[6]=t[2],t=[e[8],e[9],e[10]],fixCoords(t,-1),e[8]=t[0],e[9]=t[1],e[10]=t[2],t=[e[3],e[7],e[11]],fixCoords(t,-1),e[3]=t[0],e[7]=t[1],e[11]=t[2]}return(new THREE.Matrix4).set(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function getConvertedIndex(e){if(e>-1&&e<3){var t=["X","Y","Z"],r={X:0,Y:1,Z:2};e=getConvertedMember(t[e]),e=r[e]}return e}function getConvertedMember(e){if(w.convertUpAxis)switch(e){case"X":switch(T){case"XtoY":case"XtoZ":case"YtoX":e="Y";break;case"ZtoX":e="Z"}break;case"Y":switch(T){case"XtoY":case"YtoX":case"ZtoX":e="X";break;case"XtoZ":case"YtoZ":case"ZtoY":e="Z"}break;case"Z":switch(T){case"XtoZ":e="X";break;case"YtoZ":case"ZtoX":case"ZtoY":e="Y"}}return e}var e,t,r,i,n,o,a,s,u,l=null,c=null,h=null,d={},f={},p={},m={},g={},y={},v={},b={},x={},M=THREE.SmoothShading,w={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},E=1,_="Y",T=null;return _Image.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];"init_from"===r.nodeName&&(this.init_from=r.textContent)}return this},Controller.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.type="none";for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"skin":this.skin=(new Skin).parse(r),this.type=r.nodeName;break;case"morph":this.morph=(new Morph).parse(r),this.type=r.nodeName}}return this},Morph.prototype.parse=function(e){var t,r={},i=[];for(this.method=e.getAttribute("method"),this.source=e.getAttribute("source").replace(/^#/,""),t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"source":var o=(new Source).parse(n);r[o.id]=o;break;case"targets":i=this.parseInputs(n);break;default:console.log(n.nodeName)}}for(t=0;t<i.length;t++){var a=i[t],o=r[a.source];switch(a.semantic){case"MORPH_TARGET":this.targets=o.read();break;case"MORPH_WEIGHT":this.weights=o.read()}}return this},Morph.prototype.parseInputs=function(e){for(var t=[],r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1==i.nodeType)switch(i.nodeName){case"input":t.push((new Input).parse(i))}}return t},Skin.prototype.parse=function(e){var t,r,i={};this.source=e.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var n=0;n<e.childNodes.length;n++){var o=e.childNodes[n];if(1==o.nodeType)switch(o.nodeName){case"bind_shape_matrix":var a=_floats(o.textContent);this.bindShapeMatrix=getConvertedMat4(a);break;case"source":var s=(new Source).parse(o);i[s.id]=s;break;case"joints":t=o;break;case"vertex_weights":r=o;break;default:console.log(o.nodeName)}}return this.parseJoints(t,i),this.parseWeights(r,i),this},Skin.prototype.parseJoints=function(e,t){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1==i.nodeType)switch(i.nodeName){case"input":var n=(new Input).parse(i),o=t[n.source];"JOINT"===n.semantic?this.joints=o.read():"INV_BIND_MATRIX"===n.semantic&&(this.invBindMatrices=o.read())}}},Skin.prototype.parseWeights=function(e,t){for(var r,i,n=[],o=0;o<e.childNodes.length;o++){var a=e.childNodes[o];if(1==a.nodeType)switch(a.nodeName){case"input":n.push((new Input).parse(a));break;case"v":r=_ints(a.textContent);break;case"vcount":i=_ints(a.textContent)}}for(var s=0,o=0;o<i.length;o++){for(var u=i[o],l=[],c=0;c<u;c++){for(var h={},d=0;d<n.length;d++){var f=n[d],p=r[s+f.offset];switch(f.semantic){case"JOINT":h.joint=p;break;case"WEIGHT":h.weight=t[f.source].data[p]}}l.push(h),s+=n.length}for(var c=0;c<l.length;c++)l[c].index=o;this.weights.push(l)}},VisualScene.prototype.getChildById=function(e,t){for(var r=0;r<this.nodes.length;r++){var i=this.nodes[r].getChildById(e,t);if(i)return i}return null},VisualScene.prototype.getChildBySid=function(e,t){for(var r=0;r<this.nodes.length;r++){var i=this.nodes[r].getChildBySid(e,t);if(i)return i}return null},VisualScene.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.nodes=[];for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"node":this.nodes.push((new Node).parse(r))}}return this},Node.prototype.getChannelForTransform=function(e){for(var t=0;t<this.channels.length;t++){var r,i=this.channels[t],n=i.target.split("/"),o=(n.shift(),n.shift()),a=o.indexOf(".")>=0,s=o.indexOf("(")>=0;if(a)n=o.split("."),o=n.shift(),n.shift();else if(s){r=o.split("("),o=r.shift();for(var u=0;u<r.length;u++)r[u]=parseInt(r[u].replace(/\)/,""))}if(o===e)return i.info={sid:o,dotSyntax:a,arrSyntax:s,arrIndices:r},i}return null},Node.prototype.getChildById=function(e,t){if(this.id===e)return this;if(t)for(var r=0;r<this.nodes.length;r++){var i=this.nodes[r].getChildById(e,t);if(i)return i}return null},Node.prototype.getChildBySid=function(e,t){if(this.sid===e)return this;if(t)for(var r=0;r<this.nodes.length;r++){var i=this.nodes[r].getChildBySid(e,t);if(i)return i}return null},Node.prototype.getTransformBySid=function(e){for(var t=0;t<this.transforms.length;t++)if(this.transforms[t].sid===e)return this.transforms[t];return null},Node.prototype.parse=function(e){var t;this.id=e.getAttribute("id"),this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.type=e.getAttribute("type"),this.layer=e.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new THREE.Matrix4;for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1==i.nodeType)switch(i.nodeName){case"node":this.nodes.push((new Node).parse(i));break;case"instance_camera":this.cameras.push((new InstanceCamera).parse(i));break;case"instance_controller":this.controllers.push((new InstanceController).parse(i));break;case"instance_geometry":this.geometries.push((new InstanceGeometry).parse(i));break;case"instance_light":this.lights.push((new InstanceLight).parse(i));break;case"instance_node":t=i.getAttribute("url").replace(/^#/,"");var n=getLibraryNode(t);n&&this.nodes.push((new Node).parse(n));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push((new Transform).parse(i));break;case"extra":break;default:console.log(i.nodeName)}}return this.channels=getChannelsForNode(this),bakeAnimations(this),this.updateMatrix(),this},Node.prototype.updateMatrix=function(){this.matrix.identity();for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(this.matrix)},Transform.prototype.parse=function(e){return this.sid=e.getAttribute("sid"),this.type=e.nodeName,this.data=_floats(e.textContent),this.convert(),this},Transform.prototype.convert=function(){switch(this.type){case"matrix":this.obj=getConvertedMat4(this.data);break;case"rotate":this.angle=THREE.Math.degToRad(this.data[3]);case"translate":fixCoords(this.data,-1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":fixCoords(this.data,1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}},Transform.prototype.apply=function(){var e=new THREE.Matrix4;return function(t){switch(this.type){case"matrix":t.multiply(this.obj);break;case"translate":t.multiply(e.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":t.multiply(e.makeRotationAxis(this.obj,this.angle));break;case"scale":t.scale(this.obj)}}}(),Transform.prototype.update=function(e,t){var r=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(t)if(1===t.length)switch(t[0]){case 0:this.obj.n11=e[0],this.obj.n21=e[1],this.obj.n31=e[2],this.obj.n41=e[3];break;case 1:this.obj.n12=e[0],this.obj.n22=e[1],this.obj.n32=e[2],this.obj.n42=e[3];break;case 2:this.obj.n13=e[0],this.obj.n23=e[1],this.obj.n33=e[2],this.obj.n43=e[3];break;case 3:this.obj.n14=e[0],this.obj.n24=e[1],this.obj.n34=e[2],this.obj.n44=e[3]}else if(2===t.length){var i="n"+(t[0]+1)+(t[1]+1);this.obj[i]=e}else console.log("Incorrect addressing of matrix in transform.");else this.obj.copy(e);break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(t)&&(t=r[t[0]]),t){case"X":this.obj.x=e;break;case"Y":this.obj.y=e;break;case"Z":this.obj.z=e;break;default:this.obj.x=e[0],this.obj.y=e[1],this.obj.z=e[2]}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(t)&&(t=r[t[0]]),t){case"X":this.obj.x=e;break;case"Y":this.obj.y=e;break;case"Z":this.obj.z=e;break;case"ANGLE":this.angle=THREE.Math.degToRad(e);break;default:this.obj.x=e[0],this.obj.y=e[1],this.obj.z=e[2],this.angle=THREE.Math.degToRad(e[3])}}},InstanceController.prototype.parse=function(e){this.url=e.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1===r.nodeType)switch(r.nodeName){case"skeleton":this.skeleton.push(r.textContent.replace(/^#/,""));break;case"bind_material":for(var i=r.querySelectorAll("instance_material"),n=0;n<i.length;n++){var o=i[n];this.instance_material.push((new InstanceMaterial).parse(o))}}}return this},InstanceMaterial.prototype.parse=function(e){return this.symbol=e.getAttribute("symbol"),this.target=e.getAttribute("target").replace(/^#/,""),this},InstanceGeometry.prototype.parse=function(e){this.url=e.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType&&"bind_material"===r.nodeName){for(var i=r.querySelectorAll("instance_material"),n=0;n<i.length;n++){var o=i[n];this.instance_material.push((new InstanceMaterial).parse(o))}break}}return this},Geometry.prototype.parse=function(e){this.id=e.getAttribute("id"),extractDoubleSided(this,e);for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"mesh":this.mesh=new Mesh(this).parse(r)}}return this},Mesh.prototype.parse=function(e){this.primitives=[];for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"source":_source(r);break;case"vertices":this.vertices=(new Vertices).parse(r);break;case"linestrips":this.primitives.push((new LineStrips).parse(r));break;case"triangles":this.primitives.push((new Triangles).parse(r));break;case"polygons":this.primitives.push((new Polygons).parse(r));break;case"polylist":this.primitives.push((new Polylist).parse(r))}}if(this.geometry3js=new THREE.Geometry,null===this.vertices)return this;for(var i=d[this.vertices.input.POSITION.source].data,t=0;t<i.length;t+=3)this.geometry3js.vertices.push(getConvertedVec3(i,t).clone());for(var t=0;t<this.primitives.length;t++){var n=this.primitives[t];n.setVertices(this.vertices),this.handlePrimitive(n,this.geometry3js)}return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},Mesh.prototype.handlePrimitive=function(e,t){if(e instanceof LineStrips)return void(t.isLineStrip=!0);var r,i,n,o,a,s,u,l=e.p,c=e.inputs,h=0,f=3,p=0,m=[];for(r=0;r<c.length;r++){n=c[r];var g=n.offset+1;switch(p=p<g?g:p,n.semantic){case"TEXCOORD":m.push(n.set)}}for(var y=0;y<l.length;++y)for(var v=l[y],b=0;b<v.length;){var x=[],M=[],E=null,_=[];for(f=e.vcount?e.vcount.length?e.vcount[h++]:e.vcount:v.length/p,r=0;r<f;r++)for(i=0;i<c.length;i++)switch(n=c[i],s=d[n.source],o=v[b+r*p+n.offset],u=s.accessor.params.length,a=o*u,n.semantic){case"VERTEX":x.push(o);break;case"NORMAL":M.push(getConvertedVec3(s.data,a));break;case"TEXCOORD":E=E||{},void 0===E[n.set]&&(E[n.set]=[]),E[n.set].push(new THREE.Vector2(s.data[a],s.data[a+1]));break;case"COLOR":_.push((new THREE.Color).setRGB(s.data[a],s.data[a+1],s.data[a+2]))}if(0===M.length)if(n=this.vertices.input.NORMAL){s=d[n.source],u=s.accessor.params.length;for(var T=0,A=x.length;T<A;T++)M.push(getConvertedVec3(s.data,x[T]*u))}else t.calcNormals=!0;if(!E&&(E={},n=this.vertices.input.TEXCOORD)){m.push(n.set),s=d[n.source],u=s.accessor.params.length;for(var T=0,A=x.length;T<A;T++)a=x[T]*u,void 0===E[n.set]&&(E[n.set]=[]),E[n.set].push(new THREE.Vector2(s.data[a],1-s.data[a+1]))}if(0===_.length&&(n=this.vertices.input.COLOR)){s=d[n.source],u=s.accessor.params.length;for(var T=0,A=x.length;T<A;T++)a=x[T]*u,_.push((new THREE.Color).setRGB(s.data[a],s.data[a+1],s.data[a+2]))}var S,C,L=null,D=[];if(3===f)D.push(new THREE.Face3(x[0],x[1],x[2],M,_.length?_:new THREE.Color));else if(4===f)D.push(new THREE.Face3(x[0],x[1],x[3],M.length?[M[0].clone(),M[1].clone(),M[3].clone()]:[],_.length?[_[0],_[1],_[3]]:new THREE.Color)),D.push(new THREE.Face3(x[1],x[2],x[3],M.length?[M[1].clone(),M[2].clone(),M[3].clone()]:[],_.length?[_[1],_[2],_[3]]:new THREE.Color));else if(f>4&&w.subdivideFaces){var I=_.length?_:new THREE.Color;for(i=1;i<f-1;)D.push(new THREE.Face3(x[0],x[i],x[i+1],M.length?[M[0].clone(),M[i++].clone(),M[i].clone()]:[],I))}if(D.length)for(var T=0,A=D.length;T<A;T++)for(L=D[T],L.daeMaterial=e.material,t.faces.push(L),i=0;i<m.length;i++)S=E[m[i]],C=f>4?[S[0],S[T+1],S[T+2]]:4===f?0===T?[S[0],S[1],S[3]]:[S[1].clone(),S[2],S[3].clone()]:[S[0],S[1],S[2]],void 0===t.faceVertexUvs[i]&&(t.faceVertexUvs[i]=[]),t.faceVertexUvs[i].push(C);else console.log("dropped face with vcount "+f+" for geometry with id: "+t.id);b+=p*f}},Polygons.prototype.setVertices=function(e){for(var t=0;t<this.inputs.length;t++)this.inputs[t].source===e.id&&(this.inputs[t].source=e.input.POSITION.source)},Polygons.prototype.parse=function(e){this.material=e.getAttribute("material"),this.count=_attr_as_int(e,"count",0);for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"input":this.inputs.push((new Input).parse(e.childNodes[t]));break;case"vcount":this.vcount=_ints(r.textContent);break;case"p":this.p.push(_ints(r.textContent));break;case"ph":console.warn("polygon holes not yet supported!")}}return this},Polylist.prototype=Object.create(Polygons.prototype),Polylist.prototype.constructor=Polylist,LineStrips.prototype=Object.create(Polygons.prototype),LineStrips.prototype.constructor=LineStrips,Triangles.prototype=Object.create(Polygons.prototype),Triangles.prototype.constructor=Triangles,Accessor.prototype.parse=function(e){this.params=[],this.source=e.getAttribute("source"),this.count=_attr_as_int(e,"count",0),this.stride=_attr_as_int(e,"stride",0);for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if("param"===r.nodeName){var i={};i.name=r.getAttribute("name"),i.type=r.getAttribute("type"),this.params.push(i)}}return this},Vertices.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++)if("input"===e.childNodes[t].nodeName){var r=(new Input).parse(e.childNodes[t]);this.input[r.semantic]=r}return this},Input.prototype.parse=function(e){return this.semantic=e.getAttribute("semantic"),this.source=e.getAttribute("source").replace(/^#/,""),this.set=_attr_as_int(e,"set",-1),this.offset=_attr_as_int(e,"offset",0),"TEXCOORD"===this.semantic&&this.set<0&&(this.set=0),this},Source.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"bool_array":this.data=_bools(r.textContent),this.type=r.nodeName;break;case"float_array":this.data=_floats(r.textContent),this.type=r.nodeName;break;case"int_array":this.data=_ints(r.textContent),this.type=r.nodeName;break;case"IDREF_array":case"Name_array":this.data=_strings(r.textContent),this.type=r.nodeName;break;case"technique_common":for(var i=0;i<r.childNodes.length;i++)if("accessor"===r.childNodes[i].nodeName){this.accessor=(new Accessor).parse(r.childNodes[i]);break}}}return this},Source.prototype.read=function(){var e=[],t=this.accessor.params[0];switch(t.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var r=0;r<this.data.length;r+=16){var i=this.data.slice(r,r+16),n=getConvertedMat4(i);e.push(n)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+t.type+".")}return e},Material.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++)if("instance_effect"===e.childNodes[t].nodeName){this.instance_effect=(new InstanceEffect).parse(e.childNodes[t]);break}return this},ColorOrTexture.prototype.isColor=function(){return null===this.texture},ColorOrTexture.prototype.isTexture=function(){return null!=this.texture},ColorOrTexture.prototype.parse=function(e){"transparent"===e.nodeName&&(this.opaque=e.getAttribute("opaque"));for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"color":var i=_floats(r.textContent);this.color=new THREE.Color,this.color.setRGB(i[0],i[1],i[2]),this.color.a=i[3];break;case"texture":this.texture=r.getAttribute("texture"),this.texcoord=r.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(r)}}return this},ColorOrTexture.prototype.parseTexture=function(e){if(!e.childNodes)return this;e.childNodes[1]&&"extra"===e.childNodes[1].nodeName&&(e=e.childNodes[1],e.childNodes[1]&&"technique"===e.childNodes[1].nodeName&&(e=e.childNodes[1]));for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[r.nodeName]=parseFloat(r.textContent);break;case"wrapU":case"wrapV":"TRUE"===r.textContent.toUpperCase()?this.texOpts[r.nodeName]=1:this.texOpts[r.nodeName]=parseInt(r.textContent);break;default:this.texOpts[r.nodeName]=r.textContent}}return this},Shader.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"emission":case"diffuse":case"specular":case"transparent":this[r.nodeName]=(new ColorOrTexture).parse(r);break;case"bump":var i=r.getAttribute("bumptype");i?"heightfield"===i.toLowerCase()?this.bump=(new ColorOrTexture).parse(r):"normalmap"===i.toLowerCase()?this.normal=(new ColorOrTexture).parse(r):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+i+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=(new ColorOrTexture).parse(r)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=(new ColorOrTexture).parse(r));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var n=r.querySelectorAll("float");n.length>0&&(this[r.nodeName]=parseFloat(n[0].textContent))}}return this.create(),this},Shader.prototype.create=function(){var e={},t=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var r=(this.transparent,(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency);r>0&&(t=!0,e.transparent=!0,e.opacity=1-r)}var i={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var n in this)switch(n){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var o=this[n];if(o instanceof ColorOrTexture)if(o.isTexture()){var s=o.texture,u=this.effect.sampler[s];if(void 0!==u&&void 0!==u.source){var l=this.effect.surface[u.source];if(void 0!==l){var c=f[l.init_from];if(c){var h,d=a+c.init_from,p=THREE.Loader.Handlers.get(d);null!==p?h=p.load(d):(h=new THREE.Texture,loadTextureImage(h,d)),"MIRROR"===u.wrap_s?h.wrapS=THREE.MirroredRepeatWrapping:"WRAP"===u.wrap_s||o.texOpts.wrapU?h.wrapS=THREE.RepeatWrapping:h.wrapS=THREE.ClampToEdgeWrapping,"MIRROR"===u.wrap_t?h.wrapT=THREE.MirroredRepeatWrapping:"WRAP"===u.wrap_t||o.texOpts.wrapV?h.wrapT=THREE.RepeatWrapping:h.wrapT=THREE.ClampToEdgeWrapping,h.offset.x=o.texOpts.offsetU,h.offset.y=o.texOpts.offsetV,h.repeat.x=o.texOpts.repeatU,h.repeat.y=o.texOpts.repeatV,e[i[n]]=h,"emission"===n&&(e.emissive=16777215)}}}}else"diffuse"!==n&&t||("emission"===n?e.emissive=o.color.getHex():e[n]=o.color.getHex());break;case"shininess":e[n]=this[n];break;case"reflectivity":e[n]=this[n],e[n]>0&&(e.envMap=w.defaultEnvMap),e.combine=THREE.MixOperation;break;case"index_of_refraction":e.refractionRatio=this[n],1!==this[n]&&(e.envMap=w.defaultEnvMap)}switch(e.shading=M,e.side=this.effect.doubleSided?THREE.DoubleSide:THREE.FrontSide,void 0!==e.diffuse&&(e.color=e.diffuse,delete e.diffuse),this.type){case"constant":void 0!=e.emissive&&(e.color=e.emissive),this.material=new THREE.MeshBasicMaterial(e);break;case"phong":case"blinn":this.material=new THREE.MeshPhongMaterial(e);break;case"lambert":default:this.material=new THREE.MeshLambertMaterial(e)}return this.material},Surface.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"init_from":this.init_from=r.textContent;break;case"format":this.format=r.textContent;break;default:console.log("unhandled Surface prop: "+r.nodeName)}}return this},Sampler2D.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"source":this.source=r.textContent;break;case"minfilter":this.minfilter=r.textContent;break;case"magfilter":this.magfilter=r.textContent;break;case"mipfilter":this.mipfilter=r.textContent;break;case"wrap_s":this.wrap_s=r.textContent;break;case"wrap_t":this.wrap_t=r.textContent;break;default:console.log("unhandled Sampler2D prop: "+r.nodeName)}}return this},Effect.prototype.create=function(){if(null===this.shader)return null},Effect.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),extractDoubleSided(this,e),this.shader=null;for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(r))}}return this},Effect.prototype.parseNewparam=function(e){for(var t=e.getAttribute("sid"),r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1==i.nodeType)switch(i.nodeName){case"surface":this.surface[t]=new Surface(this).parse(i);break;case"sampler2D":this.sampler[t]=new Sampler2D(this).parse(i);break;case"extra":break;default:console.log(i.nodeName)}}},Effect.prototype.parseProfileCOMMON=function(e){for(var t,r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1==i.nodeType)switch(i.nodeName){case"profile_COMMON":this.parseProfileCOMMON(i);break;case"technique":t=i;break;case"newparam":this.parseNewparam(i);break;case"image":var n=(new _Image).parse(i);f[n.id]=n;break;case"extra":break;default:console.log(i.nodeName)}}return t},Effect.prototype.parseTechnique=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new Shader(r.nodeName,this).parse(r);break;case"extra":this.parseExtra(r)}}},Effect.prototype.parseExtra=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"technique":this.parseExtraTechnique(r)}}},Effect.prototype.parseExtraTechnique=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"bump":this.shader.parse(e)}}},InstanceEffect.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},Animation.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.source={};for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"animation":var i=(new Animation).parse(r);for(var n in i.source)this.source[n]=i.source[n];for(var o=0;o<i.channel.length;o++)this.channel.push(i.channel[o]),this.sampler.push(i.sampler[o]);break;case"source":var n=(new Source).parse(r);this.source[n.id]=n;break;case"sampler":this.sampler.push(new Sampler(this).parse(r));break;case"channel":this.channel.push(new Channel(this).parse(r))}}return this},Channel.prototype.parse=function(e){this.source=e.getAttribute("source").replace(/^#/,""),this.target=e.getAttribute("target");var t=this.target.split("/"),r=(t.shift(),t.shift()),i=r.indexOf(".")>=0,n=r.indexOf("(")>=0;if(i)t=r.split("."),this.sid=t.shift(),this.member=t.shift();else if(n){var o=r.split("(");this.sid=o.shift();for(var a=0;a<o.length;a++)o[a]=parseInt(o[a].replace(/\)/,""));this.arrIndices=o}else this.sid=r;return this.fullSid=r,this.dotSyntax=i,this.arrSyntax=n,this},Sampler.prototype.parse=function(e){this.id=e.getAttribute("id"),this.inputs=[];for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"input":this.inputs.push((new Input).parse(r))}}return this},Sampler.prototype.create=function(){for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],r=this.animation.source[t.source];switch(t.semantic){case"INPUT":this.input=r.read();break;case"OUTPUT":this.output=r.read(),this.strideOut=r.accessor.stride;break;case"INTERPOLATION":this.interpolation=r.read();break;case"IN_TANGENT":case"OUT_TANGENT":break;default:console.log(t.semantic)}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){this.startTime=1e8,this.endTime=-1e8;for(var e=0;e<this.input.length;e++)this.startTime=Math.min(this.startTime,this.input[e]),this.endTime=Math.max(this.endTime,this.input[e]);this.duration=this.endTime-this.startTime}},Sampler.prototype.getData=function(e,t,r){var i;if("matrix"===e&&16===this.strideOut)i=this.output[t];else if(this.strideOut>1){i=[],t*=this.strideOut;for(var n=0;n<this.strideOut;++n)i[n]=this.output[t+n];if(3===this.strideOut)switch(e){case"rotate":case"translate":fixCoords(i,-1);break;case"scale":fixCoords(i,1)}else 4===this.strideOut&&"matrix"===e&&fixCoords(i,-1)}else i=this.output[t],r&&"translate"===e&&(i=getConvertedTranslation(r,i));return i},Key.prototype.addTarget=function(e,t,r,i){this.targets.push({sid:e,member:r,transform:t,data:i})},Key.prototype.apply=function(e){for(var t=0;t<this.targets.length;++t){var r=this.targets[t];e&&r.sid!==e||r.transform.update(r.data,r.member)}},Key.prototype.getTarget=function(e){for(var t=0;t<this.targets.length;++t)if(this.targets[t].sid===e)return this.targets[t];return null},Key.prototype.hasTarget=function(e){for(var t=0;t<this.targets.length;++t)if(this.targets[t].sid===e)return!0;return!1},Key.prototype.interpolate=function(e,t){for(var r=0,i=this.targets.length;r<i;r++){var n,o=this.targets[r],a=e.getTarget(o.sid);if("matrix"!==o.transform.type&&a){var s=(t-this.time)/(e.time-this.time),u=a.data,l=o.data;if(s<0&&(s=0),s>1&&(s=1),l.length){n=[];for(var c=0;c<l.length;++c)n[c]=l[c]+(u[c]-l[c])*s}else n=l+(u-l)*s}else n=o.data;o.transform.update(n,o.member)}},Camera.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"optics":this.parseOptics(r)}}return this},Camera.prototype.parseOptics=function(e){for(var t=0;t<e.childNodes.length;t++)if("technique_common"===e.childNodes[t].nodeName)for(var r=e.childNodes[t],i=0;i<r.childNodes.length;i++)if(this.technique=r.childNodes[i].nodeName,"perspective"===this.technique)for(var n=r.childNodes[i],o=0;o<n.childNodes.length;o++){var a=n.childNodes[o];switch(a.nodeName){case"yfov":this.yfov=a.textContent;break;case"xfov":this.xfov=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent}}else if("orthographic"===this.technique)for(var s=r.childNodes[i],o=0;o<s.childNodes.length;o++){var a=s.childNodes[o];switch(a.nodeName){case"xmag":this.xmag=a.textContent;break;case"ymag":this.ymag=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent}}return this},InstanceCamera.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},Light.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"technique_common":this.parseCommon(r);break;case"technique":this.parseTechnique(r)}}return this},Light.prototype.parseCommon=function(e){for(var t=0;t<e.childNodes.length;t++)switch(e.childNodes[t].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=e.childNodes[t].nodeName;for(var r=e.childNodes[t],i=0;i<r.childNodes.length;i++){var n=r.childNodes[i];switch(n.nodeName){case"color":var o=_floats(n.textContent);this.color=new THREE.Color(0),this.color.setRGB(o[0],o[1],o[2]),this.color.a=o[3];break;case"falloff_angle":this.falloff_angle=parseFloat(n.textContent);break;case"quadratic_attenuation":var a=parseFloat(n.textContent);this.distance=a?Math.sqrt(1/a):0}}}return this},Light.prototype.parseTechnique=function(e){this.profile=e.getAttribute("profile");for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"intensity":this.intensity=parseFloat(r.textContent)}}return this},InstanceLight.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},KinematicsModel.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.joints=[],this.links=[];for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"technique_common":this.parseCommon(r)}}return this},KinematicsModel.prototype.parseCommon=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(e.childNodes[t].nodeName){case"joint":this.joints.push((new Joint).parse(r));break;case"link":this.links.push((new Link).parse(r))}}return this},Joint.prototype.parse=function(e){this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;var t=e.querySelector("axis"),r=_floats(t.textContent);this.axis=getConvertedVec3(r,0);var i=e.querySelector("limits min")?parseFloat(e.querySelector("limits min").textContent):-360,n=e.querySelector("limits max")?parseFloat(e.querySelector("limits max").textContent):360;this.limits={min:i,max:n};for(var o=["prismatic","revolute"],a=0;a<o.length;a++){var s=o[a];e.querySelector(s)&&(this.type=s)}return this.limits.min>=this.limits.max&&(this.static=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},Link.prototype.parse=function(e){this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.transforms=[],this.attachments=[];for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"attachment_full":this.attachments.push((new Attachment).parse(r));break;case"rotate":case"translate":case"matrix":this.transforms.push((new Transform).parse(r))}}return this},Attachment.prototype.parse=function(e){this.joint=e.getAttribute("joint").split("/").pop(),this.links=[];for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(1==r.nodeType)switch(r.nodeName){case"link":this.links.push((new Link).parse(r));break;case"rotate":case"translate":case"matrix":this.transforms.push((new Transform).parse(r))}}return this},{load:load,parse:parse,setPreferredShading:setPreferredShading,applySkin:applySkin,geometries:g,options:w}}},{}],44:[function(e,t,r){THREE.GLTFLoader=function(){function GLTFLoader(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager}function GLTFRegistry(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}},update:function(t,r){t.updateMatrixWorld(),r.updateMatrixWorld(),r.matrixWorldInverse.getInverse(r.matrixWorld);for(var i in e){var n=e[i];n.update&&n.update(t,r)}}}}function GLTFShader(e,t){var r={},i=e.material.uniforms;for(var n in i){var o=i[n];if(o.semantic){var a=o.node,s=e;a&&(s=t[a]),r[n]={semantic:o.semantic,sourceNode:s,targetNode:e,uniform:o}}}this.boundUniforms=r,this._m4=new THREE.Matrix4}function GLTFMaterialsCommonExtension(t){this.name=e.KHR_MATERIALS_COMMON,this.lights={};var r=t.extensions&&t.extensions[e.KHR_MATERIALS_COMMON].lights;for(var i in r){var n,o=r[i],a=o[o.type],s=(new THREE.Color).fromArray(a.color);switch(o.type){case"directional":n=new THREE.DirectionalLight(s),n.position.set(0,0,1);break;case"point":n=new THREE.PointLight(s);break;case"spot":n=new THREE.SpotLight(s),n.position.set(0,0,1);break;case"ambient":n=new THREE.AmbientLight(s)}n&&(this.lights[i]=n)}}function GLTFBinaryExtension(i){this.name=e.KHR_BINARY_GLTF;var n=new DataView(i,0,r),o={magic:convertUint8ArrayToString(new Uint8Array(i.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0),contentLength:n.getUint32(12,!0),contentFormat:n.getUint32(16,!0)};for(var a in t){var s=t[a];if(o[a]!==s)throw new Error('Unsupported glTF-Binary header: Expected "%s" to be "%s".',a,s)}var u=new Uint8Array(i,r,o.contentLength);this.header=o,this.content=convertUint8ArrayToString(u),this.body=i.slice(r+o.contentLength,o.length)}function _each(e,t,r){if(!e)return Promise.resolve();var i,n=[];if("[object Array]"===Object.prototype.toString.call(e)){i=[];for(var o=e.length,a=0;a<o;a++){var s=t.call(r||this,e[a],a);s&&(n.push(s),s instanceof Promise?s.then(function(e,t){i[a]=t}.bind(this,u)):i[a]=s)}}else{i={};for(var u in e)if(e.hasOwnProperty(u)){var s=t.call(r||this,e[u],u);s&&(n.push(s),s instanceof Promise?s.then(function(e,t){i[e]=t}.bind(this,u)):i[u]=s)}}return Promise.all(n).then(function(){return i})}function resolveURL(e,t){return"string"!=typeof e||""===e?"":/^https?:\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:(t||"")+e}function convertUint8ArrayToString(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function replaceTHREEShaderAttributes(e,t){var r={};for(var i in t.attributes){var n=t.attributes[i],o=t.parameters[n],a=o.type,s=o.semantic;r[i]={type:a,semantic:s}}var u=t.parameters,l=t.attributes,c={};for(var i in r){var n=l[i],h=u[n],s=h.semantic;s&&(c[i]=h)}for(var n in c){var o=c[n],s=o.semantic,d=new RegExp("\\b"+n+"\\b","g");switch(s){case"POSITION":e=e.replace(d,"position");break;case"NORMAL":e=e.replace(d,"normal");break;case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":e=e.replace(d,"uv");break;case"COLOR_0":case"COLOR0":case"COLOR":e=e.replace(d,"color");break;case"WEIGHT":e=e.replace(d,"skinWeight");break;case"JOINT":e=e.replace(d,"skinIndex")}}return e}function createDefaultMaterial(){return new THREE.MeshPhongMaterial({color:0,emissive:8947848,specular:0,shininess:0,transparent:!1,depthTest:!0,side:THREE.FrontSide})}function DeferredShaderMaterial(e){this.isDeferredShaderMaterial=!0,this.params=e}function GLTFParser(e,t,r){this.json=e||{},this.extensions=t||{},this.options=r||{},this.cache=new GLTFRegistry}GLTFLoader.prototype={constructor:GLTFLoader,load:function(e,t,r,i){var n=this,o=this.path&&"string"==typeof this.path?this.path:THREE.Loader.prototype.extractUrlBase(e),a=new THREE.FileLoader(n.manager);a.setResponseType("arraybuffer"),a.load(e,function(e){n.parse(e,t,o)},r,i)},setCrossOrigin:function(e){this.crossOrigin=e},setPath:function(e){this.path=e},parse:function(r,i,n){var o,a={};convertUint8ArrayToString(new Uint8Array(r,0,4))===t.magic?(a[e.KHR_BINARY_GLTF]=new GLTFBinaryExtension(r),o=a[e.KHR_BINARY_GLTF].content):o=convertUint8ArrayToString(new Uint8Array(r));var s=JSON.parse(o);s.extensionsUsed&&s.extensionsUsed.indexOf(e.KHR_MATERIALS_COMMON)>=0&&(a[e.KHR_MATERIALS_COMMON]=new GLTFMaterialsCommonExtension(s)),console.time("GLTFLoader"),new GLTFParser(s,a,{path:n||this.path,crossOrigin:this.crossOrigin}).parse(function(e,t,r,n){console.timeEnd("GLTFLoader"),i({scene:e,scenes:t,cameras:r,animations:n})})}},GLTFLoader.Shaders=new GLTFRegistry,GLTFShader.prototype.update=function(e,t){var r=this.boundUniforms;for(var i in r){var n=r[i];switch(n.semantic){case"MODELVIEW":var o=n.uniform.value;o.multiplyMatrices(t.matrixWorldInverse,n.sourceNode.matrixWorld);break;case"MODELVIEWINVERSETRANSPOSE":var a=n.uniform.value;this._m4.multiplyMatrices(t.matrixWorldInverse,n.sourceNode.matrixWorld),a.getNormalMatrix(this._m4);break;case"PROJECTION":var o=n.uniform.value;o.copy(t.projectionMatrix);break;case"JOINTMATRIX":for(var s=n.uniform.value,u=0;u<s.length;u++)s[u].getInverse(n.sourceNode.matrixWorld).multiply(n.targetNode.skeleton.bones[u].matrixWorld).multiply(n.targetNode.skeleton.boneInverses[u]).multiply(n.targetNode.bindMatrix);break;default:console.warn("Unhandled shader semantic: "+n.semantic)}}},GLTFLoader.Animations={update:function(){console.warn("THREE.GLTFLoader.Animation has been deprecated. Use THREE.AnimationMixer instead.")}};var e={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_MATERIALS_COMMON:"KHR_materials_common"},t={magic:"glTF",version:1,contentFormat:0},r=20;GLTFBinaryExtension.prototype.loadShader=function(t,r){var i=r[t.extensions[e.KHR_BINARY_GLTF].bufferView];return convertUint8ArrayToString(new Uint8Array(i))},GLTFBinaryExtension.prototype.loadTextureSourceUri=function(t,r){var i=t.extensions[e.KHR_BINARY_GLTF],n=r[i.bufferView],o=convertUint8ArrayToString(new Uint8Array(n));return"data:"+i.mimeType+";base64,"+btoa(o)};var i={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,TRIANGLES:4,LINES:1,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,VERTEX_SHADER:35633,FRAGMENT_SHADER:35632},n={5126:Number,35675:THREE.Matrix3,35676:THREE.Matrix4,35664:THREE.Vector2,35665:THREE.Vector3,35666:THREE.Vector4,35678:THREE.Texture},o={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},a={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},s={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},u={6406:THREE.AlphaFormat,6407:THREE.RGBFormat,6408:THREE.RGBAFormat,6409:THREE.LuminanceFormat,6410:THREE.LuminanceAlphaFormat},l={5121:THREE.UnsignedByteType,32819:THREE.UnsignedShort4444Type,32820:THREE.UnsignedShort5551Type,33635:THREE.UnsignedShort565Type},c={1028:THREE.BackSide,1029:THREE.FrontSide},h={512:THREE.NeverDepth,513:THREE.LessDepth,514:THREE.EqualDepth,515:THREE.LessEqualDepth,516:THREE.GreaterEqualDepth,517:THREE.NotEqualDepth,518:THREE.GreaterEqualDepth,519:THREE.AlwaysDepth},d={32774:THREE.AddEquation,32778:THREE.SubtractEquation,32779:THREE.ReverseSubtractEquation},f={0:THREE.ZeroFactor,1:THREE.OneFactor,768:THREE.SrcColorFactor,769:THREE.OneMinusSrcColorFactor,770:THREE.SrcAlphaFactor,771:THREE.OneMinusSrcAlphaFactor,772:THREE.DstAlphaFactor,773:THREE.OneMinusDstAlphaFactor,774:THREE.DstColorFactor,775:THREE.OneMinusDstColorFactor,776:THREE.SrcAlphaSaturateFactor},p={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},m={scale:"scale",translation:"position",rotation:"quaternion"},g={LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},y={2884:"CULL_FACE",2929:"DEPTH_TEST",3042:"BLEND",3089:"SCISSOR_TEST",32823:"POLYGON_OFFSET_FILL",32926:"SAMPLE_ALPHA_TO_COVERAGE"};return DeferredShaderMaterial.prototype.create=function(){var e=THREE.UniformsUtils.clone(this.params.uniforms);for(var t in this.params.uniforms){var r=this.params.uniforms[t];r.value instanceof THREE.Texture&&(e[t].value=r.value,e[t].value.needsUpdate=!0),e[t].semantic=r.semantic,e[t].node=r.node}return this.params.uniforms=e,new THREE.RawShaderMaterial(this.params)},GLTFParser.prototype._withDependencies=function(e){for(var t={},r=0;r<e.length;r++){var i=e[r],n="load"+i.charAt(0).toUpperCase()+i.slice(1),o=this.cache.get(i);if(void 0!==o)t[i]=o;else if(this[n]){var a=this[n]();this.cache.add(i,a),t[i]=a}}return _each(t,function(e){return e})},GLTFParser.prototype.parse=function(e){var t=this.json;this.cache.removeAll(),this._withDependencies(["scenes","cameras","animations"]).then(function(r){var i=r.scenes[t.scene],n=[];for(var o in r.scenes)n.push(r.scenes[o]);var a=[];for(var o in r.cameras){var s=r.cameras[o];a.push(s)}var u=[];for(var o in r.animations)u.push(r.animations[o]);e(i,n,a,u)})},GLTFParser.prototype.loadShaders=function(){var t=this.json,r=this.extensions,i=this.options;return this._withDependencies(["bufferViews"]).then(function(n){return _each(t.shaders,function(t){return t.extensions&&t.extensions[e.KHR_BINARY_GLTF]?r[e.KHR_BINARY_GLTF].loadShader(t,n.bufferViews):new Promise(function(e){var r=new THREE.FileLoader;r.setResponseType("text"),r.load(resolveURL(t.uri,i.path),function(t){e(t)})})})})},GLTFParser.prototype.loadBuffers=function(){var t=this.json,r=this.extensions,i=this.options;return _each(t.buffers,function(t,n){return"binary_glTF"===n?r[e.KHR_BINARY_GLTF].body:"arraybuffer"===t.type||void 0===t.type?new Promise(function(e){var r=new THREE.FileLoader;r.setResponseType("arraybuffer"),r.load(resolveURL(t.uri,i.path),function(t){e(t)})}):void console.warn("THREE.GLTFLoader: "+t.type+" buffer type is not supported")})},GLTFParser.prototype.loadBufferViews=function(){var e=this.json;return this._withDependencies(["buffers"]).then(function(t){return _each(e.bufferViews,function(e){return t.buffers[e.buffer].slice(e.byteOffset,e.byteOffset+e.byteLength)})})},GLTFParser.prototype.loadAccessors=function(){var e=this.json;return this._withDependencies(["bufferViews"]).then(function(t){return _each(e.accessors,function(e){var r=t.bufferViews[e.bufferView],i=p[e.type],n=o[e.componentType],a=n.BYTES_PER_ELEMENT,s=a*i;if(e.byteStride&&e.byteStride!==s){var u=new n(r),l=new THREE.InterleavedBuffer(u,e.byteStride/a);return new THREE.InterleavedBufferAttribute(l,i,e.byteOffset/a)}return u=new n(r,e.byteOffset,e.count*i),new THREE.BufferAttribute(u,i)})})},GLTFParser.prototype.loadTextures=function(){var t=this.json,r=this.extensions,i=this.options;return this._withDependencies(["bufferViews"]).then(function(n){return _each(t.textures,function(o){if(o.source)return new Promise(function(c){var h=t.images[o.source],d=h.uri;h.extensions&&h.extensions[e.KHR_BINARY_GLTF]&&(d=r[e.KHR_BINARY_GLTF].loadTextureSourceUri(h,n.bufferViews));var f=THREE.Loader.Handlers.get(d);null===f&&(f=new THREE.TextureLoader),f.setCrossOrigin(i.crossOrigin),f.load(resolveURL(d,i.path),function(e){if(e.flipY=!1,void 0!==o.name&&(e.name=o.name),e.format=void 0!==o.format?u[o.format]:THREE.RGBAFormat,void 0!==o.internalFormat&&e.format!==u[o.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js doesn't support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),e.type=void 0!==o.type?l[o.type]:THREE.UnsignedByteType,o.sampler){var r=t.samplers[o.sampler];e.magFilter=a[r.magFilter],e.minFilter=a[r.minFilter],e.wrapS=s[r.wrapS],e.wrapT=s[r.wrapT]}c(e)},void 0,function(){c()})})})})},GLTFParser.prototype.loadMaterials=function(){var t=this.json;return this._withDependencies(["shaders","textures"]).then(function(r){return _each(t.materials,function(o){var a,s,u={},l={};if(o.extensions&&o.extensions[e.KHR_MATERIALS_COMMON]&&(s=o.extensions[e.KHR_MATERIALS_COMMON]),s){switch(s.technique){case"BLINN":case"PHONG":a=THREE.MeshPhongMaterial;break;case"LAMBERT":a=THREE.MeshLambertMaterial;break;case"CONSTANT":default:a=THREE.MeshBasicMaterial}Object.assign(u,s.values),(s.doubleSided||u.doubleSided)&&(l.side=THREE.DoubleSide),(s.transparent||u.transparent)&&(l.transparent=!0,l.opacity=void 0!==u.transparency?u.transparency:1)}else if(void 0===o.technique)a=THREE.MeshPhongMaterial,Object.assign(u,o.values);else{a=DeferredShaderMaterial;var p=t.techniques[o.technique];l.uniforms={};var m=t.programs[p.program];if(m){l.fragmentShader=r.shaders[m.fragmentShader],l.fragmentShader||(console.warn("ERROR: Missing fragment shader definition:",m.fragmentShader),a=THREE.MeshPhongMaterial);var g=r.shaders[m.vertexShader];g||(console.warn("ERROR: Missing vertex shader definition:",m.vertexShader),a=THREE.MeshPhongMaterial),l.vertexShader=replaceTHREEShaderAttributes(g,p);var v=p.uniforms;for(var b in v){var x=v[b],M=p.parameters[x],w=M.type;if(!n[w])throw new Error("Unknown shader uniform param type: "+w);var E,_=M.count;void 0!==o.values&&(E=o.values[x]);var T=new n[w],A=M.semantic,S=M.node;switch(w){case i.FLOAT:T=M.value,"transparency"==x&&(l.transparent=!0),void 0!==E&&(T=E);break;case i.FLOAT_VEC2:case i.FLOAT_VEC3:case i.FLOAT_VEC4:case i.FLOAT_MAT3:M&&M.value&&T.fromArray(M.value),E&&T.fromArray(E);break;case i.FLOAT_MAT2:console.warn("FLOAT_MAT2 is not a supported uniform type");break;case i.FLOAT_MAT4:if(_){T=new Array(_);for(var C=0;C<_;C++)T[C]=new n[w];if(M&&M.value){var L=M.value;T.fromArray(L)}E&&T.fromArray(E)}else{if(M&&M.value){var D=M.value;T.fromArray(D)}E&&T.fromArray(E)}break;case i.SAMPLER_2D:T=void 0!==E?r.textures[E]:void 0!==M.value?r.textures[M.value]:null}l.uniforms[b]={value:T,semantic:A,node:S}}for(var I=p.states||{},N=I.enable||[],O=I.functions||{},R=!1,j=!1,P=!1,k=0,B=N.length;k<B;k++){var z=N[k];switch(y[z]){case"CULL_FACE":R=!0;break;case"DEPTH_TEST":j=!0;break;case"BLEND":P=!0;break;case"SCISSOR_TEST":case"POLYGON_OFFSET_FILL":case"SAMPLE_ALPHA_TO_COVERAGE":break;default:throw new Error("Unknown technique.states.enable: "+z)}}l.side=R?void 0!==O.cullFace?c[O.cullFace]:THREE.FrontSide:THREE.DoubleSide,l.depthTest=j,l.depthFunc=void 0!==O.depthFunc?h[O.depthFunc]:THREE.LessDepth,l.depthWrite=void 0===O.depthMask||O.depthMask[0],l.blending=P?THREE.CustomBlending:THREE.NoBlending,l.transparent=P;var U=O.blendEquationSeparate;void 0!==U?(l.blendEquation=d[U[0]],l.blendEquationAlpha=d[U[1]]):(l.blendEquation=THREE.AddEquation,l.blendEquationAlpha=THREE.AddEquation);var F=O.blendFuncSeparate;void 0!==F?(l.blendSrc=f[F[0]],l.blendDst=f[F[1]],l.blendSrcAlpha=f[F[2]],l.blendDstAlpha=f[F[3]]):(l.blendSrc=THREE.OneFactor,l.blendDst=THREE.ZeroFactor,l.blendSrcAlpha=THREE.OneFactor,l.blendDstAlpha=THREE.ZeroFactor)}}Array.isArray(u.diffuse)?l.color=(new THREE.Color).fromArray(u.diffuse):"string"==typeof u.diffuse&&(l.map=r.textures[u.diffuse]),delete l.diffuse,"string"==typeof u.reflective&&(l.envMap=r.textures[u.reflective]),"string"==typeof u.bump&&(l.bumpMap=r.textures[u.bump]),Array.isArray(u.emission)?a===THREE.MeshBasicMaterial?l.color=(new THREE.Color).fromArray(u.emission):l.emissive=(new THREE.Color).fromArray(u.emission):"string"==typeof u.emission&&(a===THREE.MeshBasicMaterial?l.map=r.textures[u.emission]:l.emissiveMap=r.textures[u.emission]),Array.isArray(u.specular)?l.specular=(new THREE.Color).fromArray(u.specular):"string"==typeof u.specular&&(l.specularMap=r.textures[u.specular]),void 0!==u.shininess&&(l.shininess=u.shininess);var G=new a(l);return void 0!==o.name&&(G.name=o.name),G})})},GLTFParser.prototype.loadMeshes=function(){var e=this.json;return this._withDependencies(["accessors","materials"]).then(function(t){return _each(e.meshes,function(e){var r=new THREE.Object3D;void 0!==e.name&&(r.name=e.name),e.extras&&(r.userData=e.extras);var n=e.primitives;for(var o in n){var a=n[o];if(a.mode===i.TRIANGLES||void 0===a.mode){var s=new THREE.BufferGeometry,u=a.attributes;for(var l in u){var c=u[l];if(!c)return;var h=t.accessors[c];switch(l){case"POSITION":s.addAttribute("position",h);break;case"NORMAL":s.addAttribute("normal",h);break;case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":s.addAttribute("uv",h);break;case"COLOR_0":case"COLOR0":case"COLOR":s.addAttribute("color",h);break;case"WEIGHT":s.addAttribute("skinWeight",h);break;case"JOINT":s.addAttribute("skinIndex",h)}}a.indices&&s.setIndex(t.accessors[a.indices]);var d=void 0!==t.materials?t.materials[a.material]:createDefaultMaterial(),f=new THREE.Mesh(s,d);f.castShadow=!0,f.name="0"===o?r.name:r.name+o,a.extras&&(f.userData=a.extras),r.add(f)}else if(a.mode===i.LINES){var s=new THREE.BufferGeometry,u=a.attributes;for(var l in u){var c=u[l];if(!c)return;var h=t.accessors[c];switch(l){case"POSITION":s.addAttribute("position",h);break;case"COLOR_0":case"COLOR0":case"COLOR":s.addAttribute("color",h)}}var f,d=t.materials[a.material];a.indices?(s.setIndex(t.accessors[a.indices]),f=new THREE.LineSegments(s,d)):f=new THREE.Line(s,d),f.name="0"===o?r.name:r.name+o,a.extras&&(f.userData=a.extras),r.add(f)}else console.warn("Only triangular and line primitives are supported")}return r})})},GLTFParser.prototype.loadCameras=function(){return _each(this.json.cameras,function(e){if("perspective"==e.type&&e.perspective){var t=e.perspective.yfov,r=e.perspective.xfov,i=e.perspective.aspect_ratio||1;r=void 0===r&&t?t*i:r;var n=new THREE.PerspectiveCamera(THREE.Math.radToDeg(r),i,e.perspective.znear||1,e.perspective.zfar||2e6);return void 0!==e.name&&(n.name=e.name),e.extras&&(n.userData=e.extras),n}if("orthographic"==e.type&&e.orthographic){var n=new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,e.orthographic.znear,e.orthographic.zfar);return void 0!==e.name&&(n.name=e.name),e.extras&&(n.userData=e.extras),n}})},GLTFParser.prototype.loadSkins=function(){var e=this.json;return this._withDependencies(["accessors"]).then(function(t){return _each(e.skins,function(e){return{bindShapeMatrix:(new THREE.Matrix4).fromArray(e.bindShapeMatrix),jointNames:e.jointNames,inverseBindMatrices:t.accessors[e.inverseBindMatrices]}})})},GLTFParser.prototype.loadAnimations=function(){var e=this.json;return this._withDependencies(["accessors","nodes"]).then(function(t){return _each(e.animations,function(e,r){var i=[];for(var n in e.channels){var o=e.channels[n],a=e.samplers[o.sampler];if(a){var s=o.target,u=s.id,l=void 0!==e.parameters?e.parameters[a.input]:a.input,c=void 0!==e.parameters?e.parameters[a.output]:a.output,h=t.accessors[l],d=t.accessors[c],f=t.nodes[u];if(f){f.updateMatrix(),f.matrixAutoUpdate=!0;var p=m[s.path]===m.rotation?THREE.QuaternionKeyframeTrack:THREE.VectorKeyframeTrack,y=f.name?f.name:f.uuid;i.push(new p(y+"."+m[s.path],THREE.AnimationUtils.arraySlice(h.array,0),THREE.AnimationUtils.arraySlice(d.array,0),g[a.interpolation]))}}}return new THREE.AnimationClip("animation_"+r,void 0,i)})})},GLTFParser.prototype.loadNodes=function(){var t=this.json,r=this.extensions,i=this;return _each(t.nodes,function(e){var t,r=new THREE.Matrix4;return e.jointName?(t=new THREE.Bone,t.name=void 0!==e.name?e.name:e.jointName,t.jointName=e.jointName):(t=new THREE.Object3D,void 0!==e.name&&(t.name=e.name)),e.extras&&(t.userData=e.extras),void 0!==e.matrix?(r.fromArray(e.matrix),t.applyMatrix(r)):(void 0!==e.translation&&t.position.fromArray(e.translation),void 0!==e.rotation&&t.quaternion.fromArray(e.rotation),void 0!==e.scale&&t.scale.fromArray(e.scale)),t}).then(function(n){return i._withDependencies(["meshes","skins","cameras"]).then(function(i){return _each(n,function(o,a){var s=t.nodes[a];if(void 0!==s.meshes)for(var u in s.meshes){var l=s.meshes[u],c=i.meshes[l];if(void 0!==c)for(var h in c.children){var d,f=c.children[h],p=f.material,m=f.geometry,g=f.userData,y=f.name;switch(p.isDeferredShaderMaterial?p=d=p.create():d=p,f.type){case"LineSegments":f=new THREE.LineSegments(m,d);break;case"Line":f=new THREE.Line(m,d);break;default:f=new THREE.Mesh(m,d)}f.castShadow=!0,f.userData=g,f.name=y;var v;if(s.skin&&(v=i.skins[s.skin]),v){var b=m,d=p;d.skinning=!0,f=new THREE.SkinnedMesh(b,d,!1),f.castShadow=!0,f.userData=g,f.name=y;for(var x=[],M=[],w=0,E=v.jointNames.length;w<E;w++){var _=v.jointNames[w],T=function(e){for(var t=Object.keys(n),r=0,i=t.length;r<i;r++){var o=n[t[r]];if(o.jointName===e)return o}return null}(_);if(T){x.push(T);var A=v.inverseBindMatrices.array,S=(new THREE.Matrix4).fromArray(A,16*w);M.push(S)}else console.warn("WARNING: joint: ''"+_+"' could not be found")}f.bind(new THREE.Skeleton(x,M,!1),v.bindShapeMatrix);var C=function(e,r,i){var o=e[i];if(void 0!==o)for(var a=0,s=o.length;a<s;a++){var u=o[a],l=n[u],c=t.nodes[u];void 0!==l&&!0===l.isBone&&void 0!==c&&(r.add(l),C(c,l,"children"))}};C(s,f,"skeletons")}o.add(f)}else console.warn("GLTFLoader: Couldn't find node \""+l+'".')}if(void 0!==s.camera){var L=i.cameras[s.camera];o.add(L)}if(s.extensions&&s.extensions[e.KHR_MATERIALS_COMMON]&&s.extensions[e.KHR_MATERIALS_COMMON].light){var D=r[e.KHR_MATERIALS_COMMON].lights,I=D[s.extensions[e.KHR_MATERIALS_COMMON].light];o.add(I)}return o})})})},GLTFParser.prototype.loadScenes=function(){function buildNodeHierachy(t,r,i){var n=i[t];r.add(n);var o=e.nodes[t];if(o.children)for(var a=o.children,s=0,u=a.length;s<u;s++){var l=a[s];buildNodeHierachy(l,n,i)}}var e=this.json;return this._withDependencies(["nodes"]).then(function(t){return _each(e.scenes,function(e){var r=new THREE.Scene;void 0!==e.name&&(r.name=e.name),e.extras&&(r.userData=e.extras);for(var i=e.nodes,n=0,o=i.length;n<o;n++){buildNodeHierachy(i[n],r,t.nodes)}return r.traverse(function(e){if(e.material&&e.material.isRawShaderMaterial){var r=new GLTFShader(e,t.nodes);GLTFLoader.Shaders.add(e.uuid,r)}}),r})})},GLTFLoader}()},{}],45:[function(e,t,r){THREE.MTLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(e,t,r,i){var n=this,o=new THREE.FileLoader(this.manager);o.setPath(this.path),o.load(e,function(e){t(n.parse(e))},r,i)},setPath:function(e){this.path=e},setTexturePath:function(e){this.texturePath=e},setBaseUrl:function(e){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){this.crossOrigin=e},setMaterialOptions:function(e){this.materialOptions=e},parse:function(e){for(var t=e.split("\n"),r={},i=/\s+/,n={},o=0;o<t.length;o++){var a=t[o];if(a=a.trim(),0!==a.length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),u=s>=0?a.substring(0,s):a;u=u.toLowerCase();var l=s>=0?a.substring(s+1):"";if(l=l.trim(),"newmtl"===u)r={name:l},n[l]=r;else if(r)if("ka"===u||"kd"===u||"ks"===u){var c=l.split(i,3);r[u]=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2])]}else r[u]=l}}var h=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(n),h}},THREE.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setCrossOrigin:function(e){this.crossOrigin=e},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var r in e){var i=e[r],n={};t[r]=n;for(var o in i){var a=!0,s=i[o],u=o.toLowerCase();switch(u){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1)}a&&(n[u]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){function resolveURL(e,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}function setMapForType(e,r){if(!i[e]){var n=t.getTextureParams(r,i),o=t.loadTexture(resolveURL(t.baseUrl,n.url));o.repeat.copy(n.scale),o.offset.copy(n.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,i[e]=o}}var t=this,r=this.materialsInfo[e],i={name:e,side:this.side};for(var n in r){var o=r[n];if(""!==o)switch(n.toLowerCase()){case"kd":i.color=(new THREE.Color).fromArray(o);break;case"ks":i.specular=(new THREE.Color).fromArray(o);break;case"map_kd":setMapForType("map",o);break;case"map_ks":setMapForType("specularMap",o);break;case"map_bump":case"bump":setMapForType("bumpMap",o);break;case"ns":i.shininess=parseFloat(o);break;case"d":o<1&&(i.opacity=o,i.transparent=!0);break;case"Tr":o>0&&(i.opacity=1-o,i.transparent=!0)}}return this.materials[e]=new THREE.MeshPhongMaterial(i),this.materials[e]},getTextureParams:function(e,t){var r,i={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},n=e.split(/\s+/);return r=n.indexOf("-bm"),r>=0&&(t.bumpScale=parseFloat(n[r+1]),n.splice(r,2)),r=n.indexOf("-s"),r>=0&&(i.scale.set(parseFloat(n[r+1]),parseFloat(n[r+2])),n.splice(r,4)),r=n.indexOf("-o"),r>=0&&(i.offset.set(parseFloat(n[r+1]),parseFloat(n[r+2])),n.splice(r,4)),i.url=n.join(" ").trim(),i},loadTexture:function(e,t,r,i,n){var o,a=THREE.Loader.Handlers.get(e),s=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===a&&(a=new THREE.TextureLoader(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),o=a.load(e,r,i,n),void 0!==t&&(o.mapping=t),o}}},{}],46:[function(e,t,r){THREE.OBJLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}},THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(e,t,r,i){var n=this,o=new THREE.FileLoader(n.manager);o.setPath(this.path),o.load(e,function(e){t(n.parse(e))},r,i)},setPath:function(e){this.path=e},setMaterials:function(e){this.materials=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var i=this.vertices,n=this.object.geometry.vertices;n.push(i[e+0]),n.push(i[e+1]),n.push(i[e+2]),n.push(i[t+0]),n.push(i[t+1]),n.push(i[t+2]),n.push(i[r+0]),n.push(i[r+1]),n.push(i[r+2])},addVertexLine:function(e){var t=this.vertices,r=this.object.geometry.vertices;r.push(t[e+0]),r.push(t[e+1]),r.push(t[e+2])},addNormal:function(e,t,r){var i=this.normals,n=this.object.geometry.normals;n.push(i[e+0]),n.push(i[e+1]),n.push(i[e+2]),n.push(i[t+0]),n.push(i[t+1]),n.push(i[t+2]),n.push(i[r+0]),n.push(i[r+1]),n.push(i[r+2])},addUV:function(e,t,r){var i=this.uvs,n=this.object.geometry.uvs;n.push(i[e+0]),n.push(i[e+1]),n.push(i[t+0]),n.push(i[t+1]),n.push(i[r+0]),n.push(i[r+1])},addUVLine:function(e){var t=this.uvs,r=this.object.geometry.uvs;r.push(t[e+0]),r.push(t[e+1])},addFace:function(e,t,r,i,n,o,a,s,u,l,c,h){var d,f=this.vertices.length,p=this.parseVertexIndex(e,f),m=this.parseVertexIndex(t,f),g=this.parseVertexIndex(r,f);if(void 0===i?this.addVertex(p,m,g):(d=this.parseVertexIndex(i,f),this.addVertex(p,m,d),this.addVertex(m,g,d)),void 0!==n){var y=this.uvs.length;p=this.parseUVIndex(n,y),m=this.parseUVIndex(o,y),g=this.parseUVIndex(a,y),void 0===i?this.addUV(p,m,g):(d=this.parseUVIndex(s,y),this.addUV(p,m,d),this.addUV(m,g,d))}if(void 0!==u){var v=this.normals.length;p=this.parseNormalIndex(u,v),m=u===l?p:this.parseNormalIndex(l,v),g=u===c?p:this.parseNormalIndex(c,v),void 0===i?this.addNormal(p,m,g):(d=this.parseNormalIndex(h,v),this.addNormal(p,m,d),this.addNormal(m,g,d))}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,i=this.uvs.length,n=0,o=e.length;n<o;n++)this.addVertexLine(this.parseVertexIndex(e[n],r));for(var a=0,o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],i))}};return e.startObject("",!1),e},parse:function(e){console.time("OBJLoader");var t=this._createParserState();-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var r=e.split("\n"),i="",n="",o="",a=[],s="function"==typeof"".trimLeft,u=0,l=r.length;u<l;u++)if(i=r[u],i=s?i.trimLeft():i.trim(),0!==i.length&&"#"!==(n=i.charAt(0)))if("v"===n)if(" "===(o=i.charAt(1))&&null!==(a=this.regexp.vertex_pattern.exec(i)))t.vertices.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));else if("n"===o&&null!==(a=this.regexp.normal_pattern.exec(i)))t.normals.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));else{if("t"!==o||null===(a=this.regexp.uv_pattern.exec(i)))throw new Error("Unexpected vertex/normal/uv line: '"+i+"'");t.uvs.push(parseFloat(a[1]),parseFloat(a[2]))}else if("f"===n)if(null!==(a=this.regexp.face_vertex_uv_normal.exec(i)))t.addFace(a[1],a[4],a[7],a[10],a[2],a[5],a[8],a[11],a[3],a[6],a[9],a[12]);else if(null!==(a=this.regexp.face_vertex_uv.exec(i)))t.addFace(a[1],a[3],a[5],a[7],a[2],a[4],a[6],a[8]);else if(null!==(a=this.regexp.face_vertex_normal.exec(i)))t.addFace(a[1],a[3],a[5],a[7],void 0,void 0,void 0,void 0,a[2],a[4],a[6],a[8]);else{if(null===(a=this.regexp.face_vertex.exec(i)))throw new Error("Unexpected face line: '"+i+"'");t.addFace(a[1],a[2],a[3],a[4])}else if("l"===n){var c=i.substring(1).trim().split(" "),h=[],d=[];if(-1===i.indexOf("/"))h=c;else for(var f=0,p=c.length;f<p;f++){var m=c[f].split("/");""!==m[0]&&h.push(m[0]),""!==m[1]&&d.push(m[1])}t.addLineGeometry(h,d)}else if(null!==(a=this.regexp.object_pattern.exec(i))){var g=(" "+a[0].substr(1).trim()).substr(1);t.startObject(g)}else if(this.regexp.material_use_pattern.test(i))t.object.startMaterial(i.substring(7).trim(),t.materialLibraries);else if(this.regexp.material_library_pattern.test(i))t.materialLibraries.push(i.substring(7).trim());else{if(null===(a=this.regexp.smoothing_pattern.exec(i))){if("\0"===i)continue;throw new Error("Unexpected line: '"+i+"'")}var y=a[1].trim().toLowerCase();t.object.smooth="1"===y||"on"===y;var v=t.object.currentMaterial();v&&(v.smooth=t.object.smooth)}t.finalize();var b=new THREE.Group;b.materialLibraries=[].concat(t.materialLibraries);for(var u=0,l=t.objects.length;u<l;u++){var x=t.objects[u],M=x.geometry,w=x.materials,E="Line"===M.type;if(0!==M.vertices.length){var _=new THREE.BufferGeometry;_.addAttribute("position",new THREE.BufferAttribute(new Float32Array(M.vertices),3)),M.normals.length>0?_.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(M.normals),3)):_.computeVertexNormals(),M.uvs.length>0&&_.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(M.uvs),2));for(var T=[],A=0,S=w.length;A<S;A++){var C=w[A],v=void 0;if(null!==this.materials&&(v=this.materials.create(C.name),E&&v&&!(v instanceof THREE.LineBasicMaterial))){var L=new THREE.LineBasicMaterial;L.copy(v),v=L}v||(v=E?new THREE.LineBasicMaterial:new THREE.MeshPhongMaterial,v.name=C.name),v.shading=C.smooth?THREE.SmoothShading:THREE.FlatShading,T.push(v)}var D;if(T.length>1){for(var A=0,S=w.length;A<S;A++){var C=w[A];_.addGroup(C.groupStart,C.groupCount,A)}var I=new THREE.MultiMaterial(T);D=E?new THREE.LineSegments(_,I):new THREE.Mesh(_,I)}else D=E?new THREE.LineSegments(_,T[0]):new THREE.Mesh(_,T[0]);D.name=x.name,b.add(D)}}return console.timeEnd("OBJLoader"),b}}},{}],47:[function(e,t,r){function trim(e){return e.replace(/^\s*|\s*$/g,"")}r=t.exports=trim,r.left=function(e){return e.replace(/^\s*/,"")},r.right=function(e){return e.replace(/\s*$/,"")}},{}],48:[function(e,t,r){t.exports={_args:[[{raw:"webvr-polyfill@^0.9.36",scope:null,escapedName:"webvr-polyfill",name:"webvr-polyfill",rawSpec:"^0.9.36",spec:">=0.9.36 <0.10.0",type:"range"},"/home/ubuntu/a-frobot/aframe"]],_from:"webvr-polyfill@>=0.9.36 <0.10.0",_id:"webvr-polyfill@0.9.36",_inCache:!0,_location:"/webvr-polyfill",_nodeVersion:"4.8.4",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/webvr-polyfill-0.9.36.tgz_1499892972378_0.10267087002284825"},_npmUser:{name:"jsantell",email:"jsantell@gmail.com"},_npmVersion:"2.15.11",_phantomChildren:{},_requested:{raw:"webvr-polyfill@^0.9.36",scope:null,escapedName:"webvr-polyfill",name:"webvr-polyfill",rawSpec:"^0.9.36",spec:">=0.9.36 <0.10.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/webvr-polyfill/-/webvr-polyfill-0.9.36.tgz",_shasum:"4b1e1556667e804beb0c8c2e67fdfcba3371e8c6",_shrinkwrap:null,_spec:"webvr-polyfill@^0.9.36",_where:"/home/ubuntu/a-frobot/aframe",authors:["Boris Smus <boris@smus.com>","Brandon Jones <tojiro@gmail.com>","Jordan Santell <jordan@jsantell.com>"],bugs:{url:"https://github.com/googlevr/webvr-polyfill/issues"},dependencies:{},description:"Use WebVR today, on mobile or desktop, without requiring a special browser build.",devDependencies:{chai:"^3.5.0",jsdom:"^9.12.0",mocha:"^3.2.0",semver:"^5.3.0",webpack:"^2.6.1","webpack-dev-server":"^2.4.5"},directories:{},dist:{shasum:"4b1e1556667e804beb0c8c2e67fdfcba3371e8c6",tarball:"https://registry.npmjs.org/webvr-polyfill/-/webvr-polyfill-0.9.36.tgz"},gitHead:"5f8693a9053ee1dea425e96d14cd1f2bef7a284c",homepage:"https://github.com/googlevr/webvr-polyfill",keywords:["vr","webvr"],license:"Apache-2.0",main:"src/node-entry",maintainers:[{name:"jsantell",email:"jsantell@gmail.com"},{name:"toji",email:"tojiro@gmail.com"},{name:"smus",email:"boris@smus.com"}],name:"webvr-polyfill",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/googlevr/webvr-polyfill.git"},scripts:{build:"webpack",start:"npm run watch",test:"mocha",watch:"webpack-dev-server"},version:"0.9.36"}},{}],49:[function(e,t,r){function VRFrameData(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function VRDisplay(){this.isPolyfilled=!0,this.displayId=o++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new n}function VRDevice(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function HMDVRDevice(){}function PositionSensorVRDevice(){}var i=e("./util.js"),n=e("./wakelock.js"),o=1e3,a=!1,s=[0,0,.5,1],u=[.5,0,.5,1];VRDisplay.prototype.getFrameData=function(e){return i.frameDataFromPose(e,this.getPose(),this)},VRDisplay.prototype.getPose=function(){return this.getImmediatePose()},VRDisplay.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},VRDisplay.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)},VRDisplay.prototype.wrapForFullscreen=function(e){if(i.isIOS())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=e;var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},VRDisplay.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),t.insertBefore(e,this.fullscreenWrapper_),t.removeChild(this.fullscreenWrapper_),e}},VRDisplay.prototype.requestPresent=function(e){var t=this.isPresenting,r=this;return e instanceof Array||(a||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),a=!0),e=[e]),new Promise(function(n,o){if(!r.capabilities.canPresent)return void o(new Error("VRDisplay is not capable of presenting."));if(0==e.length||e.length>r.capabilities.maxLayers)return void o(new Error("Invalid number of layers."));var a=e[0];if(!a.source)return void n();var l=a.leftBounds||s,c=a.rightBounds||u;if(t){var h=r.layer_;h.source!==a.source&&(h.source=a.source);for(var d=0;d<4;d++)h.leftBounds[d]=l[d],h.rightBounds[d]=c[d];return void n()}if(r.layer_={predistorted:a.predistorted,source:a.source,leftBounds:l.slice(0),rightBounds:c.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var f=r.wrapForFullscreen(r.layer_.source),p=function(){var e=i.getFullscreenElement();r.isPresenting=f===e,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),r.waitingForPresent_=!1,r.beginPresent_(),n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.wakelock_.release(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()},m=function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.wakelock_.release(),r.waitingForPresent_=!1,r.isPresenting=!1,o(new Error("Unable to present.")))};r.addFullscreenListeners_(f,p,m),i.requestFullscreen(f)?(r.wakelock_.request(),r.waitingForPresent_=!0):(i.isIOS()||i.isWebViewAndroid())&&(r.wakelock_.request(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),n())}r.waitingForPresent_||i.isIOS()||(i.exitFullscreen(),o(new Error("Unable to present.")))})},VRDisplay.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(r,n){e?(!i.exitFullscreen()&&i.isIOS()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),i.isWebViewAndroid()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),r()):n(new Error("Was not presenting to VRDisplay."))})},VRDisplay.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},VRDisplay.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},VRDisplay.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},VRDisplay.prototype.addFullscreenListeners_=function(e,t,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=r,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),r&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",r,!1))},VRDisplay.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",r,!1),e.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),e.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},VRDisplay.prototype.beginPresent_=function(){},VRDisplay.prototype.endPresent_=function(){},VRDisplay.prototype.submitFrame=function(e){},VRDisplay.prototype.getEyeParameters=function(e){return null},HMDVRDevice.prototype=new VRDevice,PositionSensorVRDevice.prototype=new VRDevice,t.exports.VRFrameData=VRFrameData,t.exports.VRDisplay=VRDisplay,t.exports.VRDevice=VRDevice,t.exports.HMDVRDevice=HMDVRDevice,t.exports.PositionSensorVRDevice=PositionSensorVRDevice},{"./util.js":69,"./wakelock.js":71}],50:[function(e,t,r){function CardboardDistorter(e){this.gl=e,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,n.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=n.linkProgram(e,a,s,this.attribs),this.uniforms=n.getProgramUniforms(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new i(e))}var i=e("./cardboard-ui.js"),n=e("./util.js"),o=e("./deps/wglu-preserve-state.js"),a=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");CardboardDistorter.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},CardboardDistorter.prototype.onResize=function(){var e=this.gl,t=this,r=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];o(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},CardboardDistorter.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,r=this.gl;n.isIOS()||(t.width=n.getScreenWidth()*this.bufferScale,t.height=n.getScreenHeight()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(r){e.bufferWidth=r,e.realCanvasWidth.set.call(t,r),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(r){e.bufferHeight=r,e.realCanvasHeight.set.call(t,r),e.onResize()}})),this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,i){e.lastBoundFramebuffer=i||e.framebuffer,e.realBindFramebuffer.call(r,t,e.lastBoundFramebuffer)},this.cullFace=r.getParameter(r.CULL_FACE),this.depthTest=r.getParameter(r.DEPTH_TEST),this.blend=r.getParameter(r.BLEND),this.scissorTest=r.getParameter(r.SCISSOR_TEST),this.stencilTest=r.getParameter(r.STENCIL_TEST),r.enable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!0;break;case r.DEPTH_TEST:e.depthTest=!0;break;case r.BLEND:e.blend=!0;break;case r.SCISSOR_TEST:e.scissorTest=!0;break;case r.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(r,t)},r.disable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!1;break;case r.DEPTH_TEST:e.depthTest=!1;break;case r.BLEND:e.blend=!1;break;case r.SCISSOR_TEST:e.scissorTest=!1;break;case r.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(r,t)},this.colorMask=r.getParameter(r.COLOR_WRITEMASK),r.colorMask=function(t,i,n,o){e.colorMask[0]=t,e.colorMask[1]=i,e.colorMask[2]=n,e.colorMask[3]=o,e.realColorMask.call(r,t,i,n,o)},this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE),r.clearColor=function(t,i,n,o){e.clearColor[0]=t,e.clearColor[1]=i,e.clearColor[2]=n,e.clearColor[3]=o,e.realClearColor.call(r,t,i,n,o)},this.viewport=r.getParameter(r.VIEWPORT),r.viewport=function(t,i,n,o){e.viewport[0]=t,e.viewport[1]=i,e.viewport[2]=n,e.viewport[3]=o,e.realViewport.call(r,t,i,n,o)},this.isPatched=!0,n.safariCssSizeWorkaround(t)}},CardboardDistorter.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;n.isIOS()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){n.safariCssSizeWorkaround(t)},1)}},CardboardDistorter.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},CardboardDistorter.prototype.submitFrame=function(){var e=this.gl,t=this,r=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||r.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),o(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||n.isIOS())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),n.isIOS()){var i=e.canvas;i.width==t.bufferWidth&&i.height==t.bufferHeight||(t.bufferWidth=i.width,t.bufferHeight=i.height,t.onResize())}},CardboardDistorter.prototype.updateDeviceInfo=function(e){var t=this.gl,r=this,i=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];o(t,i,function(t){var i=r.computeMeshVertices_(r.meshWidth,r.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),!r.indexCount){var n=r.computeMeshIndices_(r.meshWidth,r.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),r.indexCount=n.length}})},CardboardDistorter.prototype.computeMeshVertices_=function(e,t,r){for(var i=new Float32Array(2*e*t*5),o=r.getLeftEyeVisibleTanAngles(),a=r.getLeftEyeNoLensTanAngles(),s=r.getLeftEyeVisibleScreenRect(a),u=0,l=0;l<2;l++){for(var c=0;c<t;c++)for(var h=0;h<e;h++,u++){var d=h/(e-1),f=c/(t-1),p=d,m=f,g=n.lerp(o[0],o[2],d),y=n.lerp(o[3],o[1],f),v=Math.sqrt(g*g+y*y),b=r.distortion.distortInverse(v),x=g*b/v,M=y*b/v;d=(x-a[0])/(a[2]-a[0]),f=(M-a[3])/(a[1]-a[3]);r.device.widthMeters,r.device.heightMeters;d=2*(s.x+d*s.width-.5),f=2*(s.y+f*s.height-.5),i[5*u+0]=d,i[5*u+1]=f,i[5*u+2]=p,i[5*u+3]=m,i[5*u+4]=l}var w=o[2]-o[0];o[0]=-(w+o[0]),o[2]=w-o[2],w=a[2]-a[0],a[0]=-(w+a[0]),a[2]=w-a[2],s.x=1-(s.x+s.width)}return i},CardboardDistorter.prototype.computeMeshIndices_=function(e,t){for(var r=new Uint16Array(2*(e-1)*(t-1)*6),i=e/2,n=t/2,o=0,a=0,s=0;s<2;s++)for(var u=0;u<t;u++)for(var l=0;l<e;l++,o++)0!=l&&0!=u&&(l<=i==u<=n?(r[a++]=o,r[a++]=o-e-1,r[a++]=o-e,r[a++]=o-e-1,r[a++]=o,r[a++]=o-1):(r[a++]=o-1,r[a++]=o-e,r[a++]=o,r[a++]=o-e,r[a++]=o-1,r[a++]=o-e-1));return r},CardboardDistorter.prototype.getOwnPropertyDescriptor_=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(t)},r.set=function(e){this.setAttribute(t,e)}),r},t.exports=CardboardDistorter},{"./cardboard-ui.js":51,"./deps/wglu-preserve-state.js":53,"./util.js":69}],51:[function(e,t,r){function CardboardUI(e){this.gl=e,this.attribs={position:0},this.program=i.linkProgram(e,o,a,this.attribs),this.uniforms=i.getProgramUniforms(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var i=e("./util.js"),n=e("./deps/wglu-preserve-state.js"),o=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),a=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),s=Math.PI/180,u=.3125;CardboardUI.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},CardboardUI.prototype.listen=function(e,t){var r=this.gl.canvas;this.listener=function(i){var n=r.clientWidth/2;i.clientX>n-42&&i.clientX<n+42&&i.clientY>r.clientHeight-42?e(i):i.clientX<42&&i.clientY<42&&t(i)},r.addEventListener("click",this.listener,!1)},CardboardUI.prototype.onResize=function(){var e=this.gl,t=this,r=[e.ARRAY_BUFFER_BINDING];n(e,r,function(e){function addGearSegment(e,t){var n=(90-e)*s,o=Math.cos(n),a=Math.sin(n);r.push(u*o*h+i,u*a*h+h),r.push(t*o*h+i,t*a*h+h)}function addArrowVertex(t,i){r.push(d+t,e.drawingBufferHeight-d-i)}var r=[],i=e.drawingBufferWidth/2,n=Math.max(screen.width,screen.height)*window.devicePixelRatio,o=e.drawingBufferWidth/n,a=o*window.devicePixelRatio,l=4*a/2,c=42*a,h=28*a/2,d=14*a;r.push(i-l,c),r.push(i-l,e.drawingBufferHeight),r.push(i+l,c),r.push(i+l,e.drawingBufferHeight),t.gearOffset=r.length/2;for(var f=0;f<=6;f++){var p=60*f;addGearSegment(p,1),addGearSegment(p+12,1),addGearSegment(p+20,.75),addGearSegment(p+40,.75),addGearSegment(p+48,1)}t.gearVertexCount=r.length/2-t.gearOffset,t.arrowOffset=r.length/2;var m=l/Math.sin(45*s);addArrowVertex(0,h),addArrowVertex(h,0),addArrowVertex(h+m,m),addArrowVertex(m,h+m),addArrowVertex(m,h-m),addArrowVertex(0,h),addArrowVertex(h,2*h),addArrowVertex(h+m,2*h-m),addArrowVertex(m,h-m),addArrowVertex(0,h),addArrowVertex(m,h-l),addArrowVertex(28*a,h-l),addArrowVertex(m,h+l),addArrowVertex(28*a,h+l),t.arrowVertexCount=r.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW)})},CardboardUI.prototype.render=function(){var e=this.gl,t=this,r=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];n(e,r,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},CardboardUI.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),i.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},t.exports=CardboardUI},{"./deps/wglu-preserve-state.js":53,"./util.js":69}],52:[function(e,t,r){function CardboardVRDisplay(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new s,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new a(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new o(this.dpdb_.getDeviceParams()),this.viewerSelector_=new l,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new u),h.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var i=e("./cardboard-distorter.js"),n=e("./cardboard-ui.js"),o=e("./device-info.js"),a=e("./dpdb/dpdb.js"),s=e("./sensor-fusion/fusion-pose-sensor.js"),u=e("./rotate-instructions.js"),l=e("./viewer-selector.js"),c=e("./base.js").VRDisplay,h=e("./util.js"),d={LEFT:"left",RIGHT:"right"};CardboardVRDisplay.prototype=new c,CardboardVRDisplay.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},CardboardVRDisplay.prototype.resetPose=function(){this.poseSensor_.resetPose()},CardboardVRDisplay.prototype.getEyeParameters=function(e){var t,r=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(e==d.LEFT)r[0]*=-1,t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=d.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:t,offset:r,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},CardboardVRDisplay.prototype.onDeviceParamsUpdated_=function(e){h.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},CardboardVRDisplay.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},CardboardVRDisplay.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?window.WebVRConfig.CARDBOARD_UI_DISABLED||(e.canvas.width=h.getScreenWidth()*this.bufferScale_,e.canvas.height=h.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new n(e)):(this.distorter_=new i(e),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(h.isLandscapeMode()&&h.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},CardboardVRDisplay.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},CardboardVRDisplay.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},CardboardVRDisplay.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},CardboardVRDisplay.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl"),r=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];t.canvas.setAttribute("style",r.join("; ")+";"),h.safariCssSizeWorkaround(t.canvas)}},CardboardVRDisplay.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},CardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},t.exports=CardboardVRDisplay},{"./base.js":49,"./cardboard-distorter.js":50,"./cardboard-ui.js":51,"./device-info.js":54,"./dpdb/dpdb.js":58,"./rotate-instructions.js":63,"./sensor-fusion/fusion-pose-sensor.js":65,"./util.js":69,"./viewer-selector.js":70}],53:[function(e,t,r){function WGLUPreserveGLState(e,t,r){if(!t)return void r(e);for(var i=[],n=null,o=0;o<t.length;++o){var a=t[o];switch(a){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),i.push(null,null);break}n||(n=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(s),i.push(e.getParameter(a),null);break;case e.ACTIVE_TEXTURE:n=e.getParameter(e.ACTIVE_TEXTURE),i.push(null);break;default:i.push(e.getParameter(a))}}r(e);for(var o=0;o<t.length;++o){var a=t[o],u=i[o];switch(a){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,u);break;case e.COLOR_CLEAR_VALUE:e.clearColor(u[0],u[1],u[2],u[3]);break;case e.COLOR_WRITEMASK:e.colorMask(u[0],u[1],u[2],u[3]);break;case e.CURRENT_PROGRAM:e.useProgram(u);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,u);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,u);break;case e.TEXTURE_BINDING_2D:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,u);break;case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++o];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_CUBE_MAP,u);break;case e.VIEWPORT:e.viewport(u[0],u[1],u[2],u[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:u?e.enable(a):e.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}n&&e.activeTexture(n)}}t.exports=WGLUPreserveGLState},{}],54:[function(e,t,r){function Device(e){this.width=e.width||o.getScreenWidth(),this.height=e.height||o.getScreenHeight(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}function DeviceInfo(e){this.viewer=u.CardboardV2,this.updateDeviceParams(e),this.distortion=new i(this.viewer.distortionCoefficients)}function CardboardViewer(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}var i=e("./distortion/distortion.js"),n=e("./math-util.js"),o=e("./util.js"),a=new Device({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),s=new Device({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),u={CardboardV1:new CardboardViewer({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new CardboardViewer({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};DeviceInfo.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},DeviceInfo.prototype.getDevice=function(){return this.device},DeviceInfo.prototype.setViewer=function(e){this.viewer=e,this.distortion=new i(this.viewer.distortionCoefficients)},DeviceInfo.prototype.determineDevice_=function(e){if(!e)return o.isIOS()?(console.warn("Using fallback iOS device measurements."),s):(console.warn("Using fallback Android device measurements."),a);var t=.0254/e.xdpi,r=.0254/e.ydpi;return new Device({widthMeters:t*o.getScreenWidth(),heightMeters:r*o.getScreenHeight(),bevelMeters:.001*e.bevelMm})},DeviceInfo.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,r=this.distortion,i=e.screenLensDistance,o=(t.widthMeters-e.interLensDistance)/2,a=e.interLensDistance/2,s=e.baselineLensDistance-t.bevelMeters,u=t.heightMeters-s,l=n.radToDeg*Math.atan(r.distort(o/i)),c=n.radToDeg*Math.atan(r.distort(a/i)),h=n.radToDeg*Math.atan(r.distort(s/i)),d=n.radToDeg*Math.atan(r.distort(u/i));return{leftDegrees:Math.min(l,e.fov),rightDegrees:Math.min(c,e.fov),downDegrees:Math.min(h,e.fov),upDegrees:Math.min(d,e.fov)}},DeviceInfo.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,i=Math.tan(-n.degToRad*e.fov),o=Math.tan(n.degToRad*e.fov),a=Math.tan(n.degToRad*e.fov),s=Math.tan(-n.degToRad*e.fov),u=t.widthMeters/4,l=t.heightMeters/2,c=e.baselineLensDistance-t.bevelMeters-l,h=e.interLensDistance/2-u,d=-c,f=e.screenLensDistance,p=r.distort((h-u)/f),m=r.distort((d+l)/f),g=r.distort((h+u)/f),y=r.distort((d-l)/f),v=new Float32Array(4);return v[0]=Math.max(i,p),v[1]=Math.min(o,m),v[2]=Math.min(a,g),v[3]=Math.max(s,y),v},DeviceInfo.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,i=new Float32Array(4),o=r.distortInverse(Math.tan(-n.degToRad*e.fov)),a=r.distortInverse(Math.tan(n.degToRad*e.fov)),s=r.distortInverse(Math.tan(n.degToRad*e.fov)),u=r.distortInverse(Math.tan(-n.degToRad*e.fov)),l=t.widthMeters/4,c=t.heightMeters/2,h=e.baselineLensDistance-t.bevelMeters-c,d=e.interLensDistance/2-l,f=-h,p=e.screenLensDistance,m=(d-l)/p,g=(f+c)/p,y=(d+l)/p,v=(f-c)/p;return i[0]=Math.max(o,m),i[1]=Math.min(a,g),i[2]=Math.min(s,y),i[3]=Math.max(u,v),i},DeviceInfo.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,r=this.device,i=t.screenLensDistance,n=(r.widthMeters-t.interLensDistance)/2,o=t.baselineLensDistance-r.bevelMeters,a=(e[0]*i+n)/r.widthMeters,s=(e[1]*i+o)/r.heightMeters,u=(e[2]*i+n)/r.widthMeters,l=(e[3]*i+o)/r.heightMeters;return{x:a,y:l,width:u-a,height:s-l}},DeviceInfo.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},DeviceInfo.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},DeviceInfo.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:n.radToDeg*Math.atan(e.outerDist),rightDegrees:n.radToDeg*Math.atan(e.innerDist),downDegrees:n.radToDeg*Math.atan(e.bottomDist),upDegrees:n.radToDeg*Math.atan(e.topDist)}},DeviceInfo.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,r=this.device,i=t.screenLensDistance,n=r.widthMeters/i,o=r.heightMeters/i,a=r.width/n,s=r.height/o,u=Math.round((e.eyePosX-e.outerDist)*a),l=Math.round((e.eyePosY-e.bottomDist)*s);return{x:u,y:l,width:Math.round((e.eyePosX+e.innerDist)*a)-u,height:Math.round((e.eyePosY+e.topDist)*s)-l}},DeviceInfo.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,r=this.distortion,i=e.screenLensDistance,o=e.interLensDistance/2/i,a=t.widthMeters/i,s=t.heightMeters/i,u=a/2-o,l=(e.baselineLensDistance-t.bevelMeters)/i,c=e.fov,h=r.distortInverse(Math.tan(n.degToRad*c)),d=Math.min(u,h),f=Math.min(o,h),p=Math.min(l,h);return{outerDist:d,innerDist:f,topDist:Math.min(s-l,h),bottomDist:p,eyePosX:u,eyePosY:l}},DeviceInfo.Viewers=u,t.exports=DeviceInfo},{"./distortion/distortion.js":56,"./math-util.js":60,"./util.js":69}],55:[function(e,t,r){function VRDisplayHMDDevice(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:HMD:"+e.displayId,this.deviceName=e.displayName+" (HMD)"}function VRDisplayPositionSensorDevice(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId,this.deviceName=e.displayName+" (PositionSensor)"}var i=(e("./base.js").VRDisplay,e("./base.js").HMDVRDevice),n=e("./base.js").PositionSensorVRDevice;VRDisplayHMDDevice.prototype=new i,VRDisplayHMDDevice.prototype.getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:"right"==e?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}},VRDisplayHMDDevice.prototype.setFieldOfView=function(e,t,r,i){},VRDisplayPositionSensorDevice.prototype=new n,VRDisplayPositionSensorDevice.prototype.getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},VRDisplayPositionSensorDevice.prototype.resetState=function(){return this.positionDevice.resetPose()},t.exports.VRDisplayHMDDevice=VRDisplayHMDDevice,t.exports.VRDisplayPositionSensorDevice=VRDisplayPositionSensorDevice},{"./base.js":49}],56:[function(e,t,r){function Distortion(e){this.coefficients=e}Distortion.prototype.distortInverse=function(e){for(var t=0,r=1,i=e-this.distort(t);Math.abs(r-t)>1e-4;){var n=e-this.distort(r),o=r-n*((r-t)/(n-i));t=r,r=o,i=n}return r},Distortion.prototype.distort=function(e){for(var t=e*e,r=0,i=0;i<this.coefficients.length;i++)r=t*(r+this.coefficients[i]);return(r+1)*e},t.exports=Distortion},{}],57:[function(e,t,r){t.exports={format:1,last_updated:"2017-06-01T22:33:42Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3}]}},{}],58:[function(e,t,r){function Dpdb(e,t){if(this.dpdb=i,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var r=new XMLHttpRequest,n=this;r.open("GET",o,!0),r.addEventListener("load",function(){n.loading=!1,r.status>=200&&r.status<=299?(n.dpdb=JSON.parse(r.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),r.send()}}function DeviceParams(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}var i=e("./dpdb.json"),n=e("../util.js"),o="https://dpdb.webvr.rocks/dpdb.json";Dpdb.prototype.getDeviceParams=function(){return this.deviceParams},Dpdb.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Dpdb.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,r=n.getScreenWidth(),i=n.getScreenHeight();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var o=0;o<e.devices.length;o++){var a=e.devices[o];if(a.rules)if("ios"==a.type||"android"==a.type){if(n.isIOS()==("ios"==a.type)){for(var s=!1,u=0;u<a.rules.length;u++){var l=a.rules[u];if(this.matchRule_(l,t,r,i)){s=!0;break}}if(s){var c=a.dpi[0]||a.dpi,h=a.dpi[1]||a.dpi;return new DeviceParams({xdpi:c,ydpi:h,bevelMm:a.bw})}}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return console.warn("No DPDB device match."),null},Dpdb.prototype.matchRule_=function(e,t,r,i){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var n=e.res[0],o=e.res[1];if(Math.min(r,i)!=Math.min(n,o)||Math.max(r,i)!=Math.max(n,o))return!1}return!0},t.exports=Dpdb},{"../util.js":69,"./dpdb.json":57}],59:[function(e,t,r){var i=e("./util.js"),n=e("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=i.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1,GET_VR_DISPLAYS_TIMEOUT:1e3},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new n}:new n,window.WebVRPolyfill=n},{"./util.js":69,"./webvr-polyfill.js":72}],60:[function(e,t,r){var i=window.MathUtil||{};i.degToRad=Math.PI/180,i.radToDeg=180/Math.PI,i.Vector2=function(e,t){this.x=e||0,this.y=t||0},i.Vector2.prototype={constructor:i.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},i.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},i.Vector3.prototype={constructor:i.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,r=this.y,i=this.z,n=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*i-a*r,l=s*r+a*t-n*i,c=s*i+n*r-o*t,h=-n*t-o*r-a*i;return this.x=u*s+h*-n+l*-a-c*-o,this.y=l*s+h*-o+c*-n-u*-a,this.z=c*s+h*-a+u*-o-l*-n,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var r=e.x,i=e.y,n=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-n*a,this.y=n*o-r*s,this.z=r*a-i*o,this}},i.Quaternion=function(e,t,r,i){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==i?i:1},i.Quaternion.prototype={constructor:i.Quaternion,set:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,r){var i=Math.cos(e/2),n=Math.cos(t/2),o=Math.cos(r/2),a=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(r/2);return this.x=a*n*o+i*s*u,this.y=i*s*o-a*n*u,this.z=i*n*u+a*s*o,this.w=i*n*o-a*s*u,this},setFromEulerYXZ:function(e,t,r){var i=Math.cos(e/2),n=Math.cos(t/2),o=Math.cos(r/2),a=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(r/2);return this.x=a*n*o+i*s*u,this.y=i*s*o-a*n*u,this.z=i*n*u-a*s*o,this.w=i*n*o+a*s*u,this},setFromAxisAngle:function(e,t){var r=t/2,i=Math.sin(r);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(r),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e.x,i=e.y,n=e.z,o=e.w,a=t.x,s=t.y,u=t.z,l=t.w;return this.x=r*l+o*a+i*u-n*s,this.y=i*l+o*s+n*a-r*u,this.z=n*l+o*u+r*s-i*a,this.w=o*l-r*a-i*s-n*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this.x,i=this.y,n=this.z,o=this.w,a=o*e.w+r*e.x+i*e.y+n*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=o,this.x=r,this.y=i,this.z=n,this;var s=Math.acos(a),u=Math.sqrt(1-a*a);if(Math.abs(u)<.001)return this.w=.5*(o+this.w),this.x=.5*(r+this.x),this.y=.5*(i+this.y),this.z=.5*(n+this.z),this;var l=Math.sin((1-t)*s)/u,c=Math.sin(t*s)/u;return this.w=o*l+this.w*c,this.x=r*l+this.x*c,this.y=i*l+this.y*c,this.z=n*l+this.z*c,this},setFromUnitVectors:function(){var e,t;return function(r,n){return void 0===e&&(e=new i.Vector3),t=r.dot(n)+1,t<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},t.exports=i},{}],61:[function(e,t,r){function MouseKeyboardVRDisplay(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new n.Quaternion,this.rotateStart_=new n.Vector2,this.rotateEnd_=new n.Vector2,this.rotateDelta_=new n.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var i=e("./base.js").VRDisplay,n=e("./math-util.js"),o=e("./util.js");MouseKeyboardVRDisplay.prototype=new i,MouseKeyboardVRDisplay.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},MouseKeyboardVRDisplay.prototype.onKeyDown_=function(e){38==e.keyCode?this.animatePhi_(this.phi_+.15):39==e.keyCode?this.animateTheta_(this.theta_-.15):40==e.keyCode?this.animatePhi_(this.phi_-.15):37==e.keyCode&&this.animateTheta_(this.theta_+.15)},MouseKeyboardVRDisplay.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e)},MouseKeyboardVRDisplay.prototype.animatePhi_=function(e){e=o.clamp(e,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",e)},MouseKeyboardVRDisplay.prototype.animateKeyTransitions_=function(e,t){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var r=this[e],i=new Date;this.angleAnimation_=requestAnimationFrame(function animate(){var n=new Date-i;if(n>=80)return this[e]=t,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(animate.bind(this));var o=n/80;this[e]=r+(t-r)*o}.bind(this))},MouseKeyboardVRDisplay.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0},MouseKeyboardVRDisplay.prototype.onMouseMove_=function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0,r=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-r)}else this.rotateEnd_.set(e.clientX,e.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*.5,this.phi_=o.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},MouseKeyboardVRDisplay.prototype.onMouseUp_=function(e){this.isDragging_=!1},MouseKeyboardVRDisplay.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},MouseKeyboardVRDisplay.prototype.resetPose=function(){this.phi_=0,this.theta_=0},t.exports=MouseKeyboardVRDisplay},{"./base.js":49,"./math-util.js":60,"./util.js":69}],62:[function(e,t,r){(function(t){void 0!==t&&t.window&&(t.document=t.window.document,t.navigator=t.window.navigator),e("./main")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":59}],63:[function(e,t,r){function RotateInstructions(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var r=document.createElement("img");r.src=this.icon;var t=r.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(r);var i=document.createElement("div"),t=i.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",i.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(i);var n=document.createElement("div"),t=n.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(n);var o=document.createElement("div");o.style.float="left",o.innerHTML="No Cardboard viewer?";var a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank";var t=a.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",n.appendChild(o),n.appendChild(a),this.overlay=e,this.text=i,this.hide()}var i=e("./util.js");RotateInstructions.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),r=t.style;i.isLandscapeMode()?(r.width="20%",r.marginLeft="40%",r.marginTop="3%"):(r.width="50%",r.marginLeft="25%",r.marginTop="25%")},RotateInstructions.prototype.hide=function(){this.overlay.style.display="none"},RotateInstructions.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},RotateInstructions.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},RotateInstructions.prototype.update=function(){this.disableShowTemporarily(),!i.isLandscapeMode()&&i.isMobile()?this.show():this.hide()},RotateInstructions.prototype.loadIcon_=function(){this.icon=i.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},t.exports=RotateInstructions},{"./util.js":69}],64:[function(e,t,r){function ComplementaryFilter(e){this.kFilter=e,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,o.isIOS()?this.filterQ=new n.Quaternion(-1,0,0,1):this.filterQ=new n.Quaternion(1,0,0,1),this.previousFilterQ=new n.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new n.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new n.Vector3,this.measuredGravity=new n.Vector3,this.gyroIntegralQ=new n.Quaternion}var i=e("./sensor-sample.js"),n=e("../math-util.js"),o=e("../util.js");ComplementaryFilter.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},ComplementaryFilter.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var r=t-this.previousGyroMeasurement.timestampS;o.isTimestampDeltaValid(r)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ComplementaryFilter.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var r=new n.Quaternion;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var i=new n.Quaternion;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),o.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",n.radToDeg*o.getQuaternionAngle(i),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new n.Quaternion;a.copy(this.filterQ),a.multiply(i),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ComplementaryFilter.prototype.getOrientation=function(){return this.filterQ},ComplementaryFilter.prototype.accelToQuaternion_=function(e){var t=new n.Vector3;t.copy(e),t.normalize();var r=new n.Quaternion;return r.setFromUnitVectors(new n.Vector3(0,0,-1),t),r.inverse(),r},ComplementaryFilter.prototype.gyroToQuaternionDelta_=function(e,t){var r=new n.Quaternion,i=new n.Vector3;return i.copy(e),i.normalize(),r.setFromAxisAngle(i,e.length()*t),r},t.exports=ComplementaryFilter},{"../math-util.js":60,"../util.js":69,"./sensor-sample.js":67}],65:[function(e,t,r){function FusionPoseSensor(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new a.Vector3,this.gyroscope=new a.Vector3,this.start(),this.filter=new i(window.WebVRConfig.K_FILTER),this.posePredictor=new n(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new o,this.filterToWorldQ=new a.Quaternion,s.isIOS()?this.filterToWorldQ.setFromAxisAngle(new a.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new a.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new a.Quaternion,this.worldToScreenQ=new a.Quaternion,this.originalPoseAdjustQ=new a.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new a.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),s.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new a.Quaternion,this.isFirefoxAndroid=s.isFirefoxAndroid(),this.isIOS=s.isIOS(),this.orientationOut_=new Float32Array(4)}var i=e("./complementary-filter.js"),n=e("./pose-predictor.js"),o=e("../touch-panner.js"),a=e("../math-util.js"),s=e("../util.js");FusionPoseSensor.prototype.getPosition=function(){return null},FusionPoseSensor.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new a.Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||t.multiply(this.touchPanner.getOrientation()),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},FusionPoseSensor.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),s.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},FusionPoseSensor.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},FusionPoseSensor.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,r=e.rotationRate,i=e.timeStamp/1e3,n=i-this.previousTimestampS;if(n<=s.MIN_TIMESTEP||n>s.MAX_TIMESTEP)return console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=i);this.accelerometer.set(-t.x,-t.y,-t.z),this.gyroscope.set(r.alpha,r.beta,r.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,i),this.filter.addGyroMeasurement(this.gyroscope,i),this.previousTimestampS=i},FusionPoseSensor.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},FusionPoseSensor.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)}},FusionPoseSensor.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new a.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new a.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},FusionPoseSensor.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),s.isIOS()&&s.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},FusionPoseSensor.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},t.exports=FusionPoseSensor},{"../math-util.js":60,"../touch-panner.js":68,"../util.js":69,"./complementary-filter.js":64,"./pose-predictor.js":66}],66:[function(e,t,r){function PosePredictor(e){this.predictionTimeS=e,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=e("../math-util"),n=e("../util");PosePredictor.prototype.getPrediction=function(e,t,r){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=r,e;var o=new i.Vector3;o.copy(t),o.normalize();var a=t.length();if(a<20*i.degToRad)return n.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(i.radToDeg*a).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var s=(this.previousTimestampS,a*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(o,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=r,this.outQ},t.exports=PosePredictor},{"../math-util":60,"../util":69}],67:[function(e,t,r){function SensorSample(e,t){this.set(e,t)}SensorSample.prototype.set=function(e,t){this.sample=e,this.timestampS=t},SensorSample.prototype.copy=function(e){this.set(e.sample,e.timestampS)},t.exports=SensorSample},{}],68:[function(e,t,r){function TouchPanner(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.theta=0,this.orientation=new i.Quaternion}var i=e("./math-util.js"),n=e("./util.js");TouchPanner.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},TouchPanner.prototype.resetSensor=function(){this.theta=0},TouchPanner.prototype.onTouchStart_=function(e){e.touches&&1==e.touches.length&&(this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),this.isTouching=!0)},TouchPanner.prototype.onTouchMove_=function(e){if(this.isTouching){this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),n.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*.5}},TouchPanner.prototype.onTouchEnd_=function(e){this.isTouching=!1},t.exports=TouchPanner},{"./math-util.js":60,"./util.js":69}],69:[function(e,t,r){var i=window.Util||{};i.MIN_TIMESTEP=.001,i.MAX_TIMESTEP=1,i.base64=function(e,t){return"data:"+e+";base64,"+t},i.clamp=function(e,t,r){return Math.min(Math.max(t,e),r)},i.lerp=function(e,t,r){return e+(t-e)*r},i.race=function(e){return Promise.race?Promise.race(e):new Promise(function(t,r){for(var i=0;i<e.length;i++)e[i].then(t,r)})},i.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),i.isWebViewAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),i.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),i.isFirefoxAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}(),i.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},i.isTimestampDeltaValid=function(e){return!isNaN(e)&&(!(e<=i.MIN_TIMESTEP)&&!(e>i.MAX_TIMESTEP))},i.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},i.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},i.requestFullscreen=function(e){if(i.isWebViewAndroid())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},i.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},i.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},i.linkProgram=function(e,t,r,i){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t),e.compileShader(n);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,r),e.compileShader(o);var a=e.createProgram();e.attachShader(a,n),e.attachShader(a,o);for(var s in i)e.bindAttribLocation(a,i[s],s);return e.linkProgram(a),e.deleteShader(n),e.deleteShader(o),a},i.getProgramUniforms=function(e,t){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n="",o=0;o<i;o++){n=e.getActiveUniform(t,o).name.replace("[0]",""),r[n]=e.getUniformLocation(t,n)}return r},i.orthoMatrix=function(e,t,r,i,n,o,a){var s=1/(t-r),u=1/(i-n),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*u,e[14]=(a+o)*l,e[15]=1,e},i.copyArray=function(e,t){for(var r=0,i=e.length;r<i;r++)t[r]=e[r]},i.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},i.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},i.safariCssSizeWorkaround=function(e){if(i.isIOS()){var t=e.style.width,r=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(r)+"px",setTimeout(function(){e.style.width=t,e.style.height=r},100)}window.Util=i,window.canvas=e},i.isDebug=function(){return i.getQueryParameter("debug")},i.getQueryParameter=function(e){var e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},i.frameDataFromPose=function(){function mat4_perspectiveFromFieldOfView(r,i,n,o){var a=Math.tan(i?i.upDegrees*e:t),s=Math.tan(i?i.downDegrees*e:t),u=Math.tan(i?i.leftDegrees*e:t),l=Math.tan(i?i.rightDegrees*e:t),c=2/(u+l),h=2/(a+s);return r[0]=c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=-(u-l)*c*.5,r[9]=(a-s)*h*.5,r[10]=o/(n-o),r[11]=-1,r[12]=0,r[13]=0,r[14]=o*n/(n-o),r[15]=0,r}function mat4_fromRotationTranslation(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=i+i,u=n+n,l=o+o,c=i*s,h=i*u,d=i*l,f=n*u,p=n*l,m=o*l,g=a*s,y=a*u,v=a*l;return e[0]=1-(f+m),e[1]=h+v,e[2]=d-y,e[3]=0,e[4]=h-v,e[5]=1-(c+m),e[6]=p+g,e[7]=0,e[8]=d+y,e[9]=p-g,e[10]=1-(c+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function mat4_translate(e,t,r){var i,n,o,a,s,u,l,c,h,d,f,p,m=r[0],g=r[1],y=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=i,e[1]=n,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=i*m+s*g+h*y+t[12],e[13]=n*m+u*g+d*y+t[13],e[14]=o*m+l*g+f*y+t[14],e[15]=a*m+c*g+p*y+t[15]),e}function mat4_invert(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=r*s-i*a,b=r*u-n*a,x=r*l-o*a,M=i*u-n*s,w=i*l-o*s,E=n*l-o*u,_=c*m-h*p,T=c*g-d*p,A=c*y-f*p,S=h*g-d*m,C=h*y-f*m,L=d*y-f*g,D=v*L-b*C+x*S+M*A-w*T+E*_;return D?(D=1/D,e[0]=(s*L-u*C+l*S)*D,e[1]=(n*C-i*L-o*S)*D,e[2]=(m*E-g*w+y*M)*D,e[3]=(d*w-h*E-f*M)*D,e[4]=(u*A-a*L-l*T)*D,e[5]=(r*L-n*A+o*T)*D,e[6]=(g*x-p*E-y*b)*D,e[7]=(c*E-d*x+f*b)*D,e[8]=(a*C-s*A+l*_)*D,e[9]=(i*A-r*C-o*_)*D,e[10]=(p*w-m*x+y*v)*D,e[11]=(h*x-c*w-f*v)*D,e[12]=(s*T-a*S-u*_)*D,e[13]=(r*S-i*T+n*_)*D,e[14]=(m*b-p*M-g*v)*D,e[15]=(c*M-h*b+d*v)*D,e):null}function updateEyeMatrices(e,t,n,o,a){mat4_perspectiveFromFieldOfView(e,o?o.fieldOfView:null,a.depthNear,a.depthFar),mat4_fromRotationTranslation(t,n.orientation||r,n.position||i),o&&mat4_translate(t,t,o.offset),mat4_invert(t,t)}var e=Math.PI/180,t=.25*Math.PI,r=new Float32Array([0,0,0,1]),i=new Float32Array([0,0,0]);return function(e,t,r){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,updateEyeMatrices(e.leftProjectionMatrix,e.leftViewMatrix,t,r.getEyeParameters("left"),r),updateEyeMatrices(e.rightProjectionMatrix,e.rightViewMatrix,t,r.getEyeParameters("right"),r),!0)}}(),i.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=i.getDomainFromUrl(document.referrer),r=i.getDomainFromUrl(window.location.href);return e&&t!==r},i.getDomainFromUrl=function(e){var t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0]},t.exports=i},{}],70:[function(e,t,r){function ViewerSelector(){try{this.selectedKey=localStorage.getItem(o)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=n),this.dialog=this.createDialog_(i.Viewers),this.root=null,this.onChangeCallbacks_=[]}var i=e("./device-info.js"),n=(e("./util.js"),"CardboardV1"),o="WEBVR_CARDBOARD_VIEWER";ViewerSelector.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},ViewerSelector.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},ViewerSelector.prototype.getCurrentViewer=function(){return i.Viewers[this.selectedKey]},ViewerSelector.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},ViewerSelector.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},ViewerSelector.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},ViewerSelector.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!i.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.fireOnChange_(i.Viewers[this.selectedKey]);try{localStorage.setItem(o,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()},ViewerSelector.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var r=document.createElement("div"),i=r.style;i.position="fixed",i.left=0,i.top=0,i.width="100%",i.height="100%",i.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var n=document.createElement("div"),i=n.style;i.boxSizing="border-box",i.position="fixed",i.top="24px",i.left="50%",i.marginLeft="-140px",i.width="280px",i.padding="24px",i.overflow="hidden",i.background="#fafafa",i.fontFamily="'Roboto', sans-serif",i.boxShadow="0px 5px 20px #666",n.appendChild(this.createH1_("Select your viewer"));for(var o in e)n.appendChild(this.createChoice_(o,e[o].label));return n.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(r),t.appendChild(n),t},ViewerSelector.prototype.createH1_=function(e){var t=document.createElement("h1"),r=t.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",t.innerHTML=e,t},ViewerSelector.prototype.createChoice_=function(e,t){var r=document.createElement("div");r.style.marginTop="8px",r.style.color="black";var i=document.createElement("input");i.style.fontSize="30px",i.setAttribute("id",e),i.setAttribute("type","radio"),i.setAttribute("value",e),i.setAttribute("name","field");var n=document.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",e),n.innerHTML=t,r.appendChild(i),r.appendChild(n),r},ViewerSelector.prototype.createButton_=function(e,t){var r=document.createElement("button");r.innerHTML=e;var i=r.style;return i.float="right",i.textTransform="uppercase",i.color="#1094f7",i.fontSize="14px",i.letterSpacing=0,i.border=0,i.background="none",i.marginTop="16px",r.addEventListener("click",t),r},t.exports=ViewerSelector},{"./device-info.js":54,"./util.js":69}],71:[function(e,t,r){function AndroidWakeLock(){function addSourceToVideo(e,t,r){var i=document.createElement("source");i.src=r,i.type="video/"+t,e.appendChild(i)}var e=document.createElement("video");e.setAttribute("loop",""),addSourceToVideo(e,"webm",i.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),addSourceToVideo(e,"mp4",i.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){e.paused&&e.play()},this.release=function(){e.pause()}}function iOSWakeLock(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){e&&(clearInterval(e),e=null)}}var i=e("./util.js");t.exports=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?iOSWakeLock:AndroidWakeLock}()},{"./util.js":69}],72:[function(e,t,r){function WebVRPolyfill(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),InstallWebVRSpecShim()}function InstallWebVRSpecShim(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=s,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(e){return i.frameDataFromPose(e,this.getPose(),this)})}var i=e("./util.js"),n=e("./cardboard-vr-display.js"),o=e("./mouse-keyboard-vr-display.js"),a=e("./base.js").VRDisplay,s=e("./base.js").VRFrameData,u=e("./base.js").HMDVRDevice,l=e("./base.js").PositionSensorVRDevice,c=e("./display-wrappers.js").VRDisplayHMDDevice,h=e("./display-wrappers.js").VRDisplayPositionSensorDevice,d=e("../package.json").version;WebVRPolyfill.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},WebVRPolyfill.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},WebVRPolyfill.prototype.connectDisplay=function(e){e.fireVRDisplayConnect_(),this.displays.push(e)},WebVRPolyfill.prototype.populateDevices=function(){if(!this.devicesPopulated){var e=null;this.isCardboardCompatible()&&(e=new n,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new c(e)),this.devices.push(new h(e)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(e=new o,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new c(e)),this.devices.push(new h(e)))),this.devicesPopulated=!0}},WebVRPolyfill.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var e=window.VRFrameData,t=new window.VRFrameData,r=window.VRDisplay.prototype.getFrameData;window.VRFrameData=s,window.VRDisplay.prototype.getFrameData=function(n){if(n instanceof e)return void r.call(this,n);r.call(this,t),n.pose=t.pose,i.copyArray(t.leftProjectionMatrix,n.leftProjectionMatrix),i.copyArray(t.rightProjectionMatrix,n.rightProjectionMatrix),i.copyArray(t.leftViewMatrix,n.leftViewMatrix),i.copyArray(t.rightViewMatrix,n.rightViewMatrix)}}if(window.VRDisplay=a,navigator&&!navigator.vrEnabled){var n=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return n.isCardboardCompatible()&&(n.isFullScreenAvailable()||i.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=s)},WebVRPolyfill.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=u,window.PositionSensorVRDevice=l},WebVRPolyfill.prototype.getVRDisplays=function(){this.populateDevices();var e=this.displays;if(!this.nativeWebVRAvailable)return Promise.resolve(e);var t,r=this.nativeGetVRDisplaysFunc.call(navigator),n=new Promise(function(e){t=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),e([])},window.WebVRConfig.GET_VR_DISPLAYS_TIMEOUT)});return i.race([r,n]).then(function(r){return clearTimeout(t),window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?r.concat(e):r.length>0?r:e})},WebVRPolyfill.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var e=this;return new Promise(function(t,r){try{if(!e.devicesPopulated){if(e.nativeWebVRAvailable)return navigator.getVRDisplays(function(r){for(var i=0;i<r.length;++i)e.devices.push(new c(r[i])),e.devices.push(new h(r[i]));e.devicesPopulated=!0,t(e.devices)},r);if(e.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(r){for(var i=0;i<r.length;++i)r[i]instanceof u&&e.devices.push(r[i]),r[i]instanceof l&&e.devices.push(r[i]);e.devicesPopulated=!0,t(e.devices)},r)}e.populateDevices(),t(e.devices)}catch(e){r(e)}})},WebVRPolyfill.prototype.NativeVRFrameData=window.VRFrameData,WebVRPolyfill.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},WebVRPolyfill.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},WebVRPolyfill.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},WebVRPolyfill.InstallWebVRSpecShim=InstallWebVRSpecShim,WebVRPolyfill.version=d,t.exports.WebVRPolyfill=WebVRPolyfill},{"../package.json":48,"./base.js":49,"./cardboard-vr-display.js":52,"./display-wrappers.js":55,"./mouse-keyboard-vr-display.js":61,"./util.js":69}],73:[function(e,t,r){function idxOf(e,t,r,i){var n=e.indexOf(t,r);return-1===n||n>i?i:n}function isWhitespace(e){return o.test(e)}function pre(e,t,r,n,o){for(var a=[],s=r,u=r;u<n&&u<t.length;u++){var l=t.charAt(u),c=i.test(l);if(c||u===n-1){var h=c?u:u+1,d=e(t,s,h,o);a.push(d),s=u+1}}return a}function greedy(e,t,r,i,o,a){var s=[],u=o;for("nowrap"===a&&(u=Number.MAX_VALUE);r<i&&r<t.length;){for(var l=idxOf(t,n,r,i);r<l&&isWhitespace(t.charAt(r));)r++;var c=e(t,r,l,u),h=r+(c.end-c.start),d=h+n.length;if(h<l){for(;h>r&&!isWhitespace(t.charAt(h));)h--;if(h===r)d>r+n.length&&d--,h=d;else for(d=h;h>r&&isWhitespace(t.charAt(h-n.length));)h--}if(h>=r){var f=e(t,r,h,u);s.push(f)}r=d}return s}function monospace(e,t,r,i){return{start:t,end:t+Math.min(i,r-t)}}var i=/\n/,n="\n",o=/\s/;t.exports=function(e,r){return t.exports.lines(e,r).map(function(t){return e.substring(t.start,t.end)}).join("\n")},t.exports.lines=function(e,t){if(t=t||{},0===t.width&&"nowrap"!==t.mode)return[];e=e||"";var r="number"==typeof t.width?t.width:Number.MAX_VALUE,i=Math.max(0,t.start||0),n="number"==typeof t.end?t.end:e.length,o=t.mode,a=t.measure||monospace;return"pre"===o?pre(a,e,i,n,r):greedy(a,e,i,n,r,o)}},{}],74:[function(e,t,r){"use strict";function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function initParams(e,t,r){var i=e;return n(t)?(r=t,"string"==typeof e&&(i={uri:e})):i=a(t,{uri:e}),i.callback=r,i}function createXHR(e,t,r){return t=initParams(e,t,r),_createXHR(t)}function _createXHR(e){function readystatechange(){4===i.readyState&&loadFunc()}function getBody(){var e=void 0;if(e=i.response?i.response:i.responseText||getXml(i),f)try{e=JSON.parse(e)}catch(e){}return e}function errorFunc(e){return clearTimeout(s),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,p)}function loadFunc(){if(!a){var t;clearTimeout(s),t=e.useXDR&&void 0===i.status?200:1223===i.status?204:i.status;var n=p,c=null;return 0!==t?(n={body:getBody(),statusCode:t,method:l,headers:{},url:u,rawRequest:i},i.getAllResponseHeaders&&(n.headers=o(i.getAllResponseHeaders()))):c=new Error("Internal XMLHttpRequest Error"),r(c,n,n.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,r=function(r,i,n){t||(t=!0,e.callback(r,i,n))},i=e.xhr||null;i||(i=e.cors||e.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var n,a,s,u=i.url=e.uri||e.url,l=i.method=e.method||"GET",c=e.body||e.data,h=i.headers=e.headers||{},d=!!e.sync,f=!1,p={body:void 0,headers:{},statusCode:0,method:l,url:u,rawRequest:i};if("json"in e&&!1!==e.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==l&&"HEAD"!==l&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),c=JSON.stringify(!0===e.json?c:e.json))),i.onreadystatechange=readystatechange,i.onload=loadFunc,i.onerror=errorFunc,i.onprogress=function(){},i.onabort=function(){a=!0},i.ontimeout=errorFunc,i.open(l,u,!d,e.username,e.password),d||(i.withCredentials=!!e.withCredentials),!d&&e.timeout>0&&(s=setTimeout(function(){if(!a){a=!0,i.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",errorFunc(e)}},e.timeout)),i.setRequestHeader)for(n in h)h.hasOwnProperty(n)&&i.setRequestHeader(n,h[n]);else if(e.headers&&!isEmpty(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(i.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(i),i.send(c||null),i}function getXml(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function noop(){}var i=e("global/window"),n=e("is-function"),o=e("parse-headers"),a=e("xtend");t.exports=createXHR,createXHR.XMLHttpRequest=i.XMLHttpRequest||noop,createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:i.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){createXHR["delete"===e?"del":e]=function(t,r,i){return r=initParams(t,r,i),r.method=e.toUpperCase(),_createXHR(r)}})},{"global/window":15,"is-function":20,"parse-headers":31,xtend:76}],75:[function(e,t,r){t.exports=function(){return void 0!==window.DOMParser?function(e){return(new window.DOMParser).parseFromString(e,"application/xml")}:void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")?function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}:function(e){var t=document.createElement("div");return t.innerHTML=e,t}}()},{}],76:[function(e,t,r){function extend(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e}t.exports=extend;var i=Object.prototype.hasOwnProperty},{}],77:[function(e,t,r){t.exports={name:"aframe",version:"0.6.1",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-master.js.map > dist/aframe-master.js","dist:min":"npm run browserify -s -- --debug -p [minifyify --map aframe-master.min.js.map --output dist/aframe-master.min.js.map] -o dist/aframe-master.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prerelease:"node scripts/release.js 0.6.0 0.6.1",start:"npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",dependencies:{"@tweenjs/tween.js":"^16.8.0","browserify-css":"^0.8.2",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7",envify:"^3.4.1","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","style-attr":"^1.0.2",three:"^0.84.0","three-bmfont-text":"^2.1.0","webvr-polyfill":"^0.9.36"},devDependencies:{browserify:"^13.1.0","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"0.0.20",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],78:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../lib/three"),o=e("../utils/"),a=o.bind,s=o.device.checkHasPositionalTracking;t.exports.Component=i("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},userHeight:{default:0,min:0},zoom:{default:1,min:0}},init:function(){var e,t=this.el,r=t.sceneEl;this.savedPose=null,e=this.camera=new n.PerspectiveCamera,t.setObject3D("camera",e),this.onEnterVR=a(this.onEnterVR,this),this.onExitVR=a(this.onExitVR,this),r.addEventListener("enter-vr",this.onEnterVR),r.addEventListener("exit-vr",this.onExitVR)},update:function(e){var t=this.el,r=this.data,i=this.camera,n=this.system;this.addHeightOffset(e.userHeight),i.aspect=r.aspect||window.innerWidth/window.innerHeight,i.far=r.far,i.fov=r.fov,i.near=r.near,i.zoom=r.zoom,i.updateProjectionMatrix(),e&&e.active===r.active||(r.active&&n.activeCameraEl!==t?n.setActiveCamera(t):r.active||n.activeCameraEl!==t||n.disableActiveCamera())},remove:function(){var e=this.el.sceneEl;this.el.removeObject3D("camera"),e.removeEventListener("enter-vr",this.onEnterVR),e.removeEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.saveCameraPose(),this.removeHeightOffset()},onExitVR:function(){this.restoreCameraPose()},addHeightOffset:function(e){var t,r=this.el,i=this.data.userHeight;e=e||0,t=r.getAttribute("position")||{x:0,y:0,z:0},r.setAttribute("position",{x:t.x,y:t.y-e+i,z:t.z})},removeHeightOffset:function(){var e,t,r=this.el,i=this.data.userHeight;t=void 0!==this.hasPositionalTracking?this.hasPositionalTracking:s(),i&&t&&(e=r.getAttribute("position")||{x:0,y:0,z:0},r.setAttribute("position",{x:e.x,y:e.y-i,z:e.z}))},saveCameraPose:function(){var e=this.el,t=void 0!==this.hasPositionalTracking?this.hasPositionalTracking:s();!this.savedPose&&t&&(this.savedPose={position:e.getAttribute("position"),rotation:e.getAttribute("rotation")})},restoreCameraPose:function(){var e=this.el,t=this.savedPose,r=void 0!==this.hasPositionalTracking?this.hasPositionalTracking:s();t&&r&&(e.setAttribute("position",t.position),e.setAttribute("rotation",t.rotation),this.savedPose=null)}})},{"../core/component":126,"../lib/three":174,"../utils/":197}],79:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../lib/three");t.exports.Component=i("collada-model",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new n.ColladaLoader,this.loader.options.convertUpAxis=!0},update:function(){var e=this,t=this.el,r=this.data;r&&(this.remove(),this.loader.load(r,function(r){e.model=r.scene,t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"collada",model:e.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":126,"../lib/three":174}],80:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../utils/"),o=n.bind,a={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},s={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"};t.exports.Component=i("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:n.device.isMobile()},fuseTimeout:{default:1500,min:0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersection=null,this.intersectedEl=null,this.onCursorDown=o(this.onCursorDown,this),this.onCursorUp=o(this.onCursorUp,this),this.onIntersection=o(this.onIntersection,this),this.onIntersectionCleared=o(this.onIntersectionCleared,this),this.onMouseMove=o(this.onMouseMove,this)},update:function(e){this.data.rayOrigin!==e.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var e=this.el;e.removeState(s.HOVERING),e.removeState(s.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(s.HOVERED),this.removeEventListeners()},addEventListeners:function(){var e,t=this.data,r=this.el,i=this;e=r.sceneEl.canvas,e?(e.addEventListener("mousedown",this.onCursorDown),e.addEventListener("mouseup",this.onCursorUp)):r.sceneEl.addEventListener("render-target-loaded",function(){e=r.sceneEl.canvas,e.addEventListener("mousedown",i.onCursorDown),e.addEventListener("mouseup",i.onCursorUp)}),t.downEvents.forEach(function(e){r.addEventListener(e,i.onCursorDown)}),t.upEvents.forEach(function(e){r.addEventListener(e,i.onCursorUp)}),r.addEventListener("raycaster-intersection",this.onIntersection),r.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared)},removeEventListeners:function(){var e,t=this.data,r=this.el,i=this;e=r.sceneEl.canvas,e&&(e.removeEventListener("mousedown",this.onCursorDown),e.removeEventListener("mouseup",this.onCursorUp)),t.downEvents.forEach(function(e){r.removeEventListener(e,i.onCursorDown)}),t.upEvents.forEach(function(e){r.removeEventListener(e,i.onCursorUp)}),r.removeEventListener("raycaster-intersection",this.onIntersection),r.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),window.removeEventListener("mousemove",this.onMouseMove)},updateMouseEventListeners:function(){var e=this.el;window.removeEventListener("mousemove",this.onMouseMove),e.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(window.addEventListener("mousemove",this.onMouseMove,!1),e.setAttribute("raycaster","useWorldCoordinates",!0))},onMouseMove:function(){var e=new THREE.Vector2,t=new THREE.Vector3,r=new THREE.Vector3,i={origin:t,direction:r};return function(n){var o=this.el.sceneEl.camera;o.parent.updateMatrixWorld(),o.updateMatrixWorld(),e.x=n.clientX/window.innerWidth*2-1,e.y=-n.clientY/window.innerHeight*2+1,t.setFromMatrixPosition(o.matrixWorld),r.set(e.x,e.y,.5).unproject(o).sub(t).normalize(),this.el.setAttribute("raycaster",i)}}(),onCursorDown:function(e){this.twoWayEmit(a.MOUSEDOWN),this.cursorDownEl=this.intersectedEl},onCursorUp:function(e){this.twoWayEmit(a.MOUSEUP),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&this.cursorDownEl.emit(a.MOUSEUP,{cursorEl:this.el,intersection:null}),!this.data.fuse&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(a.CLICK),this.cursorDownEl=null},onIntersection:function(e){var t,r,i,n=this,o=this.el,u=this.data;if(t=e.detail.els[0]===o?1:0,i=e.detail.intersections[t],r=e.detail.els[t]){if(this.intersectedEl===r)return void(this.intersection=i);this.intersectedEl&&this.clearCurrentIntersection(),this.intersection=i,this.intersectedEl=r,o.addState(s.HOVERING),r.addState(s.HOVERED),n.twoWayEmit(a.MOUSEENTER),0!==u.fuseTimeout&&u.fuse&&(o.addState(s.FUSING),this.twoWayEmit(a.FUSING),this.fuseTimeout=setTimeout(function(){o.removeState(s.FUSING),n.twoWayEmit(a.CLICK)},u.fuseTimeout))}},onIntersectionCleared:function(e){var t=this.el,r=e.detail.el;t!==r&&r===this.intersectedEl&&this.clearCurrentIntersection()},clearCurrentIntersection:function(){var e=this.el;this.intersectedEl.removeState(s.HOVERED),e.removeState(s.HOVERING),e.removeState(s.FUSING),this.twoWayEmit(a.MOUSELEAVE),this.intersection=null,this.intersectedEl=null,clearTimeout(this.fuseTimeout)},twoWayEmit:function(e){var t=this.el,r=this.intersectedEl,i=this.intersection;t.emit(e,{intersectedEl:r,intersection:i}),r&&r.emit(e,{cursorEl:t,intersection:i})}})},{"../core/component":126,"../utils/":197}],81:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../utils/bind"),o=e("../utils/tracked-controls").checkControllerPresentAndSetup,a=e("../utils/tracked-controls").emitIfAxesChanged;t.exports.Component=i("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},rotationOffset:{default:0},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},axisLabels:["x","y","z","w"],bindMethods:function(){this.onModelLoaded=n(this.onModelLoaded,this),this.onControllersUpdate=n(this.onControllersUpdate,this),this.checkIfControllerPresent=n(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=n(this.removeControllersUpdateListener,this),this.onAxisMoved=n(this.onAxisMoved,this),this.onGamepadConnectionEvent=n(this.onGamepadConnectionEvent,this)},init:function(){var e=this;this.animationActive="pointing",this.onButtonChanged=n(this.onButtonChanged,this),this.onButtonDown=function(t){e.onButtonEvent(t.detail.id,"down")},this.onButtonUp=function(t){e.onButtonEvent(t.detail.id,"up")},this.onButtonTouchStart=function(t){e.onButtonEvent(t.detail.id,"touchstart")},this.onButtonTouchEnd=function(t){e.onButtonEvent(t.detail.id,"touchend")},this.onAxisMoved=n(this.onAxisMoved,this),this.controllerPresent=!1,this.everGotGamepadEvent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=o,this.emitIfAxesChanged=a},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Daydream Controller",{hand:this.data.hand})},onGamepadConnectionEvent:function(e){this.everGotGamepadEvent=!0,this.checkIfControllerPresent()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener(),window.addEventListener("gamepadconnected",this.onGamepadConnectionEvent,!1),window.addEventListener("gamepaddisconnected",this.onGamepadConnectionEvent,!1)},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener(),window.removeEventListener("gamepadconnected",this.onGamepadConnectionEvent,!1),window.removeEventListener("gamepaddisconnected",this.onGamepadConnectionEvent,!1)},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:"Daydream Controller",hand:t.hand,rotationOffset:t.rotationOffset,armModel:t.armModel}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.obj",mtl:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.everGotGamepadEvent||this.checkIfControllerPresent()},onModelLoaded:function(e){var t,r=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.menu=r.getObjectByName("AppButton_AppButton_Cylinder.004"),t.system=r.getObjectByName("HomeButton_HomeButton_Cylinder.005"),t.trackpad=r.getObjectByName("TouchPad_TouchPad_Cylinder.003"),r.position.set(0,0,-.04))},onAxisMoved:function(e){this.emitIfAxesChanged(this,this.mapping.axes,e)},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onButtonEvent:function(e,t){var r,i=this.mapping.buttons[e];if(Array.isArray(i))for(r=0;r<i.length;r++)this.el.emit(i[r]+t);else this.el.emit(i+t);this.updateModel(i,t)},updateModel:function(e,t){var r;if(this.data.model)if(Array.isArray(e))for(r=0;r<e.length;r++)this.updateButtonModel(e[r],t);else this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var r=this.buttonMeshes;if(r&&r[e]){var i;switch(t){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}r[e].material.color.set(i)}}})},{"../core/component":126,"../utils/bind":191,"../utils/tracked-controls":201}],82:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../utils/bind"),o=e("../utils/tracked-controls").checkControllerPresentAndSetup,a=e("../utils/tracked-controls").emitIfAxesChanged;t.exports.Component=i("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},rotationOffset:{default:0},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},axisLabels:["x","y","z","w"],bindMethods:function(){this.onModelLoaded=n(this.onModelLoaded,this),this.onControllersUpdate=n(this.onControllersUpdate,this),this.checkIfControllerPresent=n(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=n(this.removeControllersUpdateListener,this),this.onAxisMoved=n(this.onAxisMoved,this),this.onGamepadConnectionEvent=n(this.onGamepadConnectionEvent,this)},init:function(){var e=this;this.animationActive="pointing",this.onButtonChanged=n(this.onButtonChanged,this),this.onButtonDown=function(t){e.onButtonEvent(t.detail.id,"down")},this.onButtonUp=function(t){e.onButtonEvent(t.detail.id,"up")},this.onButtonTouchStart=function(t){e.onButtonEvent(t.detail.id,"touchstart")},this.onButtonTouchEnd=function(t){e.onButtonEvent(t.detail.id,"touchend")},this.onAxisMoved=n(this.onAxisMoved,this),this.controllerPresent=!1,this.everGotGamepadEvent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=o,this.emitIfAxesChanged=a},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Gear VR",this.data.hand?{hand:this.data.hand}:{})},onGamepadConnectionEvent:function(e){this.checkIfControllerPresent()},play:function(){this.checkIfControllerPresent(),window.addEventListener("gamepaddisconnected",this.checkIfControllerPresent,!1),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener(),window.removeEventListener("gamepaddisconnected",this.checkIfControllerPresent,!1)},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:"Gear VR",rotationOffset:t.rotationOffset,armModel:t.armModel}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.obj",mtl:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,r=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.trigger=r.getObjectByName("Trigger"),t.trackpad=r.getObjectByName("Touchpad"))},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onButtonEvent:function(e,t){var r,i=this.mapping.buttons[e];if(Array.isArray(i))for(r=0;r<i.length;r++)this.el.emit(i[r]+t);else this.el.emit(i+t);this.updateModel(i,t)},onAxisMoved:function(e){this.emitIfAxesChanged(this,this.mapping.axes,e)},updateModel:function(e,t){var r;if(this.data.model)if(Array.isArray(e))for(r=0;r<e.length;r++)this.updateButtonModel(e[r],t);else this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var r=this.buttonMeshes;if(r&&r[e]){var i;switch(t){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}r[e].material.color.set(i)}}})},{"../core/component":126,"../utils/bind":191,"../utils/tracked-controls":201}],83:[function(e,t,r){var i=e("../utils/debug"),n=e("../core/geometry").geometries,o=e("../core/geometry").geometryNames,a=e("../core/component").registerComponent,s=e("../lib/three"),u=new s.Geometry,l=i("components:geometry:warn");t.exports.Component=a("geometry",{schema:{buffer:{default:!0},mergeTo:{type:"selector"},primitive:{default:"box",oneOf:o},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(e){var t=this.data,r=this.el.getOrCreateObject3D("mesh",s.Mesh),i=this.system;this.geometry&&(i.unuseGeometry(e),this.geometry=null),this.geometry=r.geometry=i.getOrCreateGeometry(t),t.mergeTo&&this.mergeTo(t.mergeTo)},mergeTo:function(e){var t,r=this.el,i=r.getObject3D("mesh");return e&&e.isEntity?e===r?void l("Source and target geometries cannot be the same for merge"):(t=e.getObject3D("mesh"))?t.geometry instanceof s.Geometry==!1||i.geometry instanceof s.Geometry==!1?void l("Geometry merge is only available for `THREE.Geometry` types. Check that both of the merging geometry and the target geometry have `buffer` set to false"):!1===this.data.skipCache?void l("Cached geometries are not allowed to merge. Set `skipCache` to true"):(i.parent.updateMatrixWorld(),t.geometry.merge(i.geometry,i.matrixWorld),r.emit("geometry-merged",{mergeTarget:e}),void r.parentNode.removeChild(r)):(t=e.getOrCreateObject3D("mesh",s.Mesh),void e.setAttribute("material",r.getAttribute("material"))):void l("There is not a valid entity to merge the geometry to")},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=u,this.geometry=null},updateSchema:function(e){var t=e.primitive,r=this.data&&this.data.primitive,i=n[t]&&n[t].schema;if(!i)throw new Error("Unknown geometry schema `"+t+"`");r&&r===t||this.extendSchema(i)}})},{"../core/component":126,"../core/geometry":127,"../lib/three":174,"../utils/debug":193}],84:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../lib/three");t.exports.Component=i("gltf-model",{schema:{type:"model"},init:function(){this.model=null,this.loader=new n.GLTFLoader},update:function(){var e=this,t=this.el,r=this.data;r&&(this.remove(),this.loader.load(r,function(r){e.model=r.scene||r.scenes[0],e.model.animations=r.animations,e.system.registerModel(e.model),t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"gltf",model:e.model})}))},remove:function(){this.model&&(this.el.removeObject3D("mesh"),this.system.unregisterModel(this.model))}})},{"../core/component":126,"../lib/three":174}],85:[function(e,t,r){function getGestureEventName(e,t){var r;if(e)return r=a[e],"grip"===r?r+(t?"close":"open"):"point"===r||"thumb"===r?r+(t?"up":"down"):"pointing"===r||"pistol"===r?r+(t?"start":"end"):void 0}function isOculusTouchController(e){var t=e&&e.controller&&e.controller.id;return t&&0===t.indexOf("Oculus Touch")}var i=e("../core/component").registerComponent,n={left:"https://cdn.aframe.io/controllers/oculus-hands/v2/leftHand.json",right:"https://cdn.aframe.io/controllers/oculus-hands/v2/rightHand.json"},o={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},a={};a[o.fist]="grip",a[o.thumbUp]="pistol",a[o.point]="pointing",a[o.thumb]="thumb",t.exports.Component=i("hand-controls",{schema:{default:"left"},init:function(){var e=this;this.gesture=o.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.ObjectLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){e.handleButton("grip","down")},this.onGripUp=function(){e.handleButton("grip","up")},this.onTrackpadDown=function(){e.handleButton("trackpad","down")},this.onTrackpadUp=function(){e.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){e.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){e.handleButton("trackpad","touchend")},this.onTriggerDown=function(){e.handleButton("trigger","down")},this.onTriggerUp=function(){e.handleButton("trigger","up")},this.onTriggerTouchStart=function(){e.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){e.handleButton("trigger","touchend")},this.onGripTouchStart=function(){e.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){e.handleButton("grip","touchend")},this.onThumbstickDown=function(){e.handleButton("thumbstick","down")},this.onThumbstickUp=function(){e.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){e.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){e.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){e.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){e.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){e.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){e.handleButton("surface","touchend")}},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(e,t){var r=this.el.getObject3D("mesh");r&&r.mixer.update(t/1e3)},addEventListeners:function(){var e=this.el;e.addEventListener("gripdown",this.onGripDown),e.addEventListener("gripup",this.onGripUp),e.addEventListener("trackpaddown",this.onTrackpadDown),e.addEventListener("trackpadup",this.onTrackpadUp),e.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.addEventListener("triggerdown",this.onTriggerDown),e.addEventListener("triggerup",this.onTriggerUp),e.addEventListener("triggertouchstart",this.onTriggerTouchStart),e.addEventListener("triggertouchend",this.onTriggerTouchEnd),e.addEventListener("griptouchstart",this.onGripTouchStart),e.addEventListener("griptouchend",this.onGripTouchEnd),e.addEventListener("thumbstickdown",this.onThumbstickDown),e.addEventListener("thumbstickup",this.onThumbstickUp),e.addEventListener("abuttontouchstart",this.onAorXTouchStart),e.addEventListener("abuttontouchend",this.onAorXTouchEnd),e.addEventListener("bbuttontouchstart",this.onBorYTouchStart),e.addEventListener("bbuttontouchend",this.onBorYTouchEnd),e.addEventListener("xbuttontouchstart",this.onAorXTouchStart),e.addEventListener("xbuttontouchend",this.onAorXTouchEnd),e.addEventListener("ybuttontouchstart",this.onBorYTouchStart),e.addEventListener("ybuttontouchend",this.onBorYTouchEnd),e.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var e=this.el;e.removeEventListener("gripdown",this.onGripDown),e.removeEventListener("gripup",this.onGripUp),e.removeEventListener("trackpaddown",this.onTrackpadDown),e.removeEventListener("trackpadup",this.onTrackpadUp),e.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.removeEventListener("triggerdown",this.onTriggerDown),e.removeEventListener("triggerup",this.onTriggerUp),e.removeEventListener("triggertouchstart",this.onTriggerTouchStart),e.removeEventListener("triggertouchend",this.onTriggerTouchEnd),e.removeEventListener("griptouchstart",this.onGripTouchStart),e.removeEventListener("griptouchend",this.onGripTouchEnd),e.removeEventListener("thumbstickdown",this.onThumbstickDown),e.removeEventListener("thumbstickup",this.onThumbstickUp),e.removeEventListener("abuttontouchstart",this.onAorXTouchStart),e.removeEventListener("abuttontouchend",this.onAorXTouchEnd),e.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),e.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),e.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),e.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),e.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),e.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),e.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(e){var t,r=this.el,i=this.data;t={hand:i,model:!1,rotationOffset:"left"===i?90:-90},r.setAttribute("vive-controls",t),r.setAttribute("oculus-touch-controls",t),i!==e&&this.loader.load(n[i],function(e){var t=e.getObjectByName("Hand");t.material.skinning=!0,t.mixer=new THREE.AnimationMixer(t),r.setObject3D("mesh",t)})},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(e,t){var r,i="down"===t,n="touchstart"===t;if(0===t.indexOf("touch")){if(n===this.touchedButtons[e])return;this.touchedButtons[e]=n}else{if(i===this.pressedButtons[e])return;this.pressedButtons[e]=i}r=this.gesture,this.gesture=this.determineGesture(),this.gesture!==r&&(this.animateGesture(this.gesture,r),this.emitGestureEvents(this.gesture,r))},determineGesture:function(){var e,t=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,i=this.pressedButtons.trackpad||this.touchedButtons.trackpad,n=this.pressedButtons.trigger||this.touchedButtons.trigger,a=this.touchedButtons.AorX||this.touchedButtons.BorY,s=isOculusTouchController(this.el.components["tracked-controls"]);return t?e=s?r||a||i?n?o.fist:o.point:n?o.thumbUp:o.pointThumb:o.fist:n?e=s?o.hold:o.fist:!s&&i&&(e=o.point),e},animateGesture:function(e,t){if(e)return void this.playAnimation(e||o.open,t,!1);this.playAnimation(t,t,!0)},emitGestureEvents:function(e,t){var r,i=this.el;t!==e&&(r=getGestureEventName(t,!1),r&&i.emit(r),(r=getGestureEventName(e,!0))&&i.emit(r))},playAnimation:function(e,t,r){var i,n,o=this.el.getObject3D("mesh");if(o){if(n=o.mixer.clipAction(e),n.clampWhenFinished=!0,n.loop=THREE.PingPong,n.repetitions=0,n.timeScale=r?-1:1,n.weight=1,!t||e===t)return o.mixer.stopAllAction(),void n.play();i=o.mixer.clipAction(t),o.mixer.stopAllAction(),i.weight=.15,i.play(),n.play(),i.crossFadeTo(n,.15,!0)}}})},{"../core/component":126}],86:[function(e,t,r){e("./camera"),e("./collada-model"),e("./cursor"),e("./daydream-controls"),e("./gearvr-controls"),e("./geometry"),e("./gltf-model"),e("./hand-controls"),e("./laser-controls"),e("./light"),e("./line"),e("./link"),e("./look-controls"),e("./material"),e("./obj-model"),e("./oculus-touch-controls"),e("./position"),e("./raycaster"),e("./rotation"),e("./scale"),e("./shadow"),e("./sound"),e("./text"),e("./tracked-controls"),e("./visible"),e("./vive-controls"),e("./wasd-controls"),e("./scene/canvas"),e("./scene/debug"),e("./scene/embedded"),e("./scene/inspector"),e("./scene/fog"),e("./scene/keyboard-shortcuts"),e("./scene/pool"),e("./scene/screenshot"),e("./scene/stats"),e("./scene/vr-mode-ui")},{"./camera":78,"./collada-model":79,"./cursor":80,"./daydream-controls":81,"./gearvr-controls":82,"./geometry":83,"./gltf-model":84,"./hand-controls":85,"./laser-controls":87,"./light":88,"./line":89,"./link":90,"./look-controls":91,"./material":92,"./obj-model":93,"./oculus-touch-controls":94,"./position":95,"./raycaster":96,"./rotation":97,"./scale":98,"./scene/canvas":99,"./scene/debug":100,"./scene/embedded":101,"./scene/fog":102,"./scene/inspector":103,"./scene/keyboard-shortcuts":104,"./scene/pool":105,"./scene/screenshot":106,"./scene/stats":107,"./scene/vr-mode-ui":108,"./shadow":109,"./sound":110,"./text":111,"./tracked-controls":112,"./visible":113,"./vive-controls":114,"./wasd-controls":115}],87:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../utils/");i("laser-controls",{schema:{hand:{default:"right"}},init:function(){var e=this.config,t=this.data,r=this.el;r.setAttribute("daydream-controls",{hand:t.hand}),r.setAttribute("gearvr-controls",{hand:t.hand}),r.setAttribute("oculus-touch-controls",{hand:t.hand}),r.setAttribute("vive-controls",{hand:t.hand}),r.addEventListener("controllerconnected",function(t){var i=e[t.detail.name];i&&(r.setAttribute("raycaster",n.extend({showLine:!0},i.raycaster||{})),r.setAttribute("cursor",n.extend({fuse:!1},i.cursor)))})},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]}},"gearvr-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:.001,y:0,z:.065},direction:{x:0,y:-.8,z:-1}}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}}}})},{"../core/component":126,"../utils/":197}],88:[function(e,t,r){var i=e("../utils/bind"),n=e("../utils").diff,o=e("../utils/debug"),a=e("../core/component").registerComponent,s=e("../lib/three"),u=s.Math.degToRad,l=o("components:light:warn");t.exports.Component=a("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"]},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}}},init:function(){var e=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(e)},update:function(e){var t=this.data,r=n(t,e),o=this.light,a=this;if(o&&!("type"in r)){var s=!1;return void Object.keys(r).forEach(function(e){var r=t[e];switch(e){case"color":o.color.set(r);break;case"groundColor":o.groundColor.set(r);break;case"angle":o.angle=u(r);break;case"target":null===r?"spot"!==t.type&&"directional"!==t.type||(o.target=a.defaultTarget):r.hasLoaded?a.onSetTarget(r,o):r.addEventListener("loaded",i(a.onSetTarget,a,r,o));break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":s||(a.updateShadow(),s=!0);break;default:o[e]=r}})}this.setLight(this.data),this.updateShadow()},setLight:function(e){var t=this.el,r=this.getLight(e);r&&(this.light&&t.removeObject3D("light"),this.light=r,this.light.el=t,t.setObject3D("light",this.light),"spot"!==e.type&&"directional"!==e.type&&"hemisphere"!==e.type||t.getObject3D("light").translateY(-1),"spot"===e.type&&(t.setObject3D("light-target",this.defaultTarget),t.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var e=this.el,t=this.data,r=this.light;r.castShadow=t.castShadow;var i=e.getObject3D("cameraHelper");if(t.shadowCameraVisible&&!i?e.setObject3D("cameraHelper",new s.CameraHelper(r.shadow.camera)):!t.shadowCameraVisible&&i&&e.removeObject3D("cameraHelper"),!t.castShadow)return r;r.shadow.bias=t.shadowBias,r.shadow.mapSize.height=t.shadowMapHeight,r.shadow.mapSize.width=t.shadowMapWidth,r.shadow.camera.near=t.shadowCameraNear,r.shadow.camera.far=t.shadowCameraFar,r.shadow.camera instanceof s.OrthographicCamera?(r.shadow.camera.top=t.shadowCameraTop,r.shadow.camera.right=t.shadowCameraRight,r.shadow.camera.bottom=t.shadowCameraBottom,r.shadow.camera.left=t.shadowCameraLeft):r.shadow.camera.fov=t.shadowCameraFov,r.shadow.camera.updateProjectionMatrix(),i&&i.update()},getLight:function(e){var t=e.angle,r=new s.Color(e.color).getHex(),n=e.decay,o=e.distance,a=new s.Color(e.groundColor).getHex(),c=e.intensity,h=e.type,d=e.target,f=null;switch(h.toLowerCase()){case"ambient":return new s.AmbientLight(r,c);case"directional":return f=new s.DirectionalLight(r,c),this.defaultTarget=f.target,d&&(d.hasLoaded?this.onSetTarget(d,f):d.addEventListener("loaded",i(this.onSetTarget,this,d,f))),f;case"hemisphere":return new s.HemisphereLight(r,a,c);case"point":return new s.PointLight(r,c,o,n);case"spot":return f=new s.SpotLight(r,c,o,u(t),e.penumbra,n),this.defaultTarget=f.target,d&&(d.hasLoaded?this.onSetTarget(d,f):d.addEventListener("loaded",i(this.onSetTarget,this,d,f))),f;default:l("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",h)}},onSetTarget:function(e,t){t.target=e.object3D},remove:function(){var e=this.el;e.removeObject3D("light"),e.getObject3D("cameraHelper")&&e.removeObject3D("cameraHelper")}})},{"../core/component":126,"../lib/three":174,"../utils":197,"../utils/bind":191,"../utils/debug":193}],89:[function(e,t,r){function isEqualVec3(e,t){return!(!e||!t)&&(e.x!==t.x||e.y!==t.y||e.z!==t.z)}var i=e("../core/component").registerComponent;t.exports.Component=i("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var e,t,r=this.data;t=this.material=new THREE.LineBasicMaterial({color:r.color,opacity:r.opacity,transparent:r.opacity<1,visible:r.visible}),e=this.geometry=new THREE.BufferGeometry,e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(e,t),this.el.setObject3D(this.attrName,this.line)},update:function(e){var t=this.data,r=this.geometry,i=!1,n=this.material,o=r.attributes.position.array;isEqualVec3(t.start,e.start)||(o[0]=t.start.x,o[1]=t.start.y,o[2]=t.start.z,i=!0),isEqualVec3(t.end,e.end)||(o[3]=t.end.x,o[4]=t.end.y,o[5]=t.end.z,i=!0),i&&(r.attributes.position.needsUpdate=!0,r.computeBoundingSphere()),n.color.setStyle(t.color),n.opacity=t.opacity,n.transparent=t.opacity<1,n.visible=t.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":126}],90:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../core/shader").registerShader,o=e("../lib/three");t.exports.Component=i("link",{schema:{color:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},visualAspectEnabled:{default:!0}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.hiddenEls=[],this.initVisualAspect()},update:function(e){var t=this.data,r=this.el,i=t.highlighted?t.highlightedColor:t.color;r.setAttribute("material","strokeColor",i),t.on!==e.on&&this.updateEventListener(),t.peekMode!==e.peekMode&&this.updatePeekMode(),t.image&&e.image!==t.image&&r.setAttribute("material","pano","string"==typeof t.image?t.image:t.image.src)},updatePeekMode:function(){var e=this.el,t=this.sphereEl;this.data.peekMode?(this.hideAll(),e.getObject3D("mesh").visible=!1,t.setAttribute("visible",!0)):(this.showAll(),e.getObject3D("mesh").visible=!0,t.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var e=this.el;e.isPlaying&&(this.removeEventListener(),e.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var e=this.data.on;e&&this.el.removeEventListener(e,this.navigate)},initVisualAspect:function(){var e,t,r,i=this.el;this.data.visualAspectEnabled&&(e=this.textEl=this.textEl||document.createElement("a-entity"),t=this.sphereEl=this.sphereEl||document.createElement("a-entity"),r=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),i.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),i.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),e.setAttribute("text",{color:"white",align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),e.setAttribute("position","0 1.5 0"),i.appendChild(e),r.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),r.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),r.setAttribute("rotation","0 180 0"),r.setAttribute("position","0 0 0"),r.setAttribute("visible",!1),i.appendChild(r),t.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),t.setAttribute("visible",!1),i.appendChild(t))},navigate:function(){window.location=this.data.href},tick:function(){var e=new o.Vector3,t=new o.Vector3,r=new o.Vector3,i=new o.Quaternion;return function(){var n,o,a=this.el,s=a.object3D,u=a.sceneEl.camera,l=this.textEl;if(s.updateMatrixWorld(),u.parent.updateMatrixWorld(),u.updateMatrixWorld(),s.matrix.decompose(e,i,r),e.setFromMatrixPosition(s.matrixWorld),t.setFromMatrixPosition(u.matrixWorld),o=e.distanceTo(t),this.previousQuaternion=this.previousQuaternion||i.clone(),o>20)s.lookAt(t);else{if(n=this.calculateCameraPortalOrientation(),o<.5){if(!0===this.semiSphereEl.getAttribute("visible"))return;l.setAttribute("text","width",1.5),n<=0?(l.setAttribute("position","0 0 0.75"),l.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(l.setAttribute("position","0 0 -0.75"),l.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),a.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=n}else n<=0?l.setAttribute("rotation","0 180 0"):l.setAttribute("rotation","0 0 0"),l.setAttribute("text","width",5),l.setAttribute("position","0 1.5 0"),a.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(s.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var e=this.el,t=this.hiddenEls,r=this;t.length>0||e.sceneEl.object3D.traverse(function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==e.sceneEl.object3D&&i.el!==e&&i.el!==r.sphereEl&&i.el!==e.sceneEl.cameraEl&&!1!==i.el.getAttribute("visible")&&i.el!==r.textEl&&i.el!==r.semiSphereEl&&(i.el.setAttribute("visible",!1),t.push(i.el))})},showAll:function(){this.hiddenEls.forEach(function(e){e.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var e=new o.Matrix4,t=new o.Vector3,r=new o.Vector3(0,0,1),i=new o.Vector3(0,0,0);return function(){var n=this.el,o=n.sceneEl.camera;return t.set(0,0,0),r.set(0,0,1),i.set(0,0,0),n.object3D.matrixWorld.extractRotation(e),r.applyMatrix4(e),n.object3D.updateMatrixWorld(),n.object3D.localToWorld(i),o.parent.parent.updateMatrixWorld(),o.parent.updateMatrixWorld(),o.updateMatrixWorld(),o.localToWorld(t),t.sub(i).normalize(),r.normalize(),Math.sign(r.dot(t))}}(),remove:function(){this.removeEventListener()}}),n("portal",{schema:{pano:{type:"map",is:"uniform"},borderEnabled:{default:1,type:"int",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = saturate(direction.y * 0.5  + 0.5);","sampleUV.x = atan(direction.z, direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(0.93, 0.17, 0.36, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join("\n")})},{"../core/component":126,"../core/shader":135,"../lib/three":174}],91:[function(e,t,r){function isNullVector(e){return 0===e.x&&0===e.y&&0===e.z}var i=e("../core/component").registerComponent,n=e("../lib/three"),o=e("../utils/bind"),a=Math.PI/2,s=n.Math.radToDeg;t.exports.Component=i("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},hmdEnabled:{default:!0},reverseMouseDrag:{default:!1},standing:{default:!0}},init:function(){var e=this.el.sceneEl;this.previousHMDPosition=new n.Vector3,this.hmdQuaternion=new n.Quaternion,this.hmdEuler=new n.Euler,this.setupMouseControls(),this.setupHMDControls(),this.bindMethods(),e.addEventListener("exit-vr",this.onExitVR)},update:function(e){var t=this.data;t.enabled!==e.enabled&&this.updateGrabCursor(t.enabled),!e||t.hmdEnabled||e.hmdEnabled||(this.pitchObject.rotation.set(0,0,0),this.yawObject.rotation.set(0,0,0))},tick:function(e){var t=this.data;t.enabled&&(this.controls.standing=t.standing,this.controls.update(),this.updateOrientation(),this.updatePosition())},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onMouseDown=o(this.onMouseDown,this),this.onMouseMove=o(this.onMouseMove,this),this.onMouseUp=o(this.onMouseUp,this),this.onTouchStart=o(this.onTouchStart,this),this.onTouchMove=o(this.onTouchMove,this),this.onTouchEnd=o(this.onTouchEnd,this),this.onExitVR=o(this.onExitVR,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new n.Object3D,this.yawObject=new n.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},setupHMDControls:function(){this.dolly=new n.Object3D,this.euler=new n.Euler,this.controls=new n.VRControls(this.dolly),this.controls.userHeight=0},addEventListeners:function(){var e=this.el.sceneEl,t=e.canvas;if(!t)return void e.addEventListener("render-target-loaded",o(this.addEventListeners,this));t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd)},removeEventListeners:function(){var e=this.el.sceneEl,t=e&&e.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseout",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd))},updateOrientation:function(){var e,t,r,i=this.hmdEuler,n=this.hmdQuaternion,o=this.pitchObject,a=this.yawObject,u=this.el.sceneEl;n=n.copy(this.dolly.quaternion),i.setFromQuaternion(n,"YXZ"),u.isMobile?r={x:s(i.x)+s(o.rotation.x),y:s(i.y)+s(a.rotation.y),z:s(i.z)}:u.is("vr-mode")&&!isNullVector(i)&&this.data.hmdEnabled?r={x:s(i.x),y:s(i.y),z:s(i.z)}:(e=this.el.getAttribute("rotation"),t=this.calculateDeltaRotation(),r=this.data.reverseMouseDrag?{x:e.x-t.x,y:e.y-t.y,z:e.z}:{x:e.x+t.x,y:e.y+t.y,z:e.z}),this.el.setAttribute("rotation",r)},calculateDeltaRotation:function(){var e,t=s(this.pitchObject.rotation.x),r=s(this.yawObject.rotation.y);return e={x:t-(this.previousRotationX||0),y:r-(this.previousRotationY||0)},this.previousRotationX=t,this.previousRotationY=r,e},updatePosition:function(){var e=new n.Vector3;return function(){var t,r=this.el,i=r.getAttribute("position"),n=this.previousHMDPosition;this.el.sceneEl.is("vr-mode")&&(t=this.calculateHMDPosition(),e.copy(t).sub(n),isNullVector(e)||(n.copy(t),r.setAttribute("position",{x:i.x+e.x,y:i.y+e.y,z:i.z+e.z})))}}(),calculateHMDPosition:function(){var e=new n.Vector3;return function(){return this.dolly.updateMatrix(),e.setFromMatrixPosition(this.dolly.matrix),e}}(),onMouseMove:function(e){var t,r,i=this.pitchObject,n=this.yawObject,o=this.previousMouseEvent;this.mouseDown&&this.data.enabled&&(t=e.movementX||e.mozMovementX,r=e.movementY||e.mozMovementY,void 0!==t&&void 0!==r||(t=e.screenX-o.screenX,r=e.screenY-o.screenY),this.previousMouseEvent=e,n.rotation.y-=.002*t,i.rotation.x-=.002*r,i.rotation.x=Math.max(-a,Math.min(a,i.rotation.x)))},onMouseDown:function(e){this.data.enabled&&0===e.button&&(this.mouseDown=!0,this.previousMouseEvent=e,document.body.classList.add("a-grabbing"))},onMouseUp:function(){this.mouseDown=!1,document.body.classList.remove("a-grabbing")},onTouchStart:function(e){1===e.touches.length&&(this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(e){var t,r=this.el.sceneEl.canvas,i=this.yawObject;this.touchStarted&&(t=2*Math.PI*(e.touches[0].pageX-this.touchStart.x)/r.clientWidth,i.rotation.y-=.5*t,this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onExitVR:function(){this.previousHMDPosition.set(0,0,0)},updateGrabCursor:function(e){function enableGrabCursor(){t.canvas.classList.add("a-grab-cursor")}function disableGrabCursor(){t.canvas.classList.remove("a-grab-cursor")}var t=this.el.sceneEl;return t.canvas?e?void enableGrabCursor():void disableGrabCursor():void(e?t.addEventListener("render-target-loaded",enableGrabCursor):t.addEventListener("render-target-loaded",disableGrabCursor))}})},{"../core/component":126,"../lib/three":174,"../utils/bind":191}],92:[function(e,t,r){function parseSide(e){switch(e){case"back":return o.BackSide;case"double":return o.DoubleSide;default:return o.FrontSide}}function disposeMaterial(e,t){e.dispose(),t.unregisterMaterial(e)}var i=e("../utils/"),n=e("../core/component"),o=e("../lib/three"),a=e("../core/shader"),s=i.debug("components:material:error"),u=n.registerComponent,l=a.shaders,c=a.shaderNames;t.exports.Component=u("material",{schema:{depthTest:{default:!0},depthWrite:{default:!0},alphaTest:{default:0,min:0,max:1},flatShading:{default:!1},opacity:{default:1,min:0,max:1},shader:{default:"standard",oneOf:c},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},visible:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},npot:{default:!1}},init:function(){this.material=null},update:function(e){var t=this.data;this.shader&&t.shader===e.shader||this.updateShader(t.shader),this.shader.update(this.data),this.updateMaterial()},updateSchema:function(e){var t=e.shader,r=this.data&&this.data.shader,i=t||r,n=l[i]&&l[i].schema;n||s("Unknown shader schema "+i),r&&t===r||(this.extendSchema(n),this.updateBehavior())},updateBehavior:function(){var e=this.schema,t=this,r=this.el.sceneEl,i={},n=function(e,r){Object.keys(i).forEach(function(t){i[t]=e}),t.shader.update(i)};this.tick=void 0,Object.keys(e).forEach(function(r){"time"===e[r].type&&(t.tick=n,i[r]=!0)}),r&&(this.tick?r.addBehavior(this):r.removeBehavior(this))},updateShader:function(e){var t,r=this.data,i=l[e]&&l[e].Shader;if(!i)throw new Error("Unknown shader "+e);t=this.shader=new i,t.el=this.el,t.init(r),this.setMaterial(t.material),this.updateSchema(r)},updateMaterial:function(){var e=this.data,t=this.material,r=!1,i=parseSide(e.side);(t.side===o.DoubleSide&&i!==o.DoubleSide||t.side!==o.DoubleSide&&i===o.DoubleSide)&&(r=!0),t.side=i,t.opacity=e.opacity,t.transparent=!1!==e.transparent||e.opacity<1,t.depthTest=!1!==e.depthTest,t.depthWrite=!1!==e.depthWrite,t.shading=e.flatShading?o.FlatShading:o.SmoothShading,t.visible=e.visible,e.alphaTest!==t.alphaTest&&(r=!0),t.alphaTest=e.alphaTest,r&&(t.needsUpdate=!0)},remove:function(){var e=new o.MeshBasicMaterial,t=this.material,r=this.el.getObject3D("mesh");r&&(r.material=e),disposeMaterial(t,this.system)},setMaterial:function(e){var t=this.el.getOrCreateObject3D("mesh",o.Mesh),r=this.system;this.material&&disposeMaterial(this.material,r),this.material=t.material=e,r.registerMaterial(e)}})},{"../core/component":126,"../core/shader":135,"../lib/three":174,"../utils/":197}],93:[function(e,t,r){var i=e("../utils/debug"),n=e("../core/component").registerComponent,o=e("../lib/three"),a=i("components:obj-model:warn");t.exports.Component=n("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){this.model=null,this.objLoader=new o.OBJLoader,this.mtlLoader=new o.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin=""},update:function(){var e=this.data;e.obj&&(this.remove(),this.loadObj(e.obj,e.mtl))},remove:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(e,t){var r=this,i=this.el,n=this.mtlLoader,s=this.objLoader;if(t)return i.hasAttribute("material")&&a("Material component properties are ignored when a .MTL is provided"),n.setTexturePath(t.substr(0,t.lastIndexOf("/")+1)),void n.load(t,function(t){t.preload(),s.setMaterials(t),s.load(e,function(e){r.model=e,i.setObject3D("mesh",e),i.emit("model-loaded",{format:"obj",model:e})})});s.load(e,function(e){var t=i.components.material;t&&e.traverse(function(e){e instanceof o.Mesh&&(e.material=t.material)}),r.model=e,i.setObject3D("mesh",e),i.emit("model-loaded",{format:"obj",model:e})})}})},{"../core/component":126,"../lib/three":174,"../utils/debug":193}],94:[function(e,t,r){var i=e("../utils/bind"),n=e("../core/component").registerComponent,o=e("../utils/tracked-controls"),a={x:0,y:-.015,z:.04};t.exports.Component=n("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},rotationOffset:{default:0}},mapping:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},axisLabels:["x","y","z","w"],bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var e=this;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){e.onButtonEvent(t.detail.id,"down")},this.onButtonUp=function(t){e.onButtonEvent(t.detail.id,"up")},this.onButtonTouchStart=function(t){e.onButtonEvent(t.detail.id,"touchstart")},this.onButtonTouchEnd=function(t){e.onButtonEvent(t.detail.id,"touchend")},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.emitIfAxesChanged=o.emitIfAxesChanged,this.checkControllerPresentAndSetup=o.checkControllerPresentAndSetup},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Oculus Touch",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener(),window.addEventListener("gamepaddisconnected",this.checkIfControllerPresent,!1)},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener(),window.removeEventListener("gamepaddisconnected",this.checkIfControllerPresent,!1)},updateControllerModel:function(){var e,t;this.data.model&&("right"===this.data.hand?(e="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-right.obj)",t="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-right.mtl)"):(e="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-left.obj)",t="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-left.mtl)"),this.el.setAttribute("obj-model",{obj:e,mtl:t}))},injectTrackedControls:function(){var e=this.data,t="right"===e.hand?-90:90;this.el.setAttribute("tracked-controls",{id:"right"===e.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",controller:0,rotationOffset:-999!==e.rotationOffset?e.rotationOffset:t}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,r=this.mapping[this.data.hand].buttons[e.detail.id],i=this.buttonMeshes;r&&("trigger"!==r&&"grip"!==r||(t=e.detail.state.value),i&&("trigger"===r&&i.trigger&&(i.trigger.rotation.x=-t*(Math.PI/24)),"grip"===r&&i.grip&&(i.grip.rotation.y=("left"===this.data.hand?-1:1)*t*(Math.PI/60))),this.el.emit(r+"changed",e.detail.state))},onModelLoaded:function(e){var t,r=e.detail.model;if(this.data.model){var i="left"===this.data.hand;t=this.buttonMeshes={},t.grip=r.getObjectByName(i?"buttonHand_oculus-touch-controller-left.004":"buttonHand_oculus-touch-controller-right.005"),t.thumbstick=r.getObjectByName(i?"stick_oculus-touch-controller-left.007":"stick_oculus-touch-controller-right.004"),t.trigger=r.getObjectByName(i?"buttonTrigger_oculus-touch-controller-left.005":"buttonTrigger_oculus-touch-controller-right.006"),t.xbutton=r.getObjectByName("buttonX_oculus-touch-controller-left.002"),t.abutton=r.getObjectByName("buttonA_oculus-touch-controller-right.002"),t.ybutton=r.getObjectByName("buttonY_oculus-touch-controller-left.001"),t.bbutton=r.getObjectByName("buttonB_oculus-touch-controller-right.003"),r.position=a}},onButtonEvent:function(e,t){var r,i=this.mapping[this.data.hand].buttons[e];if(Array.isArray(i))for(r=0;r<i.length;r++)this.el.emit(i[r]+t);else this.el.emit(i+t);this.updateModel(i,t)},onAxisMoved:function(e){this.emitIfAxesChanged(this,this.mapping[this.data.hand].axes,e)},updateModel:function(e,t){var r;if(Array.isArray(e))for(r=0;r<e.length;r++)this.updateButtonModel(e[r],t);else this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var r="up"===t||"touchend"===t?this.data.buttonColor:"touchstart"===t?this.data.buttonTouchColor:this.data.buttonHighlightColor,i=this.buttonMeshes;this.data.model&&i&&i[e]&&i[e].material.color.set(r)}})},{"../core/component":126,"../utils/bind":191,"../utils/tracked-controls":201}],95:[function(e,t,r){var i=e("../core/component").registerComponent;t.exports.Component=i("position",{schema:{type:"vec3"},update:function(){var e=this.el.object3D,t=this.data;e.position.set(t.x,t.y,t.z)}})},{"../core/component":126}],96:[function(e,t,r){function copyArray(e,t){var r;for(e.length=t.length,r=0;r<t.length;r++)e[r]=t[r]}var i=e("../core/component").registerComponent,n=e("../lib/three"),o=e("../utils/"),a=o.bind,s=new n.Vector3;t.exports.Component=i("raycaster",{schema:{direction:{type:"vec3",default:{x:0,y:0,z:-1}},far:{default:1e3},interval:{default:100},near:{default:0},objects:{default:""},origin:{type:"vec3"},recursive:{default:!0},showLine:{default:!1},useWorldCoordinates:{default:!1}},init:function(){this.lineData={},this.lineEndVec3=new n.Vector3,this.unitLineEndVec3=new n.Vector3,this.intersectedEls=[],this.objects=null,this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.raycaster=new n.Raycaster,this.updateOriginDirection(),this.refreshObjects=a(this.refreshObjects,this),this.refreshOnceChildLoaded=a(this.refreshOnceChildLoaded,this)},update:function(e){var t=this.data,r=this.el,i=this.raycaster;i.far=t.far,i.near=t.near,!t.showLine||t.far===e.far&&t.origin===e.origin&&t.direction===e.direction||(this.unitLineEndVec3.copy(t.origin).add(t.direction).normalize(),this.drawLine()),!t.showLine&&e.showLine&&r.removeAttribute("line"),this.refreshObjects()},play:function(){this.el.sceneEl.addEventListener("loaded",this.refreshObjects),this.el.sceneEl.addEventListener("child-attached",this.refreshOnceChildLoaded),this.el.sceneEl.addEventListener("child-detached",this.refreshObjects)},pause:function(){this.el.sceneEl.removeEventListener("loaded",this.refreshObjects),this.el.sceneEl.removeEventListener("child-attached",this.refreshOnceChildLoaded),this.el.sceneEl.removeEventListener("child-detached",this.refreshObjects)},remove:function(){this.data.showLine&&this.el.removeAttribute("line")},refreshOnceChildLoaded:function(e){var t=this,r=e.detail.el;r&&(r.hasLoaded?this.refreshObjects():r.addEventListener("loaded",function nowRefresh(e){r.removeEventListener("loaded",nowRefresh),t.refreshObjects()}))},refreshObjects:function(){var e,t,r,i=this.data,n=i.objects?this.el.sceneEl.querySelectorAll(i.objects):null;if(n)for(r=[],t=0;t<n.length;t++)r.push(n[t].object3D);else r=this.el.sceneEl.object3D.children;for(this.objects=[],t=0;t<r.length;t++)(e=r[t].children)&&this.objects.push.apply(this.objects,e)},tick:function(e){var t,r,i,n=this.el,o=this.data,a=this.intersectedEls,s=this.prevCheckTime,u=this.prevIntersectedEls;if(!(s&&e-s<o.interval)){for(this.prevCheckTime=e,copyArray(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),r=this.raycaster.intersectObjects(this.objects,o.recursive),r=r.filter(function(e){return(!o.showLine||e.object!==n.getObject3D("line"))&&!!e.object.el}),a.length=r.length,t=0;t<r.length;t++)a[t]=r[t].object.el;r.forEach(function(e){e.object.el.emit("raycaster-intersected",{el:n,intersection:e})}),r.length&&n.emit("raycaster-intersection",{els:a,intersections:r}),u.forEach(function(e){-1===a.indexOf(e)&&(n.emit("raycaster-intersection-cleared",{el:e}),e.emit("raycaster-intersected-cleared",{el:n}))}),o.showLine&&(r.length&&(i=r[0].object.el===n&&r[1]?r[1].distance:r[0].distance),this.drawLine(i))}},updateOriginDirection:function(){var e=new n.Vector3,t=new n.Quaternion,r=new n.Vector3;return function(){var i=this.el,n=this.data;if(n.useWorldCoordinates)return void this.raycaster.set(n.origin,n.direction);i.object3D.updateMatrixWorld(),i.object3D.matrixWorld.decompose(r,t,s),0===n.origin.x&&0===n.origin.y&&0===n.origin.z||(r=i.object3D.localToWorld(r.copy(n.origin))),e.copy(n.direction).add(n.origin).applyQuaternion(t).normalize(),this.raycaster.set(r,e)}}(),drawLine:function(e){var t=new n.Vector3,r={};return function(e){var i=this.data,n=this.el;void 0===e&&(e=i.far===1/0?1e3:i.far),r.start=i.origin,r.end=t.copy(this.unitLineEndVec3).multiplyScalar(e),n.setAttribute("line",r)}}()})},{"../core/component":126,"../lib/three":174,"../utils/":197}],97:[function(e,t,r){var i=e("../lib/three").Math.degToRad,n=e("../core/component").registerComponent;t.exports.Component=n("rotation",{schema:{type:"vec3"},update:function(){var e=this.data,t=this.el.object3D;t.rotation.set(i(e.x),i(e.y),i(e.z)),t.rotation.order="YXZ"}})},{"../core/component":126,"../lib/three":174}],98:[function(e,t,r){var i=e("../core/component").registerComponent;t.exports.Component=i("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var e=this.data,t=this.el.object3D,r=0===e.x?1e-5:e.x,i=0===e.y?1e-5:e.y,n=0===e.z?1e-5:e.z;t.scale.set(r,i,n)}})},{"../core/component":126}],99:[function(e,t,r){var i=e("../../utils/bind"),n=e("../../core/component").registerComponent;t.exports.Component=n("canvas",{init:function(){function onFullScreenChange(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||t.exitVR(),document.activeElement.blur(),document.body.focus()}var e,t=this.el;e=document.createElement("canvas"),e.classList.add("a-canvas"),e.dataset.aframeCanvas=!0,t.appendChild(e),document.addEventListener("fullscreenchange",onFullScreenChange),document.addEventListener("mozfullscreenchange",onFullScreenChange),document.addEventListener("webkitfullscreenchange",onFullScreenChange),e.addEventListener("touchmove",function(e){e.preventDefault()}),t.canvas=e,t.emit("render-target-loaded",{target:e}),setTimeout(i(t.resize,t),0)}})},{"../../core/component":126,"../../utils/bind":191}],100:[function(e,t,r){var i=e("../../core/component").registerComponent;t.exports.Component=i("debug",{schema:{default:!0}})},{"../../core/component":126}],101:[function(e,t,r){var i=e("../../core/component").registerComponent;t.exports.Component=i("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var e=this.el,t=e.querySelector(".a-enter-vr");!0===this.data?(t&&t.classList.add("embedded"),e.removeFullScreenStyles()):(t&&t.classList.remove("embedded"),e.addFullScreenStyles())}})},{"../../core/component":126}],102:[function(e,t,r){function getFog(e){var t;return t="exponential"===e.type?new n.FogExp2(e.color,e.density):new n.Fog(e.color,e.near,e.far),t.name=e.type,t}var i=e("../../core/component").registerComponent,n=e("../../lib/three"),o=e("../../utils/debug"),a=o("components:fog:warn");t.exports.Component=i("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var e=this.data,t=this.el,r=this.el.object3D.fog;return t.isScene?r&&e.type===r.name?void Object.keys(this.schema).forEach(function(t){var i=e[t];"color"===t&&(i=new n.Color(i)),r[t]=i}):(t.object3D.fog=getFog(e),void t.systems.material.updateMaterials()):void a("Fog component can only be applied to <a-scene>")},remove:function(){var e=this.el.object3D.fog;e&&(e.far=0,e.near=.1)}})},{"../../core/component":126,"../../lib/three":174,"../../utils/debug":193}],103:[function(e,t,r){(function(r){var i=e("../../constants").AFRAME_INJECTED,n=e("../../utils/bind"),o=e("../../../package"),a=e("../../core/component").registerComponent,s="https://unpkg.com/aframe-inspector@"+function(e){var t=e.split(".");return t[2]="x",t.join(".")}(o.version)+"/dist/aframe-inspector.min.js",u="dev"===r.env.INSPECTOR_VERSION?"https://aframe.io/aframe-inspector/dist/aframe-inspector.js":s;t.exports.Component=a("inspector",{schema:{url:{default:u}},init:function(){this.onKeydown=n(this.onKeydown,this),this.onMessage=n(this.onMessage,this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(e){var t=73===e.keyCode&&e.ctrlKey&&e.altKey;this.data&&t&&this.injectInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(e){"INJECT_AFRAME_INSPECTOR"===e.data&&this.injectInspector()},injectInspector:function(){var e,t=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected||(this.showLoader(),e=document.createElement("script"),e.src=this.data.url,e.setAttribute("data-name","aframe-inspector"),e.setAttribute(i,""),e.onload=function(){AFRAME.INSPECTOR.open(),t.hideLoader(),t.removeEventListeners()},e.onerror=function(){t.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(e),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,e("_process"))},{"../../../package":77,"../../constants":117,"../../core/component":126,"../../utils/bind":191,_process:34}],104:[function(e,t,r){var i=e("../../core/component").registerComponent,n=e("../../utils/").shouldCaptureKeyEvent;t.exports.Component=i("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){var e=this,t=this.el;this.listener=window.addEventListener("keyup",function(r){n(r)&&(e.enterVREnabled&&70===r.keyCode&&t.enterVR(),e.enterVREnabled&&27===r.keyCode&&t.exitVR())},!1)},update:function(e){var t=this.data;this.enterVREnabled=t.enterVR},remove:function(){window.removeEventListener("keyup",this.listener)}})},{"../../core/component":126,"../../utils/":197}],105:[function(e,t,r){var i=e("../../utils/debug"),n=e("../../core/component").registerComponent,o=i("components:pool:warn");t.exports.Component=n("pool",{schema:{mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var e;if(this.data.mixin)for(this.availableEls=[],this.usedEls=[],e=0;e<this.data.size;++e)this.createEntity()},update:function(e){var t=this.data;e.mixin===t.mixin&&e.size===t.size||this.initPool()},createEntity:function(){var e=document.createElement("a-entity");e.play=this.wrapPlay(e.play),e.setAttribute("mixin",this.data.mixin),e.setAttribute("visible",!1),this.el.appendChild(e),this.availableEls.push(e)},wrapPlay:function(e){var t=this.usedEls;return function(){-1!==t.indexOf(this)&&e.call(this)}},requestEntity:function(){var e;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void o("Requested entity from empty pool "+this.name);o("Requested entity from empty pool. This pool is dynamicand will resize automatically. You might want to increase its initial size"+this.name),this.createEntity()}return e=this.availableEls.shift(),this.usedEls.push(e),e.setAttribute("visible",!0),e},returnEntity:function(e){var t=this.usedEls.indexOf(e);if(-1===t)return void o("The returned entity was not previously pooled from "+this.name);this.usedEls.splice(t,1),this.availableEls.push(e),e.setAttribute("visible",!1),e.pause()}})},{"../../core/component":126,"../../utils/debug":193}],106:[function(e,t,r){var i=e("../../core/component").registerComponent,n=e("../../lib/three"),o=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),a=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join("\n");t.exports.Component=i("screenshot",{schema:{width:{default:4096},height:{default:2048}},init:function(){function setup(){var r=e.renderer.getContext();t.cubeMapSize=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),t.material=new n.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:o,fragmentShader:a,side:n.DoubleSide}),t.quad=new n.Mesh(new n.PlaneBufferGeometry(1,1),t.material),t.quad.visible=!1,t.camera=new n.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),t.canvas=document.createElement("canvas"),t.ctx=t.canvas.getContext("2d"),e.camera&&e.camera.add(t.quad),t.onKeyDown=t.onKeyDown.bind(t),t.onCameraActive=t.onCameraActive.bind(t),e.addEventListener("camera-set-active",t.onCameraActive)}var e=this.el,t=this;e.renderer?setup():e.addEventListener("render-target-loaded",setup)},getRenderTarget:function(e,t){return new n.WebGLRenderTarget(e,t,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,wrapS:n.ClampToEdgeWrapping,wrapT:n.ClampToEdgeWrapping,format:n.RGBAFormat,type:n.UnsignedByteType})},resize:function(e,t){this.quad.scale.set(e,t,1),this.camera.left=-1*e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-1*t/2,this.camera.updateProjectionMatrix(),this.canvas.width=e,this.canvas.height=t},play:function(){window.addEventListener("keydown",this.onKeyDown)},onCameraActive:function(e){var t=this.quad.parent;t&&t.remove(this.quad),e.detail.cameraEl.getObject3D("camera").add(this.quad)},onKeyDown:function(e){var t=83===e.keyCode&&e.ctrlKey&&e.altKey;if(this.data&&t){var r=e.shiftKey?"equirectangular":"perspective";this.capture(r)}},setCapture:function(e){var t,r,i,o=this.el;return"perspective"===e?(this.quad.visible=!1,r=o.camera,t={width:this.data.width,height:this.data.height}):(r=this.camera,r.position.copy(o.camera.getWorldPosition()),r.rotation.copy(o.camera.getWorldRotation()),i=new n.CubeCamera(o.camera.near,o.camera.far,Math.min(this.cubeMapSize,2048)),i.position.copy(o.camera.getWorldPosition()),i.rotation.copy(o.camera.getWorldRotation()),i.updateCubeMap(o.renderer,o.object3D),this.quad.material.uniforms.map.value=i.renderTarget.texture,t={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:r,size:t,projection:e}},capture:function(e){var t=this.setCapture(e);this.renderCapture(t.camera,t.size,t.projection),this.saveCapture()},getCanvas:function(e){var t=this.setCapture(e);return this.renderCapture(t.camera,t.size,t.projection),this.canvas},renderCapture:function(e,t,r){var i,n,o,a=this.el.renderer.autoClear,s=this.el,u=this.el.renderer;n=this.getRenderTarget(t.width,t.height),o=new Uint8Array(4*t.width*t.height),this.resize(t.width,t.height),u.autoClear=!0,u.render(s.object3D,e,n,!0),u.autoClear=a,u.readRenderTargetPixels(n,0,0,t.width,t.height,o),"perspective"===r&&(o=this.flipPixelsVertically(o,t.width,t.height)),i=new ImageData(new Uint8ClampedArray(o),t.width,t.height),this.quad.visible=!1,this.ctx.putImageData(i,0,0)},flipPixelsVertically:function(e,t,r){for(var i=e.slice(0),n=0;n<t;++n)for(var o=0;o<r;++o)i[4*n+o*t*4]=e[4*n+(r-o)*t*4],i[4*n+1+o*t*4]=e[4*n+1+(r-o)*t*4],i[4*n+2+o*t*4]=e[4*n+2+(r-o)*t*4],i[4*n+3+o*t*4]=e[4*n+3+(r-o)*t*4];return i},saveCapture:function(){this.canvas.toBlob(function(e){var t="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",r=document.createElement("a"),i=URL.createObjectURL(e);r.href=i,r.setAttribute("download",t),r.innerHTML="downloading...",r.style.display="none",document.body.appendChild(r),setTimeout(function(){r.click(),document.body.removeChild(r)},1)},"image/png")}})},{"../../core/component":126,"../../lib/three":174}],107:[function(e,t,r){function createStats(e){var t=new u(e.renderer),r=new a(e),i=e.isMobile?[]:[t,r];return new n({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:i})}var i=e("../../core/component").registerComponent,n=e("../../../vendor/rStats"),o=e("../../utils");e("../../../vendor/rStats.extras"),e("../../lib/rStatsAframe");var a=window.aframeStats,s=o.bind,u=window.threeStats;t.exports.Component=i("stats",{schema:{default:!0},init:function(){var e=this.el;"false"!==o.getUrlParameter("stats")&&(this.stats=createStats(e),this.statsEl=document.querySelector(".rs-base"),this.hideBound=s(this.hide,this),this.showBound=s(this.show,this),e.addEventListener("enter-vr",this.hideBound),e.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var e=this.stats;e&&(e("rAF").tick(),e("FPS").frame(),e().update())},hide:function(){this.statsEl.classList.add("a-hidden")},show:function(){this.statsEl.classList.remove("a-hidden")}})},{"../../../vendor/rStats":205,"../../../vendor/rStats.extras":204,"../../core/component":126,"../../lib/rStatsAframe":173,"../../utils":197}],108:[function(e,t,r){function createEnterVRButton(e){var t,r;return r=document.createElement("div"),r.classList.add(s),r.setAttribute(n.AFRAME_INJECTED,""),t=document.createElement("button"),t.className=u,t.setAttribute(n.AFRAME_INJECTED,""),r.appendChild(t),t.addEventListener("click",function(t){e()}),r}function createOrientationModal(e){var t=document.createElement("div");t.className=c,t.classList.add(l),t.setAttribute(n.AFRAME_INJECTED,"");var r=document.createElement("button");return r.setAttribute(n.AFRAME_INJECTED,""),r.innerHTML="Exit VR",r.addEventListener("click",e),t.appendChild(r),t}var i=e("../../core/component").registerComponent,n=e("../../constants/"),o=e("../../utils/"),a=o.bind,s="a-enter-vr",u="a-enter-vr-button",l="a-hidden",c="a-orientation-modal";t.exports.Component=i("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0}},init:function(){var e=this,t=this.el;"false"!==o.getUrlParameter("ui")&&(this.enterVR=a(t.enterVR,t),this.exitVR=a(t.exitVR,t),this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,t.addEventListener("enter-vr",a(this.updateEnterVRInterface,this)),t.addEventListener("exit-vr",a(this.updateEnterVRInterface,this)),window.addEventListener("message",function(t){"loaderReady"===t.data.type&&(e.insideLoader=!0,e.remove())}),window.addEventListener("orientationchange",a(this.toggleOrientationModalIfNeeded,this)))},update:function(){var e=this.el;if(!this.data.enabled||this.insideLoader||"false"===o.getUrlParameter("ui"))return this.remove();this.enterVREl||this.orientationModalEl||(this.enterVREl=createEnterVRButton(this.enterVR),e.appendChild(this.enterVREl),this.orientationModalEl=createOrientationModal(this.exitVR),e.appendChild(this.orientationModalEl),this.updateEnterVRInterface())},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(e){e&&e.parentNode.removeChild(e)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var e=this.el;this.enterVREl&&(e.is("vr-mode")?this.enterVREl.classList.add(l):this.enterVREl.classList.remove(l))},toggleOrientationModalIfNeeded:function(){var e=this.el,t=this.orientationModalEl;t&&e.isMobile&&(!o.device.isLandscape()&&e.is("vr-mode")?t.classList.remove(l):t.classList.add(l))}})},{"../../constants/":117,"../../core/component":126,"../../utils/":197}],109:[function(e,t,r){var i=e("../core/component"),n=e("../lib/three"),o=e("../utils/bind"),a=i.registerComponent;t.exports.Component=a("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=o(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var e=this.data;this.updateDescendants(e.cast,e.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(e,t){var r=this.el.sceneEl;this.el.object3D.traverse(function(i){if(i instanceof n.Mesh&&(i.castShadow=e,i.receiveShadow=t,r.hasLoaded&&i.material))for(var o=i.material.materials||[i.material],a=0;a<o.length;a++)o[a].needsUpdate=!0})}})},{"../core/component":126,"../lib/three":174,"../utils/bind":191}],110:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../utils/debug"),o=e("../utils/bind"),a=e("../lib/three"),s=n("components:sound:warn");t.exports.Component=i("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){this.listener=null,this.audioLoader=new a.AudioLoader,this.pool=new a.Group,this.loaded=!1,this.mustPlay=!1,this.playSound=o(this.playSound,this)},update:function(e){var t=this.data,r=t.src!==e.src;if(r){if(!t.src)return void s("Audio source was not specified with `src`");this.setupSound()}if(this.pool.children.forEach(function(e){t.positional&&(e.setDistanceModel(t.distanceModel),e.setMaxDistance(t.maxDistance),e.setRefDistance(t.refDistance),e.setRolloffFactor(t.rolloffFactor)),e.setLoop(t.loop),e.setVolume(t.volume),e.isPaused=!1}),t.on!==e.on&&this.updateEventListener(e.on),r){var i=this;this.loaded=!1,this.audioLoader.load(t.src,function(e){i.pool.children.forEach(function(t){t.setBuffer(e)}),i.loaded=!0,a.Cache.remove(t.src),(i.data.autoplay||i.mustPlay)&&i.playSound(),i.el.emit("sound-loaded")})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){this.removeEventListener(),this.el.removeObject3D(this.attrName);try{this.pool.children.forEach(function(e){e.disconnect()})}catch(e){s("Audio source not properly disconnected")}},updateEventListener:function(e){var t=this.el;e&&t.removeEventListener(e,this.playSound),t.addEventListener(this.data.on,this.playSound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSound)},setupSound:function(){var e=this.el,t=e.sceneEl;this.pool.children.length>0&&(this.stopSound(),e.removeObject3D("sound"));var r=this.listener=t.audioListener||new a.AudioListener;t.audioListener=r,t.camera&&t.camera.add(r),t.addEventListener("camera-set-active",function(e){e.detail.cameraEl.getObject3D("camera").add(r)}),this.pool=new a.Group;for(var i=0;i<this.data.poolSize;i++){var n=this.data.positional?new a.PositionalAudio(r):new a.Audio(r);this.pool.add(n)}e.setObject3D(this.attrName,this.pool),this.pool.children.forEach(function(t){t.onEnded=function(){t.isPlaying=!1,e.emit("sound-ended",{index:i})}})},pauseSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(e){e.source&&e.source.buffer&&e.isPlaying&&!e.isPaused&&(e.isPaused=!0,e.pause())})},playSound:function(){if(!this.loaded)return s("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);var e=!1;if(this.isPlaying=!0,this.pool.children.forEach(function(t){if(!t.isPlaying&&t.buffer&&!e)return t.play(),t.isPaused=!1,void(e=!0)}),!e)return void s("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);this.mustPlay=!1},stopSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(e){e.source&&e.source.buffer&&e.stop()})}})},{"../core/component":126,"../lib/three":174,"../utils/bind":191,"../utils/debug":193}],111:[function(e,t,r){function parseSide(e){switch(e){case"back":return u.BackSide;case"double":return u.DoubleSide;default:return u.FrontSide}}function coerceData(e){return e=l.clone(e),void 0!==e.lineHeight&&(e.lineHeight=parseFloat(e.lineHeight),isFinite(e.lineHeight)||(e.lineHeight=void 0)),void 0!==e.width&&(e.width=parseFloat(e.width),isFinite(e.width)||(e.width=void 0)),e}function loadFont(e,t){return new Promise(function(r,i){n(e,function(n,o){if(n)return c("Error loading font",e),void i(n);e.indexOf("/Roboto-msdf.json")>=0&&(t=30),t&&o.chars.map(function(e){e.yoffset+=t}),r(o)})})}function loadTexture(e){return new Promise(function(t,r){(new u.ImageLoader).load(e,function(e){t(e)},void 0,function(){c("Error loading font image",e),r(null)})})}function createShader(e,t,r){var i,n;return n=new h[t].Shader,n.el=e,n.init(r),n.update(r),i=n.material,i.transparent=r.transparent,{material:i,shader:n}}function updateBaseMaterial(e,t){e.side=t.side}function computeWidth(e,t,r){return e||(.5+t)*r}function computeFontWidthFactor(e){var t=0,r=0,i=0;return e.chars.map(function(e){t+=e.xadvance,e.id>=48&&e.id<=57&&(i++,r+=e.xadvance)}),i?r/i:t/e.chars.length}function PromiseCache(){var e=this.cache={};this.get=function(t,r){return t in e?e[t]:(e[t]=r(),e[t])}}var i=e("three-bmfont-text"),n=e("load-bmfont"),o=e("path"),a=e("../core/component").registerComponent,s=e("../core/shader"),u=e("../lib/three"),l=e("../utils/"),c=l.debug("components:text:error"),h=s.shaders,d=l.debug("components:text:warn"),f="https://cdn.aframe.io/fonts/",p={aileronsemibold:f+"Aileron-Semibold.fnt",dejavu:f+"DejaVu-sdf.fnt",exo2bold:f+"Exo2Bold.fnt",exo2semibold:f+"Exo2SemiBold.fnt",kelsonsans:f+"KelsonSans.fnt",monoid:f+"Monoid.fnt",mozillavr:f+"mozillavr.fnt",roboto:f+"Roboto-msdf.json",sourcecodepro:f+"SourceCodePro.fnt"},m=["roboto"];t.exports.FONTS=p;var g=new PromiseCache,y={};t.exports.Component=a("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:"roboto"},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:h},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.texture=new u.Texture,this.texture.anisotropy=16,this.geometry=i(),this.createOrUpdateMaterial(),this.mesh=new u.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(e){var t=coerceData(this.data),r=this.currentFont;if(this.createOrUpdateMaterial(),e.font!==t.font)return void this.updateFont();r&&(this.updateGeometry(this.geometry,t,r),this.updateLayout(t))},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var e,t,r,i,n=this.data,o=this.material;if(i=n.shader,-1!==m.indexOf(n.font)||n.font.indexOf("-msdf.")>=0?i="msdf":n.font in p&&-1===m.indexOf(n.font)&&(i="sdf"),e=(this.shaderObject&&this.shaderObject.name)!==i,r={alphaTest:n.alphaTest,color:n.color,map:this.texture,opacity:n.opacity,side:parseSide(n.side),transparent:n.transparent},!e)return this.shaderObject.update(r),o.transparent=r.transparent,void updateBaseMaterial(o,r);t=createShader(this.el,i,r),this.material=t.material,this.shaderObject=t.shader,updateBaseMaterial(this.material,r),this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var e,t=this.data,r=this.el,i=this.geometry,n=this;t.font||d("No font specified. Using the default font."),this.mesh.visible=!1,e=this.lookupFont(t.font||"roboto")||t.font,g.get(e,function(){return loadFont(e,t.yOffset)}).then(function(a){var s,u;if(1!==a.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");y[e]||(a.widthFactor=y[a]=computeFontWidthFactor(a)),s=coerceData(t),n.updateGeometry(i,n.data,a),n.currentFont=a,n.updateLayout(s),u=t.fontImage||e.replace(/(\.fnt)|(\.json)/,".png")||o.dirname(t.font)+"/"+a.pages[0],g.get(u,function(){return loadTexture(u)}).then(function(e){n.mesh.visible=!0,n.texture.image=e,n.texture.needsUpdate=!0,r.emit("textfontset",{font:t.font,fontObj:a})}).catch(function(e){throw c(e),e})}).catch(function(e){throw c(e),e})},updateLayout:function(e){var t,r,i,n,o,a,s,u,l=this.el,c=this.geometry,h=l.getAttribute("geometry"),d=c.layout,f=this.mesh;if(h=l.getAttribute("geometry"),a=e.width||h&&h.width||1,n=computeWidth(e.wrapPixels,e.wrapCount,this.currentFont.widthFactor),o=a/n,i=o*(d.height+d.descender),h&&(h.width||l.setAttribute("geometry","width",a),h.height||l.setAttribute("geometry","height",i)),"left"===(t="align"===e.anchor?e.align:e.anchor))s=0;else if("right"===t)s=-1*d.width;else{if("center"!==t)throw new TypeError("Invalid text.anchor property value",t);s=-1*d.width/2}if("bottom"===(r=e.baseline))u=0;else if("top"===r)u=-1*d.height+d.ascender;else{if("center"!==r)throw new TypeError("Invalid text.baseline property value",r);u=-1*d.height/2}f.position.x=s*o,f.position.y=u*o,f.position.z=e.zOffset,f.scale.set(o,-1*o,o),this.geometry.computeBoundingSphere()},lookupFont:function(e){return p[e]},updateGeometry:function(e,t,r){e.update(l.extend({},t,{font:r,width:computeWidth(t.wrapPixels,t.wrapCount,r.widthFactor),text:t.value.replace(/\\n/g,"\n").replace(/\\t/g,"\t"),lineHeight:t.lineHeight||r.common.lineHeight}))}})},{"../core/component":126,"../core/shader":135,"../lib/three":174,"../utils/":197,"load-bmfont":24,path:32,"three-bmfont-text":38}],112:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../lib/three"),o=e("../constants").DEFAULT_USER_HEIGHT,a=e("../constants").DEFAULT_HANDEDNESS,s={x:.175,y:-.3,z:-.03},u={x:0,y:0,z:-.175};t.exports.Component=i("tracked-controls",{schema:{controller:{default:0},id:{type:"string",default:""},idPrefix:{type:"string",default:""},rotationOffset:{default:0},armModel:{default:!0},headElement:{type:"selector"}},init:function(){this.axis=[0,0,0],this.buttonStates={},this.dolly=new n.Object3D,this.controllerEuler=new n.Euler,this.controllerEuler.order="YXZ",this.controllerPosition=new n.Vector3,this.controllerQuaternion=new n.Quaternion,this.deltaControllerPosition=new n.Vector3,this.standingMatrix=new n.Matrix4,this.previousControllerPosition=new n.Vector3,this.updateGamepad()},tick:function(e,t){var r=this.el.getObject3D("mesh");r&&r.update&&r.update(t/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return o},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var e,t=this.system.controllers,r=this.data;e=t.filter(function(e){return r.idPrefix?0===e.id.indexOf(r.idPrefix):e.id===r.id}),this.controller=e[r.controller]},applyArmModel:function(e){var t=this.controller,r=t.pose,i=this.controllerQuaternion,n=this.controllerEuler,o=this.deltaControllerPosition,l=(t?t.hand:void 0)||a,c=this.getHeadElement(),h=c.object3D,d=c.components.camera,f=(d?d.data.userHeight:0)||this.defaultUserHeight();e.copy(h.position),o.set(s.x*("left"===l?-1:"right"===l?1:0),s.y,s.z),o.multiplyScalar(f),o.applyAxisAngle(h.up,h.rotation.y),e.add(o),o.set(u.x,u.y,u.z),o.multiplyScalar(f),r.orientation?i.fromArray(r.orientation):i.copy(h.quaternion),n.setFromQuaternion(i),n.set(n.x,n.y,0),o.applyEuler(n),e.add(o)},updatePose:function(){var e,t,r=this.controller,i=this.controllerEuler,o=this.controllerPosition,a=this.deltaControllerPosition,s=this.dolly,u=this.el,l=this.standingMatrix,c=this.system.vrDisplay,h=this.getHeadElement(),d=h.object3D,f=h.components.camera,p=(f?f.data.userHeight:0)||this.defaultUserHeight();r&&(t=r.pose,t.orientation?s.quaternion.fromArray(t.orientation):s.quaternion.copy(d.quaternion),t.position?s.position.fromArray(t.position):(this.data.armModel&&this.applyArmModel(o),s.position.copy(o)),s.updateMatrix(),t.position&&c&&(c.stageParameters?(l.fromArray(c.stageParameters.sittingToStandingTransform),s.applyMatrix(l)):(s.position.y+=p,s.updateMatrix())),i.setFromRotationMatrix(s.matrix),o.setFromMatrixPosition(s.matrix),u.setAttribute("rotation",{x:n.Math.radToDeg(i.x),y:n.Math.radToDeg(i.y),z:n.Math.radToDeg(i.z)+this.data.rotationOffset}),a.copy(o).sub(this.previousControllerPosition),this.previousControllerPosition.copy(o),e=u.getAttribute("position"),u.setAttribute("position",{x:e.x+a.x,y:e.y+a.y,z:e.z+a.z}))},updateButtons:function(){var e,t,r=this.controller;if(r){for(t=0;t<r.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),e=r.buttons[t],this.handleButton(t,e);this.handleAxes()}},handleButton:function(e,t){return!!(this.handlePress(e,t)||this.handleTouch(e,t)||this.handleValue(e,t))&&(this.el.emit("buttonchanged",{id:e,state:t}),!0)},handleAxes:function(){var e,t=!1,r=this.controller.axes,i=this.axis,n=[];for(e=0;e<r.length;++e)n.push(i[e]!==r[e]),n[e]&&(t=!0);return!!t&&(this.axis=r.slice(),this.el.emit("axismove",{axis:this.axis,changed:n}),!0)},handlePress:function(e,t){var r,i=this.buttonStates[e];return t.pressed!==i.pressed&&(r=t.pressed?"down":"up",this.el.emit("button"+r,{id:e,state:t}),i.pressed=t.pressed,!0)},handleTouch:function(e,t){var r,i=this.buttonStates[e];return t.touched!==i.touched&&(r=t.touched?"start":"end",this.el.emit("touch"+r,{id:e,state:t},!0,{touches:[]}),i.touched=t.touched,!0)},handleValue:function(e,t){var r=this.buttonStates[e];return t.value!==r.value&&(r.value=t.value,!0)}})},{"../constants":117,"../core/component":126,"../lib/three":174}],113:[function(e,t,r){var i=e("../core/component").registerComponent;t.exports.Component=i("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":126}],114:[function(e,t,r){var i=e("../core/component").registerComponent,n=e("../utils/"),o=n.bind,a=n.trackedControls.checkControllerPresentAndSetup,s=n.trackedControls.emitIfAxesChanged;t.exports.Component=i("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},rotationOffset:{default:0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},axisLabels:["x","y","z","w"],init:function(){var e=this;this.animationActive="pointing",this.checkControllerPresentAndSetup=a,this.controllerPresent=!1,this.emitIfAxesChanged=s,this.lastControllerCheck=0,this.onButtonChanged=o(this.onButtonChanged,this),this.onButtonDown=function(t){e.onButtonEvent(t.detail.id,"down")},this.onButtonUp=function(t){e.onButtonEvent(t.detail.id,"up")},this.onButtonTouchEnd=function(t){e.onButtonEvent(t.detail.id,"touchend")},this.onButtonTouchStart=function(t){e.onButtonEvent(t.detail.id,"touchstart")},this.onAxisMoved=o(this.onAxisMoved,this),this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener(),window.addEventListener("gamepaddisconnected",this.checkIfControllerPresent,!1)},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener(),window.removeEventListener("gamepaddisconnected",this.checkIfControllerPresent,!1)},bindMethods:function(){this.onModelLoaded=o(this.onModelLoaded,this),this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=o(this.removeControllersUpdateListener,this),this.onAxisMoved=o(this.onAxisMoved,this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t="right"===e.hand?0:"left"===e.hand?1:2;this.checkControllerPresentAndSetup(this,"OpenVR ",{index:t})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:"OpenVR ",controller:"right"===t.hand?0:"left"===t.hand?1:2,rotationOffset:t.rotationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",mtl:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,r=this.mapping.buttons[e.detail.id],i=this.buttonMeshes;r&&("trigger"===r&&(t=e.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=-t*(Math.PI/12))),this.el.emit(r+"changed",e.detail.state))},onModelLoaded:function(e){var t,r=e.detail.model,i=this;this.data.model&&(t=this.buttonMeshes={},t.grip={left:r.getObjectByName("leftgrip"),right:r.getObjectByName("rightgrip")},t.menu=r.getObjectByName("menubutton"),t.system=r.getObjectByName("systembutton"),t.trackpad=r.getObjectByName("touchpad"),t.trigger=r.getObjectByName("trigger"),Object.keys(t).forEach(function(e){i.setButtonColor(e,i.data.buttonColor)}),r.position.set(0,-.015,.04))},onAxisMoved:function(e){this.emitIfAxesChanged(this,this.mapping.axes,e)},onButtonEvent:function(e,t){var r,i,n=this.mapping.buttons[e],o=-1!==t.indexOf("touch");if(Array.isArray(n))for(i=0;i<n.length;i++)this.el.emit(n[i]+t);else this.el.emit(n+t);if(this.data.model&&!o)if(r="up"===t?this.data.buttonColor:this.data.buttonHighlightColor,Array.isArray(n))for(i=0;i<n.length;i++)this.setButtonColor(n[i],r);else this.setButtonColor(n,r)},setButtonColor:function(e,t){var r=this.buttonMeshes;if(r)return"grip"===e?(r.grip.left.material.color.set(t),void r.grip.right.material.color.set(t)):void r[e].material.color.set(t)}})},{"../core/component":126,"../utils/":197}],115:[function(e,t,r){var i=e("../constants").keyboardevent.KEYCODE_TO_CODE,n=e("../core/component").registerComponent,o=e("../lib/three"),a=e("../utils/"),s=a.bind,u=a.shouldCaptureKeyEvent;t.exports.Component=n("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},easing:{default:20},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.velocity=new o.Vector3,this.onBlur=s(this.onBlur,this),this.onFocus=s(this.onFocus,this),this.onKeyDown=s(this.onKeyDown,this),this.onKeyUp=s(this.onKeyUp,this),this.onVisibilityChange=s(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(e,t){var r,i,n=this.data,o=this.el,a=this.velocity;t/=1e3,this.updateVelocity(t),(a[n.adAxis]||a[n.wsAxis])&&(r=this.getMovementVector(t),i=o.getAttribute("position"),o.setAttribute("position",{x:i.x+r.x,y:i.y+r.y,z:i.z+r.z}))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(e){var t,r,i,n,o,a=this.data,s=this.keys,u=this.velocity;if(r=a.adAxis,n=a.wsAxis,e>.2)return u[r]=0,void(u[n]=0);0!==u[r]&&(u[r]-=u[r]*a.easing*e),0!==u[n]&&(u[n]-=u[n]*a.easing*e),Math.abs(u[r])<1e-5&&(u[r]=0),Math.abs(u[n])<1e-5&&(u[n]=0),a.enabled&&(t=a.acceleration,a.adEnabled&&(i=a.adInverted?-1:1,(s.KeyA||s.ArrowLeft)&&(u[r]-=i*t*e),(s.KeyD||s.ArrowRight)&&(u[r]+=i*t*e)),a.wsEnabled&&(o=a.wsInverted?-1:1,(s.KeyW||s.ArrowUp)&&(u[n]-=o*t*e),(s.KeyS||s.ArrowDown)&&(u[n]+=o*t*e)))},getMovementVector:function(){var e=new o.Vector3(0,0,0),t=new o.Euler(0,0,0,"YXZ");return function(r){var i,n=this.el.getAttribute("rotation"),a=this.velocity;return e.copy(a),e.multiplyScalar(r),n?(i=this.data.fly?n.x:0,t.set(o.Math.degToRad(i),o.Math.degToRad(n.y),0),e.applyEuler(t),e):e}}(),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(e){var t;u(e)&&(t=e.code||i[e.keyCode],this.keys[t]=!0)},onKeyUp:function(e){var t;t=e.code||i[e.keyCode],this.keys[t]=!1}})},{"../constants":117,"../core/component":126,"../lib/three":174,"../utils/":197}],116:[function(e,t,r){var i=e("@tweenjs/tween.js"),n={alternate:"alternate",alternateReverse:"alternate-reverse",normal:"normal",reverse:"reverse"},o={linear:i.Easing.Linear.None,ease:i.Easing.Cubic.InOut,"ease-in":i.Easing.Cubic.In,"ease-out":i.Easing.Cubic.Out,"ease-in-out":i.Easing.Cubic.InOut,"ease-cubic":i.Easing.Cubic.In,"ease-in-cubic":i.Easing.Cubic.In,"ease-out-cubic":i.Easing.Cubic.Out,"ease-in-out-cubic":i.Easing.Cubic.InOut,"ease-quad":i.Easing.Quadratic.InOut,"ease-in-quad":i.Easing.Quadratic.In,"ease-out-quad":i.Easing.Quadratic.Out,"ease-in-out-quad":i.Easing.Quadratic.InOut,"ease-quart":i.Easing.Quartic.InOut,"ease-in-quart":i.Easing.Quartic.In,"ease-out-quart":i.Easing.Quartic.Out,"ease-in-out-quart":i.Easing.Quartic.InOut,"ease-quint":i.Easing.Quintic.InOut,"ease-in-quint":i.Easing.Quintic.In,"ease-out-quint":i.Easing.Quintic.Out,"ease-in-out-quint":i.Easing.Quintic.InOut,"ease-sine":i.Easing.Sinusoidal.InOut,"ease-in-sine":i.Easing.Sinusoidal.In,"ease-out-sine":i.Easing.Sinusoidal.Out,"ease-in-out-sine":i.Easing.Sinusoidal.InOut,"ease-expo":i.Easing.Exponential.InOut,"ease-in-expo":i.Easing.Exponential.In,"ease-out-expo":i.Easing.Exponential.Out,"ease-in-out-expo":i.Easing.Exponential.InOut,"ease-circ":i.Easing.Circular.InOut,"ease-in-circ":i.Easing.Circular.In,"ease-out-circ":i.Easing.Circular.Out,"ease-in-out-circ":i.Easing.Circular.InOut,"ease-elastic":i.Easing.Elastic.InOut,"ease-in-elastic":i.Easing.Elastic.In,"ease-out-elastic":i.Easing.Elastic.Out,"ease-in-out-elastic":i.Easing.Elastic.InOut,"ease-back":i.Easing.Back.InOut,"ease-in-back":i.Easing.Back.In,"ease-out-back":i.Easing.Back.Out,"ease-in-out-back":i.Easing.Back.InOut,"ease-bounce":i.Easing.Bounce.InOut,"ease-in-bounce":i.Easing.Bounce.In,"ease-out-bounce":i.Easing.Bounce.Out,"ease-in-out-bounce":i.Easing.Bounce.InOut},a={backwards:"backwards",both:"both",forwards:"forwards",none:"none"},s={indefinite:"indefinite"},u={attribute:"rotation",begin:"",end:"",delay:0,dur:1e3,easing:"ease",direction:n.normal,fill:a.forwards,from:void 0,repeat:0,to:void 0};t.exports.defaults=u,t.exports.directions=n,t.exports.easingFunctions=o,t.exports.fills=a,t.exports.repeats=s},{"@tweenjs/tween.js":1}],117:[function(e,t,r){t.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",animation:e("./animation"),keyboardevent:e("./keyboardevent")}},{"./animation":116,"./keyboardevent":118}],118:[function(e,t,r){t.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},{}],119:[function(e,t,r){function cloneValue(e){return c.extend({},e)}function getAnimationValues(e,t,r,i,n){function getForColorComponent(){m=new l.Color(r||e.getAttribute(t)),g=new l.Color(i),f=function(r){p.length>1&&e.setAttribute(p[0],p[1],rgbVectorToHex(r)),e.setAttribute(t,rgbVectorToHex(r))}}var s,u,c,h,f,p=t.split("."),m={},g={};return 2===p.length?function(){var t=p[0],r=p[1],i=e.components[t],n=i&&i.schema;return n&&n[r]&&"color"===n[r].type}()?getForColorComponent():function(){h=p[0],c=p[1],u=e.components[h],u||(e.setAttribute(h,""),u=e.components[h]),s=u.schema,m[t]=void 0===r?d(e,t):r,m[t]=a(m[t],s[c]),g[t]=a(i,s[c]),f=function(r){t in r&&e.setAttribute(h,c,r[t])}}():i&&v(i)?function(){m=r?o.parse(r):n,g=o.parse(i),f=function(r){e.setAttribute(t,r)}}():-1!==["true","false"].indexOf(i)?function(){m[t]=void 0!==r&&strToBool(r),m[t]=boolToNum(m[t]),g[t]=boolToNum(strToBool(i)),f=function(r){e.setAttribute(t,!!r[t])}}():isNaN(i)?getForColorComponent():function(){m[t]=void 0===r?parseFloat(e.getAttribute(t)):parseFloat(r),g[t]=parseFloat(i),f=function(r){e.setAttribute(t,r[t])}}(),{from:m,partialSetAttribute:f,to:g}}function strToBool(e){return"true"===e}function boolToNum(e){return e?1:0}function componentToHex(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function convertToIntegerColor(e){return Math.floor(255*Math.min(Math.abs(e),1))}function rgbVectorToHex(e){return"#"+["r","g","b"].map(function(t){return componentToHex(convertToIntegerColor(e[t]))}).join("")}var i=e("./a-node"),n=e("../constants/animation"),o=e("../utils/").coordinates,a=e("./schema").parseProperty,s=e("./a-register-element").registerElement,u=e("@tweenjs/tween.js"),l=e("../lib/three"),c=e("../utils/"),h=c.bind,d=c.entity.getComponentProperty,f=n.defaults,p=n.directions,m=n.easingFunctions,g=n.fills,y=n.repeats,v=o.isCoordinates;t.exports.AAnimation=s("a-animation",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.bindMethods(),this.isRunning=!1,this.partialSetAttribute=function(){},this.tween=null}},attachedCallback:{value:function(){this.el=this.parentNode,this.handleMixinUpdate(),this.update(),this.load()}},attributeChangedCallback:{value:function(e,t,r){this.hasLoaded&&this.isRunning&&(this.stop(),this.handleMixinUpdate(),this.update())}},detachedCallback:{value:function(){this.isRunning&&this.stop()}},getTween:{value:function(){var e,t,r,i,n=this,o=n.data,a=n.el,s=o.attribute,l=parseInt(o.delay,10),c=d(a,s),f=n.getDirection(o.direction),v=m[o.easing],b=o.fill,x=o.repeat===y.indefinite?1/0:0,M=!1;return e=getAnimationValues(a,s,o.from||n.initialValue,o.to,c),t=e.from,r=e.to,n.partialSetAttribute=e.partialSetAttribute,void 0===n.count&&(n.count=x===1/0?0:parseInt(o.repeat,10)),isNaN(l)&&(l=0),n.initialValue=n.initialValue||cloneValue(c),x===1/0&&b===g.forwards&&-1!==[p.alternate,p.alternateReverse].indexOf(o.direction)&&(M=!0),f===p.reverse&&(i=r,r=cloneValue(t),t=cloneValue(i)),-1!==[g.backwards,g.both].indexOf(b)&&n.partialSetAttribute(t),new u.Tween(cloneValue(t)).to(r,o.dur).delay(l).easing(v).repeat(x).yoyo(M).onUpdate(function(){n.partialSetAttribute(this)}).onComplete(h(n.onCompleted,n))}},update:{value:function(){var e=this.data;"infinite"===e.repeat&&console.warn("Using 'infinite' as 'repeat' value is invalid.  Use 'indefinite' instead."),""===e.begin||isNaN(e.begin)||(console.warn("Using 'begin' to specify a delay is deprecated. Use 'delay' instead."),e.delay=e.begin,e.begin="");var t=e.begin,r=e.end;this.evt&&this.removeEventListeners(this.evt),this.evt={begin:t,end:r},this.addEventListeners(this.evt),""===t&&(this.stop(),this.start())},writable:window.debug},onCompleted:{value:function(){var e=this.data;if(this.isRunning=!1,-1!==[g.backwards,g.none].indexOf(e.fill)&&this.partialSetAttribute(this.initialValue),0===this.count)return this.count=void 0,void this.emit("animationend");this.isRunning=!1,this.count--,this.start()}},start:{value:function(){var e=this;if(!this.el.hasLoaded)return void this.el.addEventListener("loaded",function(){e.start()});!this.isRunning&&this.el.isPlaying&&(this.tween=this.getTween(),this.isRunning=!0,this.tween.start(),this.emit("animationstart"))},writable:!0},stop:{value:function(){var e=this.tween;e&&(e.stop(),this.isRunning=!1,-1!==[g.backwards,g.none].indexOf(this.data.fill)&&this.partialSetAttribute(this.initialValue),this.emit("animationstop"))},writable:!0},getDirection:{value:function(e){return e===p.alternate?(this.prevDirection=this.prevDirection===p.normal?p.reverse:p.normal,this.prevDirection):e===p.alternateReverse?(this.prevDirection=this.prevDirection===p.reverse?p.normal:p.reverse,this.prevDirection):e}},bindMethods:{value:function(){this.start=h(this.start,this),this.stop=h(this.stop,this),this.onStateAdded=h(this.onStateAdded,this),this.onStateRemoved=h(this.onStateRemoved,this)}},addEventListeners:{value:function(e){var t=this.el,r=this;c.splitString(e.begin).forEach(function(e){t.addEventListener(e,r.start)}),c.splitString(e.end).forEach(function(e){t.addEventListener(e,r.stop)}),""===e.begin&&t.addEventListener("play",this.start),t.addEventListener("pause",this.stop),t.addEventListener("stateadded",this.onStateAdded),t.addEventListener("stateremoved",this.onStateRemoved)}},removeEventListeners:{value:function(e){var t=this.el,r=this.start,i=this.stop;c.splitString(e.begin).forEach(function(e){t.removeEventListener(e,r)}),c.splitString(e.end).forEach(function(e){t.removeEventListener(e,i)}),t.removeEventListener("stateadded",this.onStateAdded),t.removeEventListener("stateremoved",this.onStateRemoved)}},onStateAdded:{value:function(e){e.detail.state===this.data.begin&&this.start()},writable:!0},onStateRemoved:{value:function(e){e.detail.state===this.data.begin&&this.stop()},writable:!0},handleMixinUpdate:{value:function(){var e,t,r,i={};r=document.querySelector("#"+this.getAttribute("mixin")),t=r?c.getElData(r,f):{},e=c.getElData(this,f),c.extend(i,f,t,e),this.data=i}}})}),t.exports.getAnimationValues=getAnimationValues},{"../constants/animation":116,"../lib/three":174,"../utils/":197,"./a-node":124,"./a-register-element":125,"./schema":134,"@tweenjs/tween.js":1}],120:[function(e,t,r){function mediaElementLoaded(e){if(e.hasAttribute("autoplay")||"auto"===e.getAttribute("preload"))return new Promise(function(t,r){function checkProgress(){for(var r=0,i=0;i<e.buffered.length;i++)r+=e.buffered.end(i)-e.buffered.start(i);r>=e.duration&&(s.Cache.files[e.getAttribute("src")]=e,t())}return 4===e.readyState?t():e.error?r():(e.addEventListener("loadeddata",checkProgress,!1),e.addEventListener("progress",checkProgress,!1),void e.addEventListener("error",r,!1))})}function fixUpMediaElement(e){var t=setCrossOrigin(e);return t.tagName&&"video"===t.tagName.toLowerCase()&&(t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")),t!==e&&(e.parentNode.appendChild(t),e.parentNode.removeChild(e)),t}function setCrossOrigin(e){var t;if(e.hasAttribute("crossorigin"))return e;if(null!==(t=e.getAttribute("src"))){if(-1===t.indexOf("://"))return e;if(extractDomain(t)===window.location.host)return e}return l('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',t),e.crossOrigin="anonymous",e.cloneNode(!0)}function extractDomain(e){return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0]}function inferResponseType(e){var t=e.lastIndexOf(".");if(t>=0){var r=e.slice(t,e.length);if(".gltf"===r||".glb"===r)return"arraybuffer"}return"text"}var i=e("./a-node"),n=e("../utils/bind"),o=e("../utils/debug"),a=e("./a-register-element").registerElement,s=e("../lib/three"),u=new s.FileLoader,l=o("core:a-assets:warn");t.exports=a("a-assets",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=u,this.timeout=null}},attachedCallback:{value:function(){var e,t,r,i,o,a,u=this,c=[];if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(o=this.querySelectorAll("img"),e=0;e<o.length;e++)i=fixUpMediaElement(o[e]),c.push(new Promise(function(t,r){s.Cache.files[o[e].getAttribute("src")]=i,i.onload=t,i.onerror=r}));for(r=this.querySelectorAll("audio, video"),e=0;e<r.length;e++)t=fixUpMediaElement(r[e]),c.push(mediaElementLoaded(t));Promise.all(c).then(n(this.load,this)),a=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){u.hasLoaded||(l("Asset loading timed out in ",a,"ms"),u.emit("timeout"),u.load())},a)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){i.prototype.load.call(this,null,function(e){return e.isAssetItem&&e.hasAttribute("src")})}}})}),a("a-asset-item",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var e=this,t=this.getAttribute("src");u.setResponseType(this.getAttribute("response-type")||inferResponseType(t)),u.load(t,function(t){e.data=t,setTimeout(function(){i.prototype.load.call(e)})},function(t){e.emit("progress",{loadedBytes:t.loaded,totalBytes:t.total,xhr:t})},function(t){e.emit("error",{xhr:t})})}}})}),t.exports.inferResponseType=inferResponseType},{"../lib/three":174,"../utils/bind":191,"../utils/debug":193,"./a-node":124,"./a-register-element":125}],121:[function(e,t,r){var i=e("../utils/debug"),n=e("./a-register-element").registerElement,o=i("core:cubemap:warn");t.exports=n("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var e,t=this.querySelectorAll("[src]"),r=[];if(6===t.length){for(e=0;e<t.length;e++)r.push(t[e].getAttribute("src"));return r}o("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":193,"./a-register-element":125}],122:[function(e,t,r){function checkComponentDefined(e,t){return void 0!==e.defaultComponents[t]||(!(!e.components[t]||!e.components[t].attrValue)||isComponentMixedIn(t,e.mixinEls))}function getMixedInComponents(e){var t=[];return e.mixinEls.forEach(function(e){function addComponent(e){t.push(e)}Object.keys(e.componentCache).forEach(addComponent)}),t}function isComponentMixedIn(e,t){var r,i=!1;for(r=0;r<t.length&&!(i=t[r].hasAttribute(e));++r);return i}function mergeComponentData(e,t){return t?t.constructor===Object?u.extend(t,u.styleParser.parse(e||{})):e||t:e}var i,n=e("./a-node"),o=e("./component").components,a=e("./a-register-element").registerElement,s=e("../lib/three"),u=e("../utils/"),l=u.bind,c=u.debug("core:a-entity:debug"),h=u.debug("core:a-entity:warn"),d="__",f=Object.create(n.prototype,{defaultComponents:{value:{position:"",rotation:"",scale:"",visible:""}},createdCallback:{value:function(){this.components={},this.initializingComponents={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new s.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.states=[]}},attributeChangedCallback:{value:function(e,t,r){var i=this.components[e];if(i&&i.justInitialized&&""===r)return void delete i.justInitialized;(i||null!==r)&&this.setEntityAttribute(e,t,r)}},attachedCallback:{value:function(){var e,t=this.sceneEl,r=this;if(this.addToParent(),!this.isScene){if(!t)return void this.load();if((e=t.querySelector("a-assets"))&&!e.hasLoaded)return void e.addEventListener("loaded",function(){r.load()});this.load()}}},detachedCallback:{value:function(){this.parentEl&&(Object.keys(this.components).forEach(l(this.removeComponent,this)),this.isScene||(this.removeFromParent(),n.prototype.detachedCallback.call(this)))}},handleMixinUpdate:{value:function(e){if(!e)return void this.updateComponents();this.updateComponent(e,this.getDOMAttribute(e))}},mapStateMixins:{value:function(e,t){var r,i=this.getAttribute("mixin");i&&(r=i.split(" "),r.forEach(function(r){t(r+"-"+e)}),this.updateComponents())}},updateStateMixins:{value:function(e,t){var r,i=e.split(" "),n=t?t.split(" "):[],o=this;r=n.filter(function(e){return i.indexOf(e)<0}),r.forEach(function(e){var t=document.querySelectorAll("[id^="+e+"-]");Array.prototype.forEach.call(t,function(e){o.unregisterMixin(e.id)})}),this.states.forEach(function(e){i.forEach(function(t){var r=t+"-"+e;o.registerMixin(r)})})}},getObject3D:{value:function(e){return this.object3DMap[e]}},setObject3D:{value:function(e,t){var r,i=this;if(!(t instanceof s.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");r=this.getObject3D(e),r&&this.object3D.remove(r),t.el=this,t.children.length&&t.traverse(function(e){e.el=i}),this.object3D.add(t),this.object3DMap[e]=t,this.emit("object3dset",{object:t,type:e})}},removeObject3D:{value:function(e){var t=this.getObject3D(e);if(!t)return void h("Tried to remove `Object3D` of type:",e,"which was not defined.");this.object3D.remove(t),delete this.object3DMap[e],this.emit("object3dremove",{type:e})}},getOrCreateObject3D:{value:function(e,t){var r=this.getObject3D(e);return!r&&t&&(r=new t,this.setObject3D(e,r)),r}},add:{value:function(e){if(!e.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(e.object3D),this.emit("child-attached",{el:e})}},addToParent:{value:function(){var e=this.parentEl=this.parentNode;e&&e.add&&!this.attachedToParent&&(e.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var e=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=this.parentNode=null,e.emit("child-detached",{el:this})}},load:{value:function(){var e=this;!this.hasLoaded&&this.parentEl&&n.prototype.load.call(this,function(){e.parentEl&&(e.updateComponents(),(e.isScene||e.parentEl.isPlaying)&&e.play())})},writable:window.debug},remove:{value:function(e){this.object3D.remove(e.object3D)}},getChildEntities:{value:function(){for(var e=this.children,t=[],r=0;r<e.length;r++){var n=e[r];n instanceof i&&t.push(n)}return t}},initComponent:{value:function(e,t,r){var i,n=e.split(d),a=n[1],s=n[0],u=checkComponentDefined(this,e)||void 0!==t;if(o[s]&&(u||r)&&!(e in this.components)){if(this.initComponentDependencies(s),a&&!o[s].multiple)throw new Error("Trying to initialize multiple components of type `"+s+"`. There can only be one component of this type per entity.");i=new o[s].Component(this,t,a),this.isPlaying&&i.play(),this.hasAttribute(e)||(i.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,e,"")),c("Component initialized: %s",e)}},writable:window.debug},initComponentDependencies:{value:function(e){var t,r=this,i=o[e];i&&(t=o[e].dependencies)&&t.forEach(function(e){r.initComponent(e,window.HTMLElement.prototype.getAttribute.call(r,e)||void 0,!0)})}},removeComponent:{value:function(e){var t,r,i;if(r=e in this.defaultComponents,i=isComponentMixedIn(e,this.mixinEls),!r&&!i&&(t=this.components[e])){if(!t.initialized)return void this.addEventListener("componentinitialized",function tryRemoveLater(t){t.detail.name===e&&(this.removeComponent(e),this.removeEventListener("componentinitialized",tryRemoveLater))});t.pause(),t.remove(),delete this.components[e],this.emit("componentremoved",{id:t.id,name:e})}},writable:window.debug},updateComponents:{value:function(){function addComponent(e){var r=e.split(d)[0];o[r]&&(t[e]=!0)}function doUpdateComponent(e){var n=mergeComponentData(i.getDOMAttribute(e),r[e]);delete t[e],i.updateComponent(e,n)}var e,t={},r={},i=this;if(this.hasLoaded){for(getMixedInComponents(this).forEach(addComponent),this.getExtraComponents&&(r=this.getExtraComponents(),Object.keys(r).forEach(addComponent)),e=0;e<this.attributes.length;++e)addComponent(this.attributes[e].name);Object.keys(this.defaultComponents).forEach(doUpdateComponent),Object.keys(t).forEach(doUpdateComponent)}},writable:window.debug},updateComponent:{value:function(e,t,r){var i=this.components[e],n=e in this.defaultComponents;if(i)return null!==t||n?void i.updateProperties(t,r):void this.removeComponent(e);this.initComponent(e,t,!1)}},removeAttribute:{value:function(e,t){var r=this.components[e];if(!r||void 0!==t||(this.setEntityAttribute(e,void 0,null),!this.components[e])){if(r&&void 0!==t)return void r.resetProperty(t);"mixin"===e&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,e)}}},play:{value:function(){var e=this.components,t=Object.keys(e);!this.isPlaying&&this.hasLoaded&&(this.isPlaying=!0,t.forEach(function(t){e[t].play()}),this.getChildEntities().forEach(function(e){e.play()}),this.emit("play"))},writable:!0},pause:{value:function(){var e=this.components,t=Object.keys(e);this.isPlaying&&(this.isPlaying=!1,t.forEach(function(t){e[t].pause()}),this.getChildEntities().forEach(function(e){e.pause()}),this.emit("pause"))},writable:!0},setEntityAttribute:{value:function(e,t,r){return o[e]||this.components[e]?void this.updateComponent(e,r):"mixin"===e?void this.mixinUpdate(r,t):void 0}},mixinUpdate:{value:function(e,t){t=t||this.getAttribute("mixin"),this.updateMixins(e,t),this.updateStateMixins(e,t),this.updateComponents()}},setAttribute:{value:function(e,t,r){var i,a,s,l,c;if(l=e.indexOf(d),s=l>0?e.substring(0,l):e,!o[s])return void function(e,t,r){n.prototype.setAttribute.call(e,t,r),"mixin"===t&&e.mixinUpdate(r)}(this,e,t);!this.components[e]&&this.hasAttribute(e)&&this.updateComponent(e,window.HTMLElement.prototype.getAttribute.call(this,e)),void 0!==r&&"string"==typeof t&&t.length>0&&"string"==typeof u.styleParser.parse(t)?(i={},i[t]=r,a=!1):(i=t,a=!0===r),this.updateComponent(e,i,a),(c=this.sceneEl&&this.sceneEl.getAttribute("debug"))&&this.components[e].flushToDOM()},writable:window.debug},flushToDOM:{value:function(e){var t,r,i=this.components,n=this.defaultComponents,o=this.children;if(Object.keys(i).forEach(function(e){i[e].flushToDOM(e in n)}),e)for(r=0;r<o.length;++r)t=o[r],t.flushToDOM&&t.flushToDOM(e)}},getAttribute:{value:function(e){var t=this.components[e];return t?t.data:window.HTMLElement.prototype.getAttribute.call(this,e)},writable:window.debug},getComputedAttribute:{value:function(e){return h("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(e)}},getDOMAttribute:{value:function(e){var t=this.components[e];return t?t.attrValue:window.HTMLElement.prototype.getAttribute.call(this,e)},writable:window.debug},addState:{value:function(e){this.is(e)||(this.states.push(e),this.mapStateMixins(e,l(this.registerMixin,this)),this.emit("stateadded",{state:e}))}},removeState:{value:function(e){var t=this.states.indexOf(e);-1!==t&&(this.states.splice(t,1),this.mapStateMixins(e,l(this.unregisterMixin,this)),this.emit("stateremoved",{state:e}))}},is:{value:function(e){return-1!==this.states.indexOf(e)}}});i=a("a-entity",{prototype:f}),t.exports=i},{"../lib/three":174,"../utils/":197,"./a-node":124,"./a-register-element":125,"./component":126}],123:[function(e,t,r){var i=e("./a-node"),n=e("./a-register-element").registerElement,o=e("./component").components;t.exports=n("a-mixin",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id")}},attributeChangedCallback:{value:function(e,t,r){this.cacheAttribute(e,r)}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(e,t){this.cacheAttribute(e,t),window.HTMLElement.prototype.setAttribute.call(this,e,t)}},cacheAttribute:{value:function(e,t){var r=e.split("__")[0],i=o[r];i&&(void 0===t&&(t=window.HTMLElement.prototype.getAttribute.call(this,e)),this.componentCache[e]=i.parseAttrValueForCache(t))}},getAttribute:{value:function(e){return this.componentCache[e]||window.HTMLElement.prototype.getAttribute.call(this,e)}},cacheAttributes:{value:function(){var e,t,r=this.attributes;for(t=0;t<r.length;t++)e=r[t].name,this.cacheAttribute(e)}},updateEntities:{value:function(){if(this.sceneEl)for(var e=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),t=0;t<e.length;t++){var r=e[t];r.hasLoaded&&(r.registerMixin(this.id),Object.keys(this.componentCache).forEach(function(e){r.updateComponent(e)}))}}}})})},{"./a-node":124,"./a-register-element":125,"./component":126}],124:[function(e,t,r){var i=e("./a-register-element").registerElement,n=e("./a-register-element").isNode,o=e("../utils/"),a=o.bind,s=o.debug("core:a-node:warn");t.exports=i("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[],this.mixinObservers={}},writable:window.debug},attachedCallback:{value:function(){var e;this.sceneEl=this.closestScene(),this.sceneEl||s("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",{},!1),(e=this.getAttribute("mixin"))&&this.updateMixins(e)},writable:window.debug},attributeChangedCallback:{value:function(e,t,r){"mixin"===e&&this.updateMixins(r,t)}},closestScene:{value:function(){for(var e=this;e&&!e.isScene;)e=e.parentElement;return e}},closest:{value:function(e){for(var t=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,r=this;r&&!t.call(r,e);)r=r.parentElement;return r}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(e,t){var r,i,o=this;this.hasLoaded||(t=t||n,r=this.getChildren(),i=r.filter(t).map(function(e){return new Promise(function(t){if(e.hasLoaded)return t();e.addEventListener("loaded",t)})}),Promise.all(i).then(function(){o.hasLoaded=!0,e&&e(),o.emit("loaded",{},!1)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:function(e,t){var r=e?e.trim().split(/\s+/):[];(t?t.trim().split(/\s+/):[]).filter(function(e){return r.indexOf(e)<0}).forEach(a(this.unregisterMixin,this)),this.mixinEls=[],r.forEach(a(this.registerMixin,this))}},registerMixin:{value:function(e){if(this.sceneEl){var t=this.sceneEl.querySelector("a-mixin#"+e);t&&(this.attachMixinListener(t),this.mixinEls.push(t))}}},setAttribute:{value:function(e,t){"mixin"===e&&this.updateMixins(t),window.HTMLElement.prototype.setAttribute.call(this,e,t)}},unregisterMixin:{value:function(e){var t,r,i=this.mixinEls;for(r=0;r<i.length;++r)if(t=i[r],e===t.id){i.splice(r,1);break}this.removeMixinListener(e)}},removeMixinListener:{value:function(e){var t=this.mixinObservers[e];t&&(t.disconnect(),this.mixinObservers[e]=null)}},attachMixinListener:{value:function(e){var t=this,r=e.id,i=this.mixinObservers[r];if(e&&!i){var n=new MutationObserver(function(e){var r=e[0].attributeName;t.handleMixinUpdate(r)}),o={attributes:!0};n.observe(e,o),this.mixinObservers[r]=n}}},handleMixinUpdate:{value:function(){}},emit:{value:function(e,t,r,i){var n=this;t=t||{},void 0===r&&(r=!0);var a={bubbles:!!r,detail:t};return i&&o.extend(a,i),e.split(" ").map(function(e){return o.fireEvent(n,e,a)})},writable:window.debug},emitter:{value:function(e,t,r){var i=this;return function(){i.emit(e,t,r)}}}})})},{"../utils/":197,"./a-register-element":125}],125:[function(e,t,r){function addTagName(e){o[e.toLowerCase()]=!0}function wrapANodeMethods(e){var t={};return wrapMethods(t,["attachedCallback","attributeChangedCallback","createdCallback"],e,i.prototype),copyProperties(e,t),t}function wrapAEntityMethods(e){var t={},r=["attachedCallback","attributeChangedCallback","createdCallback"],o=["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"];return wrapMethods(t,r,e,i.prototype),wrapMethods(t,o,e,n.prototype),copyProperties(e,t),t}function wrapMethods(e,t,r,i){t.forEach(function(t){wrapMethod(e,t,r,i)})}function wrapMethod(e,t,r,i){var n=r[t],o=i[t];n&&o&&n!==o&&(e[t]={value:function(){return o.apply(this,arguments),n.apply(this,arguments)},writable:window.debug})}function copyProperties(e,t){Object.getOwnPropertyNames(e).forEach(function(r){var i;t[r]||(i=Object.getOwnPropertyDescriptor(e,r),t[r]={value:e[r],writable:i.writable})})}e("document-register-element");var i,n,o=t.exports.knownTags={};t.exports.isNode=function(e){return e.tagName.toLowerCase()in o||e.isNode},t.exports.registerElement=function(e,t){var r=Object.getPrototypeOf(t.prototype),o=t,a=i&&r===i.prototype,s=n&&r===n.prototype;return(a||s)&&addTagName(e),a&&(o=wrapANodeMethods(t.prototype),o={prototype:Object.create(r,o)}),s&&(o=wrapAEntityMethods(t.prototype),o={prototype:Object.create(r,o)}),document.registerElement(e,o)},t.exports.wrapMethods=wrapMethods,i=e("./a-node"),n=e("./a-entity")},{"./a-entity":122,"./a-node":124,"document-register-element":11}],126:[function(e,t,r){function extendProperties(e,t,r){return!r||null!==t&&"object"==typeof t?a.extend(e,t):t}function hasBehavior(e){return e.tick||e.tock}function wrapPause(e){return function(){var t=this.el.sceneEl;this.isPlaying&&(e.call(this),this.isPlaying=!1,hasBehavior(this)&&t.removeBehavior(this))}}function wrapPlay(e){return function(){var t=this.el.sceneEl,r=this.el.isPlaying&&!this.isPlaying;this.initialized&&r&&(e.call(this),this.isPlaying=!0,hasBehavior(this)&&t.addBehavior(this))}}var i=e("./schema"),n=e("./scene/scenes"),o=e("./system"),a=e("../utils/"),s=t.exports.components={},u=i.parseProperties,l=i.parseProperty,c=i.process,h=i.isSingleProperty,d=i.stringifyProperties,f=i.stringifyProperty,p=a.styleParser,m=a.debug("core:component:warn"),g=document.currentScript,y=new RegExp("[A-Z]+"),v=t.exports.Component=function(e,t,r){var i=this;this.el=e,this.id=r,this.attrName=this.name+(r?"__"+r:""),this.initialized=!1,this.el.components[this.attrName]=this,this.oldData=void 0,this.previousAttrValue=void 0,this.throttledEmitComponentChanged=a.throttle(function(t){e.emit("componentchanged",{id:i.id,name:i.name,newData:i.data,oldData:t},!1)},200),this.updateProperties(t)};if(v.prototype={schema:{},init:function(){},update:function(e){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(e,t){var r=this.schema;return h(r)?l(e,r):u(p.parse(e),r,!0,this.name,t)},stringify:function(e){var t=this.schema;return"string"==typeof e?e:h(t)?f(e,t):(e=d(e,t),p.stringify(e))},getData:function(){var e=this.data;return"object"!=typeof e?e:a.extend({},e)},updateCachedAttrValue:function(e,t){var r,i=this.parseAttrValueForCache(e),n=h(this.schema);if(void 0!==e){if(!n&&!t&&this.attrValue)for(r in this.attrValue)r in i||(i[r]=this.attrValue[r]);this.attrValue=extendProperties({},i,n)}},parseAttrValueForCache:function(e){var t;return"string"!=typeof e?e:(h(this.schema)?"string"==typeof(t=this.schema.parse(e))&&(t=e):t=p.parse(e),t)},flushToDOM:function(e){var t=e?this.data:this.attrValue;t&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(t))},updateProperties:function(e,t){var r,i,n=this.el,o=this.oldData;if(!n.hasLoaded)return void this.updateCachedAttrValue(e);if(r=h(this.schema),i=null!==e&&"object"==typeof this.previousAttrValue&&e===this.previousAttrValue,this.previousAttrValue=e,e=this.parseAttrValueForCache(e),this.updateSchema&&this.updateSchema(this.buildData(e,!1,!0)),this.data=this.buildData(e,t,!1,i),this.updateCachedAttrValue(e,t),this.initialized){if(!i&&a.deepEqual(this.oldData,this.data))return;this.oldData=extendProperties({},this.data,r),this.update(o),this.throttledEmitComponentChanged(o)}else{if(n.initializingComponents[this.name])return;n.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete n.initializingComponents[this.name],o=r&&"object"!=typeof l(void 0,this.schema)?void 0:{},this.oldData=extendProperties({},this.data,r),this.update(o),n.isPlaying&&this.play(),n.emit("componentinitialized",{id:this.id,name:this.name,data:this.getData()},!1)}},resetProperty:function(e){if(h(this.schema))this.attrValue=void 0;else{if(!(e in this.attrValue))return;delete this.attrValue[e]}this.updateProperties(this.attrValue)},extendSchema:function(e){var t=a.extend({},s[this.name].schema);a.extend(t,e),this.schema=c(t),this.el.emit("schemachanged",{component:this.name})},buildData:function(e,t,r,i){var n,o,s=this,c=void 0!==e&&null!==e,d=this.schema,f=h(d),p=this.el.mixinEls;if(f?n="object"==typeof d.default?a.extend({},d.default):d.default:(o=!t&&this.attrValue,n="object"==typeof o?a.extend({},o):{},Object.keys(d).forEach(function(e){var t=d[e].default;void 0===n[e]&&(n[e]=t&&t.constructor===Object?a.extend({},t):t)})),p.forEach(function(e){var t=e.getAttribute(s.attrName);t&&(n=extendProperties(n,t,f))}),c){if(f)return!0===i?e:l(e,d);n=extendProperties(n,e,f)}else{if(!0===i)return n;if(f)return l(n,d)}return!0===i?n:u(n,d,void 0,this.name,r)}},window.debug)var b=t.exports.registrationOrderWarnings={};t.exports.registerComponent=function(e,t){var r,i={};if(document.currentScript&&document.currentScript!==g&&n.forEach(function(t){t.hasLoaded||document.currentScript.compareDocumentPosition(t)!==Node.DOCUMENT_POSITION_FOLLOWING&&(m("The component `"+e+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(b[e]=!0))}),!0===y.test(e)&&m("The component name `"+e+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+e.toLowerCase()+"`"),-1!==e.indexOf("__"))throw new Error("The component name `"+e+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(t).forEach(function(e){i[e]={value:t[e],writable:!0}}),s[e])throw new Error("The component `"+e+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");return r=function(e,t,r){v.call(this,e,t,r)},r.prototype=Object.create(v.prototype,i),r.prototype.name=e,r.prototype.constructor=r,r.prototype.system=o&&o.systems[e],r.prototype.play=wrapPlay(r.prototype.play),r.prototype.pause=wrapPause(r.prototype.pause),s[e]={Component:r,dependencies:r.prototype.dependencies,isSingleProp:h(r.prototype.schema),multiple:r.prototype.multiple,parse:r.prototype.parse,parseAttrValueForCache:r.prototype.parseAttrValueForCache,schema:a.extend(c(r.prototype.schema,r.prototype.name)),stringify:r.prototype.stringify,type:r.prototype.type},r}},{"../utils/":197,"./scene/scenes":132,"./schema":134,"./system":136}],127:[function(e,t,r){var i=e("./schema"),n=i.process,o=t.exports.geometries={},a=t.exports.geometryNames=[],s=e("../lib/three"),u=t.exports.Geometry=function(){};u.prototype={schema:{},init:function(e){return this.geometry=new s.Geometry,this.geometry},update:function(e){}},t.exports.registerGeometry=function(e,t){var r,i={};if(Object.keys(t).forEach(function(e){i[e]={value:t[e],writable:!0}}),o[e])throw new Error("The geometry `"+e+"` has been already registered");return r=function(){u.call(this)},r.prototype=Object.create(u.prototype,i),r.prototype.name=e,r.prototype.constructor=r,o[e]={Geometry:r,schema:n(r.prototype.schema)},a.push(e),r}},{"../lib/three":174,"./schema":134}],128:[function(e,t,r){function registerPropertyType(e,t,r,i){if("type"in s)return void o("Property type "+e+" is already registered.");s[e]={default:t,parse:r||defaultParse,stringify:i||defaultStringify}}function arrayParse(e){function trim(e){return e.trim()}return Array.isArray(e)?e:e&&"string"==typeof e?e.split(",").map(trim):[]}function arrayStringify(e){return e.join(", ")}function assetParse(e){var t,r;return"string"!=typeof e?e:(r=e.match(/\url\((.+)\)/),r?r[1]:"#"===e.charAt(0)?(t=document.getElementById(e.substring(1)))?"CANVAS"===t.tagName||"VIDEO"===t.tagName||"IMG"===t.tagName?t:t.getAttribute("src"):void a('"'+e+'" asset not found.'):e)}function defaultParse(e){return e}function defaultStringify(e){return null===e?"null":e.toString()}function boolParse(e){return"false"!==e&&!1!==e}function intParse(e){return parseInt(e,10)}function numberParse(e){return parseFloat(e,10)}function selectorParse(e){return e?"string"!=typeof e?e:"#"!==e[0]||u.test(e)?document.querySelector(e):document.getElementById(e.substring(1)):null}function selectorAllParse(e){return e?"string"!=typeof e?e:Array.prototype.slice.call(document.querySelectorAll(e),0):null}function selectorStringify(e){return e.getAttribute?"#"+e.getAttribute("id"):defaultStringify(e)}function selectorAllStringify(e){return e instanceof Array?e.map(function(e){return"#"+e.getAttribute("id")}).join(", "):defaultStringify(e)}function srcParse(e){return a("`src` property type is deprecated. Use `asset` instead."),assetParse(e)}function vecParse(e){return i.parse(e,this.default)}function isValidDefaultValue(e,t){return("audio"!==e||"string"==typeof t)&&(!("array"===e&&!Array.isArray(t))&&(("asset"!==e||"string"==typeof t)&&(("boolean"!==e||"boolean"==typeof t)&&(("color"!==e||"string"==typeof t)&&(("int"!==e||"number"==typeof t)&&(("number"!==e||"number"==typeof t)&&(("map"!==e||"string"==typeof t)&&(("model"!==e||"string"==typeof t)&&(("selector"!==e||"string"==typeof t)&&(("selectorAll"!==e||"string"==typeof t)&&(("src"!==e||"string"==typeof t)&&(("string"!==e||"string"==typeof t)&&(("time"!==e||"number"==typeof t)&&("vec2"===e?isValidDefaultCoordinate(t,2):"vec3"===e?isValidDefaultCoordinate(t,3):"vec4"!==e||isValidDefaultCoordinate(t,4)))))))))))))))}function isValidDefaultCoordinate(e,t){if(null===e)return!0;if("object"!=typeof e)return!1;if(Object.keys(e).length!==t)return!1;var r=e.x,i=e.y,n=e.z,o=e.w;return"number"==typeof r&&"number"==typeof i&&(!(t>2&&"number"!=typeof n)&&!(t>3&&"number"!=typeof o))}var i=e("../utils/coordinates"),n=e("debug"),o=n("core:propertyTypes:warn"),a=n("core:propertyTypes:warn"),s=t.exports.propertyTypes={},u=/[,> .[\]:]/;registerPropertyType("audio","",assetParse),registerPropertyType("array",[],arrayParse,arrayStringify),registerPropertyType("asset","",assetParse),registerPropertyType("boolean",!1,boolParse),registerPropertyType("color","#FFF",defaultParse,defaultStringify),registerPropertyType("int",0,intParse),registerPropertyType("number",0,numberParse),registerPropertyType("map","",assetParse),registerPropertyType("model","",assetParse),registerPropertyType("selector","",selectorParse,selectorStringify),registerPropertyType("selectorAll","",selectorAllParse,selectorAllStringify),registerPropertyType("src","",srcParse),registerPropertyType("string","",defaultParse,defaultStringify),registerPropertyType("time",0,intParse),registerPropertyType("vec2",{x:0,y:0},vecParse,i.stringify),registerPropertyType("vec3",{x:0,y:0,z:0},vecParse,i.stringify),registerPropertyType("vec4",{x:0,y:0,z:0,w:0},vecParse,i.stringify),t.exports.registerPropertyType=registerPropertyType,t.exports.isValidDefaultValue=isValidDefaultValue,t.exports.isValidDefaultCoordinate=isValidDefaultCoordinate},{"../utils/coordinates":192,debug:8}],129:[function(e,t,r){function getCanvasSize(e,t){return t?{height:e.parentElement.offsetHeight,width:e.parentElement.offsetWidth}:{height:window.innerHeight,width:window.innerWidth}}function requestFullscreen(e){(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen).apply(e)}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function shouldAntiAlias(e){return null!==e.getAttribute("antialias")?"true"===e.getAttribute("antialias"):!e.isMobile}var i=e("./metaTags").inject,n=e("./wakelock"),o=e("../a-register-element"),a=e("./scenes"),s=e("../system").systems,u=e("../../lib/three"),l=e("@tweenjs/tween.js"),c=e("../../utils/"),h=e("../a-entity"),d=e("../a-node"),f=e("./postMessage"),p=c.bind,m=c.device.isIOS(),g=c.device.isMobile(),y=o.registerElement,v=c.debug("core:a-scene:warn");t.exports.AScene=y("a-scene",{prototype:Object.create(h.prototype,{defaultComponents:{value:{canvas:"",inspector:"","keyboard-shortcuts":"",screenshot:"","vr-mode-ui":""}},createdCallback:{value:function(){this.isIOS=m,this.isMobile=g,this.isScene=!0,this.object3D=new u.Scene,this.render=p(this.render,this),this.systems={},this.time=0,this.init()}},init:{value:function(){this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.renderTarget=null,this.addEventListener("render-target-loaded",function(){this.setupRenderer(),this.resize()}),this.addFullScreenStyles(),f(this)},writable:!0},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-html"),document.body.classList.add("a-body"),this.classList.add("fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-html"),document.body.classList.remove("a-body"),this.classList.remove("fullscreen")}},attachedCallback:{value:function(){var e,t=this;i(this),n(this),this.initSystems(),e=p(this.resize,this),window.addEventListener("load",e),window.addEventListener("resize",e),this.play(),a.push(this),this.onVRPresentChangeBound=p(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.addEventListener("vrdisplayactivate",function(){t.enterVR()}),window.addEventListener("vrdisplaydeactivate",function(){t.exitVR()})},writable:window.debug},initSystems:{value:function(){Object.keys(s).forEach(p(this.initSystem,this))}},initSystem:{value:function(e){this.systems[e]||(this.systems[e]=new s[e](this))}},detachedCallback:{value:function(){var e;this.effect&&this.effect.cancelAnimationFrame?this.effect.cancelAnimationFrame(this.animationFrameID):window.cancelAnimationFrame(this.animationFrameID),this.animationFrameID=null,e=a.indexOf(this),a.splice(e,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound)}},addBehavior:{value:function(e){var t=this,r=this.behaviors;Object.keys(r).forEach(function(r){if(e[r]){var i=t.behaviors[r];-1===i.indexOf(e)&&i.push(e)}})}},checkHeadsetConnected:{value:c.device.checkHeadsetConnected,writable:window.debug},enterVR:{value:function(e){function enterVRSuccess(){t.addState("vr-mode"),t.emit("enter-vr",{target:t}),t.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),t.addFullScreenStyles(),t.isMobile||t.checkHeadsetConnected()||requestFullscreen(t.canvas),t.resize()}function enterVRFailure(e){throw e&&e.message?new Error("Failed to enter VR mode (`requestPresent`): "+e.message):new Error("Failed to enter VR mode (`requestPresent`).")}var t=this;return this.is("vr-mode")?Promise.resolve("Already in VR."):e||!this.checkHeadsetConnected()&&!this.isMobile?(enterVRSuccess(),Promise.resolve()):this.effect.requestPresent().then(enterVRSuccess,enterVRFailure)}},exitVR:{value:function(e){function exitVRSuccess(){t.removeState("vr-mode"),t.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),t.hasAttribute("embedded")&&t.removeFullScreenStyles(),t.resize(),t.isIOS&&c.forceCanvasResizeSafariMobile(this.canvas),t.emit("exit-vr",{target:t})}function exitVRFailure(e){throw e&&e.message?new Error("Failed to exit VR mode (`exitPresent`): "+e.message):new Error("Failed to exit VR mode (`exitPresent`).")}var t=this;return this.is("vr-mode")?(exitFullscreen(),e||!this.checkHeadsetConnected()&&!this.isMobile?(exitVRSuccess(),Promise.resolve()):this.effect.exitPresent().then(exitVRSuccess,exitVRFailure)):Promise.resolve("Not in VR.")}},onVRPresentChange:{value:function(e){if(e.display.isPresenting)return void this.enterVR(!0);this.exitVR(!0)}},getAttribute:{value:function(e){var t=this.systems[e];return t?t.data:h.prototype.getAttribute.call(this,e)}},getComputedAttribute:{value:function(e){v("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(e)}},getDOMAttribute:{value:function(e){var t=this.systems[e];return t?t.data:h.prototype.getDOMAttribute.call(this,e)}},setAttribute:{value:function(e,t,r){var i=this.systems[e];if(i)return d.prototype.setAttribute.call(this,e,t),void i.updateProperties(t);h.prototype.setAttribute.call(this,e,t,r)}},removeBehavior:{value:function(e){var t=this,r=this.behaviors;Object.keys(r).forEach(function(r){if(e[r]){var i=t.behaviors[r],n=i.indexOf(e);-1!==n&&i.splice(n,1)}})}},resize:{value:function(){var e,t=this.camera,r=this.canvas,i=this.getAttribute("embedded")&&!this.is("vr-mode");!t||!r||this.is("vr-mode")&&g||(e=getCanvasSize(r,i),t.aspect=e.width/e.height,t.updateProjectionMatrix(),this.renderer.setSize(e.width,e.height))},writable:window.debug},setupRenderer:{value:function(){var e=this.renderer=new u.WebGLRenderer({canvas:this.canvas,antialias:shouldAntiAlias(this),alpha:!0});e.setPixelRatio(window.devicePixelRatio),e.sortObjects=!1,this.effect=new u.VREffect(e),this.effect.autoSubmitFrame=!1},writable:window.debug},play:{value:function(){var e=this;if(this.renderStarted)return void h.prototype.play.call(this);this.addEventListener("loaded",function(){function startRender(e){e.renderStarted||(e.resize(),e.renderer&&(window.performance&&window.performance.mark("render-started"),e.clock=new u.Clock,e.render(),e.renderStarted=!0,e.emit("renderstart")))}if(h.prototype.play.call(this),this.camera)return void startRender(this);this.addEventListener("camera-set-active",function(){startRender(this)})}),setTimeout(function(){h.prototype.load.call(e)})}},reload:{value:function(e){function play(){t.isPlaying&&h.prototype.play.call(t)}var t=this;e&&this.pause(),this.innerHTML=this.originalHTML,this.init(),d.prototype.load.call(this,play)}},updateComponent:{value:function(e){e in s||h.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(e,t){var r=this.systems;l.update(),this.behaviors.tick.forEach(function(r){r.el.isPlaying&&r.tick(e,t)}),Object.keys(r).forEach(function(i){r[i].tick&&r[i].tick(e,t)})}},tock:{value:function(e,t){var r=this.systems;this.behaviors.tock.forEach(function(r){r.el.isPlaying&&r.tock(e,t)}),Object.keys(r).forEach(function(i){r[i].tock&&r[i].tock(e,t)})}},render:{value:function(){var e=this.effect,t=1e3*this.clock.getDelta();this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,t),this.animationFrameID=e.requestAnimationFrame(this.render),e.render(this.object3D,this.camera,this.renderTarget),this.isPlaying&&this.tock(this.time,t),this.effect.submitFrame()},writable:!0}})}),t.exports.shouldAntiAlias=shouldAntiAlias},{"../../lib/three":174,"../../utils/":197,"../a-entity":122,"../a-node":124,"../a-register-element":125,"../system":136,"./metaTags":130,"./postMessage":131,"./scenes":132,"./wakelock":133,"@tweenjs/tween.js":1}],130:[function(e,t,r){function Meta(e){return{tagName:"meta",attributes:e,exists:function(){return document.querySelector('meta[name="'+e.name+'"]')}}}function createTag(e){if(e&&e.tagName){var t=document.createElement(e.tagName);return t.setAttribute(i.AFRAME_INJECTED,""),n(t,e.attributes)}}var i=e("../../constants/"),n=e("../../utils").extend,o=t.exports.MOBILE_HEAD_TAGS=[Meta({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"}),Meta({name:"mobile-web-app-capable",content:"yes"}),Meta({name:"theme-color",content:"black"})],a=[Meta({name:"apple-mobile-web-app-capable",content:"yes"}),Meta({name:"apple-mobile-web-app-status-bar-style",content:"black"}),function(e){return{tagName:"link",attributes:e,exists:function(){return document.querySelector('link[rel="'+e.rel+'"]')}}}({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];t.exports.inject=function(e){function createAndInjectTag(e){e&&!e.exists()&&(t=createTag(e))&&(i?i.parentNode.insertBefore(t,i):r.appendChild(t),n.push(t))}var t,r=document.head,i=r.querySelector("script"),n=[];return o.forEach(createAndInjectTag),e.isIOS&&a.forEach(createAndInjectTag),n}},{"../../constants/":117,"../../utils":197}],131:[function(e,t,r){function postMessageAPIHandler(e){var t=this;if(e.data)switch(e.data.type){case"vr":switch(e.data.data){case"enter":t.enterVR();break;case"exit":t.exitVR()}}}var i=e("../../utils/bind"),n=e("../../utils/").isIframed;t.exports=function(e){n()&&window.addEventListener("message",i(postMessageAPIHandler,e))}},{"../../utils/":197,"../../utils/bind":191}],132:[function(e,t,r){t.exports=[]},{}],133:[function(e,t,r){var i=e("../../../vendor/wakelock/wakelock");t.exports=function(e){if(e.isMobile){var t=e.wakelock=new i;e.addEventListener("enter-vr",function(){t.request()}),e.addEventListener("exit-vr",function(){t.release()})}}},{"../../../vendor/wakelock/wakelock":207}],134:[function(e,t,r){function isSingleProperty(e){return"type"in e?"string"==typeof e.type:"default"in e}function processPropertyDefinition(e,t){var r,i=e.default,n=e.type;return e.type?"bool"===e.type?n="boolean":"float"===e.type&&(n="number"):n=void 0!==i&&-1!==["boolean","number"].indexOf(typeof i)?typeof i:Array.isArray(i)?"array":"string",r=s[n],r||u("Unknown property type for component `"+t+"`: "+n),e.parse=e.parse||r.parse,e.stringify=e.stringify||r.stringify,e.type=n,"default"in e?a(n,i)||u("Default value `"+i+"` does not match type `"+n+"` in component `"+t+"`"):e.default=r.default,e}function parseProperty(e,t){return void 0!==e&&null!==e&&""!==e||(e=t.default,Array.isArray(e)&&(e=e.slice())),t.parse(e,t.default)}function stringifyProperty(e,t){return"object"!=typeof e?e:t&&null!==e?t.stringify(e):JSON.stringify(e)}var i=e("../utils/"),n=e("./propertyTypes"),o=i.debug,a=n.isValidDefaultValue,s=n.propertyTypes,u=o("core:schema:warn");t.exports.isSingleProperty=isSingleProperty,t.exports.process=function(e,t){return isSingleProperty(e)?processPropertyDefinition(e,t):(Object.keys(e).forEach(function(r){e[r]=processPropertyDefinition(e[r],t)}),e)},t.exports.processPropertyDefinition=processPropertyDefinition,t.exports.parseProperties=function(e,t,r,i,n){var o=Object.keys(r?e:t);return null===e||"object"!=typeof e?e:(Object.keys(e).forEach(function(e){t[e]||n||u("Unknown property `"+e+"` for component/system `"+i+"`.")}),o.forEach(function(r){var i=t[r],n=e[r];t[r]&&(e[r]=parseProperty(n,i))}),e)},t.exports.parseProperty=parseProperty,t.exports.stringifyProperties=function(e,t){var r={};return Object.keys(e).forEach(function(i){var n=t[i],o=e[i],a=o;"object"==typeof a&&(a=stringifyProperty(o,n),n||u("Unknown component property: "+i)),r[i]=a}),r},t.exports.stringifyProperty=stringifyProperty},{"../utils/":197,"./propertyTypes":128}],135:[function(e,t,r){var i=e("./schema"),n=i.process,o=t.exports.shaders={},a=t.exports.shaderNames=[],s=e("../lib/three"),u=e("../utils"),l={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},c=t.exports.Shader=function(){};c.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(e){return this.attributes=this.initVariables(e,"attribute"),this.uniforms=this.initVariables(e,"uniform"),this.material=new(this.raw?s.RawShaderMaterial:s.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(e,t){var r={},i=this.schema;return Object.keys(i).forEach(function(e){if(i[e].is===t){var n=l[i[e].type];r[e]={type:n,value:void 0}}}),r},update:function(e){this.updateVariables(e,"attribute"),this.updateVariables(e,"uniform")},updateVariables:function(e,t){var r=this,i="uniform"===t?this.uniforms:this.attributes,n=this.schema;Object.keys(e).forEach(function(o){var a;if(n[o]&&n[o].is===t){if("map"===n[o].type){if(!i[o]||i[o].value===e[o])return;return a="_texture_"+o,r.el.addEventListener("materialtextureloaded",function(){i[o].value=r.material[a],i[o].needsUpdate=!0}),void u.material.updateMapMaterialFromData(a,o,r,e)}i[o].value=r.parseValue(n[o].type,e[o]),i[o].needsUpdate=!0}})},parseValue:function(e,t){var r;switch(e){case"vec2":return new s.Vector2(t.x,t.y);case"vec3":return new s.Vector3(t.x,t.y,t.z);case"vec4":return new s.Vector4(t.x,t.y,t.z,t.w);case"color":return r=new s.Color(t),new s.Vector3(r.r,r.g,r.b);case"map":return s.ImageUtils.loadTexture(t);default:return t}}},t.exports.registerShader=function(e,t){var r,i={};if(Object.keys(t).forEach(function(e){i[e]={value:t[e],writable:!0}}),o[e])throw new Error("The shader "+e+" has been already registered");return r=function(){c.call(this)},r.prototype=Object.create(c.prototype,i),r.prototype.name=e,r.prototype.constructor=r,o[e]={Shader:r,schema:n(r.prototype.schema)},a.push(e),r}},{"../lib/three":174,"../utils":197,"./schema":134}],136:[function(e,t,r){var i=e("./component"),n=e("./schema"),o=e("../utils/"),a=n.parseProperties,s=n.parseProperty,u=n.process,l=n.isSingleProperty,c=o.styleParser,h=t.exports.systems={},d=t.exports.System=function(e){var t=i&&i.components[this.name];this.el=e,this.sceneEl=e,t&&(t.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};d.prototype={schema:{},init:function(){},update:function(e){},updateProperties:function(e){var t=this.data;Object.keys(n).length&&(this.buildData(e),this.update(t))},buildData:function(e){var t=this.schema;Object.keys(t).length&&(e=e||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),l(t)?this.data=s(e,t):this.data=a(c.parse(e)||{},t))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},t.exports.registerSystem=function(e,t){var r,i,n={},a=o.findAllScenes(document);if(Object.keys(t).forEach(function(e){n[e]={value:t[e],writable:!0}}),h[e])throw new Error("The system `"+e+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(i=function(e){d.call(this,e)},i.prototype=Object.create(d.prototype,n),i.prototype.name=e,i.prototype.constructor=i,i.prototype.schema=o.extend(u(i.prototype.schema)),h[e]=i,r=0;r<a.length;r++)a[r].initSystem(e)}},{"../utils/":197,"./component":126,"./schema":134}],137:[function(e,t,r){e("./pivot")},{"./pivot":138}],138:[function(e,t,r){var i=e("../../core/component").registerComponent,n=e("../../lib/three"),o=new n.Vector3,a=new n.Vector3;i("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var e=this.data,t=this.el,r=t.object3D.parent,i=t.object3D,s=new n.Group;o.copy(i.position),a.copy(i.rotation),r.remove(i),s.add(i),r.add(s),t.object3D=s,i.position.set(-1*e.x,-1*e.y,-1*e.z),s.position.set(e.x+o.x,e.y+o.y,e.z+o.z),s.rotation.copy(i.rotation),i.rotation.set(0,0,0)}})},{"../../core/component":126,"../../lib/three":174}],139:[function(e,t,r){function addMapping(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===e&&(t="material-fog"),"visible"===e&&(t="material-visible"),a[t]="material."+e}var i=e("../../core/component").components,n=e("../../core/shader").shaders,o=e("../../utils/"),a={};Object.keys(i.material.schema).forEach(addMapping),Object.keys(n.standard.schema).forEach(addMapping),t.exports=function(){return{defaultComponents:{material:{}},mappings:o.extend({},a)}}},{"../../core/component":126,"../../core/shader":135,"../../utils/":197}],140:[function(e,t,r){e("./primitives/a-camera"),e("./primitives/a-collada-model"),e("./primitives/a-cursor"),e("./primitives/a-curvedimage"),e("./primitives/a-gltf-model"),e("./primitives/a-image"),e("./primitives/a-light"),e("./primitives/a-link"),e("./primitives/a-obj-model"),e("./primitives/a-sky"),e("./primitives/a-sound"),e("./primitives/a-text"),e("./primitives/a-video"),e("./primitives/a-videosphere"),e("./primitives/meshPrimitives")},{"./primitives/a-camera":142,"./primitives/a-collada-model":143,"./primitives/a-cursor":144,"./primitives/a-curvedimage":145,"./primitives/a-gltf-model":146,"./primitives/a-image":147,"./primitives/a-light":148,"./primitives/a-link":149,"./primitives/a-obj-model":150,"./primitives/a-sky":151,"./primitives/a-sound":152,"./primitives/a-text":153,"./primitives/a-video":154,"./primitives/a-videosphere":155,"./primitives/meshPrimitives":156}],141:[function(e,t,r){function addComponentMapping(e,t){var r=n[e].schema;Object.keys(r).map(function(r){var i=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==t[i]&&(i=e+"-"+r),t[i]=e+"."+r})}function definePrimitive(e,r,i){i=i||{},Object.keys(r).map(function(e){addComponentMapping(e,i)}),t.exports.registerPrimitive(e,a.extendDeep({},null,{defaultComponents:r,mappings:i}))}var i=e("../../core/a-entity"),n=e("../../core/component").components,o=e("../../core/a-register-element").registerElement,a=e("../../utils/"),s=a.debug,u=a.entity.setComponentProperty,l=s("extras:primitives:debug"),c=s("extras:primitives:warn"),h=t.exports.primitives={};t.exports.registerPrimitive=function(e,t){e=e.toLowerCase(),l("Registering <%s>",e),t.defaultAttributes&&c("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var r=o(e,{prototype:Object.create(i.prototype,{defaultComponentsFromPrimitive:{value:t.defaultComponents||t.defaultAttributes||{}},deprecated:{value:t.deprecated||null},deprecatedMappings:{value:t.deprecatedMappings||{}},mappings:{value:t.mappings||{}},createdCallback:{value:function(){t.deprecated&&console.warn(t.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var e=this.mappings,t=this;Object.keys(e).forEach(function(r){var i;r!==r.toLowerCase()&&c("Mapping keys should be specified in lower case. The mapping key "+r+" may not be recognized"),n[r]&&(i=e[r].replace(".","-"),e[i]=e[r],delete e[r],console.warn("The primitive "+t.tagName.toLowerCase()+" has a mapping collision. The attribute "+r+" has the same name as a registered component and has been renamed to "+i))})}},getExtraComponents:{value:function(){function extend(e,t){return isUndefined(e)?copy(t):isUndefined(t)?copy(e):isPureObject(e)&&isPureObject(t)?a.extendDeep(e,t):copy(t)}function isUndefined(e){return void 0===e}function copy(e){return isPureObject(e)?a.extendDeep({},e):e}function isPureObject(e){return null!==e&&e.constructor===Object}var e,t,r,i,n,o,s=this;for(t=a.clone(this.defaultComponentsFromPrimitive),n=this.getAttribute("mixin"),n&&(n=n.trim().split(" "),n.forEach(function(e){var r=s.sceneEl.querySelector("#"+e).componentCache;Object.keys(r).forEach(function(e){t[e]=extend(t[e],r[e])})})),r=0;r<this.attributes.length;r++)e=this.attributes[r],(i=this.mappings[e.name])&&(o=a.entity.getComponentPropertyPath(i),o.constructor===Array?(t[o[0]]=t[o[0]]||{},t[o[0]][o[1]]=e.value):t[o]=e.value);return t}},attributeChangedCallback:{value:function(e,t,r){var i=this.mappings[e];e in this.deprecatedMappings&&console.warn(this.deprecatedMappings[e]),e&&i&&u(this,i,r)}}})});return h[e]=r,r},t.exports.definePrimitive=definePrimitive},{"../../core/a-entity":122,"../../core/a-register-element":125,"../../core/component":126,"../../utils/":197}],142:[function(e,t,r){var i=e("../../../constants/").DEFAULT_CAMERA_HEIGHT;(0,e("../primitives").registerPrimitive)("a-camera",{defaultComponents:{camera:{userHeight:i},"look-controls":{},"wasd-controls":{}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag","user-height":"camera.userHeight",zoom:"camera.zoom"},deprecatedMappings:{"cursor-color":"a-camera[cursor-color] has been removed. Use a-cursor[color] instead.","cursor-maxdistance":"a-camera[cursor-maxdistance] has been removed. Use a-cursor[max-distance] instead.","cursor-offset":"a-camera[cursor-offset] has been removed. Use a-cursor[position] instead.","cursor-opacity":"a-camera[cursor-offset] has been removed. Use a-cursor[opacity] instead.","cursor-scale":"a-camera[cursor-scale] has been removed. Use a-cursor[scale] instead.","cursor-visible":"a-camera[cursor-visible] has been removed. Use a-cursor[visible] instead."}})},{"../../../constants/":117,"../primitives":141}],143:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-collada-model",{mappings:{src:"collada-model"}})},{"../primitives":141}],144:[function(e,t,r){var i=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-cursor",e("../../../utils/").extendDeep({},i(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":197,"../getMeshMixin":139,"../primitives":141}],145:[function(e,t,r){var i=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-curvedimage",e("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":197,"../getMeshMixin":139,"../primitives":141}],146:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":141}],147:[function(e,t,r){var i=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-image",e("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":197,"../getMeshMixin":139,"../primitives":141}],148:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":141}],149:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-link",{defaultComponents:{},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":141}],150:[function(e,t,r){var i=e("../getMeshMixin")();(0,e("../primitives").registerPrimitive)("a-obj-model",e("../../../utils/").extendDeep({},i,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":197,"../getMeshMixin":139,"../primitives":141}],151:[function(e,t,r){var i=e("../getMeshMixin"),n=e("../primitives").registerPrimitive,o=e("../../../utils/"),a=e("./meshPrimitives");n("a-sky",o.extendDeep({},i(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:o.extendDeep({},a["a-sphere"].prototype.mappings)}))},{"../../../utils/":197,"../getMeshMixin":139,"../primitives":141,"./meshPrimitives":156}],152:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":141}],153:[function(e,t,r){(0,e("../primitives").definePrimitive)("a-text",{text:{anchor:"align",width:5}})},{"../primitives":141}],154:[function(e,t,r){var i=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-video",e("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":197,"../getMeshMixin":139,"../primitives":141}],155:[function(e,t,r){var i=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-videosphere",e("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":197,"../getMeshMixin":139,"../primitives":141}],156:[function(e,t,r){function unCamelCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var i=e("../getMeshMixin"),n=e("../../../core/geometry").geometries,o=e("../../../core/geometry").geometryNames,a=e("../primitives").registerPrimitive,s=e("../../../utils/"),u=t.exports={};o.forEach(function(e){var t=n[e],r=unCamelCase(e),o={};Object.keys(t.schema).forEach(function(e){o[unCamelCase(e)]="geometry."+e});var l="a-"+r,c=a(l,s.extendDeep({},i(),{defaultComponents:{geometry:{primitive:e}},mappings:o}));u[l]=c})},{"../../../core/geometry":127,"../../../utils/":197,"../getMeshMixin":139,"../primitives":141}],157:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three");i("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new n.BoxGeometry(e.width,e.height,e.depth)}})},{"../core/geometry":127,"../lib/three":174}],158:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three"),o=n.Math.degToRad;i("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new n.CircleGeometry(e.radius,e.segments,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":127,"../lib/three":174}],159:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three"),o=n.Math.degToRad;i("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new n.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":127,"../lib/three":174}],160:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three"),o=n.Math.degToRad;i("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new n.CylinderGeometry(e.radius,e.radius,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":127,"../lib/three":174}],161:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three");i("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new n.DodecahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":127,"../lib/three":174}],162:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three");i("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new n.IcosahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":127,"../lib/three":174}],163:[function(e,t,r){e("./box.js"),e("./circle.js"),e("./cone.js"),e("./cylinder.js"),e("./dodecahedron.js"),e("./icosahedron.js"),e("./octahedron.js"),e("./plane.js"),e("./ring.js"),e("./sphere.js"),e("./tetrahedron.js"),e("./torus.js"),e("./torusKnot.js"),e("./triangle.js")},{"./box.js":157,"./circle.js":158,"./cone.js":159,"./cylinder.js":160,"./dodecahedron.js":161,"./icosahedron.js":162,"./octahedron.js":164,"./plane.js":165,"./ring.js":166,"./sphere.js":167,"./tetrahedron.js":168,"./torus.js":169,"./torusKnot.js":170,"./triangle.js":171}],164:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three");i("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new n.OctahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":127,"../lib/three":174}],165:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three");i("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new n.PlaneGeometry(e.width,e.height,e.segmentsWidth,e.segmentsHeight)}})},{"../core/geometry":127,"../lib/three":174}],166:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three"),o=n.Math.degToRad;i("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new n.RingGeometry(e.radiusInner,e.radiusOuter,e.segmentsTheta,e.segmentsPhi,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":127,"../lib/three":174}],167:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three"),o=n.Math.degToRad;i("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(e){this.geometry=new n.SphereGeometry(e.radius,e.segmentsWidth,e.segmentsHeight,o(e.phiStart),o(e.phiLength),o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":127,"../lib/three":174}],168:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three");i("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new n.TetrahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":127,"../lib/three":174}],169:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three"),o=n.Math.degToRad;i("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(e){this.geometry=new n.TorusGeometry(e.radius,2*e.radiusTubular,e.segmentsRadial,e.segmentsTubular,o(e.arc))}})},{"../core/geometry":127,"../lib/three":174}],170:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three");i("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(e){this.geometry=new n.TorusKnotGeometry(e.radius,2*e.radiusTubular,e.segmentsTubular,e.segmentsRadial,e.p,e.q)}})},{"../core/geometry":127,"../lib/three":174}],171:[function(e,t,r){var i=e("../core/geometry").registerGeometry,n=e("../lib/three"),o=new n.Quaternion,a=new n.Vector3(0,0,1),s=new n.Vector2,u=new n.Vector2,l=new n.Vector2;i("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(e){var t,r,i,c,h,d;i=new n.Triangle,i.a.set(e.vertexA.x,e.vertexA.y,e.vertexA.z),i.b.set(e.vertexB.x,e.vertexB.y,e.vertexB.z),i.c.set(e.vertexC.x,e.vertexC.y,e.vertexC.z),r=i.normal(),o.setFromUnitVectors(r,a),c=i.a.clone().applyQuaternion(o),h=i.b.clone().applyQuaternion(o),d=i.c.clone().applyQuaternion(o),s.set(Math.min(c.x,h.x,d.x),Math.min(c.y,h.y,d.y)),u.set(Math.max(c.x,h.x,d.x),Math.max(c.y,h.y,d.y)),l.set(0,0).subVectors(u,s),c=(new n.Vector2).subVectors(c,s).divide(l),h=(new n.Vector2).subVectors(h,s).divide(l),d=(new n.Vector2).subVectors(d,s).divide(l),t=this.geometry=new n.Geometry,t.vertices.push(i.a),t.vertices.push(i.b),t.vertices.push(i.c),t.faces.push(new n.Face3(0,1,2,r)),t.faceVertexUvs[0]=[[c,h,d]]}})},{"../core/geometry":127,"../lib/three":174}],172:[function(e,t,r){var i=e("./utils/"),n=i.debug,o=n("A-Frame:error"),a=n("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&a("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),"file:"===window.location.protocol&&o("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),window.Promise=window.Promise||e("promise-polyfill"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.WebVRConfig=window.WebVRConfig||{BUFFER_SCALE:1,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,TOUCH_PANNER_DISABLED:!0,MOUSE_KEYBOARD_CONTROLS_DISABLED:!0},i.device.isIOSOlderThan10(window.navigator.userAgent)&&(window.WebVRConfig.BUFFER_SCALE=1/window.devicePixelRatio),e("webvr-polyfill"),e("present"),i.device.isBrowserEnvironment&&(e("./style/aframe.css"),e("./style/rStats.css"));var s=e("./core/scene/a-scene").AScene,u=e("./core/component").components,l=e("./core/component").registerComponent,c=e("./core/geometry").registerGeometry,h=e("./extras/primitives/primitives").registerPrimitive,d=e("./core/shader").registerShader,f=e("./core/system").registerSystem,p=e("./core/shader").shaders,m=e("./core/system").systems,g=window.THREE=e("./lib/three"),y=window.TWEEN=e("@tweenjs/tween.js"),v=e("../package");e("./components/index"),e("./geometries/index"),e("./shaders/index"),e("./systems/index");var b=e("./core/a-node"),x=e("./core/a-entity");e("./core/a-animation"),e("./core/a-assets"),e("./core/a-cubemap"),e("./core/a-mixin"),e("./extras/components/"),e("./extras/primitives/"),console.log("A-Frame Version: 0.6.1 (Date 19-07-2017, Commit #83eb39b)"),console.log("three Version:",v.dependencies.three),console.log("WebVR Polyfill Version:",v.dependencies["webvr-polyfill"]),t.exports=window.AFRAME={AComponent:e("./core/component").Component,AEntity:x,ANode:b,AScene:s,components:u,geometries:e("./core/geometry").geometries,registerComponent:l,registerElement:e("./core/a-register-element").registerElement,registerGeometry:c,registerPrimitive:h,registerShader:d,registerSystem:f,primitives:{getMeshMixin:e("./extras/primitives/getMeshMixin"),primitives:e("./extras/primitives/primitives").primitives},scenes:e("./core/scene/scenes"),schema:e("./core/schema"),shaders:p,systems:m,THREE:g,TWEEN:y,utils:i,version:v.version}},{"../package":77,"./components/index":86,"./core/a-animation":119,"./core/a-assets":120,"./core/a-cubemap":121,"./core/a-entity":122,"./core/a-mixin":123,"./core/a-node":124,"./core/a-register-element":125,"./core/component":126,"./core/geometry":127,"./core/scene/a-scene":129,"./core/scene/scenes":132,"./core/schema":134,"./core/shader":135,"./core/system":136,"./extras/components/":137,"./extras/primitives/":140,"./extras/primitives/getMeshMixin":139,"./extras/primitives/primitives":141,"./geometries/index":163,"./lib/three":174,"./shaders/index":176,"./style/aframe.css":181,"./style/rStats.css":182,"./systems/index":186,"./utils/":197,"@tweenjs/tween.js":1,present:33,"promise-polyfill":35,"webvr-polyfill":62}],173:[function(e,t,r){window.aframeStats=function(e){function _update(){t("te").set(getEntityCount()),window.performance.getEntriesByName&&t("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function getEntityCount(){var e=r.querySelectorAll("*");return Array.prototype.slice.call(e).filter(function(e){return e.isEntity}),e.length}function _start(){}function _end(){}function _attach(e){t=e}var t=null,r=e;return{update:_update,start:_start,end:_end,attach:_attach,values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},"object"==typeof t&&(t.exports={aframeStats:window.aframeStats})},{}],174:[function(e,t,r){(function(r){var i=r.THREE=e("three");i.TextureLoader&&(i.TextureLoader.prototype.crossOrigin="anonymous"),i.ImageLoader&&(i.ImageLoader.prototype.crossOrigin="anonymous"),i.Cache&&(i.Cache.enabled=!0),e("three/examples/js/loaders/GLTFLoader"),e("three/examples/js/loaders/OBJLoader"),e("three/examples/js/loaders/MTLLoader"),e("three/examples/js/loaders/ColladaLoader"),e("../../vendor/VRControls"),e("../../vendor/VREffect"),i.ColladaLoader.prototype.crossOrigin="anonymous",i.GLTFLoader.prototype.crossOrigin="anonymous",i.MTLLoader.prototype.crossOrigin="anonymous",i.OBJLoader.prototype.crossOrigin="anonymous",t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../vendor/VRControls":202,"../../vendor/VREffect":203,three:42,"three/examples/js/loaders/ColladaLoader":43,"three/examples/js/loaders/GLTFLoader":44,"three/examples/js/loaders/MTLLoader":45,"three/examples/js/loaders/OBJLoader":46}],175:[function(e,t,r){function getMaterialData(e){return{fog:e.fog,color:new n.Color(e.color),wireframe:e.wireframe,wireframeLinewidth:e.wireframeLinewidth}}var i=e("../core/shader").registerShader,n=e("../lib/three"),o=e("../utils/");t.exports.Shader=i("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.textureSrc=null,this.material=new n.MeshBasicMaterial(getMaterialData(e)),o.material.updateMap(this,e)},update:function(e){this.updateMaterial(e),o.material.updateMap(this,e)},updateMaterial:function(e){var t=this.material;e=getMaterialData(e),Object.keys(e).forEach(function(r){t[r]=e[r]})}})},{"../core/shader":135,"../lib/three":174,"../utils/":197}],176:[function(e,t,r){e("./flat"),e("./standard"),e("./sdf"),e("./msdf"),e("./ios10hls")},{"./flat":175,"./ios10hls":177,"./msdf":178,"./sdf":179,"./standard":180}],177:[function(e,t,r){var i=e("../core/shader").registerShader;t.exports.Shader=i("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join("\n")})},{"../core/shader":135}],178:[function(e,t,r){var i=e("../core/shader").registerShader;t.exports.Shader=i("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","uniform sampler2D map;","uniform vec3 color;","uniform float opacity;","uniform float alphaTest;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","void main() {","  vec3 sample = 1.0 - texture2D(map, vUV).rgb;","  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;","  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join("\n")})},{"../core/shader":135}],179:[function(e,t,r){var i=e("../core/shader").registerShader;t.exports.Shader=i("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","uniform sampler2D map;","uniform vec3 color;","uniform float opacity;","uniform float alphaTest;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#else","float aastep(float value, float afwidth) {","  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","}","#endif","void main() {","#ifdef GL_OES_standard_derivatives","  vec2 uv = vUV;","  vec4 texColor = texture2D(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  else if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture2D(map, box.xy).a, width)","      + contour(texture2D(map, box.zw).a, width)","      + contour(texture2D(map, box.xw).a, width)","      + contour(texture2D(map, box.zy).a, width)","    )) / 3.0;","  }","  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","#else","  vec4 texColor = texture2D(map, vUV);","  float value = texColor.a;","  float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","  float alpha = aastep(value, afwidth);","  float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","  if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","  alpha = alpha * ratio + (1.0 - ratio) * value;","  if (ratio < 1.0)","    if (alpha <= DISCARD_ALPHA) { discard; return; }","#endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join("\n")})},{"../core/shader":135}],180:[function(e,t,r){function getMaterialData(e){var t={color:new n.Color(e.color),fog:e.fog,metalness:e.metalness,roughness:e.roughness,wireframe:e.wireframe,wireframeLinewidth:e.wireframeLinewidth};return e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}var i=e("../core/shader").registerShader,n=e("../lib/three"),o=e("../utils/"),a=new n.CubeTextureLoader,s={};t.exports.Shader=i("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.material=new n.MeshStandardMaterial(getMaterialData(e)),o.material.updateMap(this,e),e.normalMap&&o.material.updateDistortionMap("normal",this,e),e.displacementMap&&o.material.updateDistortionMap("displacement",this,e),e.ambientOcclusionMap&&o.material.updateDistortionMap("ambientOcclusion",this,e),this.updateEnvMap(e)},update:function(e){this.updateMaterial(e),o.material.updateMap(this,e),e.normalMap&&o.material.updateDistortionMap("normal",this,e),e.displacementMap&&o.material.updateDistortionMap("displacement",this,e),e.ambientOcclusionMap&&o.material.updateDistortionMap("ambientOcclusion",this,e),this.updateEnvMap(e)},updateMaterial:function(e){var t=this.material;e=getMaterialData(e),Object.keys(e).forEach(function(r){t[r]=e[r]})},updateEnvMap:function(e){var t=this,r=this.material,i=e.envMap,u=e.sphericalEnvMap;return!i&&!u||this.isLoadingEnvMap?(r.envMap=null,void(r.needsUpdate=!0)):(this.isLoadingEnvMap=!0,u?void this.el.sceneEl.systems.material.loadTexture(u,{src:u},function(e){t.isLoadingEnvMap=!1,e.mapping=n.SphericalReflectionMapping,r.envMap=e,o.material.handleTextureEvents(t.el,e),r.needsUpdate=!0}):s[i]?void s[i].then(function(e){t.isLoadingEnvMap=!1,r.envMap=e,o.material.handleTextureEvents(t.el,e),r.needsUpdate=!0}):void(s[i]=new Promise(function(e){o.srcLoader.validateCubemapSrc(i,function(i){a.load(i,function(i){t.isLoadingEnvMap=!1,r.envMap=i,o.material.handleTextureEvents(t.el,i),e(i)})})})))}})},{"../core/shader":135,"../lib/three":174,"../utils/":197}],181:[function(e,t,r){var i=".a-html{bottom:0;left:0;position:fixed;right:0;top:0}.a-body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.a-canvas.a-grab-cursor:active,.a-grabbing{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}// Class is removed when doing <a-scene embedded>. a-scene.fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:999999!important;position:fixed!important}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-vr.embedded{right:5px;bottom:5px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;cursor:pointer;min-width:50px;min-height:30px;padding-right:5%;padding-top:4%;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}";e("browserify-css").createStyle(i,{href:"src/style/aframe.css"}),t.exports=i},{"browserify-css":5}],182:[function(e,t,r){var i=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";e("browserify-css").createStyle(i,{href:"src/style/rStats.css"}),t.exports=i},{"browserify-css":5}],183:[function(e,t,r){function removeDefaultCamera(e){var t;e.camera&&(t=e.querySelector("["+a+"]"))&&e.removeChild(t)}var i=e("../utils/bind"),n=e("../constants/"),o=e("../core/system").registerSystem,a="data-aframe-default-camera";t.exports.System=o("camera",{init:function(){this.activeCameraEl=null,this.sceneEl.addEventListener("loaded",i(this.setupDefaultCamera,this))},setupDefaultCamera:function(){var e,t=this.sceneEl;if(t.camera)return void t.emit("camera-ready",{cameraEl:t.camera.el});e=document.createElement("a-entity"),e.setAttribute("position","0 0 0"),e.setAttribute(a,""),e.setAttribute("camera",{active:!0,userHeight:n.DEFAULT_CAMERA_HEIGHT}),e.setAttribute("wasd-controls",""),e.setAttribute("look-controls",""),e.setAttribute(n.AFRAME_INJECTED,""),t.appendChild(e),t.addEventListener("enter-vr",this.removeDefaultOffset),t.addEventListener("exit-vr",this.addDefaultOffset),t.emit("camera-ready",{cameraEl:e})},disableActiveCamera:function(){var e=this.sceneEl.querySelectorAll("[camera]");e[e.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(e){var t,r,i,n,o=this.activeCameraEl,s=this.sceneEl;if((n=e.getObject3D("camera"))&&e!==this.activeCameraEl){var u=s.querySelector("["+a+"]"),l=u&&u.querySelector("[camera]");for(e!==l&&removeDefaultCamera(s),this.activeCameraEl=e,this.activeCameraEl.play(),s.camera=n,o&&o.setAttribute("camera","active",!1),r=s.querySelectorAll("[camera]"),i=0;i<r.length;i++)t=r[i],e!==t&&(t.setAttribute("camera","active",!1),t.pause());s.emit("camera-set-active",{cameraEl:e})}}})},{"../constants/":117,"../core/system":136,"../utils/bind":191}],184:[function(e,t,r){function createGeometry(e){var t=e.primitive,r=i[t]&&i[t].Geometry,n=new r;if(!r)throw new Error("Unknown geometry `"+t+"`");return n.init(e),toBufferGeometry(n.geometry,e.buffer)}function decrementCacheCount(e,t){e[t]--}function incrementCacheCount(e,t){e[t]=void 0===e[t]?1:e[t]+1}function toBufferGeometry(e,t){var r;return t?(r=(new o.BufferGeometry).fromGeometry(e),r.metadata={type:e.type,parameters:e.parameters||{}},e.dispose(),r):e}var i=e("../core/geometry").geometries,n=e("../core/system").registerSystem,o=e("../lib/three");t.exports.System=n("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(e){var t,r,i=this.cache;return e.skipCache||e.mergeTo?createGeometry(e):(r=this.hash(e),t=i[r],incrementCacheCount(this.cacheCount,r),t||(t=createGeometry(e),i[r]=t,t))},unuseGeometry:function(e){var t,r,i=this.cache,n=this.cacheCount;e.skipCache||e.mergeTo||(r=this.hash(e),i[r]&&(decrementCacheCount(n,r),n[r]>0||(t=i[r],t.dispose(),delete i[r],delete n[r])))},hash:function(e){return JSON.stringify(e)}})},{"../core/geometry":127,"../core/system":136,"../lib/three":174}],185:[function(e,t,r){var i=e("../core/system").registerSystem,n=e("../lib/three");t.exports.System=i("gltf-model",{init:function(){this.models=[]},tick:function(){var e=this.sceneEl;e.hasLoaded&&this.models.length&&n.GLTFLoader.Shaders.update(e.object3D,e.camera)},registerModel:function(e){this.models.push(e)},unregisterModel:function(e){var t=this.models,r=t.indexOf(e);r>=0&&t.splice(r,1)}})},{"../core/system":136,"../lib/three":174}],186:[function(e,t,r){e("./camera"),e("./geometry"),e("./gltf-model"),e("./light"),e("./material"),e("./shadow"),e("./tracked-controls")},{"./camera":183,"./geometry":184,"./gltf-model":185,"./light":187,"./material":188,"./shadow":189,"./tracked-controls":190}],187:[function(e,t,r){var i=e("../core/system").registerSystem,n=e("../utils/bind"),o=e("../constants/");t.exports.System=i("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",n(this.setupDefaultLights,this))},registerLight:function(e){e.hasAttribute("data-aframe-default-light")||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var e,t=this.sceneEl;if(this.defaultLights){e=document.querySelectorAll("[data-aframe-default-light]");for(var r=0;r<e.length;r++)t.removeChild(e[r]);this.defaultLights=!1}},setupDefaultLights:function(){var e,t,r=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(e=document.createElement("a-entity"),t=document.createElement("a-entity"),e.setAttribute("light",{color:"#BBB",type:"ambient"}),e.setAttribute("data-aframe-default-light",""),e.setAttribute(o.AFRAME_INJECTED,""),r.appendChild(e),t.setAttribute("light",{color:"#FFF",intensity:.6}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute("data-aframe-default-light",""),t.setAttribute(o.AFRAME_INJECTED,""),r.appendChild(t),this.defaultLights=!0)}})},{"../constants/":117,"../core/system":136,"../utils/bind":191}],188:[function(e,t,r){function calculateVideoCacheHash(e,t){var r,i,n,o=t.getAttribute("id");if(o)return o;for(i="",n=e||{},r=0;r<t.attributes.length;r++)n[t.attributes[r].name]=t.attributes[r].value;return Object.keys(n).sort().forEach(function(e){i+=e+":"+n[e]+";"}),i}function loadImageTexture(e,t){function doLoadImageTexture(r,i){function resolveTexture(e){setTextureProperties(e,t),e.needsUpdate=!0,r(e)}if("string"!=typeof e)return void resolveTexture(new n.Texture(e));c.load(e,resolveTexture,function(){},function(e){l("`$s` could not be fetched (Error code: %s; Response: %s)",e.status,e.statusText)})}return new Promise(doLoadImageTexture)}function setTextureProperties(e,t){var r=t.offset||{x:0,y:0},i=t.repeat||{x:1,y:1};(t.npot||!1)&&(e.wrapS=n.ClampToEdgeWrapping,e.wrapT=n.ClampToEdgeWrapping,e.magFilter=n.LinearFilter,e.minFilter=n.LinearFilter),1===i.x&&1===i.y||(e.wrapS=n.RepeatWrapping,e.wrapT=n.RepeatWrapping,e.repeat.set(i.x,i.y)),0===r.x&&0===r.y||e.offset.set(r.x,r.y)}function createVideoEl(e,t,r){var i=document.createElement("video");return i.width=t,i.height=r,i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i.autoplay=!0,i.loop=!0,i.crossOrigin="anonymous",i.addEventListener("error",function(){h("`$s` is not a valid video",e)},!0),i.src=e,i}function fixVideoAttributes(e){return e.autoplay=e.hasAttribute("autoplay")&&"false"!==e.getAttribute("autoplay"),e.controls=e.hasAttribute("controls")&&"false"!==e.getAttribute("controls"),"false"===e.getAttribute("loop")&&e.removeAttribute("loop"),"false"===e.getAttribute("preload")&&(e.preload="none"),e.crossOrigin=e.crossOrigin||"anonymous",e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e}var i=e("../core/system").registerSystem,n=e("../lib/three"),o=e("../utils/"),a=e("../utils/material").isHLS,s=o.bind,u=o.debug,l=u("components:texture:error"),c=new n.TextureLoader,h=u("components:texture:warn");c.setCrossOrigin("anonymous"),t.exports.System=i("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",s(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(e,t,r){function loadImageCb(e){i.loadImage(e,t,r)}function loadVideoCb(e){i.loadVideo(e,t,r)}var i=this;return"CANVAS"===e.tagName?void this.loadCanvas(e,t,r):"VIDEO"===e.tagName?(e.hasAttribute("src")||e.hasAttribute("srcObject")||h("Video element was defined without `src` nor `srcObject` attributes."),void this.loadVideo(e,t,r)):void o.srcLoader.validateSrc(e,loadImageCb,loadVideoCb)},loadImage:function(e,t,r){var i=this.hash(t),n=this.textureCache;if(n[i])return void n[i].then(r);n[i]=loadImageTexture(e,t),n[i].then(r)},loadCanvas:function(e,t,r){e.readyState=2,e.HAVE_CURRENT_DATA=2,this.loadVideo(e,t,r)},loadVideo:function(e,t,r){function handleVideoTextureLoaded(e){e.texture.needsUpdate=!0,r(e.texture,e.videoEl)}var i,o,s,u,l=this.textureCache;if("string"!=typeof e){if(s=e,i=this.hashVideo(t,s),l[i])return void l[i].then(handleVideoTextureLoaded);fixVideoAttributes(s)}if(s=s||createVideoEl(e,t.width,t.height),i=this.hashVideo(t,s),l[i])return void l[i].then(handleVideoTextureLoaded);o=new n.VideoTexture(s),o.minFilter=n.LinearFilter,setTextureProperties(o,t),this.sceneEl.isIOS&&a(s.src||s.getAttribute("src"),s.type||s.getAttribute("type"))&&(o.format=n.RGBAFormat,o.needsCorrectionBGRA=!0,o.flipY=!1,o.needsCorrectionFlipY=!0),u={texture:o,videoEl:s},l[i]=Promise.resolve(u),handleVideoTextureLoaded(u)},hash:function(e){return e.src.tagName&&(e=o.extendDeep({},e),e.src=e.src.getAttribute("src")),JSON.stringify(e)},hashVideo:function(e,t){return calculateVideoCacheHash(e,t)},registerMaterial:function(e){this.materials[e.uuid]=e},unregisterMaterial:function(e){delete this.materials[e.uuid];var t=this.textureCounts;Object.keys(e).filter(function(t){return e[t]&&e[t].isTexture}).forEach(function(r){--t[e[r].uuid]<=0&&e[r].dispose()})},updateMaterials:function(e){var t=this.materials;Object.keys(t).forEach(function(e){t[e].needsUpdate=!0})},onMaterialTextureLoaded:function(e){this.textureCounts[e.detail.texture.uuid]||(this.textureCounts[e.detail.texture.uuid]=0),this.textureCounts[e.detail.texture.uuid]++}})},{"../core/system":136,"../lib/three":174,"../utils/":197,"../utils/material":198}],189:[function(e,t,r){var i=e("../core/system").registerSystem,n=e("../utils/bind"),o=e("../lib/three"),a={basic:o.BasicShadowMap,pcf:o.PCFShadowMap,pcfsoft:o.PCFSoftShadowMap};t.exports.System=i("shadow",{schema:{type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]},renderReverseSided:{default:!0},renderSingleSided:{default:!0}},init:function(){var e=this.sceneEl,t=this.data;this.shadowMapEnabled=!1,e.addEventListener("render-target-loaded",n(function(){e.renderer&&(e.renderer.shadowMap.type=a[t.type],e.renderer.shadowMap.renderReverseSided=t.renderReverseSided,e.renderer.shadowMap.renderSingleSided=t.renderSingleSided,this.setShadowMapEnabled(this.shadowMapEnabled))},this))},setShadowMapEnabled:function(e){var t=this.sceneEl.renderer;this.shadowMapEnabled=e,t&&(t.shadowMap.enabled=e)}})},{"../core/system":136,"../lib/three":174,"../utils/bind":191}],190:[function(e,t,r){var i=e("../core/system").registerSystem,n=e("../utils/tracked-controls"),o=e("../utils");t.exports.System=i("tracked-controls",{init:function(){var e=this;this.controllers=[],this.lastControllersUpdate=0,this.tick=o.throttle(this.throttledTick,10,this),navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(t){t.length&&(e.vrDisplay=t[0])})})},updateControllerList:function(){for(var e=this.controllers=[],t=n.getGamepadsByPrefix(""),r=0;r<t.length;r++){var i=t[r];i&&i.pose&&e.push(i)}},throttledTick:function(){this.updateControllerList(),this.sceneEl.emit("controllersupdated",{controllers:this.controllers})}})},{"../core/system":136,"../utils":197,"../utils/tracked-controls":201}],191:[function(e,t,r){t.exports=function(e,t){return function(r){return function(){var i=r.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,i)}}(Array.prototype.slice.call(arguments,2))}},{}],192:[function(e,t,r){function parse(e,t){var r,i={};return e&&"object"==typeof e?vecParseFloat({x:void 0!==e.x?e.x:t&&t.x,y:void 0!==e.y?e.y:t&&t.y,z:void 0!==e.z?e.z:t&&t.z,w:void 0!==e.w?e.w:t&&t.w}):"string"!=typeof e||null===e?"object"==typeof t?n({},t):t:(r=e.trim().replace(/\s+/g," ").split(" "),i.x=r[0]||t&&t.x,i.y=r[1]||t&&t.y,i.z=r[2]||t&&t.z,i.w=r[3]||t&&t.w,vecParseFloat(i))}function stringify(e){return"object"!=typeof e?e:[e.x,e.y,e.z,e.w].join(" ").trim()}function isCoordinates(e){return a.test(e)}function vecParseFloat(e){return Object.keys(e).forEach(function(t){if(void 0===e[t])return void delete e[t];e[t]=parseFloat(e[t],10)}),e}var i=e("./debug"),n=e("object-assign"),o=i("utils:coordinates:warn"),a=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;t.exports.regex=a,t.exports.parse=parse,t.exports.stringify=stringify,t.exports.isCoordinates=isCoordinates,t.exports.isCoordinate=function(e){return o("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),isCoordinates(e)},t.exports.toVector3=function(e){return new THREE.Vector3(e.x,e.y,e.z)}},{"./debug":193,"object-assign":26}],193:[function(e,t,r){(function(r){function getDebugNamespaceType(e){var t=e.split(":");return t[t.length-1]}function getDebugNamespaceColor(e){var t=getDebugNamespaceType(e);return o.colors&&o.colors[t]||null}var i=e("debug"),n=e("object-assign"),o={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},a=function(e){var t=i(e);return t.color=getDebugNamespaceColor(e),t};n(a,i);var s=function(){try{return window.localStorage}catch(e){}}();a.enable(s&&(parseInt(s.logs,10)||"true"===s.logs)?"*":"*:error,*:info,*:warn"),r.browser&&(window.logs=a),t.exports=a}).call(this,e("_process"))},{_process:34,debug:8,"object-assign":26}],194:[function(e,t,r){(function(r){function checkHeadsetConnected(){var e,t=o.getVRDisplay();return t&&"isConnected"in t?t.isConnected:(o.update(),e=n.quaternion,0!==e._x||0!==e._y||0!==e._z)}function checkHasPositionalTracking(){var e=o.getVRDisplay();return!a()&&!isGearVR()&&(e&&e.capabilities.hasPosition)}function isTablet(e){return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(e||window.navigator.userAgent)}function isIOS(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function isGearVR(){return/SamsungBrowser.+Mobile VR/i.test(window.navigator.userAgent)}var i=e("../lib/three"),n=new i.Object3D,o=new i.VRControls(n);t.exports.checkHeadsetConnected=checkHeadsetConnected,t.exports.checkHasPositionalTracking=checkHasPositionalTracking;var a=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),(isIOS()||isTablet())&&(e=!0)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return e}}();t.exports.isMobile=a,t.exports.isTablet=isTablet,t.exports.isIOS=isIOS,t.exports.isGearVR=isGearVR,t.exports.isLandscape=function(){return 90===window.orientation||-90===window.orientation},t.exports.isIOSOlderThan10=function(e){return/(iphone|ipod|ipad).*os.(7|8|9)/i.test(e)},t.exports.isBrowserEnvironment=!(r&&!r.browser),t.exports.isNodeEnvironment=!t.exports.isBrowserEnvironment}).call(this,e("_process"))},{"../lib/three":174,_process:34}],195:[function(e,t,r){t.exports.getComponentPropertyPath=function(e,t){return t=t||".",-1===e.indexOf(t)?e:e.split(t)},t.exports.getComponentProperty=function(e,t,r){var i;return r=r||".",-1!==t.indexOf(r)?(i=t.split(r),e.getAttribute(i[0])[i[1]]):e.getAttribute(t)},t.exports.setComponentProperty=function(e,t,r,i){var n,o={};if(i=i||".",-1!==t.indexOf(i))return n=t.split(i),o[n[1]]=r,void e.setAttribute(n[0],o);e.setAttribute(t,r)}},{}],196:[function(e,t,r){t.exports=function(e){var t=e.style.width,r=e.style.height;e.style.width=parseInt(t,10)+1+"px",e.style.height=parseInt(r,10)+1+"px",setTimeout(function(){e.style.width=t,e.style.height=r},200)}},{}],197:[function(e,t,r){function deepEqual(e,t){var r,i,n,o,a;if(void 0===e||void 0===t||null===e||null===t||!(e&&t&&e.constructor===Object&&t.constructor===Object||e.constructor===Array&&t.constructor===Array))return e===t;if(i=Object.keys(e),n=Object.keys(t),i.length!==n.length)return!1;for(r=0;r<i.length;++r)if(o=e[i[r]],a=t[i[r]],"object"==typeof o||"object"==typeof a||Array.isArray(o)&&Array.isArray(a)){if(o===a)continue;if(!deepEqual(o,a))return!1}else if(o!==a)return!1;return!0}var i=e("./debug"),n=e("deep-assign"),o=e("./device"),a=e("object-assign"),s=i("utils:warn");t.exports.bind=e("./bind"),t.exports.coordinates=e("./coordinates"),t.exports.debug=i,t.exports.device=o,t.exports.entity=e("./entity"),t.exports.forceCanvasResizeSafariMobile=e("./forceCanvasResizeSafariMobile"),t.exports.material=e("./material"),t.exports.styleParser=e("./styleParser"),t.exports.trackedControls=e("./tracked-controls"),t.exports.checkHeadsetConnected=function(){return s("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),o.checkHeadsetConnected(arguments)},t.exports.isGearVR=function(){return s("`utils.isGearVR` has moved to `utils.device.isGearVR`"),o.isGearVR(arguments)},t.exports.isIOS=function(){return s("`utils.isIOS` has moved to `utils.device.isIOS`"),o.isIOS(arguments)},t.exports.isMobile=function(){return s("`utils.isMobile has moved to `utils.device.isMobile`"),o.isMobile(arguments)},t.exports.throttle=function(e,r,i){var n;return i&&(e=t.exports.bind(e,i)),function(){var t=Date.now(),i=void 0===n?r:t-n;(void 0===n||i>=r)&&(n=t,e.apply(null,arguments))}},t.exports.throttleTick=function(e,r,i){var n;return i&&(e=t.exports.bind(e,i)),function(t,i){var o=void 0===n?i:t-n;(void 0===n||o>=r)&&(n=t,e(t,o))}},t.exports.fireEvent=function(e,t,r){r=r||{},r.detail=r.detail||{},r.detail.target=r.detail.target||e;var i=new CustomEvent(t,r);e.dispatchEvent(i)},t.exports.extend=a,t.exports.extendDeep=n,t.exports.clone=function(e){return JSON.parse(JSON.stringify(e))},t.exports.deepEqual=deepEqual,t.exports.diff=function(e,t){var r={},i=Object.keys(e);return t?(Object.keys(t).forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),i.forEach(function(i){var n=e[i],o=t[i],a=n&&o&&n.constructor===Object&&o.constructor===Object;(a&&!deepEqual(n,o)||!a&&n!==o)&&(r[i]=o)}),r):r},t.exports.shouldCaptureKeyEvent=function(e){return!e.metaKey&&document.activeElement===document.body},t.exports.splitString=function(e,t){void 0===t&&(t=" ");var r=new RegExp(t,"g");return e=(e||"").replace(r,t),e.split(t)},t.exports.getElData=function(e,t){function copyAttribute(t){e.hasAttribute(t)&&(r[t]=e.getAttribute(t))}t=t||{};var r={};return Object.keys(t).forEach(copyAttribute),r},t.exports.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},t.exports.isIframed=function(){return window.top!==window.self},t.exports.findAllScenes=function(e){for(var t=[],r=e.getElementsByTagName("*"),i=0,n=r.length;i<n;i++)r[i].isScene&&t.push(r[i]);return t},t.exports.srcLoader=e("./src-loader")},{"./bind":191,"./coordinates":192,"./debug":193,"./device":194,"./entity":195,"./forceCanvasResizeSafariMobile":196,"./material":198,"./src-loader":199,"./styleParser":200,"./tracked-controls":201,"deep-assign":10,"object-assign":26}],198:[function(e,t,r){function handleTextureEvents(e,t){t&&(e.emit("materialtextureloaded",{src:t.image,texture:t}),t.image&&"VIDEO"===t.image.tagName&&(t.image.addEventListener("loadeddata",function(){e.components&&e.components.material&&(t.needsCorrectionBGRA&&t.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(e.components.material.data.shader)&&e.setAttribute("material","shader","ios10hls"),e.emit("materialvideoloadeddata",{src:t.image,texture:t}))}),t.image.addEventListener("ended",function(){e.emit("materialvideoended",{src:t.image,texture:t})})))}var i=e("../lib/three"),n=["application/x-mpegurl","application/vnd.apple.mpegurl"];t.exports.updateMapMaterialFromData=function(e,t,r,n){function checkSetMap(t){r.materialSrcs[e]===s&&setMap(t)}function setMap(t){a[e]=t,a.needsUpdate=!0,handleTextureEvents(o,t)}var o=r.el,a=r.material,s=n[t];if(r.materialSrcs||(r.materialSrcs={}),!s)return delete r.materialSrcs[e],void setMap(null);s!==r.materialSrcs[e]&&(r.materialSrcs[e]=s,s instanceof i.Texture?setMap(s):o.sceneEl.systems.material.loadTexture(s,{src:s,repeat:n.repeat,offset:n.offset,npot:n.npot},checkSetMap))},t.exports.updateMap=function(e,r){return t.exports.updateMapMaterialFromData("map","src",e,r)},t.exports.updateDistortionMap=function(e,t,r){function setMap(e){o[i+"Map"]=e,o.needsUpdate=!0,handleTextureEvents(n,e)}var i=e;"ambientOcclusion"===e&&(i="ao");var n=t.el,o=t.material,a=r[e+"Map"],s={};if(s.src=a,s.offset=r[e+"TextureOffset"],s.repeat=r[e+"TextureRepeat"],s.wrap=r[e+"TextureWrap"],a){if(a===t[e+"TextureSrc"])return;return t[e+"TextureSrc"]=a,void n.sceneEl.systems.material.loadTexture(a,s,setMap)}o.map&&setMap(null)},t.exports.handleTextureEvents=handleTextureEvents,t.exports.isHLS=function(e,t){return!(!t||!n.includes(t.toLowerCase()))||!!(e&&e.toLowerCase().indexOf(".m3u8")>0)}},{"../lib/three":174}],199:[function(e,t,r){function validateSrc(e,t,r){checkIsImage(e,function(i){if(i)return void t(e);r(e)})}function validateCubemapSrc(e,t){function isImageCb(e){s.push(e),6===s.length&&t(s)}var r,i,o,a="",s=[];for(i=0;i<5;i++)a+="(url\\((?:[^\\)]+)\\),\\s*)";if(a+="(url\\((?:[^\\)]+)\\)\\s*)",o=e.match(new RegExp(a)))for(i=1;i<7;i++)validateSrc(parseUrl(o[i]),isImageCb);else if(r=validateAndGetQuerySelector(e))return"A-CUBEMAP"===r.tagName&&r.srcs?t(r.srcs):void n('Selector "%s" does not point to <a-cubemap>',e)}function parseUrl(e){var t=e.match(/\url\((.+)\)/);if(t)return t[1]}function checkIsImage(e,t){function onLoad(){t(!0)}function onError(){t(!1)}if(e.tagName)return void t("IMG"===e.tagName);var r=new Image;r.addEventListener("load",onLoad),r.addEventListener("error",onError),r.src=e}function validateAndGetQuerySelector(e){try{var t=document.querySelector(e);return t||n('No element was found matching the selector: "%s"',e),t}catch(t){return void n('"%s" is not a valid selector',e)}}var i=e("./debug"),n=i("utils:src-loader:warn");t.exports={parseUrl:parseUrl,validateSrc:validateSrc,validateCubemapSrc:validateCubemapSrc}},{"./debug":193}],200:[function(e,t,r){function toCamelCase(e){function camelCase(e){return e[1].toUpperCase()}return e.replace(/-([a-z])/g,camelCase)}function transformKeysToCamelCase(e){var t=Object.keys(e),r={};return t.forEach(function(t){var i=toCamelCase(t);r[i]=e[t]}),r}var i=e("style-attr");t.exports.parse=function(e){var t;return"string"!=typeof e?e:(t=i.parse(e),t[""]?e:transformKeysToCamelCase(t))},t.exports.stringify=function(e){return"string"==typeof e?e:i.stringify(e)},t.exports.toCamelCase=toCamelCase,t.exports.transformKeysToCamelCase=transformKeysToCamelCase},{"style-attr":37}],201:[function(e,t,r){function isControllerPresent(e,t,r){var n,o,a,s=!1,u=0,l=e.el.sceneEl,c=l&&l.systems["tracked-controls"];if(!c)return s;if(a=c.controllers,a&&0!==a.length||(c.updateControllerList(),a=c.controllers),!a)return s;for(var h=0;h<a.length&&(n=a[h],o=!t||""===t||0===n.id.indexOf(t),s=o,s&&r.hand&&(s=(n.hand||i)===r.hand),s&&r.index&&(s=u===r.index),!s);++h)o&&u++;return s}var i=e("../constants").DEFAULT_HANDEDNESS,n=["x","y","z","w"];t.exports.getGamepadsByPrefix=function(e){var t,r=[],i=navigator.getGamepads&&navigator.getGamepads();if(!i)return r;for(var n=0;n<i.length;++n)(t=i[n])&&(e&&0!==t.id.indexOf(e)||r.push(t));return r},t.exports.checkControllerPresentAndSetup=function(e,t,r){var i=e.el,n=isControllerPresent(e,t,r);if(e.controllerPresent&&!e.controllerEventsActive&&e.addEventListeners(),n===e.controllerPresent)return n;e.controllerPresent=n,n?(e.injectTrackedControls(),e.addEventListeners(),i.emit("controllerconnected",{name:e.name,component:e})):(e.removeEventListeners(),i.emit("controllerdisconnected",{name:e.name,component:e}))},t.exports.isControllerPresent=isControllerPresent,t.exports.emitIfAxesChanged=function(e,t,r){Object.keys(t).forEach(function(i){var o=t[i],a=r.detail.changed;if(o.reduce(function(e,t){return e||a[t]},!a)){var s={};o.forEach(function(e){s[n[e]]=r.detail.axis[e]}),e.el.emit(i+"moved",s)}})}},{"../constants":117}],202:[function(e,t,r){THREE.VRControls=function(e,t){function gotVRDisplays(e){i=e,e.length>0?r=e[0]:t&&t("VR input not available.")}var r,i,n=this,o=new THREE.Matrix4,a=null;"VRFrameData"in window&&(a=new window.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(gotVRDisplays).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return r},this.setVRDisplay=function(e){r=e},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),i},this.getStandingMatrix=function(){return o},this.update=function(){if(r){var t;r.getFrameData?(r.getFrameData(a),t=a.pose):r.getPose&&(t=r.getPose()),null!==t.orientation&&e.quaternion.fromArray(t.orientation),null!==t.position?e.position.fromArray(t.position):e.position.set(0,0,0),this.standing&&(r.stageParameters?(e.updateMatrix(),o.fromArray(r.stageParameters.sittingToStandingTransform),e.applyMatrix(o)):e.position.setY(e.position.y+this.userHeight)),e.position.multiplyScalar(n.scale)}},this.resetPose=function(){r&&r.resetPose()},this.resetSensor=function(){console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),this.resetPose()},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),this.resetPose()},this.dispose=function(){r=null}}},{}],203:[function(e,t,r){THREE.VREffect=function(e,t){function gotVRDisplays(e){i=e,e.length>0?r=e[0]:t&&t("HMD not available")}function onVRDisplayPresentChange(){var t=l.isPresenting;if(l.isPresenting=void 0!==r&&r.isPresenting,l.isPresenting){var i=r.getEyeParameters("left"),n=i.renderWidth,o=i.renderHeight;t||(d=e.getPixelRatio(),c=e.getSize(),e.setPixelRatio(1),e.setSize(2*n,o,!1))}else t&&(e.setPixelRatio(d),e.setSize(c.width,c.height,h))}function fovToNDCScaleOffset(e){var t=2/(e.leftTan+e.rightTan),r=(e.leftTan-e.rightTan)*t*.5,i=2/(e.upTan+e.downTan);return{scale:[t,i],offset:[r,(e.upTan-e.downTan)*i*.5]}}function fovPortToProjection(e,t,r,i){t=void 0===t||t,r=void 0===r?.01:r,i=void 0===i?1e4:i;var n=t?-1:1,o=new THREE.Matrix4,a=o.elements,s=fovToNDCScaleOffset(e);return a[0]=s.scale[0],a[1]=0,a[2]=s.offset[0]*n,a[3]=0,a[4]=0,a[5]=s.scale[1],a[6]=-s.offset[1]*n,a[7]=0,a[8]=0,a[9]=0,a[10]=i/(r-i)*-n,a[11]=i*r/(r-i),a[12]=0,a[13]=0,a[14]=n,a[15]=0,o.transpose(),o}function fovToProjection(e,t,r,i){var n=Math.PI/180;return fovPortToProjection({upTan:Math.tan(e.upDegrees*n),downTan:Math.tan(e.downDegrees*n),leftTan:Math.tan(e.leftDegrees*n),rightTan:Math.tan(e.rightDegrees*n)},t,r,i)}var r,i,n,o,a=new THREE.Vector3,s=new THREE.Vector3,u=null;"VRFrameData"in window&&(u=new window.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(gotVRDisplays).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1;var l=this,c=e.getSize(),h=!1,d=e.getPixelRatio();this.getVRDisplay=function(){return r},this.setVRDisplay=function(e){r=e},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),i},this.setSize=function(t,i,n){if(c={width:t,height:i},h=n,l.isPresenting){var o=r.getEyeParameters("left");e.setPixelRatio(1),e.setSize(2*o.renderWidth,o.renderHeight,!1)}else e.setPixelRatio(d),e.setSize(t,i,n)};var f=e.domElement,p=[0,0,.5,1],m=[.5,0,.5,1];window.addEventListener("vrdisplaypresentchange",onVRDisplayPresentChange,!1),this.setFullScreen=function(e){return new Promise(function(t,i){return void 0===r?void i(new Error("No VR hardware found.")):l.isPresenting===e?void t():void t(e?r.requestPresent([{source:f}]):r.exitPresent())})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(e){return void 0!==r?r.requestAnimationFrame(e):window.requestAnimationFrame(e)},this.cancelAnimationFrame=function(e){void 0!==r?r.cancelAnimationFrame(e):window.cancelAnimationFrame(e)},this.submitFrame=function(){void 0!==r&&l.isPresenting&&r.submitFrame()},this.autoSubmitFrame=!0;var g=new THREE.PerspectiveCamera;g.layers.enable(1);var y=new THREE.PerspectiveCamera;y.layers.enable(2),this.render=function(t,i,c,h){if(r&&l.isPresenting){var d=t.autoUpdate;d&&(t.updateMatrixWorld(),t.autoUpdate=!1);var f=r.getEyeParameters("left"),v=r.getEyeParameters("right");a.fromArray(f.offset),s.fromArray(v.offset),Array.isArray(t)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),t=t[0]);var b,x,M=e.getSize(),w=r.getLayers();if(w.length){var E=w[0];b=null!==E.leftBounds&&4===E.leftBounds.length?E.leftBounds:p,x=null!==E.rightBounds&&4===E.rightBounds.length?E.rightBounds:m}else b=p,x=m;return n={x:Math.round(M.width*b[0]),y:Math.round(M.height*b[1]),width:Math.round(M.width*b[2]),height:Math.round(M.height*b[3])},o={x:Math.round(M.width*x[0]),y:Math.round(M.height*x[1]),width:Math.round(M.width*x[2]),height:Math.round(M.height*x[3])},c?(e.setRenderTarget(c),c.scissorTest=!0):(e.setRenderTarget(null),e.setScissorTest(!0)),(e.autoClear||h)&&e.clear(),null===i.parent&&i.updateMatrixWorld(),i.matrixWorld.decompose(g.position,g.quaternion,g.scale),y.position.copy(g.position),y.quaternion.copy(g.quaternion),y.scale.copy(g.scale),g.translateOnAxis(a,g.scale.x),y.translateOnAxis(s,y.scale.x),r.getFrameData?(r.depthNear=i.near,r.depthFar=i.far,r.getFrameData(u),g.projectionMatrix.elements=u.leftProjectionMatrix,y.projectionMatrix.elements=u.rightProjectionMatrix):(g.projectionMatrix=fovToProjection(f.fieldOfView,!0,i.near,i.far),y.projectionMatrix=fovToProjection(v.fieldOfView,!0,i.near,i.far)),c?(c.viewport.set(n.x,n.y,n.width,n.height),c.scissor.set(n.x,n.y,n.width,n.height)):(e.setViewport(n.x,n.y,n.width,n.height),e.setScissor(n.x,n.y,n.width,n.height)),e.render(t,g,c,h),c?(c.viewport.set(o.x,o.y,o.width,o.height),c.scissor.set(o.x,o.y,o.width,o.height)):(e.setViewport(o.x,o.y,o.width,o.height),e.setScissor(o.x,o.y,o.width,o.height)),e.render(t,y,c,h),c?(c.viewport.set(0,0,M.width,M.height),c.scissor.set(0,0,M.width,M.height),c.scissorTest=!1,e.setRenderTarget(null)):(e.setViewport(0,0,M.width,M.height),e.setScissorTest(!1)),d&&(t.autoUpdate=!0),void(l.autoSubmitFrame&&l.submitFrame())}e.render(t,i,c,h)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",onVRDisplayPresentChange,!1)}}},{}],204:[function(e,t,r){window.glStats=function(){function _h(e,t){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function _update(){e("allcalls").set(t+r),e("drawElements").set(r),e("drawArrays").set(t),e("bindTexture").set(s),e("useProgram").set(i),e("glfaces").set(n),e("glvertices").set(o),e("glpoints").set(a)}function _start(){t=0,r=0,i=0,n=0,o=0,a=0,s=0}function _end(){}function _attach(t){e=t}var e=null,t=0,r=0,i=0,n=0,o=0,a=0,s=0;return WebGLRenderingContext.prototype.drawArrays=_h(WebGLRenderingContext.prototype.drawArrays,function(){t++,arguments[0]==this.POINTS?a+=arguments[2]:o+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=_h(WebGLRenderingContext.prototype.drawElements,function(){r++,n+=arguments[1]/3,o+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=_h(WebGLRenderingContext.prototype.useProgram,function(){i++}),WebGLRenderingContext.prototype.bindTexture=_h(WebGLRenderingContext.prototype.bindTexture,function(){s++}),{update:_update,start:_start,end:_end,attach:_attach,values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(e){function _update(){t("renderer.info.memory.geometries").set(e.info.memory.geometries),t("renderer.info.programs").set(e.info.programs.length),t("renderer.info.memory.textures").set(e.info.memory.textures),t("renderer.info.render.calls").set(e.info.render.calls),t("renderer.info.render.faces").set(e.info.render.faces),t("renderer.info.render.points").set(e.info.render.points),t("renderer.info.render.vertices").set(e.info.render.vertices)}function _start(){}function _end(){}function _attach(e){t=e}var t=null;return{update:_update,start:_start,end:_end,attach:_attach,values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.faces":{caption:"Faces",over:1e3},"renderer.info.render.points":{caption:"Points"},"renderer.info.render.vertices":{caption:"Vertices"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.faces","renderer.info.render.points","renderer.info.render.vertices"]}],fractions:[]}},window.BrowserStats=function(){function _size(e){var t=Math.floor(Math.log(e)/a);return Math.round(100*e/Math.pow(1024,t))/100}function _update(){t=_size(performance.memory.usedJSHeapSize),r=_size(performance.memory.totalJSHeapSize),e("memory").set(t),e("total").set(r)}function _start(){t=0}function _end(){}function _attach(t){e=t}var e=null,t=0,r=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var i={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},n=[{caption:"Browser",values:["memory","total"]}],o=[{base:"total",steps:["memory"]}],a=Math.log(1024);return{update:_update,start:_start,end:_end,attach:_attach,values:i,groups:n,fractions:o}},"object"==typeof t&&(t.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],205:[function(e,t,r){"use strict";!function(){"performance"in window==0&&(window.performance={});var e=window.performance;if("now"in e==0){var t=Date.now();e.timing&&e.timing.navigationStart&&(t=e.timing.navigationStart),e.now=function(){return Date.now()-t}}e.mark||(e.mark=function(){}),e.measure||(e.measure=function(){})}(),window.rStats=function(e){function iterateKeys(e,t){for(var r=Object.keys(e),i=0,n=r.length;i<n;i++)t(r[i])}function importCSS(e){var t=document.createElement("link");t.href=e,t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t)}function Graph(e,t,r){function _draw(e,t){l+=.1*(e-l),u*=.99,l>u&&(u=l),o.drawImage(n,1,0,n.width-1,n.height,0,0,n.width-1,n.height),t?o.drawImage(f,n.width-1,n.height-l*n.height/u-a):o.drawImage(h,n.width-1,n.height-l*n.height/u-a)}var i=r||{},n=document.createElement("canvas"),o=n.getContext("2d"),u=0,l=0,c=i.color?i.color:"#666666",h=document.createElement("canvas"),d=h.getContext("2d");h.width=1,h.height=2*a,d.fillStyle="#444444",d.fillRect(0,0,1,2*a),d.fillStyle=c,d.fillRect(0,a,1,a),d.fillStyle="#ffffff",d.globalAlpha=.5,d.fillRect(0,a,1,1),d.globalAlpha=1;var f=document.createElement("canvas"),p=f.getContext("2d");return f.width=1,f.height=2*a,p.fillStyle="#444444",p.fillRect(0,0,1,2*a),p.fillStyle="#b70000",p.fillRect(0,a,1,a),p.globalAlpha=.5,p.fillStyle="#ffffff",p.fillRect(0,a,1,1),p.globalAlpha=1,function(){n.width=s,n.height=a,n.style.width=n.width+"px",n.style.height=n.height+"px",n.className="rs-canvas",e.appendChild(n),o.fillStyle="#444444",o.fillRect(0,0,n.width,n.height)}(),{draw:_draw}}function StackGraph(e,t){function _draw(e){n.drawImage(i,1,0,i.width-1,i.height,0,0,i.width-1,i.height);var t=0;iterateKeys(e,function(o){var a=e[o]*i.height;n.fillStyle=r[o],n.fillRect(i.width-1,t,1,a),t+=a})}var i=document.createElement("canvas"),n=i.getContext("2d");return function(){i.width=s,i.height=a*t,i.style.width=i.width+"px",i.style.height=i.height+"px",i.className="rs-canvas",e.appendChild(i),n.fillStyle="#444444",n.fillRect(0,0,i.width,i.height)}(),{draw:_draw}}function PerfCounter(e,r){function _average(e){if(g&&g.average){l+=e,h++;var t=performance.now();t-c>=(g.avgMs||1e3)&&(u=l/h,l=0,c=t,h=0)}}function _start(){i=performance.now(),t.userTimingAPI&&performance.mark(n+"-start"),v=!0}function _end(){a=performance.now()-i,t.userTimingAPI&&(performance.mark(n+"-end"),v&&performance.measure(n,n+"-start",n+"-end")),_average(a)}function _tick(){_end(),_start()}function _draw(){var e=g&&g.average?u:a;m.nodeValue=Math.round(100*e)/100;var t=g&&(g.below&&a<g.below||g.over&&a>g.over);y.draw(a,t),d.className=t?"rs-counter-base alarm":"rs-counter-base"}function _frame(){var e=performance.now(),t=e-i;s++,t>1e3&&(a=g&&!1===g.interpolate?s:1e3*s/t,s=0,i=e,_average(a))}function _set(e){a=e,_average(a)}var i,n=e,a=0,s=0,u=0,l=0,c=performance.now(),h=0,d=document.createElement("div"),f=document.createElement("span"),p=document.createElement("div"),m=document.createTextNode(""),g=t?t.values[n.toLowerCase()]:null,y=new Graph(d,n,g),v=!1;return f.className="rs-counter-id",f.textContent=g&&g.caption?g.caption:n,p.className="rs-counter-value",p.appendChild(m),d.appendChild(f),d.appendChild(p),r?r.div.appendChild(d):o.appendChild(d),i=performance.now(),{set:_set,start:_start,tick:_tick,end:_end,frame:_frame,value:function(){return a},draw:_draw}}function _perf(e){var r=e.toLowerCase();if(void 0===r&&(r="default"),u[r])return u[r];var i=null;t&&t.groups&&iterateKeys(t.groups,function(e){var n=t.groups[parseInt(e,10)];i||-1===n.values.indexOf(r.toLowerCase())||(i=n)});var n=new PerfCounter(r,i);return u[r]=n,n}function _update(){iterateKeys(t.plugins,function(e){t.plugins[e].update()}),iterateKeys(u,function(e){u[e].draw()}),t&&t.fractions&&iterateKeys(t.fractions,function(e){var r=t.fractions[parseInt(e,10)],i=[],n=u[r.base.toLowerCase()];n&&(n=n.value(),iterateKeys(t.fractions[e].steps,function(r){var o=t.fractions[e].steps[parseInt(r,10)].toLowerCase(),a=u[o];a&&i.push(a.value()/n)})),r.graph.draw(i)})}var t=e||{},r=t.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],i=(t.CSSPath?t.CSSPath:"")+"rStats.css";(t.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",i]).forEach(function(e){importCSS(e)}),t.values||(t.values={});var n,o,a=10,s=200,u={};return function(){if(t.plugins){t.values||(t.values={}),t.groups||(t.groups=[]),t.fractions||(t.fractions=[]);for(var e=0;e<t.plugins.length;e++)t.plugins[e].attach(_perf),iterateKeys(t.plugins[e].values,function(r){t.values[r]=t.plugins[e].values[r]}),t.groups=t.groups.concat(t.plugins[e].groups),t.fractions=t.fractions.concat(t.plugins[e].fractions)}else t.plugins={};n=document.createElement("div"),n.className="rs-base",o=document.createElement("div"),o.className="rs-container",o.style.height="auto",n.appendChild(o),document.body.appendChild(n),t&&(t.groups&&iterateKeys(t.groups,function(e){var r=t.groups[parseInt(e,10)],i=document.createElement("div");i.className="rs-group",r.div=i;var n=document.createElement("h1");n.textContent=r.caption,n.addEventListener("click",function(e){this.classList.toggle("hidden"),e.preventDefault()}.bind(i)),o.appendChild(n),o.appendChild(i)}),t.fractions&&iterateKeys(t.fractions,function(e){var i=t.fractions[parseInt(e,10)],n=document.createElement("div");n.className="rs-fraction";var s=document.createElement("div");s.className="rs-legend";var u=0;iterateKeys(t.fractions[e].steps,function(i){var n=document.createElement("p");n.textContent=t.fractions[e].steps[i],n.style.color=r[u],s.appendChild(n),u++}),n.appendChild(s),n.style.height=u*a+"px",i.div=n;var l=new StackGraph(n,u);i.graph=l,o.appendChild(n)}))}(),function(e){return e?_perf(e):{element:n,update:_update}}},"object"==typeof t&&(t.exports=window.rStats)},{}],206:[function(e,t,r){var i={};i.base64=function(e,t){return"data:"+e+";base64,"+t},i.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},i.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},i.isIFrame=function(){try{return window.self!==window.top}catch(e){return!0}},i.appendQueryParameter=function(e,t,r){return e+=(e.indexOf("?")<0?"?":"&")+t+"="+r},i.getQueryParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},i.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},t.exports=i},{}],207:[function(e,t,r){function AndroidWakeLock(){var e=document.createElement("video");e.addEventListener("ended",function(){e.play()}),this.request=function(){e.paused&&(e.src=i.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),e.play())},this.release=function(){e.pause(),e.src=""}}function iOSWakeLock(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){e&&(clearInterval(e),e=null)}}var i=e("./util.js");t.exports=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?iOSWakeLock:AndroidWakeLock}()},{"./util.js":206}]},{},[172])(172)})},function(e,t){},function(e,t,r){e.exports=r(175)}],[426]);